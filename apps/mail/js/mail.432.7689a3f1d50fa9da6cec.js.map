{"version":3,"file":"mail.432.7689a3f1d50fa9da6cec.js","mappings":"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","sources":["webpack://nextcloud-mail/./src/components/AccountForm.vue?db3e","webpack://nextcloud-mail/./src/components/AccountForm.vue","webpack://nextcloud-mail/./src/service/AutoConfigService.js","webpack://nextcloud-mail/./src/integration/oauth.js","webpack://nextcloud-mail/src/components/AccountForm.vue","webpack://nextcloud-mail/./src/components/AccountForm.vue?b699","webpack://nextcloud-mail/./src/components/AccountForm.vue?b54a","webpack://nextcloud-mail/./src/components/AccountForm.vue?466b","webpack://nextcloud-mail/./src/components/AccountForm.vue?e5ea","webpack://nextcloud-mail/./src/components/AccountForm.vue?fdf5"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `\nh4[data-v-2febbd27] {\n\ttext-align: start;\n}\n.flex-row[data-v-2febbd27] {\n\tdisplay: flex;\n}\ninput.primary[data-v-2febbd27] {\n\tcolor: var(--color-main-background);\n}\ninput[type='radio'][data-v-2febbd27] {\n\tdisplay: none;\n}\ninput[type='radio'][disabled] + label[data-v-2febbd27] {\n\tcursor: default;\n\topacity: 0.5;\n}\n.account-form__label--required[data-v-2febbd27]:after {\n\tcontent:\" *\";\n}\n.account-form__heading--required[data-v-2febbd27]:after {\n\tcontent:\" *\";\n}\n.account-form__submit-buttons[data-v-2febbd27] {\n\tdisplay: flex;\n\tjustify-content: center;\n\tmargin-top: var(--default-grid-baseline);\n}\n.account-form__submit-button[data-v-2febbd27] {\n\tdisplay: flex;\n\talign-items: center;\n}\n.account-form--feedback[data-v-2febbd27] {\n\tcolor: var(--color-text-maxcontrast);\n\tmargin-top: var(--default-grid-baseline);\n\ttext-align: center;\n}\n.account-form--error[data-v-2febbd27] {\n\ttext-align: start;\n\tfont-size: 14px;\n}\n#account-form[data-v-2febbd27] {\n\tz-index: 1001;\n\twidth: 300px;\n\ttop: 15%;\n\tpadding-bottom: calc(var(--default-grid-baseline) * 12);\n\tmargin: 0 auto;\n\tpadding-top: calc(var(--default-grid-baseline) * 7);\n}\n#account-form input[data-v-2febbd27] {\n\twidth: 100%;\n\tbox-sizing: border-box;\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/AccountForm.vue\"],\"names\":[],\"mappings\":\";AAysBA;CACA,iBAAA;AACA;AAEA;CACA,aAAA;AACA;AAEA;CACA,mCAAA;AACA;AAEA;CACA,aAAA;AACA;AAEA;CACA,eAAA;CACA,YAAA;AACA;AAEA;CACA,YAAA;AACA;AAEA;CACA,YAAA;AACA;AAEA;CACA,aAAA;CACA,uBAAA;CACA,wCAAA;AACA;AAEA;CACA,aAAA;CACA,mBAAA;AACA;AAEA;CACA,oCAAA;CACA,wCAAA;CACA,kBAAA;AACA;AAEA;CACA,iBAAA;CACA,eAAA;AACA;AAEA;CACA,aAAA;CACA,YAAA;CACA,QAAA;CACA,uDAAA;CACA,cAAA;CACA,mDAAA;AACA;AAEA;CACA,WAAA;CACA,sBAAA;AACA\",\"sourcesContent\":[\"<!--\\n  - SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\\n  - SPDX-License-Identifier: AGPL-3.0-or-later\\n-->\\n<template>\\n\\t<form id=\\\"account-form\\\" @submit.prevent=\\\"onSubmit\\\">\\n\\t\\t<Tabs :options=\\\"{useUrlFragment: false, defaultTabHash: settingsPage ? 'manual' : 'auto'}\\\"\\n\\t\\t\\tcache-lifetime=\\\"0\\\"\\n\\t\\t\\t@changed=\\\"onModeChanged\\\">\\n\\t\\t\\t<Tab id=\\\"auto\\\" key=\\\"auto\\\" :name=\\\"t('mail', 'Auto')\\\">\\n\\t\\t\\t\\t<NcInputField id=\\\"auto-name\\\"\\n\\t\\t\\t\\t\\t:value.sync=\\\"accountName\\\"\\n\\t\\t\\t\\t\\t:label=\\\"t('mail', 'Name')\\\"\\n\\t\\t\\t\\t\\ttype=\\\"text\\\"\\n\\t\\t\\t\\t\\t:placeholder=\\\"t('mail', 'Name')\\\"\\n\\t\\t\\t\\t\\t:disabled=\\\"loading\\\"\\n\\t\\t\\t\\t\\tautofocus />\\n\\t\\t\\t\\t<NcInputField id=\\\"auto-address\\\"\\n\\t\\t\\t\\t\\t:value.sync=\\\"emailAddress\\\"\\n\\t\\t\\t\\t\\t:label=\\\"t('mail', 'Mail address')\\\"\\n\\t\\t\\t\\t\\t:disabled=\\\"loading\\\"\\n\\t\\t\\t\\t\\t:placeholder=\\\"t('mail', 'name@example.org')\\\"\\n\\t\\t\\t\\t\\trequired\\n\\t\\t\\t\\t\\ttype=\\\"email\\\"\\n\\t\\t\\t\\t\\t@change=\\\"clearFeedback\\\" />\\n\\t\\t\\t\\t<p v-if=\\\"!isValidEmail(emailAddress)\\\" class=\\\"account-form--error\\\">\\n\\t\\t\\t\\t\\t{{ t('mail', 'Please enter an email of the format name@example.com') }}\\n\\t\\t\\t\\t</p>\\n\\t\\t\\t\\t<NcPasswordField id=\\\"auto-password\\\"\\n\\t\\t\\t\\t\\t:value.sync=\\\"autoConfig.password\\\"\\n\\t\\t\\t\\t\\t:disabled=\\\"loading\\\"\\n\\t\\t\\t\\t\\ttype=\\\"password\\\"\\n\\t\\t\\t\\t\\t:label=\\\"t('mail', 'Password')\\\"\\n\\t\\t\\t\\t\\t:required=\\\"!hasPasswordAlternatives\\\"\\n\\t\\t\\t\\t\\t@change=\\\"clearFeedback\\\" />\\n\\t\\t\\t</Tab>\\n\\t\\t\\t<Tab id=\\\"manual\\\" key=\\\"manual\\\" :name=\\\"t('mail', 'Manual')\\\">\\n\\t\\t\\t\\t<NcInputField id=\\\"man-name\\\"\\n\\t\\t\\t\\t\\t:value.sync=\\\"accountName\\\"\\n\\t\\t\\t\\t\\t:label=\\\"t('mail', 'Name')\\\"\\n\\t\\t\\t\\t\\ttype=\\\"text\\\"\\n\\t\\t\\t\\t\\t:placeholder=\\\"t('mail', 'Name')\\\"\\n\\t\\t\\t\\t\\t:disabled=\\\"loading\\\" />\\n\\t\\t\\t\\t<NcInputField id=\\\"man-address\\\"\\n\\t\\t\\t\\t\\t:value.sync=\\\"emailAddress\\\"\\n\\t\\t\\t\\t\\t:label=\\\"t('mail', 'Mail address')\\\"\\n\\t\\t\\t\\t\\ttype=\\\"email\\\"\\n\\t\\t\\t\\t\\t:placeholder=\\\"t('mail', 'name@example.org')\\\"\\n\\t\\t\\t\\t\\t:disabled=\\\"loading\\\"\\n\\t\\t\\t\\t\\trequired\\n\\t\\t\\t\\t\\t@change=\\\"clearFeedback\\\" />\\n\\t\\t\\t\\t<p v-if=\\\"!isValidEmail(emailAddress)\\\" class=\\\"account-form--error\\\">\\n\\t\\t\\t\\t\\t{{ t('mail', 'Please enter an email of the format name@example.com') }}\\n\\t\\t\\t\\t</p>\\n\\n\\t\\t\\t\\t<h3>{{ t('mail', 'IMAP Settings') }}</h3>\\n\\t\\t\\t\\t<NcInputField id=\\\"man-imap-host\\\"\\n\\t\\t\\t\\t\\t:value.sync=\\\"manualConfig.imapHost\\\"\\n\\t\\t\\t\\t\\t:label=\\\"t('mail', 'IMAP Host')\\\"\\n\\t\\t\\t\\t\\ttype=\\\"text\\\"\\n\\t\\t\\t\\t\\t:placeholder=\\\"t('mail', 'IMAP Host')\\\"\\n\\t\\t\\t\\t\\t:disabled=\\\"loading\\\"\\n\\t\\t\\t\\t\\trequired\\n\\t\\t\\t\\t\\t@change=\\\"clearFeedback\\\" />\\n\\t\\t\\t\\t<h4 class=\\\"account-form__heading--required\\\">\\n\\t\\t\\t\\t\\t{{ t('mail', 'IMAP Security') }}\\n\\t\\t\\t\\t</h4>\\n\\t\\t\\t\\t<div class=\\\"flex-row\\\">\\n\\t\\t\\t\\t\\t<NcCheckboxRadioSwitch id=\\\"man-imap-sec-none\\\"\\n\\t\\t\\t\\t\\t\\t:button-variant=\\\"true\\\"\\n\\t\\t\\t\\t\\t\\t:checked=\\\"manualConfig.imapSslMode\\\"\\n\\t\\t\\t\\t\\t\\ttype=\\\"radio\\\"\\n\\t\\t\\t\\t\\t\\tname=\\\"man-imap-sec\\\"\\n\\t\\t\\t\\t\\t\\t:disabled=\\\"loading\\\"\\n\\t\\t\\t\\t\\t\\tvalue=\\\"none\\\"\\n\\t\\t\\t\\t\\t\\tbutton-variant-grouped=\\\"horizontal\\\"\\n\\t\\t\\t\\t\\t\\t@update:checked=\\\"onImapSslModeChange\\\">\\n\\t\\t\\t\\t\\t\\t{{ t('mail', 'None') }}\\n\\t\\t\\t\\t\\t</NcCheckboxRadioSwitch>\\n\\t\\t\\t\\t\\t<NcCheckboxRadioSwitch id=\\\"man-imap-sec-ssl\\\"\\n\\t\\t\\t\\t\\t\\t:button-variant=\\\"true\\\"\\n\\t\\t\\t\\t\\t\\t:checked=\\\"manualConfig.imapSslMode\\\"\\n\\t\\t\\t\\t\\t\\ttype=\\\"radio\\\"\\n\\t\\t\\t\\t\\t\\tname=\\\"man-imap-sec\\\"\\n\\t\\t\\t\\t\\t\\t:disabled=\\\"loading\\\"\\n\\t\\t\\t\\t\\t\\tvalue=\\\"ssl\\\"\\n\\t\\t\\t\\t\\t\\tbutton-variant-grouped=\\\"horizontal\\\"\\n\\t\\t\\t\\t\\t\\t@update:checked=\\\"onImapSslModeChange\\\">\\n\\t\\t\\t\\t\\t\\t{{ t('mail', 'SSL/TLS') }}\\n\\t\\t\\t\\t\\t</NcCheckboxRadioSwitch>\\n\\t\\t\\t\\t\\t<NcCheckboxRadioSwitch id=\\\"man-imap-sec-tls\\\"\\n\\t\\t\\t\\t\\t\\t:button-variant=\\\"true\\\"\\n\\t\\t\\t\\t\\t\\t:checked=\\\"manualConfig.imapSslMode\\\"\\n\\t\\t\\t\\t\\t\\ttype=\\\"radio\\\"\\n\\t\\t\\t\\t\\t\\tname=\\\"man-imap-sec\\\"\\n\\t\\t\\t\\t\\t\\t:disabled=\\\"loading\\\"\\n\\t\\t\\t\\t\\t\\tvalue=\\\"tls\\\"\\n\\t\\t\\t\\t\\t\\tbutton-variant-grouped=\\\"horizontal\\\"\\n\\t\\t\\t\\t\\t\\t@update:checked=\\\"onImapSslModeChange\\\">\\n\\t\\t\\t\\t\\t\\t{{ t('mail', 'STARTTLS') }}\\n\\t\\t\\t\\t\\t</NcCheckboxRadioSwitch>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<NcInputField id=\\\"man-imap-port\\\"\\n\\t\\t\\t\\t\\t:value.sync=\\\"manualConfig.imapPort\\\"\\n\\t\\t\\t\\t\\t:label=\\\"t('mail', 'IMAP Port')\\\"\\n\\t\\t\\t\\t\\ttype=\\\"number\\\"\\n\\t\\t\\t\\t\\t:placeholder=\\\"t('mail', 'IMAP Port')\\\"\\n\\t\\t\\t\\t\\t:disabled=\\\"loading\\\"\\n\\t\\t\\t\\t\\trequired\\n\\t\\t\\t\\t\\t@change=\\\"clearFeedback\\\" />\\n\\t\\t\\t\\t<NcInputField id=\\\"man-imap-user\\\"\\n\\t\\t\\t\\t\\t:value.sync=\\\"manualConfig.imapUser\\\"\\n\\t\\t\\t\\t\\t:label=\\\"t('mail', 'IMAP User')\\\"\\n\\t\\t\\t\\t\\ttype=\\\"text\\\"\\n\\t\\t\\t\\t\\t:placeholder=\\\"t('mail', 'IMAP User')\\\"\\n\\t\\t\\t\\t\\t:disabled=\\\"loading\\\"\\n\\t\\t\\t\\t\\trequired\\n\\t\\t\\t\\t\\t@change=\\\"clearFeedback\\\" />\\n\\t\\t\\t\\t<NcPasswordField v-if=\\\"!useOauth\\\"\\n\\t\\t\\t\\t\\tid=\\\"man-imap-password\\\"\\n\\t\\t\\t\\t\\ttype=\\\"password\\\"\\n\\t\\t\\t\\t\\t:value.sync=\\\"manualConfig.imapPassword\\\"\\n\\t\\t\\t\\t\\t:label=\\\"t('mail', 'IMAP Password')\\\"\\n\\t\\t\\t\\t\\t:disabled=\\\"loading\\\"\\n\\t\\t\\t\\t\\trequired\\n\\t\\t\\t\\t\\t@change=\\\"clearFeedback\\\" />\\n\\n\\t\\t\\t\\t<h3>{{ t('mail', 'SMTP Settings') }}</h3>\\n\\t\\t\\t\\t<NcInputField id=\\\"man-smtp-host\\\"\\n\\t\\t\\t\\t\\tref=\\\"smtpHost\\\"\\n\\t\\t\\t\\t\\t:value.sync=\\\"manualConfig.smtpHost\\\"\\n\\t\\t\\t\\t\\t:label=\\\"t('mail', 'SMTP Host')\\\"\\n\\t\\t\\t\\t\\ttype=\\\"text\\\"\\n\\t\\t\\t\\t\\tname=\\\"smtp-host\\\"\\n\\t\\t\\t\\t\\t:placeholder=\\\"t('mail', 'SMTP Host')\\\"\\n\\t\\t\\t\\t\\t:disabled=\\\"loading\\\"\\n\\t\\t\\t\\t\\trequired\\n\\t\\t\\t\\t\\t@change=\\\"clearFeedback\\\" />\\n\\t\\t\\t\\t<h4 class=\\\"account-form__heading--required\\\">\\n\\t\\t\\t\\t\\t{{ t('mail', 'SMTP Security') }}\\n\\t\\t\\t\\t</h4>\\n\\t\\t\\t\\t<div class=\\\"flex-row\\\">\\n\\t\\t\\t\\t\\t<NcCheckboxRadioSwitch id=\\\"man-imap-sec-none\\\"\\n\\t\\t\\t\\t\\t\\t:button-variant=\\\"true\\\"\\n\\t\\t\\t\\t\\t\\t:checked=\\\"manualConfig.smtpSslMode\\\"\\n\\t\\t\\t\\t\\t\\ttype=\\\"radio\\\"\\n\\t\\t\\t\\t\\t\\tname=\\\"man-smtp-sec\\\"\\n\\t\\t\\t\\t\\t\\t:disabled=\\\"loading\\\"\\n\\t\\t\\t\\t\\t\\tvalue=\\\"none\\\"\\n\\t\\t\\t\\t\\t\\tbutton-variant-grouped=\\\"horizontal\\\"\\n\\t\\t\\t\\t\\t\\t@update:checked=\\\"onSmtpSslModeChange\\\">\\n\\t\\t\\t\\t\\t\\t{{ t('mail', 'None') }}\\n\\t\\t\\t\\t\\t</NcCheckboxRadioSwitch>\\n\\t\\t\\t\\t\\t<NcCheckboxRadioSwitch id=\\\"man-imap-sec-ssl\\\"\\n\\t\\t\\t\\t\\t\\t:button-variant=\\\"true\\\"\\n\\t\\t\\t\\t\\t\\t:checked=\\\"manualConfig.smtpSslMode\\\"\\n\\t\\t\\t\\t\\t\\ttype=\\\"radio\\\"\\n\\t\\t\\t\\t\\t\\tname=\\\"man-smtp-sec\\\"\\n\\t\\t\\t\\t\\t\\t:disabled=\\\"loading\\\"\\n\\t\\t\\t\\t\\t\\tvalue=\\\"ssl\\\"\\n\\t\\t\\t\\t\\t\\tbutton-variant-grouped=\\\"horizontal\\\"\\n\\t\\t\\t\\t\\t\\t@update:checked=\\\"onSmtpSslModeChange\\\">\\n\\t\\t\\t\\t\\t\\t{{ t('mail', 'SSL/TLS') }}\\n\\t\\t\\t\\t\\t</NcCheckboxRadioSwitch>\\n\\t\\t\\t\\t\\t<NcCheckboxRadioSwitch id=\\\"man-imap-sec-tls\\\"\\n\\t\\t\\t\\t\\t\\t:button-variant=\\\"true\\\"\\n\\t\\t\\t\\t\\t\\t:checked=\\\"manualConfig.smtpSslMode\\\"\\n\\t\\t\\t\\t\\t\\ttype=\\\"radio\\\"\\n\\t\\t\\t\\t\\t\\tname=\\\"man-smtp-sec\\\"\\n\\t\\t\\t\\t\\t\\t:disabled=\\\"loading\\\"\\n\\t\\t\\t\\t\\t\\tvalue=\\\"tls\\\"\\n\\t\\t\\t\\t\\t\\tbutton-variant-grouped=\\\"horizontal\\\"\\n\\t\\t\\t\\t\\t\\t@update:checked=\\\"onSmtpSslModeChange\\\">\\n\\t\\t\\t\\t\\t\\t{{ t('mail', 'STARTTLS') }}\\n\\t\\t\\t\\t\\t</NcCheckboxRadioSwitch>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<NcInputField id=\\\"man-smtp-port\\\"\\n\\t\\t\\t\\t\\t:label=\\\"t('mail', 'SMTP Port')\\\"\\n\\t\\t\\t\\t\\t:value.sync=\\\"manualConfig.smtpPort\\\"\\n\\t\\t\\t\\t\\ttype=\\\"number\\\"\\n\\t\\t\\t\\t\\t:placeholder=\\\"t('mail', 'SMTP Port')\\\"\\n\\t\\t\\t\\t\\t:disabled=\\\"loading\\\"\\n\\t\\t\\t\\t\\trequired\\n\\t\\t\\t\\t\\t@change=\\\"clearFeedback\\\" />\\n\\t\\t\\t\\t<NcInputField id=\\\"man-smtp-user\\\"\\n\\t\\t\\t\\t\\t:value.sync=\\\"manualConfig.smtpUser\\\"\\n\\t\\t\\t\\t\\t:label=\\\"t('mail', 'SMTP User')\\\"\\n\\t\\t\\t\\t\\ttype=\\\"text\\\"\\n\\t\\t\\t\\t\\t:placeholder=\\\"t('mail', 'SMTP User')\\\"\\n\\t\\t\\t\\t\\t:disabled=\\\"loading\\\"\\n\\t\\t\\t\\t\\trequired\\n\\t\\t\\t\\t\\t@change=\\\"clearFeedback\\\" />\\n\\t\\t\\t\\t<NcPasswordField v-if=\\\"!useOauth\\\"\\n\\t\\t\\t\\t\\tid=\\\"man-smtp-password\\\"\\n\\t\\t\\t\\t\\t:label=\\\"t('mail', 'SMTP Password')\\\"\\n\\t\\t\\t\\t\\ttype=\\\"password\\\"\\n\\t\\t\\t\\t\\t:value.sync=\\\"manualConfig.smtpPassword\\\"\\n\\t\\t\\t\\t\\t:disabled=\\\"loading\\\"\\n\\t\\t\\t\\t\\trequired\\n\\t\\t\\t\\t\\t@change=\\\"clearFeedback\\\" />\\n\\t\\t\\t</Tab>\\n\\t\\t</Tabs>\\n\\t\\t<div v-if=\\\"isGoogleAccount && !googleOauthUrl\\\" class=\\\"account-form__google-sso\\\">\\n\\t\\t\\t{{ t('mail', 'For the Google account to work with this app you need to enable two-factor authentication for Google and generate an app password.') }}\\n\\t\\t</div>\\n\\t\\t<div class=\\\"account-form__submit-buttons\\\">\\n\\t\\t\\t<ButtonVue v-if=\\\"mode === 'auto'\\\"\\n\\t\\t\\t\\t:aria-label=\\\"submitButtonText\\\"\\n\\t\\t\\t\\tclass=\\\"account-form__submit-button\\\"\\n\\t\\t\\t\\ttype=\\\"primary\\\"\\n\\t\\t\\t\\tnative-type=\\\"submit\\\"\\n\\t\\t\\t\\t:disabled=\\\"isDisabledAuto || loading\\\"\\n\\t\\t\\t\\t@click.prevent=\\\"onSubmit\\\">\\n\\t\\t\\t\\t<template #icon>\\n\\t\\t\\t\\t\\t<IconLoading v-if=\\\"loading\\\" :size=\\\"20\\\" />\\n\\t\\t\\t\\t\\t<IconCheck v-else :size=\\\"20\\\" />\\n\\t\\t\\t\\t</template>\\n\\t\\t\\t\\t{{ submitButtonText }}\\n\\t\\t\\t</ButtonVue>\\n\\t\\t\\t<ButtonVue v-else-if=\\\"mode === 'manual'\\\"\\n\\t\\t\\t\\t:aria-label=\\\"submitButtonText\\\"\\n\\t\\t\\t\\tclass=\\\"account-form__submit-button\\\"\\n\\t\\t\\t\\ttype=\\\"primary\\\"\\n\\t\\t\\t\\tnative-type=\\\"submit\\\"\\n\\t\\t\\t\\t:disabled=\\\"isDisabledManual || loading\\\"\\n\\t\\t\\t\\t@click.prevent=\\\"onSubmit\\\">\\n\\t\\t\\t\\t<template #icon>\\n\\t\\t\\t\\t\\t<IconLoading v-if=\\\"loading\\\" :size=\\\"20\\\" />\\n\\t\\t\\t\\t\\t<IconCheck v-else :size=\\\"20\\\" />\\n\\t\\t\\t\\t</template>\\n\\t\\t\\t\\t{{ submitButtonText }}\\n\\t\\t\\t</ButtonVue>\\n\\t\\t</div>\\n\\t\\t<div v-if=\\\"feedback\\\" class=\\\"account-form--feedback\\\">\\n\\t\\t\\t{{ feedback }}\\n\\t\\t</div>\\n\\t</form>\\n</template>\\n\\n<script>\\nimport { Tab, Tabs } from 'vue-tabs-component'\\nimport { NcButton as ButtonVue, NcLoadingIcon as IconLoading, NcPasswordField, NcInputField, NcCheckboxRadioSwitch } from '@nextcloud/vue'\\nimport IconCheck from 'vue-material-design-icons/Check.vue'\\nimport { translate as t } from '@nextcloud/l10n'\\n\\nimport logger from '../logger.js'\\nimport {\\n\\tqueryIspdb,\\n\\tqueryMx,\\n\\ttestConnectivity,\\n} from '../service/AutoConfigService.js'\\nimport { CONSENT_ABORTED, getUserConsent } from '../integration/oauth.js'\\nimport useMainStore from '../store/mainStore.js'\\nimport { mapStores, mapState } from 'pinia'\\n\\nexport default {\\n\\tname: 'AccountForm',\\n\\tcomponents: {\\n\\t\\tNcPasswordField,\\n\\t\\tNcInputField,\\n\\t\\tNcCheckboxRadioSwitch,\\n\\t\\tTab,\\n\\t\\tTabs,\\n\\t\\tButtonVue,\\n\\t\\tIconLoading,\\n\\t\\tIconCheck,\\n\\t},\\n\\tprops: {\\n\\t\\tdisplayName: {\\n\\t\\t\\ttype: String,\\n\\t\\t\\tdefault: '',\\n\\t\\t},\\n\\t\\temail: {\\n\\t\\t\\ttype: String,\\n\\t\\t\\tdefault: '',\\n\\t\\t},\\n\\t\\taccount: {\\n\\t\\t\\ttype: Object,\\n\\t\\t\\trequired: false,\\n\\t\\t\\tdefault: () => undefined,\\n\\t\\t},\\n\\t},\\n\\tdata() {\\n\\t\\tconst fromAccountOr = (prop, def) => {\\n\\t\\t\\tif (this.account !== undefined) {\\n\\t\\t\\t\\treturn this.account[prop]\\n\\t\\t\\t} else {\\n\\t\\t\\t\\treturn def\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\treturn {\\n\\t\\t\\tloading: false,\\n\\t\\t\\tloadingMessage: undefined,\\n\\t\\t\\tmode: 'auto',\\n\\t\\t\\taccountName: this.displayName,\\n\\t\\t\\temailAddress: this.email,\\n\\t\\t\\tautoConfig: {\\n\\t\\t\\t\\tpassword: '',\\n\\t\\t\\t},\\n\\t\\t\\tmanualConfig: {\\n\\t\\t\\t\\timapHost: fromAccountOr('imapHost', ''),\\n\\t\\t\\t\\timapPort: fromAccountOr('imapPort', 993),\\n\\t\\t\\t\\timapSslMode: fromAccountOr('imapSslMode', 'ssl'),\\n\\t\\t\\t\\timapUser: fromAccountOr('imapUser', ''),\\n\\t\\t\\t\\timapPassword: '',\\n\\t\\t\\t\\tsmtpHost: fromAccountOr('smtpHost', ''),\\n\\t\\t\\t\\tsmtpPort: fromAccountOr('smtpPort', 587),\\n\\t\\t\\t\\tsmtpSslMode: fromAccountOr('smtpSslMode', 'tls'),\\n\\t\\t\\t\\tsmtpUser: fromAccountOr('smtpUser', ''),\\n\\t\\t\\t\\tsmtpPassword: '',\\n\\t\\t\\t},\\n\\t\\t\\tfeedback: null,\\n\\t\\t\\tpassword: '',\\n\\t\\t}\\n\\t},\\n\\tcomputed: {\\n\\t\\t...mapStores(useMainStore),\\n\\t\\t...mapState(useMainStore, [\\n\\t\\t\\t'googleOauthUrl',\\n\\t\\t\\t'microsoftOauthUrl',\\n\\t\\t]),\\n\\n\\t\\tsettingsPage() {\\n\\t\\t\\treturn this.account !== undefined\\n\\t\\t},\\n\\n\\t\\tisDisabledAuto() {\\n\\t\\t\\tif (this.loading) {\\n\\t\\t\\t\\treturn true\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (this.mode !== 'auto') {\\n\\t\\t\\t\\treturn this.loading\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn !this.emailAddress || !this.isValidEmail(this.emailAddress)\\n\\t\\t\\t\\t|| (!this.googleOauthUrl && !this.autoConfig.password)\\n\\t\\t},\\n\\n\\t\\tisDisabledManual() {\\n\\t\\t\\tif (this.loading) {\\n\\t\\t\\t\\treturn true\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (this.mode !== 'manual') {\\n\\t\\t\\t\\treturn this.loading\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn !this.emailAddress || !this.isValidEmail(this.emailAddress)\\n\\t\\t\\t\\t|| !this.manualConfig.imapHost || !this.manualConfig.imapPort\\n\\t\\t\\t\\t|| !this.manualConfig.imapUser || (!this.useOauth && !this.manualConfig.imapPassword)\\n\\t\\t\\t\\t|| !this.manualConfig.smtpHost || !this.manualConfig.smtpPort\\n\\t\\t\\t\\t|| !this.manualConfig.smtpUser || (!this.useOauth && !this.manualConfig.smtpPassword)\\n\\t\\t},\\n\\n\\t\\tisGoogleAccount() {\\n\\t\\t\\treturn this.manualConfig.imapHost === 'imap.gmail.com'\\n\\t\\t\\t\\t|| this.manualConfig.smtpHost === 'smtp.gmail.com'\\n\\t\\t},\\n\\n\\t\\tisMicrosoftAccount() {\\n\\t\\t\\treturn this.manualConfig.imapHost === 'outlook.office365.com'\\n\\t\\t\\t\\t|| this.manualConfig.smtpHost === 'outlook.office365.com'\\n\\t\\t},\\n\\n\\t\\thasPasswordAlternatives() {\\n\\t\\t\\treturn !!this.googleOauthUrl\\n\\t\\t\\t\\t|| !!this.microsoftOauthUrl\\n\\t\\t},\\n\\n\\t\\tuseOauth() {\\n\\t\\t\\treturn (this.isGoogleAccount && this.googleOauthUrl)\\n\\t\\t\\t\\t|| (this.isMicrosoftAccount && this.microsoftOauthUrl)\\n\\t\\t},\\n\\n\\t\\tsubmitButtonText() {\\n\\t\\t\\tif (this.loading) {\\n\\t\\t\\t\\treturn this.loadingMessage ?? t('mail', 'Connecting')\\n\\t\\t\\t}\\n\\t\\t\\tif (this.mode === 'manual' && this.useOauth) {\\n\\t\\t\\t\\tif (this.isGoogleAccount) {\\n\\t\\t\\t\\t    return this.account ? t('mail', 'Reconnect Google account') : t('mail', 'Sign in with Google')\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t    return this.account ? t('mail', 'Reconnect Microsoft account') : t('mail', 'Sign in with Microsoft')\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t\\treturn this.account ? t('mail', 'Save') : t('mail', 'Connect')\\n\\t\\t},\\n\\t},\\n\\tmethods: {\\n\\t\\tonModeChanged(e) {\\n\\t\\t\\tthis.mode = e.tab.id\\n\\n\\t\\t\\tif (this.mode === 'manual') {\\n\\t\\t\\t\\t// IMAP\\n\\t\\t\\t\\tif (this.manualConfig.imapUser === '') {\\n\\t\\t\\t\\t\\tthis.manualConfig.imapUser = this.emailAddress\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tif (this.manualConfig.imapPassword === '') {\\n\\t\\t\\t\\t\\tthis.manualConfig.imapPassword = this.autoConfig.password\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t// SMTP\\n\\t\\t\\t\\tif (this.manualConfig.smtpUser === '') {\\n\\t\\t\\t\\t\\tthis.manualConfig.smtpUser = this.emailAddress\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tif (this.manualConfig.smtpPassword === '') {\\n\\t\\t\\t\\t\\tthis.manualConfig.smtpPassword = this.autoConfig.password\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tonImapSslModeChange(value) {\\n\\t\\t\\tthis.clearFeedback()\\n\\t\\t\\tthis.manualConfig.imapSslMode = value\\n\\t\\t\\tswitch (this.manualConfig.imapSslMode) {\\n\\t\\t\\tcase 'none':\\n\\t\\t\\tcase 'tls':\\n\\t\\t\\t\\tthis.manualConfig.imapPort = 143\\n\\t\\t\\t\\tbreak\\n\\t\\t\\tcase 'ssl':\\n\\t\\t\\t\\tthis.manualConfig.imapPort = 993\\n\\t\\t\\t\\tbreak\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tonSmtpSslModeChange(value) {\\n\\t\\t\\tthis.clearFeedback()\\n\\t\\t\\tthis.manualConfig.smtpSslMode = value\\n\\t\\t\\tswitch (this.manualConfig.smtpSslMode) {\\n\\t\\t\\tcase 'none':\\n\\t\\t\\tcase 'tls':\\n\\t\\t\\t\\tthis.manualConfig.smtpPort = 587\\n\\t\\t\\t\\tbreak\\n\\t\\t\\tcase 'ssl':\\n\\t\\t\\t\\tthis.manualConfig.smtpPort = 465\\n\\t\\t\\t\\tbreak\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tclearFeedback() {\\n\\t\\t\\tthis.feedback = null\\n\\t\\t},\\n\\t\\tapplyAutoConfig(config) {\\n\\t\\t\\tif (!config) {\\n\\t\\t\\t\\treturn false\\n\\t\\t\\t}\\n\\t\\t\\tif (config?.imapConfig) {\\n\\t\\t\\t\\tthis.manualConfig.imapUser = config.imapConfig.username\\n\\t\\t\\t\\tthis.manualConfig.imapHost = config.imapConfig.host\\n\\t\\t\\t\\tthis.manualConfig.imapPort = config.imapConfig.port\\n\\t\\t\\t\\tthis.manualConfig.imapSslMode = config.imapConfig.security\\n\\t\\t\\t\\tthis.manualConfig.imapPassword = this.autoConfig.password\\n\\t\\t\\t}\\n\\t\\t\\tif (config?.smtpConfig) {\\n\\t\\t\\t\\tthis.manualConfig.smtpUser = config.smtpConfig.username\\n\\t\\t\\t\\tthis.manualConfig.smtpHost = config.smtpConfig.host\\n\\t\\t\\t\\tthis.manualConfig.smtpPort = config.smtpConfig.port\\n\\t\\t\\t\\tthis.manualConfig.smtpSslMode = config.smtpConfig.security\\n\\t\\t\\t\\tthis.manualConfig.smtpPassword = this.autoConfig.password\\n\\t\\t\\t}\\n\\t\\t\\treturn true\\n\\t\\t},\\n\\t\\tasync detectConfig() {\\n\\t\\t\\tthis.loadingMessage = t('mail', 'Looking up configuration')\\n\\t\\t\\tconst config = await queryIspdb(this.emailAddress.split('@').pop(), this.emailAddress)\\n\\t\\t\\tlogger.debug('fetched auto config', { config })\\n\\t\\t\\t// Apply settings to manual mode before submitting so the user\\n\\t\\t\\t// can make modifications if the config fails\\n\\t\\t\\tif (this.applyAutoConfig(config)) {\\n\\t\\t\\t\\tlogger.debug('ISP DB config applied')\\n\\t\\t\\t\\treturn true\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tconst mxHosts = await queryMx(this.emailAddress)\\n\\t\\t\\t\\tlogger.debug('MX hosts fetched', { mxHosts })\\n\\n\\t\\t\\t\\tif (mxHosts.length) {\\n\\t\\t\\t\\t\\t// Try the TLD of the MX\\n\\t\\t\\t\\t\\t// FIXME: breaks with eTLDs like .co.uk\\n\\t\\t\\t\\t\\tconst tldMx = mxHosts[0].split('.').splice(-2).join('.').toLowerCase()\\n\\t\\t\\t\\t\\tconst mxConfig = await queryIspdb(\\n\\t\\t\\t\\t\\t\\ttldMx,\\n\\t\\t\\t\\t\\t\\tthis.emailAddress,\\n\\t\\t\\t\\t\\t)\\n\\t\\t\\t\\t\\tlogger.debug('fetched MX auto config', { mxConfig })\\n\\t\\t\\t\\t\\tif (mxConfig && this.applyAutoConfig(mxConfig)) {\\n\\t\\t\\t\\t\\t\\treturn true\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t// Test the highest priority MX for open IMAP/SMTP ports\\n\\t\\t\\t\\tthis.loadingMessage = t('mail', 'Checking mail host connectivity')\\n\\t\\t\\t\\tconst imapAndSmtpHosts = mxHosts.slice(0, 1).flatMap(host => {\\n\\t\\t\\t\\t\\treturn [993, 143, 465, 587].map(port => ({\\n\\t\\t\\t\\t\\t\\thost,\\n\\t\\t\\t\\t\\t\\tport,\\n\\t\\t\\t\\t\\t}))\\n\\t\\t\\t\\t})\\n\\t\\t\\t\\tconst results = await Promise.all(imapAndSmtpHosts.map(async ({ host, port }) => {\\n\\t\\t\\t\\t\\treturn {\\n\\t\\t\\t\\t\\t\\thost,\\n\\t\\t\\t\\t\\t\\tport,\\n\\t\\t\\t\\t\\t\\tcanConnect: await testConnectivity(host, port),\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}))\\n\\t\\t\\t\\tconst firstImapHost = results.filter(({ canConnect, port }) => canConnect && port === 993)[0]\\n\\t\\t\\t\\tconst firstSmtpHost = results.filter(({ canConnect, port }) => canConnect && [465, 587].includes(port))[0]\\n\\t\\t\\t\\tlogger.debug('MX connectivity tested', { firstImapHost, firstSmtpHost })\\n\\t\\t\\t\\tif (firstImapHost && firstSmtpHost) {\\n\\t\\t\\t\\t\\tthis.applyAutoConfig({\\n\\t\\t\\t\\t\\t\\timapConfig: {\\n\\t\\t\\t\\t\\t\\t\\tusername: this.emailAddress, // Assumption\\n\\t\\t\\t\\t\\t\\t\\thost: firstImapHost.host,\\n\\t\\t\\t\\t\\t\\t\\tport: firstImapHost.port,\\n\\t\\t\\t\\t\\t\\t\\tsecurity: firstImapHost.port === 993 ? 'ssl' : 'tls',\\n\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\tsmtpConfig: {\\n\\t\\t\\t\\t\\t\\t\\tusername: this.emailAddress, // Assumption\\n\\t\\t\\t\\t\\t\\t\\thost: firstSmtpHost.host,\\n\\t\\t\\t\\t\\t\\t\\tport: firstSmtpHost.port,\\n\\t\\t\\t\\t\\t\\t\\tsecurity: firstSmtpHost.port === 465 ? 'ssl' : 'tls',\\n\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t\\treturn true\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\tthis.feedback = t('mail', 'Configuration discovery failed. Please use the manual settings')\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\treturn false\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tasync onSubmit(event) {\\n\\t\\t\\tlogger.debug('account form submitted', { event })\\n\\t\\t\\tif (this.isDisabledManual || this.isDisabledAuto) {\\n\\t\\t\\t\\tlogger.warn('submit is disabled')\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\tthis.clearFeedback()\\n\\t\\t\\tthis.loading = true\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tif (this.mode === 'auto') {\\n\\t\\t\\t\\t\\tif (!await this.detectConfig()) {\\n\\t\\t\\t\\t\\t\\tlogger.warn('Auto mode failed')\\n\\t\\t\\t\\t\\t\\treturn\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tif (!this.useOauth) {\\n\\t\\t\\t\\t\\tif (this.mode === 'auto' && this.autoConfig.password === '') {\\n\\t\\t\\t\\t\\t\\tthis.feedback = t('mail', 'Password required')\\n\\t\\t\\t\\t\\t\\treturn\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\tif (this.mode === 'manual' && (this.manualConfig.imapPassword === '' || this.manualConfig.smtpPassword === '')) {\\n\\t\\t\\t\\t\\t\\tthis.feedback = t('mail', 'Password required')\\n\\t\\t\\t\\t\\t\\treturn\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tthis.loadingMessage = t('mail', 'Testing authentication')\\n\\t\\t\\t\\tconst data = {\\n\\t\\t\\t\\t\\t...this.manualConfig,\\n\\t\\t\\t\\t\\taccountName: this.accountName,\\n\\t\\t\\t\\t\\temailAddress: this.emailAddress,\\n\\t\\t\\t\\t\\timapHost: this.manualConfig.imapHost.trim(),\\n\\t\\t\\t\\t\\tsmtpHost: this.manualConfig.smtpHost.trim(),\\n\\t\\t\\t\\t\\tauthMethod: this.useOauth ? 'xoauth2' : 'password',\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tif (this.useOauth) {\\n\\t\\t\\t\\t\\tdelete data.imapPassword\\n\\t\\t\\t\\t\\tdelete data.smtpPassword\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tif (!this.account) {\\n\\t\\t\\t\\t\\tconst account = await this.mainStore.startAccountSetup(data)\\n\\t\\t\\t\\t\\tif (this.useOauth) {\\n\\t\\t\\t\\t\\t\\tthis.loadingMessage = t('mail', 'Awaiting user consent')\\n\\t\\t\\t\\t\\t\\ttry {\\n\\t\\t\\t\\t\\t\\t\\tif (this.isGoogleAccount) {\\n\\t\\t\\t\\t\\t\\t\\t\\tthis.feedback = t('mail', 'Account created. Please follow the pop-up instructions to link your Google account')\\n\\t\\t\\t\\t\\t\\t\\t\\tawait getUserConsent(\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tthis.googleOauthUrl\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t.replace('_accountId_', account.id)\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t.replace('_email_', encodeURIComponent(account.emailAddress)),\\n\\t\\t\\t\\t\\t\\t\\t\\t)\\n\\t\\t\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\t\\t\\tthis.feedback = t('mail', 'Account created. Please follow the pop-up instructions to link your Microsoft account')\\n\\t\\t\\t\\t\\t\\t\\t\\tawait getUserConsent(\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tthis.microsoftOauthUrl\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t.replace('_accountId_', account.id)\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t.replace('_email_', encodeURIComponent(account.emailAddress)),\\n\\t\\t\\t\\t\\t\\t\\t\\t)\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t} catch (e) {\\n\\t\\t\\t\\t\\t\\t\\t// Clean up the temporary account before we continue\\n\\t\\t\\t\\t\\t\\t\\tthis.mainStore.deleteAccount(account)\\n\\t\\t\\t\\t\\t\\t\\tlogger.info(`Temporary account ${account.id} deleted`)\\n\\t\\t\\t\\t\\t\\t\\tthrow e\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\tthis.clearFeedback()\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\tthis.loadingMessage = t('mail', 'Loading account')\\n\\t\\t\\t\\t\\tawait this.mainStore.finishAccountSetup({ account })\\n\\t\\t\\t\\t\\tthis.$emit('account-created', account)\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\tconst oldAccountData = this.account\\n\\t\\t\\t\\t\\tconst account = await this.mainStore.updateAccount({\\n\\t\\t\\t\\t\\t\\t...data,\\n\\t\\t\\t\\t\\t\\taccountId: this.account.id,\\n\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t\\tif (this.useOauth) {\\n\\t\\t\\t\\t\\t\\tthis.loadingMessage = t('mail', 'Awaiting user consent')\\n\\t\\t\\t\\t\\t\\ttry {\\n\\t\\t\\t\\t\\t\\t\\tif (this.isGoogleAccount) {\\n\\t\\t\\t\\t\\t\\t\\t\\tthis.feedback = t('mail', 'Account updated. Please follow the pop-up instructions to reconnect your Google account')\\n\\t\\t\\t\\t\\t\\t\\t\\tawait getUserConsent(\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tthis.googleOauthUrl\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t.replace('_accountId_', account.id)\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t.replace('_email_', encodeURIComponent(account.emailAddress)),\\n\\t\\t\\t\\t\\t\\t\\t\\t)\\n\\t\\t\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\t\\t\\tthis.feedback = t('mail', 'Account updated. Please follow the pop-up instructions to reconnect your Microsoft account')\\n\\t\\t\\t\\t\\t\\t\\t\\tawait getUserConsent(\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tthis.microsoftOauthUrl\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t.replace('_accountId_', account.id)\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t.replace('_email_', encodeURIComponent(account.emailAddress)),\\n\\t\\t\\t\\t\\t\\t\\t\\t)\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t} catch (e) {\\n\\t\\t\\t\\t\\t\\t\\t// Undo changes\\n\\t\\t\\t\\t\\t\\t\\tawait this.mainStore.updateAccount({\\n\\t\\t\\t\\t\\t\\t\\t\\t...oldAccountData,\\n\\t\\t\\t\\t\\t\\t\\t\\taccountId: oldAccountData.id,\\n\\t\\t\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t\\t\\t\\tlogger.info(`Account ${account.id} update undone`)\\n\\t\\t\\t\\t\\t\\t\\tthrow e\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\tthis.clearFeedback()\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\tthis.feedback = t('mail', 'Account updated')\\n\\t\\t\\t\\t}\\n\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\tlogger.error('could not save account details', { error })\\n\\n\\t\\t\\t\\tif (error.data?.error === 'CONNECTION_ERROR') {\\n\\t\\t\\t\\t\\tif (error.data.service === 'IMAP') {\\n\\t\\t\\t\\t\\t\\tthis.feedback = t('mail', 'IMAP server is not reachable')\\n\\t\\t\\t\\t\\t} else if (error.data.service === 'SMTP') {\\n\\t\\t\\t\\t\\t\\tthis.feedback = t('mail', 'SMTP server is not reachable')\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t} else if (error.data?.error === 'AUTHENTICATION') {\\n\\t\\t\\t\\t\\tif (error.data.service === 'IMAP') {\\n\\t\\t\\t\\t\\t\\tthis.feedback = t('mail', 'IMAP username or password is wrong')\\n\\t\\t\\t\\t\\t} else if (error.data.service === 'SMTP') {\\n\\t\\t\\t\\t\\t\\tthis.feedback = t('mail', 'SMTP username or password is wrong')\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\tif (error.data?.service === 'IMAP') {\\n\\t\\t\\t\\t\\t\\tthis.feedback = t('mail', 'IMAP connection failed')\\n\\t\\t\\t\\t\\t} else if (error.data?.service === 'SMTP') {\\n\\t\\t\\t\\t\\t\\tthis.feedback = t('mail', 'SMTP connection failed')\\n\\t\\t\\t\\t\\t} else if (error.message === CONSENT_ABORTED) {\\n\\t\\t\\t\\t\\t\\tthis.feedback = t('mail', 'Authorization pop-up closed')\\n\\t\\t\\t\\t\\t} else if (error.response?.status === 429) {\\n\\t\\t\\t\\t\\t\\tthis.feedback = t('mail', 'Configuration discovery temporarily not available. Please try again later.')\\n\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\tthis.feedback = t('mail', 'There was an error while setting up your account')\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t} finally {\\n\\t\\t\\t\\tthis.loading = false\\n\\t\\t\\t\\tthis.loadingMessage = undefined\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tisValidEmail(email) {\\n\\t\\t\\tconst regExpEmail = /^(([^<>()[\\\\]\\\\\\\\.,;:\\\\s@\\\"]+(\\\\.[^<>()[\\\\]\\\\\\\\.,;:\\\\s@\\\"]+)*)|(\\\".+\\\"))@((\\\\[[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.[0-9]{1,3}\\\\])|(([a-zA-Z\\\\-0-9]+\\\\.)+[a-zA-Z]{2,}))$/\\n\\t\\t\\treturn regExpEmail.test(email)\\n\\t\\t},\\n\\t},\\n}\\n</script>\\n\\n<style lang=\\\"scss\\\" scoped>\\n:deep(.tabs-component-tabs) {\\n\\tdisplay: flex;\\n}\\n\\n:deep(.tabs-component-tab) {\\n\\tflex-grow: 1;\\n\\ttext-align: center;\\n\\tcolor: var(--color-text-lighter);\\n\\tmargin-bottom: calc(var(--default-grid-baseline) * 2 + var(--default-grid-baseline) / 2);\\n}\\n\\n:deep(.tabs-component-tab.is-active) {\\n\\tborder-bottom: var(--border-width-input) solid black;\\n\\tfont-weight: bold;\\n}\\n\\n:deep(.input-field) {\\n\\tmargin: calc(var(--default-grid-baseline) * 3) 0;\\n}\\n\\n.tabs-component-panels {\\n\\tpadding-top: calc(var(--default-grid-baseline) * 5);\\n}\\n\\n.tabs-component-panels label {\\n\\ttext-align: start;\\n\\twidth: 100%;\\n\\tdisplay: inline-block;\\n}\\n\\n.tabs-component-panels input,\\n.tabs-component-panels select {\\n\\tmargin-bottom: calc(var(--default-grid-baseline) * 2);\\n}\\n</style>\\n\\n<style scoped>\\nh4 {\\n\\ttext-align: start;\\n}\\n\\n.flex-row {\\n\\tdisplay: flex;\\n}\\n\\ninput.primary {\\n\\tcolor: var(--color-main-background);\\n}\\n\\ninput[type='radio'] {\\n\\tdisplay: none;\\n}\\n\\ninput[type='radio'][disabled] + label {\\n\\tcursor: default;\\n\\topacity: 0.5;\\n}\\n\\n.account-form__label--required:after {\\n\\tcontent:\\\" *\\\";\\n}\\n\\n.account-form__heading--required:after {\\n\\tcontent:\\\" *\\\";\\n}\\n\\n.account-form__submit-buttons {\\n\\tdisplay: flex;\\n\\tjustify-content: center;\\n\\tmargin-top: var(--default-grid-baseline);\\n}\\n\\n.account-form__submit-button {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n}\\n\\n.account-form--feedback {\\n\\tcolor: var(--color-text-maxcontrast);\\n\\tmargin-top: var(--default-grid-baseline);\\n\\ttext-align: center;\\n}\\n\\n.account-form--error {\\n\\ttext-align: start;\\n\\tfont-size: 14px;\\n}\\n\\n#account-form {\\n\\tz-index: 1001;\\n\\twidth: 300px;\\n\\ttop: 15%;\\n\\tpadding-bottom: calc(var(--default-grid-baseline) * 12);\\n\\tmargin: 0 auto;\\n\\tpadding-top: calc(var(--default-grid-baseline) * 7);\\n}\\n\\n#account-form input {\\n\\twidth: 100%;\\n\\tbox-sizing: border-box;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('form',{attrs:{\"id\":\"account-form\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.onSubmit.apply(null, arguments)}}},[_c('Tabs',{attrs:{\"options\":{useUrlFragment: false, defaultTabHash: _vm.settingsPage ? 'manual' : 'auto'},\"cache-lifetime\":\"0\"},on:{\"changed\":_vm.onModeChanged}},[_c('Tab',{key:\"auto\",attrs:{\"id\":\"auto\",\"name\":_vm.t('mail', 'Auto')}},[_c('NcInputField',{attrs:{\"id\":\"auto-name\",\"value\":_vm.accountName,\"label\":_vm.t('mail', 'Name'),\"type\":\"text\",\"placeholder\":_vm.t('mail', 'Name'),\"disabled\":_vm.loading,\"autofocus\":\"\"},on:{\"update:value\":function($event){_vm.accountName=$event}}}),_vm._v(\" \"),_c('NcInputField',{attrs:{\"id\":\"auto-address\",\"value\":_vm.emailAddress,\"label\":_vm.t('mail', 'Mail address'),\"disabled\":_vm.loading,\"placeholder\":_vm.t('mail', 'name@example.org'),\"required\":\"\",\"type\":\"email\"},on:{\"update:value\":function($event){_vm.emailAddress=$event},\"change\":_vm.clearFeedback}}),_vm._v(\" \"),(!_vm.isValidEmail(_vm.emailAddress))?_c('p',{staticClass:\"account-form--error\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Please enter an email of the format name@example.com'))+\"\\n\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),_c('NcPasswordField',{attrs:{\"id\":\"auto-password\",\"value\":_vm.autoConfig.password,\"disabled\":_vm.loading,\"type\":\"password\",\"label\":_vm.t('mail', 'Password'),\"required\":!_vm.hasPasswordAlternatives},on:{\"update:value\":function($event){return _vm.$set(_vm.autoConfig, \"password\", $event)},\"change\":_vm.clearFeedback}})],1),_vm._v(\" \"),_c('Tab',{key:\"manual\",attrs:{\"id\":\"manual\",\"name\":_vm.t('mail', 'Manual')}},[_c('NcInputField',{attrs:{\"id\":\"man-name\",\"value\":_vm.accountName,\"label\":_vm.t('mail', 'Name'),\"type\":\"text\",\"placeholder\":_vm.t('mail', 'Name'),\"disabled\":_vm.loading},on:{\"update:value\":function($event){_vm.accountName=$event}}}),_vm._v(\" \"),_c('NcInputField',{attrs:{\"id\":\"man-address\",\"value\":_vm.emailAddress,\"label\":_vm.t('mail', 'Mail address'),\"type\":\"email\",\"placeholder\":_vm.t('mail', 'name@example.org'),\"disabled\":_vm.loading,\"required\":\"\"},on:{\"update:value\":function($event){_vm.emailAddress=$event},\"change\":_vm.clearFeedback}}),_vm._v(\" \"),(!_vm.isValidEmail(_vm.emailAddress))?_c('p',{staticClass:\"account-form--error\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Please enter an email of the format name@example.com'))+\"\\n\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),_c('h3',[_vm._v(_vm._s(_vm.t('mail', 'IMAP Settings')))]),_vm._v(\" \"),_c('NcInputField',{attrs:{\"id\":\"man-imap-host\",\"value\":_vm.manualConfig.imapHost,\"label\":_vm.t('mail', 'IMAP Host'),\"type\":\"text\",\"placeholder\":_vm.t('mail', 'IMAP Host'),\"disabled\":_vm.loading,\"required\":\"\"},on:{\"update:value\":function($event){return _vm.$set(_vm.manualConfig, \"imapHost\", $event)},\"change\":_vm.clearFeedback}}),_vm._v(\" \"),_c('h4',{staticClass:\"account-form__heading--required\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'IMAP Security'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"flex-row\"},[_c('NcCheckboxRadioSwitch',{attrs:{\"id\":\"man-imap-sec-none\",\"button-variant\":true,\"checked\":_vm.manualConfig.imapSslMode,\"type\":\"radio\",\"name\":\"man-imap-sec\",\"disabled\":_vm.loading,\"value\":\"none\",\"button-variant-grouped\":\"horizontal\"},on:{\"update:checked\":_vm.onImapSslModeChange}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'None'))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('NcCheckboxRadioSwitch',{attrs:{\"id\":\"man-imap-sec-ssl\",\"button-variant\":true,\"checked\":_vm.manualConfig.imapSslMode,\"type\":\"radio\",\"name\":\"man-imap-sec\",\"disabled\":_vm.loading,\"value\":\"ssl\",\"button-variant-grouped\":\"horizontal\"},on:{\"update:checked\":_vm.onImapSslModeChange}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'SSL/TLS'))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('NcCheckboxRadioSwitch',{attrs:{\"id\":\"man-imap-sec-tls\",\"button-variant\":true,\"checked\":_vm.manualConfig.imapSslMode,\"type\":\"radio\",\"name\":\"man-imap-sec\",\"disabled\":_vm.loading,\"value\":\"tls\",\"button-variant-grouped\":\"horizontal\"},on:{\"update:checked\":_vm.onImapSslModeChange}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'STARTTLS'))+\"\\n\\t\\t\\t\\t\")])],1),_vm._v(\" \"),_c('NcInputField',{attrs:{\"id\":\"man-imap-port\",\"value\":_vm.manualConfig.imapPort,\"label\":_vm.t('mail', 'IMAP Port'),\"type\":\"number\",\"placeholder\":_vm.t('mail', 'IMAP Port'),\"disabled\":_vm.loading,\"required\":\"\"},on:{\"update:value\":function($event){return _vm.$set(_vm.manualConfig, \"imapPort\", $event)},\"change\":_vm.clearFeedback}}),_vm._v(\" \"),_c('NcInputField',{attrs:{\"id\":\"man-imap-user\",\"value\":_vm.manualConfig.imapUser,\"label\":_vm.t('mail', 'IMAP User'),\"type\":\"text\",\"placeholder\":_vm.t('mail', 'IMAP User'),\"disabled\":_vm.loading,\"required\":\"\"},on:{\"update:value\":function($event){return _vm.$set(_vm.manualConfig, \"imapUser\", $event)},\"change\":_vm.clearFeedback}}),_vm._v(\" \"),(!_vm.useOauth)?_c('NcPasswordField',{attrs:{\"id\":\"man-imap-password\",\"type\":\"password\",\"value\":_vm.manualConfig.imapPassword,\"label\":_vm.t('mail', 'IMAP Password'),\"disabled\":_vm.loading,\"required\":\"\"},on:{\"update:value\":function($event){return _vm.$set(_vm.manualConfig, \"imapPassword\", $event)},\"change\":_vm.clearFeedback}}):_vm._e(),_vm._v(\" \"),_c('h3',[_vm._v(_vm._s(_vm.t('mail', 'SMTP Settings')))]),_vm._v(\" \"),_c('NcInputField',{ref:\"smtpHost\",attrs:{\"id\":\"man-smtp-host\",\"value\":_vm.manualConfig.smtpHost,\"label\":_vm.t('mail', 'SMTP Host'),\"type\":\"text\",\"name\":\"smtp-host\",\"placeholder\":_vm.t('mail', 'SMTP Host'),\"disabled\":_vm.loading,\"required\":\"\"},on:{\"update:value\":function($event){return _vm.$set(_vm.manualConfig, \"smtpHost\", $event)},\"change\":_vm.clearFeedback}}),_vm._v(\" \"),_c('h4',{staticClass:\"account-form__heading--required\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'SMTP Security'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"flex-row\"},[_c('NcCheckboxRadioSwitch',{attrs:{\"id\":\"man-imap-sec-none\",\"button-variant\":true,\"checked\":_vm.manualConfig.smtpSslMode,\"type\":\"radio\",\"name\":\"man-smtp-sec\",\"disabled\":_vm.loading,\"value\":\"none\",\"button-variant-grouped\":\"horizontal\"},on:{\"update:checked\":_vm.onSmtpSslModeChange}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'None'))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('NcCheckboxRadioSwitch',{attrs:{\"id\":\"man-imap-sec-ssl\",\"button-variant\":true,\"checked\":_vm.manualConfig.smtpSslMode,\"type\":\"radio\",\"name\":\"man-smtp-sec\",\"disabled\":_vm.loading,\"value\":\"ssl\",\"button-variant-grouped\":\"horizontal\"},on:{\"update:checked\":_vm.onSmtpSslModeChange}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'SSL/TLS'))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('NcCheckboxRadioSwitch',{attrs:{\"id\":\"man-imap-sec-tls\",\"button-variant\":true,\"checked\":_vm.manualConfig.smtpSslMode,\"type\":\"radio\",\"name\":\"man-smtp-sec\",\"disabled\":_vm.loading,\"value\":\"tls\",\"button-variant-grouped\":\"horizontal\"},on:{\"update:checked\":_vm.onSmtpSslModeChange}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'STARTTLS'))+\"\\n\\t\\t\\t\\t\")])],1),_vm._v(\" \"),_c('NcInputField',{attrs:{\"id\":\"man-smtp-port\",\"label\":_vm.t('mail', 'SMTP Port'),\"value\":_vm.manualConfig.smtpPort,\"type\":\"number\",\"placeholder\":_vm.t('mail', 'SMTP Port'),\"disabled\":_vm.loading,\"required\":\"\"},on:{\"update:value\":function($event){return _vm.$set(_vm.manualConfig, \"smtpPort\", $event)},\"change\":_vm.clearFeedback}}),_vm._v(\" \"),_c('NcInputField',{attrs:{\"id\":\"man-smtp-user\",\"value\":_vm.manualConfig.smtpUser,\"label\":_vm.t('mail', 'SMTP User'),\"type\":\"text\",\"placeholder\":_vm.t('mail', 'SMTP User'),\"disabled\":_vm.loading,\"required\":\"\"},on:{\"update:value\":function($event){return _vm.$set(_vm.manualConfig, \"smtpUser\", $event)},\"change\":_vm.clearFeedback}}),_vm._v(\" \"),(!_vm.useOauth)?_c('NcPasswordField',{attrs:{\"id\":\"man-smtp-password\",\"label\":_vm.t('mail', 'SMTP Password'),\"type\":\"password\",\"value\":_vm.manualConfig.smtpPassword,\"disabled\":_vm.loading,\"required\":\"\"},on:{\"update:value\":function($event){return _vm.$set(_vm.manualConfig, \"smtpPassword\", $event)},\"change\":_vm.clearFeedback}}):_vm._e()],1)],1),_vm._v(\" \"),(_vm.isGoogleAccount && !_vm.googleOauthUrl)?_c('div',{staticClass:\"account-form__google-sso\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'For the Google account to work with this app you need to enable two-factor authentication for Google and generate an app password.'))+\"\\n\\t\")]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"account-form__submit-buttons\"},[(_vm.mode === 'auto')?_c('ButtonVue',{staticClass:\"account-form__submit-button\",attrs:{\"aria-label\":_vm.submitButtonText,\"type\":\"primary\",\"native-type\":\"submit\",\"disabled\":_vm.isDisabledAuto || _vm.loading},on:{\"click\":function($event){$event.preventDefault();return _vm.onSubmit.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [(_vm.loading)?_c('IconLoading',{attrs:{\"size\":20}}):_c('IconCheck',{attrs:{\"size\":20}})]},proxy:true}],null,false,4145190044)},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.submitButtonText)+\"\\n\\t\\t\")]):(_vm.mode === 'manual')?_c('ButtonVue',{staticClass:\"account-form__submit-button\",attrs:{\"aria-label\":_vm.submitButtonText,\"type\":\"primary\",\"native-type\":\"submit\",\"disabled\":_vm.isDisabledManual || _vm.loading},on:{\"click\":function($event){$event.preventDefault();return _vm.onSubmit.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [(_vm.loading)?_c('IconLoading',{attrs:{\"size\":20}}):_c('IconCheck',{attrs:{\"size\":20}})]},proxy:true}])},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.submitButtonText)+\"\\n\\t\\t\")]):_vm._e()],1),_vm._v(\" \"),(_vm.feedback)?_c('div',{staticClass:\"account-form--feedback\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.feedback)+\"\\n\\t\")]):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport axios from '@nextcloud/axios'\nimport { generateUrl } from '@nextcloud/router'\n\nexport async function queryIspdb(host, email) {\n\treturn (await axios.get(generateUrl('/apps/mail/api/autoconfig/ispdb/{host}/{email}', { host, email }))).data.data\n}\n\nexport async function queryMx(email) {\n\treturn (await axios.get(generateUrl('/apps/mail/api/autoconfig/mx/{email}', { email }))).data.data\n}\n\nexport async function testConnectivity(host, port) {\n\treturn (await axios.get(generateUrl('/apps/mail/api/autoconfig/test?host={host}&port={port}', { host, port }))).data.data\n}\n","/**\n * SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { translate as t } from '@nextcloud/l10n'\n\nimport logger from '../logger.js'\n\nexport const CONSENT_ABORTED = 'OAUTH_CONSENT_ABORTED'\n\nexport async function getUserConsent(redirectUrl) {\n\tconst ssoWindow = window.open(\n\t\tredirectUrl,\n\t\tt('mail', 'Connect OAUTH2 account'),\n\t\t'toolbar=no, menubar=no, width=600, height=700',\n\t)\n\tssoWindow.focus()\n\tawait new Promise((resolve, reject) => {\n\t\twindow.addEventListener('message', (event) => {\n\t\t\tconst { data } = event\n\t\t\tlogger.debug('Child window message received', { event })\n\n\t\t\tif (data === 'DONE') {\n\t\t\t\tlogger.info('OAUTH2 user consent given')\n\t\t\t\tresolve()\n\t\t\t}\n\t\t})\n\t\tconst windowClosedTimer = setInterval(() => {\n\t\t\tif (ssoWindow.closed) {\n\t\t\t\tclearInterval(windowClosedTimer)\n\t\t\t\treject(new Error(CONSENT_ABORTED))\n\t\t\t}\n\t\t}, 200)\n\t})\n}\n","<!--\n  - SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<form id=\"account-form\" @submit.prevent=\"onSubmit\">\n\t\t<Tabs :options=\"{useUrlFragment: false, defaultTabHash: settingsPage ? 'manual' : 'auto'}\"\n\t\t\tcache-lifetime=\"0\"\n\t\t\t@changed=\"onModeChanged\">\n\t\t\t<Tab id=\"auto\" key=\"auto\" :name=\"t('mail', 'Auto')\">\n\t\t\t\t<NcInputField id=\"auto-name\"\n\t\t\t\t\t:value.sync=\"accountName\"\n\t\t\t\t\t:label=\"t('mail', 'Name')\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t:placeholder=\"t('mail', 'Name')\"\n\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\tautofocus />\n\t\t\t\t<NcInputField id=\"auto-address\"\n\t\t\t\t\t:value.sync=\"emailAddress\"\n\t\t\t\t\t:label=\"t('mail', 'Mail address')\"\n\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\t:placeholder=\"t('mail', 'name@example.org')\"\n\t\t\t\t\trequired\n\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t@change=\"clearFeedback\" />\n\t\t\t\t<p v-if=\"!isValidEmail(emailAddress)\" class=\"account-form--error\">\n\t\t\t\t\t{{ t('mail', 'Please enter an email of the format name@example.com') }}\n\t\t\t\t</p>\n\t\t\t\t<NcPasswordField id=\"auto-password\"\n\t\t\t\t\t:value.sync=\"autoConfig.password\"\n\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t:label=\"t('mail', 'Password')\"\n\t\t\t\t\t:required=\"!hasPasswordAlternatives\"\n\t\t\t\t\t@change=\"clearFeedback\" />\n\t\t\t</Tab>\n\t\t\t<Tab id=\"manual\" key=\"manual\" :name=\"t('mail', 'Manual')\">\n\t\t\t\t<NcInputField id=\"man-name\"\n\t\t\t\t\t:value.sync=\"accountName\"\n\t\t\t\t\t:label=\"t('mail', 'Name')\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t:placeholder=\"t('mail', 'Name')\"\n\t\t\t\t\t:disabled=\"loading\" />\n\t\t\t\t<NcInputField id=\"man-address\"\n\t\t\t\t\t:value.sync=\"emailAddress\"\n\t\t\t\t\t:label=\"t('mail', 'Mail address')\"\n\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t:placeholder=\"t('mail', 'name@example.org')\"\n\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\trequired\n\t\t\t\t\t@change=\"clearFeedback\" />\n\t\t\t\t<p v-if=\"!isValidEmail(emailAddress)\" class=\"account-form--error\">\n\t\t\t\t\t{{ t('mail', 'Please enter an email of the format name@example.com') }}\n\t\t\t\t</p>\n\n\t\t\t\t<h3>{{ t('mail', 'IMAP Settings') }}</h3>\n\t\t\t\t<NcInputField id=\"man-imap-host\"\n\t\t\t\t\t:value.sync=\"manualConfig.imapHost\"\n\t\t\t\t\t:label=\"t('mail', 'IMAP Host')\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t:placeholder=\"t('mail', 'IMAP Host')\"\n\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\trequired\n\t\t\t\t\t@change=\"clearFeedback\" />\n\t\t\t\t<h4 class=\"account-form__heading--required\">\n\t\t\t\t\t{{ t('mail', 'IMAP Security') }}\n\t\t\t\t</h4>\n\t\t\t\t<div class=\"flex-row\">\n\t\t\t\t\t<NcCheckboxRadioSwitch id=\"man-imap-sec-none\"\n\t\t\t\t\t\t:button-variant=\"true\"\n\t\t\t\t\t\t:checked=\"manualConfig.imapSslMode\"\n\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\tname=\"man-imap-sec\"\n\t\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\t\tvalue=\"none\"\n\t\t\t\t\t\tbutton-variant-grouped=\"horizontal\"\n\t\t\t\t\t\t@update:checked=\"onImapSslModeChange\">\n\t\t\t\t\t\t{{ t('mail', 'None') }}\n\t\t\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t\t\t<NcCheckboxRadioSwitch id=\"man-imap-sec-ssl\"\n\t\t\t\t\t\t:button-variant=\"true\"\n\t\t\t\t\t\t:checked=\"manualConfig.imapSslMode\"\n\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\tname=\"man-imap-sec\"\n\t\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\t\tvalue=\"ssl\"\n\t\t\t\t\t\tbutton-variant-grouped=\"horizontal\"\n\t\t\t\t\t\t@update:checked=\"onImapSslModeChange\">\n\t\t\t\t\t\t{{ t('mail', 'SSL/TLS') }}\n\t\t\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t\t\t<NcCheckboxRadioSwitch id=\"man-imap-sec-tls\"\n\t\t\t\t\t\t:button-variant=\"true\"\n\t\t\t\t\t\t:checked=\"manualConfig.imapSslMode\"\n\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\tname=\"man-imap-sec\"\n\t\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\t\tvalue=\"tls\"\n\t\t\t\t\t\tbutton-variant-grouped=\"horizontal\"\n\t\t\t\t\t\t@update:checked=\"onImapSslModeChange\">\n\t\t\t\t\t\t{{ t('mail', 'STARTTLS') }}\n\t\t\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t\t</div>\n\t\t\t\t<NcInputField id=\"man-imap-port\"\n\t\t\t\t\t:value.sync=\"manualConfig.imapPort\"\n\t\t\t\t\t:label=\"t('mail', 'IMAP Port')\"\n\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t:placeholder=\"t('mail', 'IMAP Port')\"\n\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\trequired\n\t\t\t\t\t@change=\"clearFeedback\" />\n\t\t\t\t<NcInputField id=\"man-imap-user\"\n\t\t\t\t\t:value.sync=\"manualConfig.imapUser\"\n\t\t\t\t\t:label=\"t('mail', 'IMAP User')\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t:placeholder=\"t('mail', 'IMAP User')\"\n\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\trequired\n\t\t\t\t\t@change=\"clearFeedback\" />\n\t\t\t\t<NcPasswordField v-if=\"!useOauth\"\n\t\t\t\t\tid=\"man-imap-password\"\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t:value.sync=\"manualConfig.imapPassword\"\n\t\t\t\t\t:label=\"t('mail', 'IMAP Password')\"\n\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\trequired\n\t\t\t\t\t@change=\"clearFeedback\" />\n\n\t\t\t\t<h3>{{ t('mail', 'SMTP Settings') }}</h3>\n\t\t\t\t<NcInputField id=\"man-smtp-host\"\n\t\t\t\t\tref=\"smtpHost\"\n\t\t\t\t\t:value.sync=\"manualConfig.smtpHost\"\n\t\t\t\t\t:label=\"t('mail', 'SMTP Host')\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tname=\"smtp-host\"\n\t\t\t\t\t:placeholder=\"t('mail', 'SMTP Host')\"\n\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\trequired\n\t\t\t\t\t@change=\"clearFeedback\" />\n\t\t\t\t<h4 class=\"account-form__heading--required\">\n\t\t\t\t\t{{ t('mail', 'SMTP Security') }}\n\t\t\t\t</h4>\n\t\t\t\t<div class=\"flex-row\">\n\t\t\t\t\t<NcCheckboxRadioSwitch id=\"man-imap-sec-none\"\n\t\t\t\t\t\t:button-variant=\"true\"\n\t\t\t\t\t\t:checked=\"manualConfig.smtpSslMode\"\n\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\tname=\"man-smtp-sec\"\n\t\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\t\tvalue=\"none\"\n\t\t\t\t\t\tbutton-variant-grouped=\"horizontal\"\n\t\t\t\t\t\t@update:checked=\"onSmtpSslModeChange\">\n\t\t\t\t\t\t{{ t('mail', 'None') }}\n\t\t\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t\t\t<NcCheckboxRadioSwitch id=\"man-imap-sec-ssl\"\n\t\t\t\t\t\t:button-variant=\"true\"\n\t\t\t\t\t\t:checked=\"manualConfig.smtpSslMode\"\n\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\tname=\"man-smtp-sec\"\n\t\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\t\tvalue=\"ssl\"\n\t\t\t\t\t\tbutton-variant-grouped=\"horizontal\"\n\t\t\t\t\t\t@update:checked=\"onSmtpSslModeChange\">\n\t\t\t\t\t\t{{ t('mail', 'SSL/TLS') }}\n\t\t\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t\t\t<NcCheckboxRadioSwitch id=\"man-imap-sec-tls\"\n\t\t\t\t\t\t:button-variant=\"true\"\n\t\t\t\t\t\t:checked=\"manualConfig.smtpSslMode\"\n\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\tname=\"man-smtp-sec\"\n\t\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\t\tvalue=\"tls\"\n\t\t\t\t\t\tbutton-variant-grouped=\"horizontal\"\n\t\t\t\t\t\t@update:checked=\"onSmtpSslModeChange\">\n\t\t\t\t\t\t{{ t('mail', 'STARTTLS') }}\n\t\t\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t\t</div>\n\t\t\t\t<NcInputField id=\"man-smtp-port\"\n\t\t\t\t\t:label=\"t('mail', 'SMTP Port')\"\n\t\t\t\t\t:value.sync=\"manualConfig.smtpPort\"\n\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t:placeholder=\"t('mail', 'SMTP Port')\"\n\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\trequired\n\t\t\t\t\t@change=\"clearFeedback\" />\n\t\t\t\t<NcInputField id=\"man-smtp-user\"\n\t\t\t\t\t:value.sync=\"manualConfig.smtpUser\"\n\t\t\t\t\t:label=\"t('mail', 'SMTP User')\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t:placeholder=\"t('mail', 'SMTP User')\"\n\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\trequired\n\t\t\t\t\t@change=\"clearFeedback\" />\n\t\t\t\t<NcPasswordField v-if=\"!useOauth\"\n\t\t\t\t\tid=\"man-smtp-password\"\n\t\t\t\t\t:label=\"t('mail', 'SMTP Password')\"\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t:value.sync=\"manualConfig.smtpPassword\"\n\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\trequired\n\t\t\t\t\t@change=\"clearFeedback\" />\n\t\t\t</Tab>\n\t\t</Tabs>\n\t\t<div v-if=\"isGoogleAccount && !googleOauthUrl\" class=\"account-form__google-sso\">\n\t\t\t{{ t('mail', 'For the Google account to work with this app you need to enable two-factor authentication for Google and generate an app password.') }}\n\t\t</div>\n\t\t<div class=\"account-form__submit-buttons\">\n\t\t\t<ButtonVue v-if=\"mode === 'auto'\"\n\t\t\t\t:aria-label=\"submitButtonText\"\n\t\t\t\tclass=\"account-form__submit-button\"\n\t\t\t\ttype=\"primary\"\n\t\t\t\tnative-type=\"submit\"\n\t\t\t\t:disabled=\"isDisabledAuto || loading\"\n\t\t\t\t@click.prevent=\"onSubmit\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<IconLoading v-if=\"loading\" :size=\"20\" />\n\t\t\t\t\t<IconCheck v-else :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t\t{{ submitButtonText }}\n\t\t\t</ButtonVue>\n\t\t\t<ButtonVue v-else-if=\"mode === 'manual'\"\n\t\t\t\t:aria-label=\"submitButtonText\"\n\t\t\t\tclass=\"account-form__submit-button\"\n\t\t\t\ttype=\"primary\"\n\t\t\t\tnative-type=\"submit\"\n\t\t\t\t:disabled=\"isDisabledManual || loading\"\n\t\t\t\t@click.prevent=\"onSubmit\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<IconLoading v-if=\"loading\" :size=\"20\" />\n\t\t\t\t\t<IconCheck v-else :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t\t{{ submitButtonText }}\n\t\t\t</ButtonVue>\n\t\t</div>\n\t\t<div v-if=\"feedback\" class=\"account-form--feedback\">\n\t\t\t{{ feedback }}\n\t\t</div>\n\t</form>\n</template>\n\n<script>\nimport { Tab, Tabs } from 'vue-tabs-component'\nimport { NcButton as ButtonVue, NcLoadingIcon as IconLoading, NcPasswordField, NcInputField, NcCheckboxRadioSwitch } from '@nextcloud/vue'\nimport IconCheck from 'vue-material-design-icons/Check.vue'\nimport { translate as t } from '@nextcloud/l10n'\n\nimport logger from '../logger.js'\nimport {\n\tqueryIspdb,\n\tqueryMx,\n\ttestConnectivity,\n} from '../service/AutoConfigService.js'\nimport { CONSENT_ABORTED, getUserConsent } from '../integration/oauth.js'\nimport useMainStore from '../store/mainStore.js'\nimport { mapStores, mapState } from 'pinia'\n\nexport default {\n\tname: 'AccountForm',\n\tcomponents: {\n\t\tNcPasswordField,\n\t\tNcInputField,\n\t\tNcCheckboxRadioSwitch,\n\t\tTab,\n\t\tTabs,\n\t\tButtonVue,\n\t\tIconLoading,\n\t\tIconCheck,\n\t},\n\tprops: {\n\t\tdisplayName: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\temail: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\taccount: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t},\n\tdata() {\n\t\tconst fromAccountOr = (prop, def) => {\n\t\t\tif (this.account !== undefined) {\n\t\t\t\treturn this.account[prop]\n\t\t\t} else {\n\t\t\t\treturn def\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tloading: false,\n\t\t\tloadingMessage: undefined,\n\t\t\tmode: 'auto',\n\t\t\taccountName: this.displayName,\n\t\t\temailAddress: this.email,\n\t\t\tautoConfig: {\n\t\t\t\tpassword: '',\n\t\t\t},\n\t\t\tmanualConfig: {\n\t\t\t\timapHost: fromAccountOr('imapHost', ''),\n\t\t\t\timapPort: fromAccountOr('imapPort', 993),\n\t\t\t\timapSslMode: fromAccountOr('imapSslMode', 'ssl'),\n\t\t\t\timapUser: fromAccountOr('imapUser', ''),\n\t\t\t\timapPassword: '',\n\t\t\t\tsmtpHost: fromAccountOr('smtpHost', ''),\n\t\t\t\tsmtpPort: fromAccountOr('smtpPort', 587),\n\t\t\t\tsmtpSslMode: fromAccountOr('smtpSslMode', 'tls'),\n\t\t\t\tsmtpUser: fromAccountOr('smtpUser', ''),\n\t\t\t\tsmtpPassword: '',\n\t\t\t},\n\t\t\tfeedback: null,\n\t\t\tpassword: '',\n\t\t}\n\t},\n\tcomputed: {\n\t\t...mapStores(useMainStore),\n\t\t...mapState(useMainStore, [\n\t\t\t'googleOauthUrl',\n\t\t\t'microsoftOauthUrl',\n\t\t]),\n\n\t\tsettingsPage() {\n\t\t\treturn this.account !== undefined\n\t\t},\n\n\t\tisDisabledAuto() {\n\t\t\tif (this.loading) {\n\t\t\t\treturn true\n\t\t\t}\n\n\t\t\tif (this.mode !== 'auto') {\n\t\t\t\treturn this.loading\n\t\t\t}\n\n\t\t\treturn !this.emailAddress || !this.isValidEmail(this.emailAddress)\n\t\t\t\t|| (!this.googleOauthUrl && !this.autoConfig.password)\n\t\t},\n\n\t\tisDisabledManual() {\n\t\t\tif (this.loading) {\n\t\t\t\treturn true\n\t\t\t}\n\n\t\t\tif (this.mode !== 'manual') {\n\t\t\t\treturn this.loading\n\t\t\t}\n\n\t\t\treturn !this.emailAddress || !this.isValidEmail(this.emailAddress)\n\t\t\t\t|| !this.manualConfig.imapHost || !this.manualConfig.imapPort\n\t\t\t\t|| !this.manualConfig.imapUser || (!this.useOauth && !this.manualConfig.imapPassword)\n\t\t\t\t|| !this.manualConfig.smtpHost || !this.manualConfig.smtpPort\n\t\t\t\t|| !this.manualConfig.smtpUser || (!this.useOauth && !this.manualConfig.smtpPassword)\n\t\t},\n\n\t\tisGoogleAccount() {\n\t\t\treturn this.manualConfig.imapHost === 'imap.gmail.com'\n\t\t\t\t|| this.manualConfig.smtpHost === 'smtp.gmail.com'\n\t\t},\n\n\t\tisMicrosoftAccount() {\n\t\t\treturn this.manualConfig.imapHost === 'outlook.office365.com'\n\t\t\t\t|| this.manualConfig.smtpHost === 'outlook.office365.com'\n\t\t},\n\n\t\thasPasswordAlternatives() {\n\t\t\treturn !!this.googleOauthUrl\n\t\t\t\t|| !!this.microsoftOauthUrl\n\t\t},\n\n\t\tuseOauth() {\n\t\t\treturn (this.isGoogleAccount && this.googleOauthUrl)\n\t\t\t\t|| (this.isMicrosoftAccount && this.microsoftOauthUrl)\n\t\t},\n\n\t\tsubmitButtonText() {\n\t\t\tif (this.loading) {\n\t\t\t\treturn this.loadingMessage ?? t('mail', 'Connecting')\n\t\t\t}\n\t\t\tif (this.mode === 'manual' && this.useOauth) {\n\t\t\t\tif (this.isGoogleAccount) {\n\t\t\t\t    return this.account ? t('mail', 'Reconnect Google account') : t('mail', 'Sign in with Google')\n\t\t\t\t} else {\n\t\t\t\t    return this.account ? t('mail', 'Reconnect Microsoft account') : t('mail', 'Sign in with Microsoft')\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this.account ? t('mail', 'Save') : t('mail', 'Connect')\n\t\t},\n\t},\n\tmethods: {\n\t\tonModeChanged(e) {\n\t\t\tthis.mode = e.tab.id\n\n\t\t\tif (this.mode === 'manual') {\n\t\t\t\t// IMAP\n\t\t\t\tif (this.manualConfig.imapUser === '') {\n\t\t\t\t\tthis.manualConfig.imapUser = this.emailAddress\n\t\t\t\t}\n\t\t\t\tif (this.manualConfig.imapPassword === '') {\n\t\t\t\t\tthis.manualConfig.imapPassword = this.autoConfig.password\n\t\t\t\t}\n\n\t\t\t\t// SMTP\n\t\t\t\tif (this.manualConfig.smtpUser === '') {\n\t\t\t\t\tthis.manualConfig.smtpUser = this.emailAddress\n\t\t\t\t}\n\t\t\t\tif (this.manualConfig.smtpPassword === '') {\n\t\t\t\t\tthis.manualConfig.smtpPassword = this.autoConfig.password\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonImapSslModeChange(value) {\n\t\t\tthis.clearFeedback()\n\t\t\tthis.manualConfig.imapSslMode = value\n\t\t\tswitch (this.manualConfig.imapSslMode) {\n\t\t\tcase 'none':\n\t\t\tcase 'tls':\n\t\t\t\tthis.manualConfig.imapPort = 143\n\t\t\t\tbreak\n\t\t\tcase 'ssl':\n\t\t\t\tthis.manualConfig.imapPort = 993\n\t\t\t\tbreak\n\t\t\t}\n\t\t},\n\t\tonSmtpSslModeChange(value) {\n\t\t\tthis.clearFeedback()\n\t\t\tthis.manualConfig.smtpSslMode = value\n\t\t\tswitch (this.manualConfig.smtpSslMode) {\n\t\t\tcase 'none':\n\t\t\tcase 'tls':\n\t\t\t\tthis.manualConfig.smtpPort = 587\n\t\t\t\tbreak\n\t\t\tcase 'ssl':\n\t\t\t\tthis.manualConfig.smtpPort = 465\n\t\t\t\tbreak\n\t\t\t}\n\t\t},\n\t\tclearFeedback() {\n\t\t\tthis.feedback = null\n\t\t},\n\t\tapplyAutoConfig(config) {\n\t\t\tif (!config) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tif (config?.imapConfig) {\n\t\t\t\tthis.manualConfig.imapUser = config.imapConfig.username\n\t\t\t\tthis.manualConfig.imapHost = config.imapConfig.host\n\t\t\t\tthis.manualConfig.imapPort = config.imapConfig.port\n\t\t\t\tthis.manualConfig.imapSslMode = config.imapConfig.security\n\t\t\t\tthis.manualConfig.imapPassword = this.autoConfig.password\n\t\t\t}\n\t\t\tif (config?.smtpConfig) {\n\t\t\t\tthis.manualConfig.smtpUser = config.smtpConfig.username\n\t\t\t\tthis.manualConfig.smtpHost = config.smtpConfig.host\n\t\t\t\tthis.manualConfig.smtpPort = config.smtpConfig.port\n\t\t\t\tthis.manualConfig.smtpSslMode = config.smtpConfig.security\n\t\t\t\tthis.manualConfig.smtpPassword = this.autoConfig.password\n\t\t\t}\n\t\t\treturn true\n\t\t},\n\t\tasync detectConfig() {\n\t\t\tthis.loadingMessage = t('mail', 'Looking up configuration')\n\t\t\tconst config = await queryIspdb(this.emailAddress.split('@').pop(), this.emailAddress)\n\t\t\tlogger.debug('fetched auto config', { config })\n\t\t\t// Apply settings to manual mode before submitting so the user\n\t\t\t// can make modifications if the config fails\n\t\t\tif (this.applyAutoConfig(config)) {\n\t\t\t\tlogger.debug('ISP DB config applied')\n\t\t\t\treturn true\n\t\t\t} else {\n\t\t\t\tconst mxHosts = await queryMx(this.emailAddress)\n\t\t\t\tlogger.debug('MX hosts fetched', { mxHosts })\n\n\t\t\t\tif (mxHosts.length) {\n\t\t\t\t\t// Try the TLD of the MX\n\t\t\t\t\t// FIXME: breaks with eTLDs like .co.uk\n\t\t\t\t\tconst tldMx = mxHosts[0].split('.').splice(-2).join('.').toLowerCase()\n\t\t\t\t\tconst mxConfig = await queryIspdb(\n\t\t\t\t\t\ttldMx,\n\t\t\t\t\t\tthis.emailAddress,\n\t\t\t\t\t)\n\t\t\t\t\tlogger.debug('fetched MX auto config', { mxConfig })\n\t\t\t\t\tif (mxConfig && this.applyAutoConfig(mxConfig)) {\n\t\t\t\t\t\treturn true\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Test the highest priority MX for open IMAP/SMTP ports\n\t\t\t\tthis.loadingMessage = t('mail', 'Checking mail host connectivity')\n\t\t\t\tconst imapAndSmtpHosts = mxHosts.slice(0, 1).flatMap(host => {\n\t\t\t\t\treturn [993, 143, 465, 587].map(port => ({\n\t\t\t\t\t\thost,\n\t\t\t\t\t\tport,\n\t\t\t\t\t}))\n\t\t\t\t})\n\t\t\t\tconst results = await Promise.all(imapAndSmtpHosts.map(async ({ host, port }) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\thost,\n\t\t\t\t\t\tport,\n\t\t\t\t\t\tcanConnect: await testConnectivity(host, port),\n\t\t\t\t\t}\n\t\t\t\t}))\n\t\t\t\tconst firstImapHost = results.filter(({ canConnect, port }) => canConnect && port === 993)[0]\n\t\t\t\tconst firstSmtpHost = results.filter(({ canConnect, port }) => canConnect && [465, 587].includes(port))[0]\n\t\t\t\tlogger.debug('MX connectivity tested', { firstImapHost, firstSmtpHost })\n\t\t\t\tif (firstImapHost && firstSmtpHost) {\n\t\t\t\t\tthis.applyAutoConfig({\n\t\t\t\t\t\timapConfig: {\n\t\t\t\t\t\t\tusername: this.emailAddress, // Assumption\n\t\t\t\t\t\t\thost: firstImapHost.host,\n\t\t\t\t\t\t\tport: firstImapHost.port,\n\t\t\t\t\t\t\tsecurity: firstImapHost.port === 993 ? 'ssl' : 'tls',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsmtpConfig: {\n\t\t\t\t\t\t\tusername: this.emailAddress, // Assumption\n\t\t\t\t\t\t\thost: firstSmtpHost.host,\n\t\t\t\t\t\t\tport: firstSmtpHost.port,\n\t\t\t\t\t\t\tsecurity: firstSmtpHost.port === 465 ? 'ssl' : 'tls',\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t\treturn true\n\t\t\t\t} else {\n\t\t\t\t\tthis.feedback = t('mail', 'Configuration discovery failed. Please use the manual settings')\n\t\t\t\t}\n\t\t\t\treturn false\n\t\t\t}\n\t\t},\n\t\tasync onSubmit(event) {\n\t\t\tlogger.debug('account form submitted', { event })\n\t\t\tif (this.isDisabledManual || this.isDisabledAuto) {\n\t\t\t\tlogger.warn('submit is disabled')\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.clearFeedback()\n\t\t\tthis.loading = true\n\t\t\ttry {\n\t\t\t\tif (this.mode === 'auto') {\n\t\t\t\t\tif (!await this.detectConfig()) {\n\t\t\t\t\t\tlogger.warn('Auto mode failed')\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!this.useOauth) {\n\t\t\t\t\tif (this.mode === 'auto' && this.autoConfig.password === '') {\n\t\t\t\t\t\tthis.feedback = t('mail', 'Password required')\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\tif (this.mode === 'manual' && (this.manualConfig.imapPassword === '' || this.manualConfig.smtpPassword === '')) {\n\t\t\t\t\t\tthis.feedback = t('mail', 'Password required')\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.loadingMessage = t('mail', 'Testing authentication')\n\t\t\t\tconst data = {\n\t\t\t\t\t...this.manualConfig,\n\t\t\t\t\taccountName: this.accountName,\n\t\t\t\t\temailAddress: this.emailAddress,\n\t\t\t\t\timapHost: this.manualConfig.imapHost.trim(),\n\t\t\t\t\tsmtpHost: this.manualConfig.smtpHost.trim(),\n\t\t\t\t\tauthMethod: this.useOauth ? 'xoauth2' : 'password',\n\t\t\t\t}\n\t\t\t\tif (this.useOauth) {\n\t\t\t\t\tdelete data.imapPassword\n\t\t\t\t\tdelete data.smtpPassword\n\t\t\t\t}\n\t\t\t\tif (!this.account) {\n\t\t\t\t\tconst account = await this.mainStore.startAccountSetup(data)\n\t\t\t\t\tif (this.useOauth) {\n\t\t\t\t\t\tthis.loadingMessage = t('mail', 'Awaiting user consent')\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (this.isGoogleAccount) {\n\t\t\t\t\t\t\t\tthis.feedback = t('mail', 'Account created. Please follow the pop-up instructions to link your Google account')\n\t\t\t\t\t\t\t\tawait getUserConsent(\n\t\t\t\t\t\t\t\t\tthis.googleOauthUrl\n\t\t\t\t\t\t\t\t\t\t.replace('_accountId_', account.id)\n\t\t\t\t\t\t\t\t\t\t.replace('_email_', encodeURIComponent(account.emailAddress)),\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.feedback = t('mail', 'Account created. Please follow the pop-up instructions to link your Microsoft account')\n\t\t\t\t\t\t\t\tawait getUserConsent(\n\t\t\t\t\t\t\t\t\tthis.microsoftOauthUrl\n\t\t\t\t\t\t\t\t\t\t.replace('_accountId_', account.id)\n\t\t\t\t\t\t\t\t\t\t.replace('_email_', encodeURIComponent(account.emailAddress)),\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t// Clean up the temporary account before we continue\n\t\t\t\t\t\t\tthis.mainStore.deleteAccount(account)\n\t\t\t\t\t\t\tlogger.info(`Temporary account ${account.id} deleted`)\n\t\t\t\t\t\t\tthrow e\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.clearFeedback()\n\t\t\t\t\t}\n\t\t\t\t\tthis.loadingMessage = t('mail', 'Loading account')\n\t\t\t\t\tawait this.mainStore.finishAccountSetup({ account })\n\t\t\t\t\tthis.$emit('account-created', account)\n\t\t\t\t} else {\n\t\t\t\t\tconst oldAccountData = this.account\n\t\t\t\t\tconst account = await this.mainStore.updateAccount({\n\t\t\t\t\t\t...data,\n\t\t\t\t\t\taccountId: this.account.id,\n\t\t\t\t\t})\n\t\t\t\t\tif (this.useOauth) {\n\t\t\t\t\t\tthis.loadingMessage = t('mail', 'Awaiting user consent')\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (this.isGoogleAccount) {\n\t\t\t\t\t\t\t\tthis.feedback = t('mail', 'Account updated. Please follow the pop-up instructions to reconnect your Google account')\n\t\t\t\t\t\t\t\tawait getUserConsent(\n\t\t\t\t\t\t\t\t\tthis.googleOauthUrl\n\t\t\t\t\t\t\t\t\t\t.replace('_accountId_', account.id)\n\t\t\t\t\t\t\t\t\t\t.replace('_email_', encodeURIComponent(account.emailAddress)),\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.feedback = t('mail', 'Account updated. Please follow the pop-up instructions to reconnect your Microsoft account')\n\t\t\t\t\t\t\t\tawait getUserConsent(\n\t\t\t\t\t\t\t\t\tthis.microsoftOauthUrl\n\t\t\t\t\t\t\t\t\t\t.replace('_accountId_', account.id)\n\t\t\t\t\t\t\t\t\t\t.replace('_email_', encodeURIComponent(account.emailAddress)),\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t// Undo changes\n\t\t\t\t\t\t\tawait this.mainStore.updateAccount({\n\t\t\t\t\t\t\t\t...oldAccountData,\n\t\t\t\t\t\t\t\taccountId: oldAccountData.id,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tlogger.info(`Account ${account.id} update undone`)\n\t\t\t\t\t\t\tthrow e\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.clearFeedback()\n\t\t\t\t\t}\n\t\t\t\t\tthis.feedback = t('mail', 'Account updated')\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('could not save account details', { error })\n\n\t\t\t\tif (error.data?.error === 'CONNECTION_ERROR') {\n\t\t\t\t\tif (error.data.service === 'IMAP') {\n\t\t\t\t\t\tthis.feedback = t('mail', 'IMAP server is not reachable')\n\t\t\t\t\t} else if (error.data.service === 'SMTP') {\n\t\t\t\t\t\tthis.feedback = t('mail', 'SMTP server is not reachable')\n\t\t\t\t\t}\n\t\t\t\t} else if (error.data?.error === 'AUTHENTICATION') {\n\t\t\t\t\tif (error.data.service === 'IMAP') {\n\t\t\t\t\t\tthis.feedback = t('mail', 'IMAP username or password is wrong')\n\t\t\t\t\t} else if (error.data.service === 'SMTP') {\n\t\t\t\t\t\tthis.feedback = t('mail', 'SMTP username or password is wrong')\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (error.data?.service === 'IMAP') {\n\t\t\t\t\t\tthis.feedback = t('mail', 'IMAP connection failed')\n\t\t\t\t\t} else if (error.data?.service === 'SMTP') {\n\t\t\t\t\t\tthis.feedback = t('mail', 'SMTP connection failed')\n\t\t\t\t\t} else if (error.message === CONSENT_ABORTED) {\n\t\t\t\t\t\tthis.feedback = t('mail', 'Authorization pop-up closed')\n\t\t\t\t\t} else if (error.response?.status === 429) {\n\t\t\t\t\t\tthis.feedback = t('mail', 'Configuration discovery temporarily not available. Please try again later.')\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.feedback = t('mail', 'There was an error while setting up your account')\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tthis.loading = false\n\t\t\t\tthis.loadingMessage = undefined\n\t\t\t}\n\t\t},\n\t\tisValidEmail(email) {\n\t\t\tconst regExpEmail = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n\t\t\treturn regExpEmail.test(email)\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n:deep(.tabs-component-tabs) {\n\tdisplay: flex;\n}\n\n:deep(.tabs-component-tab) {\n\tflex-grow: 1;\n\ttext-align: center;\n\tcolor: var(--color-text-lighter);\n\tmargin-bottom: calc(var(--default-grid-baseline) * 2 + var(--default-grid-baseline) / 2);\n}\n\n:deep(.tabs-component-tab.is-active) {\n\tborder-bottom: var(--border-width-input) solid black;\n\tfont-weight: bold;\n}\n\n:deep(.input-field) {\n\tmargin: calc(var(--default-grid-baseline) * 3) 0;\n}\n\n.tabs-component-panels {\n\tpadding-top: calc(var(--default-grid-baseline) * 5);\n}\n\n.tabs-component-panels label {\n\ttext-align: start;\n\twidth: 100%;\n\tdisplay: inline-block;\n}\n\n.tabs-component-panels input,\n.tabs-component-panels select {\n\tmargin-bottom: calc(var(--default-grid-baseline) * 2);\n}\n</style>\n\n<style scoped>\nh4 {\n\ttext-align: start;\n}\n\n.flex-row {\n\tdisplay: flex;\n}\n\ninput.primary {\n\tcolor: var(--color-main-background);\n}\n\ninput[type='radio'] {\n\tdisplay: none;\n}\n\ninput[type='radio'][disabled] + label {\n\tcursor: default;\n\topacity: 0.5;\n}\n\n.account-form__label--required:after {\n\tcontent:\" *\";\n}\n\n.account-form__heading--required:after {\n\tcontent:\" *\";\n}\n\n.account-form__submit-buttons {\n\tdisplay: flex;\n\tjustify-content: center;\n\tmargin-top: var(--default-grid-baseline);\n}\n\n.account-form__submit-button {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.account-form--feedback {\n\tcolor: var(--color-text-maxcontrast);\n\tmargin-top: var(--default-grid-baseline);\n\ttext-align: center;\n}\n\n.account-form--error {\n\ttext-align: start;\n\tfont-size: 14px;\n}\n\n#account-form {\n\tz-index: 1001;\n\twidth: 300px;\n\ttop: 15%;\n\tpadding-bottom: calc(var(--default-grid-baseline) * 12);\n\tmargin: 0 auto;\n\tpadding-top: calc(var(--default-grid-baseline) * 7);\n}\n\n#account-form input {\n\twidth: 100%;\n\tbox-sizing: border-box;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AccountForm.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AccountForm.vue?vue&type=script&lang=js\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AccountForm.vue?vue&type=style&index=0&id=2febbd27&prod&lang=scss&scoped=true\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AccountForm.vue?vue&type=style&index=0&id=2febbd27&prod&lang=scss&scoped=true\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AccountForm.vue?vue&type=style&index=1&id=2febbd27&prod&scoped=true&lang=css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AccountForm.vue?vue&type=style&index=1&id=2febbd27&prod&scoped=true&lang=css\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./AccountForm.vue?vue&type=template&id=2febbd27&scoped=true\"\nimport script from \"./AccountForm.vue?vue&type=script&lang=js\"\nexport * from \"./AccountForm.vue?vue&type=script&lang=js\"\nimport style0 from \"./AccountForm.vue?vue&type=style&index=0&id=2febbd27&prod&lang=scss&scoped=true\"\nimport style1 from \"./AccountForm.vue?vue&type=style&index=1&id=2febbd27&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2febbd27\",\n  null\n  \n)\n\nexport default component.exports","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `[data-v-2febbd27] .tabs-component-tabs{display:flex}[data-v-2febbd27] .tabs-component-tab{flex-grow:1;text-align:center;color:var(--color-text-lighter);margin-bottom:calc(var(--default-grid-baseline)*2 + var(--default-grid-baseline)/2)}[data-v-2febbd27] .tabs-component-tab.is-active{border-bottom:var(--border-width-input) solid #000;font-weight:bold}[data-v-2febbd27] .input-field{margin:calc(var(--default-grid-baseline)*3) 0}.tabs-component-panels[data-v-2febbd27]{padding-top:calc(var(--default-grid-baseline)*5)}.tabs-component-panels label[data-v-2febbd27]{text-align:start;width:100%;display:inline-block}.tabs-component-panels input[data-v-2febbd27],.tabs-component-panels select[data-v-2febbd27]{margin-bottom:calc(var(--default-grid-baseline)*2)}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/AccountForm.vue\"],\"names\":[],\"mappings\":\"AACA,uCACC,YAAA,CAGD,sCACC,WAAA,CACA,iBAAA,CACA,+BAAA,CACA,mFAAA,CAGD,gDACC,kDAAA,CACA,gBAAA,CAGD,+BACC,6CAAA,CAGD,wCACC,gDAAA,CAGD,8CACC,gBAAA,CACA,UAAA,CACA,oBAAA,CAGD,6FAEC,kDAAA\",\"sourcesContent\":[\"\\n:deep(.tabs-component-tabs) {\\n\\tdisplay: flex;\\n}\\n\\n:deep(.tabs-component-tab) {\\n\\tflex-grow: 1;\\n\\ttext-align: center;\\n\\tcolor: var(--color-text-lighter);\\n\\tmargin-bottom: calc(var(--default-grid-baseline) * 2 + var(--default-grid-baseline) / 2);\\n}\\n\\n:deep(.tabs-component-tab.is-active) {\\n\\tborder-bottom: var(--border-width-input) solid black;\\n\\tfont-weight: bold;\\n}\\n\\n:deep(.input-field) {\\n\\tmargin: calc(var(--default-grid-baseline) * 3) 0;\\n}\\n\\n.tabs-component-panels {\\n\\tpadding-top: calc(var(--default-grid-baseline) * 5);\\n}\\n\\n.tabs-component-panels label {\\n\\ttext-align: start;\\n\\twidth: 100%;\\n\\tdisplay: inline-block;\\n}\\n\\n.tabs-component-panels input,\\n.tabs-component-panels select {\\n\\tmargin-bottom: calc(var(--default-grid-baseline) * 2);\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["___CSS_LOADER_EXPORT___","push","module","id","async","queryIspdb","host","email","axios","get","generateUrl","data","testConnectivity","port","CONSENT_ABORTED","getUserConsent","redirectUrl","ssoWindow","window","open","t","focus","Promise","resolve","reject","addEventListener","event","logger","debug","info","windowClosedTimer","setInterval","closed","clearInterval","Error","name","components","NcPasswordField","NcInputField","NcCheckboxRadioSwitch","Tab","Tabs","ButtonVue","IconLoading","IconCheck","props","displayName","type","String","default","account","Object","required","fromAccountOr","prop","def","undefined","loading","loadingMessage","mode","accountName","emailAddress","autoConfig","password","manualConfig","imapHost","imapPort","imapSslMode","imapUser","imapPassword","smtpHost","smtpPort","smtpSslMode","smtpUser","smtpPassword","feedback","computed","mapStores","useMainStore","mapState","settingsPage","isDisabledAuto","isValidEmail","googleOauthUrl","isDisabledManual","useOauth","isGoogleAccount","isMicrosoftAccount","hasPasswordAlternatives","microsoftOauthUrl","submitButtonText","methods","onModeChanged","e","tab","onImapSslModeChange","value","clearFeedback","onSmtpSslModeChange","applyAutoConfig","config","imapConfig","username","security","smtpConfig","detectConfig","split","pop","mxHosts","queryMx","length","tldMx","splice","join","toLowerCase","mxConfig","imapAndSmtpHosts","slice","flatMap","map","results","all","_ref","canConnect","firstImapHost","filter","_ref2","firstSmtpHost","_ref3","includes","onSubmit","warn","trim","authMethod","oldAccountData","mainStore","updateAccount","accountId","replace","encodeURIComponent","startAccountSetup","deleteAccount","finishAccountSetup","$emit","error","service","message","response","status","test","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","locals","_vm","this","_c","_self","attrs","on","$event","preventDefault","apply","arguments","useUrlFragment","defaultTabHash","key","_v","_e","staticClass","_s","$set","ref","scopedSlots","_u","fn","proxy"],"sourceRoot":""}