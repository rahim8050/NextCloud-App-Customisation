(self.webpackChunknextcloud_mail=self.webpackChunknextcloud_mail||[]).push([[730],{3372:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" id="mdi-cancel" viewBox="0 0 24 24"><path d="M12 2C17.5 2 22 6.5 22 12S17.5 22 12 22 2 17.5 2 12 6.5 2 12 2M12 4C10.1 4 8.4 4.6 7.1 5.7L18.3 16.9C19.3 15.5 20 13.8 20 12C20 7.6 16.4 4 12 4M16.9 18.3L5.7 7.1C4.6 8.4 4 10.1 4 12C4 16.4 7.6 20 12 20C13.9 20 15.6 19.4 16.9 18.3Z"></path></svg>'},9996:(t,e,a)=>{"use strict";a.d(e,{A:()=>r});var n=a(71354),i=a.n(n),s=a(76314),o=a.n(s)()(i());o.push([t.id,".primary[data-v-f01a820c]{padding-inline-start:26px;background-position:6px;color:var(--color-main-background)}.primary[data-v-f01a820c]:after{inset-inline-start:14px}.button-text[data-v-f01a820c]{background-color:rgba(0,0,0,0);border:none;color:var(--color-text-maxcontrast);font-weight:normal}.button-text[data-v-f01a820c]:hover,.button-text[data-v-f01a820c]:focus{color:var(--color-main-text)}.aliases-controls[data-v-f01a820c]{display:flex}input[data-v-f01a820c]{width:195px}.button-vue[data-v-f01a820c] {display:inline-block !important;margin-top:4px !important}","",{version:3,sources:["webpack://./src/components/AliasSettings.vue"],names:[],mappings:"AACA,0BACC,yBAAA,CACA,uBAAA,CACA,kCAAA,CAEA,gCACC,uBAAA,CAIF,8BACC,8BAAA,CACA,WAAA,CACA,mCAAA,CACA,kBAAA,CAEA,wEAEC,4BAAA,CAIF,mCACC,YAAA,CAGD,uBACC,WAAA,CAGD,8BACC,+BAAA,CACA,yBAAA",sourcesContent:["\n.primary {\n\tpadding-inline-start: 26px;\n\tbackground-position: 6px;\n\tcolor: var(--color-main-background);\n\n\t&:after {\n\t\tinset-inline-start: 14px;\n\t}\n}\n\n.button-text {\n\tbackground-color: transparent;\n\tborder: none;\n\tcolor: var(--color-text-maxcontrast);\n\tfont-weight: normal;\n\n\t&:hover,\n\t&:focus {\n\t\tcolor: var(--color-main-text);\n\t}\n}\n\n.aliases-controls {\n\tdisplay: flex;\n}\n\ninput {\n\twidth: 195px;\n}\n\n.button-vue:deep() {\n\tdisplay: inline-block !important;\n\tmargin-top: 4px !important;\n}\n"],sourceRoot:""}]);const r=o},12016:(t,e,a)=>{"use strict";a.d(e,{A:()=>r});var n=a(71354),i=a.n(n),s=a(76314),o=a.n(s)()(i());o.push([t.id,".section[data-v-109c3bf0]{display:block;padding:0;margin-bottom:23px}textarea[data-v-109c3bf0]{width:100%;resize:vertical}.primary[data-v-109c3bf0]{padding-inline-start:26px;background-position:6px;color:var(--color-main-background)}.primary[data-v-109c3bf0]:after{inset-inline-start:14px}","",{version:3,sources:["webpack://./src/components/SieveFilterForm.vue"],names:[],mappings:"AACA,0BACC,aAAA,CACA,SAAA,CACA,kBAAA,CAGD,0BACC,UAAA,CACA,eAAA,CAGD,0BACC,yBAAA,CACA,uBAAA,CACA,kCAAA,CAEA,gCACE,uBAAA",sourcesContent:["\n.section {\n\tdisplay: block;\n\tpadding: 0;\n\tmargin-bottom: 23px;\n}\n\ntextarea {\n\twidth: 100%;\n\tresize: vertical;\n}\n\n.primary {\n\tpadding-inline-start: 26px;\n\tbackground-position: 6px;\n\tcolor: var(--color-main-background);\n\n\t&:after {\n\t\t inset-inline-start: 14px;\n\t }\n}\n"],sourceRoot:""}]);const r=o},23719:(t,e,a)=>{"use strict";a.d(e,{A:()=>r});var n=a(71354),i=a.n(n),s=a(76314),o=a.n(s)()(i());o.push([t.id,".form[data-v-f02a130c]{display:flex;flex-direction:column;gap:15px}.form__fieldset[data-v-f02a130c]{display:flex;flex-direction:column}.form__fieldset__label[data-v-f02a130c]{display:flex;align-items:center;gap:5px}.form__fieldset__input[data-v-f02a130c]{flex:1 auto}.form__fieldset__description[data-v-f02a130c]{color:var(--color-text-maxcontrast)}.form__multi-row[data-v-f02a130c]{display:flex;align-items:end;gap:15px}.form #ooo-enable-last-day[data-v-f02a130c]{cursor:pointer;min-height:unset}.form #ooo-subject[data-v-f02a130c]{width:100%}.form #ooo-message[data-v-f02a130c]{width:100%;min-height:100px;border:1px solid var(--color-border)}.form #ooo-message[data-v-f02a130c]:active,.form #ooo-message[data-v-f02a130c]:focus,.form #ooo-message[data-v-f02a130c]:hover{border-color:var(--color-primary-element) !important}","",{version:3,sources:["webpack://./src/components/OutOfOfficeForm.vue"],names:[],mappings:"AACA,uBACC,YAAA,CACA,qBAAA,CACA,QAAA,CAEA,iCACC,YAAA,CACA,qBAAA,CAEA,wCACC,YAAA,CACA,kBAAA,CACA,OAAA,CAGD,wCACC,WAAA,CAGD,8CACC,mCAAA,CAIF,kCACC,YAAA,CACA,eAAA,CACA,QAAA,CAGD,4CACC,cAAA,CACA,gBAAA,CAGD,oCACC,UAAA,CAGD,oCACC,UAAA,CACA,gBAAA,CACA,oCAAA,CAEA,+HAGC,oDAAA",sourcesContent:["\n.form {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 15px;\n\n\t&__fieldset {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\n\t\t&__label {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tgap: 5px;\n\t\t}\n\n\t\t&__input {\n\t\t\tflex: 1 auto;\n\t\t}\n\n\t\t&__description {\n\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t}\n\t}\n\n\t&__multi-row {\n\t\tdisplay: flex;\n\t\talign-items: end;\n\t\tgap: 15px;\n\t}\n\n\t#ooo-enable-last-day {\n\t\tcursor: pointer;\n\t\tmin-height: unset;\n\t}\n\n\t#ooo-subject {\n\t\twidth: 100%;\n\t}\n\n\t#ooo-message {\n\t\twidth: 100%;\n\t\tmin-height: 100px;\n\t\tborder: 1px solid var(--color-border);\n\n\t\t&:active,\n\t\t&:focus,\n\t\t&:hover {\n\t\t\tborder-color: var(--color-primary-element) !important;\n\t\t}\n\t}\n}\n"],sourceRoot:""}]);const r=o},30559:(t,e,a)=>{"use strict";a.d(e,{A:()=>r});var n=a(71354),i=a.n(n),s=a(76314),o=a.n(s)()(i());o.push([t.id,".certificate-settings__alias[data-v-4606a3c2],.certificate-settings__certificate[data-v-4606a3c2]{width:100%}.certificate-settings__alias+.certificate-settings__certificate[data-v-4606a3c2]{margin-top:5px}.certificate-settings__submit[data-v-4606a3c2]{margin-top:1rem}","",{version:3,sources:["webpack://./src/components/CertificateSettings.vue"],names:[],mappings:"AAEC,kGAEC,UAAA,CAGD,iFACC,cAAA,CAGD,+CACC,eAAA",sourcesContent:["\n.certificate-settings {\n\t&__alias,\n\t&__certificate {\n\t\twidth: 100%;\n\t}\n\n\t&__alias + &__certificate {\n\t\tmargin-top: 5px\n\t}\n\n\t&__submit {\n\t\tmargin-top: 1rem;\n\t}\n}\n"],sourceRoot:""}]);const r=o},37545:(t,e,a)=>{"use strict";a.d(e,{A:()=>r});var n=a(71354),i=a.n(n),s=a(76314),o=a.n(s)()(i());o.push([t.id,".section[data-v-3d81abd4]{display:block;padding:0;margin-bottom:23px}textarea[data-v-3d81abd4]{width:100%}.primary[data-v-3d81abd4]{padding-inline-start:26px;background-position:6px;color:var(--color-main-background)}.primary[data-v-3d81abd4]:after{inset-inline-start:14px}.filter-list__loading[data-v-3d81abd4]{text-align:center}","",{version:3,sources:["webpack://./src/components/mailFilter/MailFilters.vue"],names:[],mappings:"AACA,0BACC,aAAA,CACA,SAAA,CACA,kBAAA,CAGD,0BACC,UAAA,CAGD,0BACC,yBAAA,CACA,uBAAA,CACA,kCAAA,CAEA,gCACE,uBAAA,CAIH,uCACC,iBAAA",sourcesContent:["\n.section {\n\tdisplay: block;\n\tpadding: 0;\n\tmargin-bottom: 23px;\n}\n\ntextarea {\n\twidth: 100%;\n}\n\n.primary {\n\tpadding-inline-start: 26px;\n\tbackground-position: 6px;\n\tcolor: var(--color-main-background);\n\n\t&:after {\n\t\t inset-inline-start: 14px;\n\t }\n}\n\n.filter-list__loading {\n\ttext-align: center;\n}\n"],sourceRoot:""}]);const r=o},42991:(t,e,a)=>{"use strict";a.d(e,{A:()=>r});var n=a(71354),i=a.n(n),s=a(76314),o=a.n(s)()(i());o.push([t.id,"label[data-v-f444f42a]{padding-inline-end:12px}","",{version:3,sources:["webpack://./src/components/EditorSettings.vue"],names:[],mappings:"AAEA,uBACC,uBAAA",sourcesContent:["\n\nlabel {\n\tpadding-inline-end: 12px;\n}\n"],sourceRoot:""}]);const r=o},51287:(t,e,a)=>{"use strict";a.d(e,{A:()=>r});var n=a(71354),i=a.n(n),s=a(76314),o=a.n(s)()(i());o.push([t.id,".button.icon-rename[data-v-e9c7f780]{background-color:rgba(0,0,0,0);border:none;opacity:.3}.button.icon-rename[data-v-e9c7f780]:hover,.button.icon-rename[data-v-e9c7f780]:focus{opacity:1}","",{version:3,sources:["webpack://./src/components/AccountDefaultsSettings.vue"],names:[],mappings:"AACA,qCACC,8BAAA,CACA,WAAA,CACA,UAAA,CAEA,sFAEC,SAAA",sourcesContent:["\n.button.icon-rename {\n\tbackground-color: transparent;\n\tborder: none;\n\topacity: 0.3;\n\n\t&:hover,\n\t&:focus {\n\t\topacity: 1;\n\t}\n}\n"],sourceRoot:""}]);const r=o},51610:(t,e,a)=>{"use strict";a.d(e,{A:()=>r});var n=a(71354),i=a.n(n),s=a(76314),o=a.n(s)()(i());o.push([t.id,"\nform[data-v-1ea70ac4] {\n\twidth: 300px\n}\nlabel[data-v-1ea70ac4] {\n\tdisplay: inline-block;\n}\ninput[data-v-1ea70ac4] {\n\twidth: 100%;\n}\n.flex-row[data-v-1ea70ac4] {\n\tdisplay: flex;\n\tgap: var(--default-grid-baseline);\n\tmargin-bottom: calc(var(--default-grid-baseline) * 4);\n}\n.custom[data-v-1ea70ac4] {\n\tmargin-bottom: calc(var(--default-grid-baseline) * 4);\n}\ninput[type='radio'][data-v-1ea70ac4] {\n\tdisplay: none;\n}\n","",{version:3,sources:["webpack://./src/components/SieveAccountForm.vue"],names:[],mappings:";AA8IA;CACA;AACA;AAEA;CACA,qBAAA;AACA;AAEA;CACA,WAAA;AACA;AAEA;CACA,aAAA;CACA,iCAAA;CACA,qDAAA;AACA;AAEA;CACA,qDAAA;AACA;AAEA;CACA,aAAA;AACA",sourcesContent:["\x3c!--\n  - SPDX-FileCopyrightText: 2021 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n--\x3e\n<template>\n\t<form id=\"sieve-form\">\n\t\t<p>\n\t\t\t{{ t('mail', 'Sieve is a powerful language for writing filters for your mailbox. You can manage the sieve scripts in Mail if your email service supports it. Sieve is also required to use Autoresponder and Filters.') }}\n\t\t</p>\n\t\t<p>\n\t\t\t<NcCheckboxRadioSwitch :checked.sync=\"sieveConfig.sieveEnabled\">\n\t\t\t\t{{ t('mail', 'Enable sieve filter') }}\n\t\t\t</NcCheckboxRadioSwitch>\n\t\t</p>\n\t\t<div v-if=\"sieveConfig.sieveEnabled\">\n\t\t\t<NcTextField :label=\"t('mail', 'Sieve host')\" :value.sync=\"sieveConfig.sieveHost\" />\n\t\t\t<h4>{{ t('mail', 'Sieve security') }}</h4>\n\t\t\t<div class=\"flex-row\">\n\t\t\t\t<ButtonVue :pressed=\"sieveConfig.sieveSslMode === 'none'\"\n\t\t\t\t\t@click=\"updateSslMode('none')\">\n\t\t\t\t\t{{ t('mail', 'None') }}\n\t\t\t\t</ButtonVue>\n\t\t\t\t<ButtonVue :pressed=\"sieveConfig.sieveSslMode === 'ssl'\"\n\t\t\t\t\t@click=\"updateSslMode('ssl')\">\n\t\t\t\t\t{{ t('mail', 'SSL/TLS') }}\n\t\t\t\t</ButtonVue>\n\t\t\t\t<ButtonVue :pressed=\"sieveConfig.sieveSslMode === 'tls'\"\n\t\t\t\t\t@click=\"updateSslMode('tls')\">\n\t\t\t\t\t{{ t('mail', 'STARTTLS') }}\n\t\t\t\t</ButtonVue>\n\t\t\t</div>\n\t\t\t<NcTextField :label=\"t('mail', 'Sieve Port')\" :value.sync=\"sieveConfig.sievePort\" />\n\t\t\t<h4>{{ t('mail', 'Sieve credentials') }}</h4>\n\t\t\t<div class=\"flex-row\">\n\t\t\t\t<ButtonVue :pressed=\"useImapCredentials\"\n\t\t\t\t\t@click=\"updateCredentials(true)\">\n\t\t\t\t\t{{ t('mail', 'IMAP credentials') }}\n\t\t\t\t</ButtonVue>\n\t\t\t\t<ButtonVue :pressed=\"!useImapCredentials\"\n\t\t\t\t\t@click=\"updateCredentials(false)\">\n\t\t\t\t\t{{ t('mail', 'Custom') }}\n\t\t\t\t</ButtonVue>\n\t\t\t</div>\n\t\t\t<p v-if=\"!useImapCredentials\" class=\"custom\">\n\t\t\t\t<NcTextField :label=\"t('mail', 'Sieve User')\" :value.sync=\"sieveConfig.sieveUser\" />\n\t\t\t\t<NcPasswordField :label=\"t('mail', 'Sieve Password')\" :value.sync=\"sieveConfig.sievePassword\" />\n\t\t\t</p>\n\t\t</div>\n\t\t<slot name=\"feedback\" />\n\t\t<p v-if=\"errorMessage\">\n\t\t\t{{ t('mail', 'Oh snap!') }}\n\t\t\t{{ errorMessage }}\n\t\t</p>\n\t\t<ButtonVue type=\"primary\"\n\t\t\t:disabled=\"loading\"\n\t\t\t:aria-label=\"t('mail', 'Save sieve settings')\"\n\t\t\t@click.prevent=\"onSubmit\">\n\t\t\t{{ t('mail', 'Save sieve settings') }}\n\t\t</ButtonVue>\n\t</form>\n</template>\n\n<script>\nimport { NcButton as ButtonVue, NcTextField, NcPasswordField, NcCheckboxRadioSwitch } from '@nextcloud/vue'\nimport useMainStore from '../store/mainStore.js'\nimport { mapStores } from 'pinia'\n\nexport default {\n\tname: 'SieveAccountForm',\n\tcomponents: {\n\t\tButtonVue,\n\t\tNcTextField,\n\t\tNcPasswordField,\n\t\tNcCheckboxRadioSwitch,\n\t},\n\tprops: {\n\t\taccount: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tsieveConfig: {\n\t\t\t\tsieveEnabled: this.account.sieveEnabled,\n\t\t\t\tsieveHost: this.account.sieveHost || this.account.imapHost,\n\t\t\t\tsievePort: this.account.sievePort || 4190,\n\t\t\t\tsieveUser: this.account.sieveUser || '',\n\t\t\t\tsievePassword: '',\n\t\t\t\tsieveSslMode: this.account.sieveSslMode || 'tls',\n\t\t\t},\n\t\t\tloading: false,\n\t\t\tuseImapCredentials: !this.account.sieveUser,\n\t\t\terrorMessage: '',\n\t\t}\n\t},\n\tcomputed: {\n\t\t...mapStores(useMainStore),\n\t},\n\tmethods: {\n\t\tupdateSslMode(value) {\n\t\t\tthis.sieveConfig.sieveSslMode = value\n\t\t},\n\t\tupdateCredentials(value) {\n\t\t\tthis.useImapCredentials = value\n\t\t},\n\t\tasync onSubmit() {\n\t\t\tthis.loading = true\n\t\t\tthis.errorMessage = ''\n\n\t\t\t// empty user and password => use imap credentials\n\t\t\tif (this.sieveConfig.sieveUser === '' && this.sieveConfig.sievePassword === '') {\n\t\t\t\tthis.useImapCredentials = true\n\t\t\t}\n\n\t\t\t// clear user and password if imap credentials are used\n\t\t\tif (this.useImapCredentials) {\n\t\t\t\tthis.sieveConfig.sieveUser = ''\n\t\t\t\tthis.sieveConfig.sievePassword = ''\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tawait this.mainStore.updateSieveAccount({\n\t\t\t\t\taccount: this.account,\n\t\t\t\t\tdata: this.sieveConfig,\n\t\t\t\t})\n\t\t\t\tif (this.sieveConfig.sieveEnabled) {\n\t\t\t\t\tawait this.mainStore.fetchActiveSieveScript({\n\t\t\t\t\t\taccountId: this.account.id,\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tthis.errorMessage = error.message\n\t\t\t}\n\n\t\t\tthis.loading = false\n\t\t},\n\t},\n}\n<\/script>\n\n<style scoped>\nform {\n\twidth: 300px\n}\n\nlabel {\n\tdisplay: inline-block;\n}\n\ninput {\n\twidth: 100%;\n}\n\n.flex-row {\n\tdisplay: flex;\n\tgap: var(--default-grid-baseline);\n\tmargin-bottom: calc(var(--default-grid-baseline) * 4);\n}\n\n.custom {\n\tmargin-bottom: calc(var(--default-grid-baseline) * 4);\n}\n\ninput[type='radio'] {\n\tdisplay: none;\n}\n</style>\n"],sourceRoot:""}]);const r=o},60609:(t,e,a)=>{"use strict";a.d(e,{A:()=>r});var n=a(71354),i=a.n(n),s=a(76314),o=a.n(s)()(i());o.push([t.id,"label[data-v-3fbf8014]{padding-inline-end:12px}div[data-v-3fbf8014]{display:flex;align-items:center}","",{version:3,sources:["webpack://./src/components/SearchSettings.vue"],names:[],mappings:"AAEA,uBACC,uBAAA,CAGD,qBACC,YAAA,CACA,kBAAA",sourcesContent:["\n\nlabel {\n\tpadding-inline-end: 12px;\n}\n\ndiv{\n\tdisplay: flex;\n\talign-items: center;\n}\n"],sourceRoot:""}]);const r=o},63668:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" id="mdi-check" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg>'},67421:(t,e,a)=>{"use strict";a.d(e,{A:()=>r});var n=a(71354),i=a.n(n),s=a(76314),o=a.n(s)()(i());o.push([t.id,".alias-item[data-v-359eea41]{display:flex;justify-content:space-between}.button.icon-rename[data-v-359eea41]{background-image:var(--icon-rename-000);background-color:var(--color-main-background);border:none;opacity:.7}.button.icon-rename[data-v-359eea41]:hover,.button.icon-rename[data-v-359eea41]:focus{opacity:1}.settings-hint[data-v-359eea41]{margin-top:calc(var(--default-grid-baseline)*-3);margin-bottom:calc(var(--default-grid-baseline)*2);color:var(--color-text-maxcontrast)}h2[data-v-359eea41]{font-weight:bold;font-size:20px;margin-bottom:calc(var(--default-grid-baseline)*3);margin-inline-start:calc(var(--default-grid-baseline)*-7);line-height:calc(var(--default-grid-baseline)*7);color:var(--color-text-light)}.app-settings-section[data-v-359eea41]{margin-bottom:calc(var(--default-grid-baseline)*12)}","",{version:3,sources:["webpack://./src/components/AccountSettings.vue"],names:[],mappings:"AACA,6BACC,YAAA,CACA,6BAAA,CAGD,qCACC,uCAAA,CACA,6CAAA,CACA,WAAA,CACA,UAAA,CACA,sFAEC,SAAA,CAIF,gCACC,gDAAA,CACA,kDAAA,CACA,mCAAA,CAGD,oBACC,gBAAA,CACA,cAAA,CACA,kDAAA,CACA,yDAAA,CACA,gDAAA,CACA,6BAAA,CAGD,uCACC,mDAAA",sourcesContent:["\n.alias-item {\n\tdisplay: flex;\n\tjustify-content: space-between;\n}\n\n.button.icon-rename {\n\tbackground-image: var(--icon-rename-000);\n\tbackground-color: var(--color-main-background);\n\tborder: none;\n\topacity: 0.7;\n\t&:hover,\n\t&:focus {\n\t\topacity: 1;\n\t}\n}\n\n.settings-hint {\n\tmargin-top: calc(var(--default-grid-baseline) * -3);\n\tmargin-bottom: calc(var(--default-grid-baseline) * 2);\n\tcolor: var(--color-text-maxcontrast);\n}\n\nh2 {\n\tfont-weight: bold;\n\tfont-size: 20px;\n\tmargin-bottom: calc(var(--default-grid-baseline) * 3);\n\tmargin-inline-start: calc(var(--default-grid-baseline) * -7);\n\tline-height: calc(var(--default-grid-baseline) * 7);\n\tcolor: var(--color-text-light);\n}\n\n.app-settings-section {\n\tmargin-bottom: calc(var(--default-grid-baseline) * 12);\n}\n"],sourceRoot:""}]);const r=o},73959:(e,a,n)=>{"use strict";n.r(a),n.d(a,{default:()=>$t});var i=n(51432),s=n(85745),o=n(49519),r=n(51849);const l={name:"EditorSettings",props:{account:{type:Object,required:!0}},data(){return{mode:this.account.editorMode}},computed:{...(0,r.n2)(o.A)},watch:{mode(t,e){this.mainStore.patchAccount({account:this.account,data:{editorMode:t}}).then((()=>{s.A.info("editor mode updated")})).catch((t=>{throw s.A.error("could not update editor mode",{error:t}),this.editorMode=e,t}))}}};var c=n(85072),d=n.n(c),u=n(97825),A=n.n(u),m=n(77659),p=n.n(m),v=n(55056),h=n.n(v),f=n(10540),g=n.n(f),b=n(41113),C=n.n(b),y=n(42991),_={};_.styleTagTransform=C(),_.setAttributes=h(),_.insert=p().bind(null,"head"),_.domAPI=A(),_.insertStyleElement=g(),d()(y.A,_),y.A&&y.A.locals&&y.A.locals;var x=n(14486);const S=(0,x.A)(l,(function(){var t=this,e=t._self._c;return e("div",[e("p",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.mode,expression:"mode"}],staticClass:"radio",attrs:{id:"plaintext",type:"radio",value:"plaintext"},domProps:{checked:t._q(t.mode,"plaintext")},on:{change:function(e){t.mode="plaintext"}}}),t._v(" "),e("label",{class:{primary:"plaintext"===t.mode},attrs:{for:"plaintext"}},[t._v("\n\t\t\t"+t._s(t.t("mail","Plain text"))+"\n\t\t")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.mode,expression:"mode"}],staticClass:"radio",attrs:{id:"richtext",type:"radio",value:"richtext"},domProps:{checked:t._q(t.mode,"richtext")},on:{change:function(e){t.mode="richtext"}}}),t._v(" "),e("label",{class:{primary:"richtext"===t.mode},attrs:{for:"richtext"}},[t._v("\n\t\t\t"+t._s(t.t("mail","Rich text"))+"\n\t\t")])])])}),[],!1,null,"f444f42a",null).exports,w={name:"AccountDefaultsSettings",components:{MailboxInlinePicker:n(18139).A},props:{account:{type:Object,required:!0}},data:()=>({saving:!1}),computed:{...(0,r.n2)(o.A),draftsMailbox:{get(){const t=this.mainStore.getMailbox(this.account.draftsMailboxId);if(t)return t.databaseId},async set(t){s.A.debug("setting drafts folder to "+t),this.saving=!0;try{await this.mainStore.patchAccount({account:this.account,data:{draftsMailboxId:t}})}catch(t){s.A.error("could not set drafts folder",{error:t})}finally{this.saving=!1}}},sentMailbox:{get(){const t=this.mainStore.getMailbox(this.account.sentMailboxId);if(t)return t.databaseId},async set(t){s.A.debug("setting sent folder to "+t),this.saving=!0;try{await this.mainStore.patchAccount({account:this.account,data:{sentMailboxId:t}})}catch(t){s.A.error("could not set sent folder",{error:t})}finally{this.saving=!1}}},trashMailbox:{get(){const t=this.mainStore.getMailbox(this.account.trashMailboxId);if(t)return t.databaseId},async set(t){s.A.debug("setting trash folder to "+t),this.saving=!0;try{await this.mainStore.patchAccount({account:this.account,data:{trashMailboxId:t}})}catch(t){s.A.error("could not set trash folder",{error:t})}finally{this.saving=!1}}},archiveMailbox:{get(){const t=this.mainStore.getMailbox(this.account.archiveMailboxId);if(t)return t.databaseId},async set(t){s.A.debug("setting archive folder to "+t),this.saving=!0;try{await this.mainStore.patchAccount({account:this.account,data:{archiveMailboxId:t}})}catch(t){s.A.error("could not set archive folder",{error:t})}finally{this.saving=!1}}},junkMailbox:{get(){const t=this.mainStore.getMailbox(this.account.junkMailboxId);if(t)return t.databaseId},async set(t){s.A.debug("setting junk folder to "+t),this.saving=!0;try{await this.mainStore.patchAccount({account:this.account,data:{junkMailboxId:t}})}catch(t){s.A.error("could not set junk folder",{error:t})}finally{this.saving=!1}}},snoozeMailbox:{get(){const t=this.mainStore.getMailbox(this.account.snoozeMailboxId);if(t)return t.databaseId},async set(t){s.A.debug("setting snooze folder to "+t),this.saving=!0;try{await this.mainStore.patchAccount({account:this.account,data:{snoozeMailboxId:t}})}catch(t){s.A.error("could not set snooze folder",{error:t})}finally{this.saving=!1}}}}};var k=n(51287),D={};D.styleTagTransform=C(),D.setAttributes=h(),D.insert=p().bind(null,"head"),D.domAPI=A(),D.insertStyleElement=g(),d()(k.A,D),k.A&&k.A.locals&&k.A.locals;const I=(0,x.A)(w,(function(){var t=this,e=t._self._c;return e("div",[e("p",[t._v("\n\t\t"+t._s(t.t("mail","Drafts are saved in:"))+"\n\t")]),t._v(" "),e("MailboxInlinePicker",{attrs:{account:t.account,disabled:t.saving},model:{value:t.draftsMailbox,callback:function(e){t.draftsMailbox=e},expression:"draftsMailbox"}}),t._v(" "),e("p",[t._v("\n\t\t"+t._s(t.t("mail","Sent messages are saved in:"))+"\n\t")]),t._v(" "),e("MailboxInlinePicker",{attrs:{account:t.account,disabled:t.saving},model:{value:t.sentMailbox,callback:function(e){t.sentMailbox=e},expression:"sentMailbox"}}),t._v(" "),e("p",[t._v("\n\t\t"+t._s(t.t("mail","Deleted messages are moved in:"))+"\n\t")]),t._v(" "),e("MailboxInlinePicker",{attrs:{account:t.account,disabled:t.saving},model:{value:t.trashMailbox,callback:function(e){t.trashMailbox=e},expression:"trashMailbox"}}),t._v(" "),e("p",[t._v("\n\t\t"+t._s(t.t("mail","Archived messages are moved in:"))+"\n\t")]),t._v(" "),e("MailboxInlinePicker",{attrs:{account:t.account,disabled:t.saving},model:{value:t.archiveMailbox,callback:function(e){t.archiveMailbox=e},expression:"archiveMailbox"}}),t._v(" "),e("p",[t._v("\n\t\t"+t._s(t.t("mail","Snoozed messages are moved in:"))+"\n\t")]),t._v(" "),e("MailboxInlinePicker",{attrs:{account:t.account,disabled:t.saving},model:{value:t.snoozeMailbox,callback:function(e){t.snoozeMailbox=e},expression:"snoozeMailbox"}}),t._v(" "),e("p",[t._v("\n\t\t"+t._s(t.t("mail","Junk messages are saved in:"))+"\n\t")]),t._v(" "),e("MailboxInlinePicker",{attrs:{account:t.account,disabled:t.saving},model:{value:t.junkMailbox,callback:function(e){t.junkMailbox=e},expression:"junkMailbox"}})],1)}),[],!1,null,"e9c7f780",null).exports;var M=n(70791),B=n(18446),F=n(27380),N=n(18075),E=n(90629);const O={name:"SignatureSettings",components:{TextEditor:M.A,NcSelect:N.EQ,ButtonVue:N.x1,IconLoading:N.ne,IconCheck:E.A},props:{account:{type:Object,required:!0}},data(){return{loading:!1,bus:(0,F.A)(),identity:null,signature:"",signatureAboveQuote:this.account.signatureAboveQuote}},computed:{...(0,r.n2)(o.A),identities(){const t=this.account.aliases.map((t=>({id:t.id,label:t.name+" ("+t.alias+")",signature:t.signature})));return t.unshift({id:-1,label:this.account.name+" ("+this.account.emailAddress+")",signature:this.account.signature}),t},isLargeSignature(){return new Blob([this.signature]).size>2097152}},watch:{async signatureAboveQuote(t,e){try{await this.mainStore.patchAccount({account:this.account,data:{signatureAboveQuote:t}}),s.A.debug("signature above quoted updated to "+t)}catch(t){s.A.error("could not update signature above quote",{e:t}),this.signatureAboveQuote=e}}},beforeMount(){this.changeIdentity(this.identities[0])},methods:{changeIdentity(t){s.A.debug("select identity",{identity:t}),this.identity=t,this.signature=t.signature?(0,B.Vw)((0,B.o0)(t.signature)).value:""},async deleteSignature(){this.signature=null,await this.saveSignature()},async saveSignature(){this.loading=!0;const t={account:this.account,signature:this.signature};return this.identity.id>-1?(t.aliasId=this.identity.id,this.mainStore.updateAliasSignature(t).then((()=>{s.A.info("signature updated"),this.loading=!1})).catch((t=>{throw s.A.error("could not update account signature",{error:t}),t}))):this.mainStore.updateAccountSignature(t).then((()=>{s.A.info("signature updated"),this.loading=!1})).catch((t=>{throw s.A.error("could not update account signature",{error:t}),t}))},handleShowToolbar(t){this.$emit("show-toolbar",t)}}};var P=n(83407),T={};T.styleTagTransform=C(),T.setAttributes=h(),T.insert=p().bind(null,"head"),T.domAPI=A(),T.insertStyleElement=g(),d()(P.A,T),P.A&&P.A.locals&&P.A.locals;const L=(0,x.A)(O,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"section"},[e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.signatureAboveQuote,expression:"signatureAboveQuote"}],staticClass:"checkbox",attrs:{id:"signature-above-quote-toggle",type:"checkbox"},domProps:{checked:Array.isArray(t.signatureAboveQuote)?t._i(t.signatureAboveQuote,null)>-1:t.signatureAboveQuote},on:{change:function(e){var a=t.signatureAboveQuote,n=e.target,i=!!n.checked;if(Array.isArray(a)){var s=t._i(a,null);n.checked?s<0&&(t.signatureAboveQuote=a.concat([null])):s>-1&&(t.signatureAboveQuote=a.slice(0,s).concat(a.slice(s+1)))}else t.signatureAboveQuote=i}}}),t._v(" "),e("label",{attrs:{for:"signature-above-quote-toggle"}},[t._v("\n\t\t\t"+t._s(t.t("mail","Place signature above quoted text"))+"\n\t\t")])]),t._v(" "),t.identities.length>1?e("NcSelect",{attrs:{"allow-empty":!1,options:t.identities,"aria-label-combobox":t.t("mail","Select an alias"),searchable:!1,value:t.identity,label:"label","track-by":"id"},on:{"option:selected":t.changeIdentity}}):t._e(),t._v(" "),e("TextEditor",{attrs:{html:!0,placeholder:t.t("mail","Signature â€¦"),bus:t.bus},on:{"show-toolbar":t.handleShowToolbar},model:{value:t.signature,callback:function(e){t.signature=e},expression:"signature"}}),t._v(" "),t.isLargeSignature?e("p",{staticClass:"warning-large-signature"},[t._v("\n\t\t"+t._s(t.t("mail","Your signature is larger than 2 MB. This may affect the performance of your editor."))+"\n\t")]):t._e(),t._v(" "),e("ButtonVue",{attrs:{type:"primary",disabled:t.loading,"aria-label":t.t("mail","Save signature")},on:{click:t.saveSignature},scopedSlots:t._u([{key:"icon",fn:function(){return[t.loading?e("IconLoading",{attrs:{size:20,"fill-color":"white"}}):e("IconCheck",{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t"+t._s(t.t("mail","Save signature"))+"\n\t")]),t._v(" "),t.signature?e("ButtonVue",{staticClass:"button-text",attrs:{"aria-label":t.t("mail","Delete"),type:"tertiary-no-background"},on:{click:t.deleteSignature}},[t._v("\n\t\t"+t._s(t.t("mail","Delete"))+"\n\t")]):t._e()],1)}),[],!1,null,"7b8d5c2c",null).exports;var j=n(86791),U=n(76476);const V={name:"AliasForm",components:{NcButton:N.x1,IconRename:j.A,IconLoading:N.ne,IconDelete:U.A,IconCheck:E.A},props:{account:{type:Object,required:!0},alias:{type:Object,required:!0},enableUpdate:{type:Boolean,default:!0},enableDelete:{type:Boolean,default:!0},onUpdateAlias:{type:Function,default:async(t,e)=>{let{alias:a,name:n}=e}},onDelete:{type:Function,default:async t=>{}}},data(){return{changeAlias:this.alias.alias,changeName:this.alias.name,showForm:!1,loading:!1}},computed:{formId(){return`alias-form-${this.alias.id}`}},methods:{async updateAlias(){this.loading=!0,await this.onUpdateAlias(this.alias.id,{alias:this.changeAlias,name:this.changeName}),this.showForm=!1,this.loading=!1},async deleteAlias(){this.loading=!0,await this.onDelete(this.alias.id),this.loading=!1}}};var q=n(80993),z={};z.styleTagTransform=C(),z.setAttributes=h(),z.insert=p().bind(null,"head"),z.domAPI=A(),z.insertStyleElement=g(),d()(q.A,z),q.A&&q.A.locals&&q.A.locals;const R={name:"AliasSettings",components:{AliasForm:(0,x.A)(V,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"alias-form"},[t.showForm?e("form",{staticClass:"alias-form__form",attrs:{id:t.formId},on:{submit:function(e){return e.preventDefault(),t.updateAlias.apply(null,arguments)}}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.changeName,expression:"changeName"}],staticClass:"alias-form__form__input",attrs:{type:"text",required:""},domProps:{value:t.changeName},on:{input:function(e){e.target.composing||(t.changeName=e.target.value)}}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.changeAlias,expression:"changeAlias"}],staticClass:"alias-form__form__input",attrs:{disabled:t.alias.provisioned,type:"email",required:""},domProps:{value:t.changeAlias},on:{input:function(e){e.target.composing||(t.changeAlias=e.target.value)}}})]):e("div",[e("strong",[t._v(t._s(t.alias.name))]),t._v(" <"+t._s(t.alias.alias)+">\n\t")]),t._v(" "),e("div",{staticClass:"alias-form__actions"},[t.showForm?[e("NcButton",{attrs:{type:"tertiary-no-background","aria-label":t.t("mail","Update alias"),"native-type":"submit",form:t.formId,name:t.t("mail","Update alias")},scopedSlots:t._u([{key:"icon",fn:function(){return[t.loading?e("IconLoading",{attrs:{size:20}}):e("IconCheck",{attrs:{size:20}})]},proxy:!0}],null,!1,4145190044)})]:[t._t("default"),t._v(" "),t.enableUpdate?e("NcButton",{attrs:{type:"tertiary-no-background","aria-label":t.t("mail","Rename alias"),name:t.t("mail","Show update alias form")},on:{click:function(e){e.preventDefault(),t.showForm=!0}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconRename",{attrs:{size:20}})]},proxy:!0}],null,!1,4207163347)}):t._e(),t._v(" "),t.enableDelete&&!t.alias.provisioned?e("NcButton",{attrs:{type:"tertiary-no-background","aria-label":t.t("mail","Delete alias"),name:t.t("mail","Delete alias")},on:{click:function(e){return e.preventDefault(),t.deleteAlias.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[t.loading?e("IconLoading",{attrs:{size:20}}):e("IconDelete",{attrs:{size:20}})]},proxy:!0}],null,!1,1111346051)}):t._e()]],2)])}),[],!1,null,"501538cd",null).exports,ButtonVue:N.x1,IconLoading:N.ne,IconCheck:E.A,IconRename:j.A},props:{account:{type:Object,required:!0}},data(){return{newAlias:"",newName:this.account.name,showForm:!1,loading:!1}},computed:{...(0,r.n2)(o.A),aliases(){return this.account.aliases},accountAlias(){return{alias:this.account.emailAddress,name:this.account.name,provisioned:!!this.account.provisioningId,smimeCertificateId:this.account.smimeCertificateId}}},methods:{async createAlias(){this.loading=!0,await this.mainStore.createAlias({account:this.account,alias:this.newAlias,name:this.newName}),s.A.debug("created alias",{accountId:this.account.id,alias:this.newAlias,name:this.newName}),this.resetCreate(),this.loading=!1},resetCreate(){this.newAlias="",this.newName=this.account.name,this.showForm=!1},async updateAlias(t,e){const a=this.aliases.find((e=>e.id===t));await this.mainStore.updateAlias({account:this.account,aliasId:a.id,alias:e.alias,name:e.name,smimeCertificateId:a.smimeCertificateId})},async deleteAlias(t){await this.mainStore.deleteAlias({account:this.account,aliasId:t})}}};var G=n(9996),Q={};Q.styleTagTransform=C(),Q.setAttributes=h(),Q.insert=p().bind(null,"head"),Q.domAPI=A(),Q.insertStyleElement=g(),d()(G.A,Q),G.A&&G.A.locals&&G.A.locals;const $=(0,x.A)(R,(function(){var t=this,e=t._self._c;return e("div",[e("ul",{staticClass:"aliases-list"},[e("li",[e("AliasForm",{attrs:{account:t.account,alias:t.accountAlias,"enable-update":!1,"enable-delete":!1}},[t.account.provisioningId?t._e():e("ButtonVue",{attrs:{type:"tertiary-no-background","aria-label":t.t("mail","Go back"),name:t.t("mail","Change name")},on:{click:function(e){return t.$emit("rename-primary-alias")}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconRename",{attrs:{size:20}})]},proxy:!0}],null,!1,4207163347)})],1)],1),t._v(" "),t._l(t.aliases,(function(a){return e("li",{key:a.id},[e("AliasForm",{attrs:{account:t.account,alias:a,"on-update-alias":t.updateAlias,"on-delete":t.deleteAlias}})],1)})),t._v(" "),t.showForm?e("li",[e("form",{attrs:{id:"createAliasForm"},on:{submit:function(e){return e.preventDefault(),t.createAlias.apply(null,arguments)}}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.newName,expression:"newName"}],attrs:{type:"text",placeholder:t.t("mail","Name"),required:""},domProps:{value:t.newName},on:{input:function(e){e.target.composing||(t.newName=e.target.value)}}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.newAlias,expression:"newAlias"}],attrs:{type:"email",placeholder:t.t("mail","Email address"),required:""},domProps:{value:t.newAlias},on:{input:function(e){e.target.composing||(t.newAlias=e.target.value)}}})])]):t._e()],2),t._v(" "),t.account.provisioningId?t._e():e("div",{staticClass:"aliases-controls"},[t.showForm?t._e():e("ButtonVue",{attrs:{type:"primary","aria-label":t.t("mail","Add alias")},on:{click:function(e){t.showForm=!0}}},[t._v("\n\t\t\t"+t._s(t.t("mail","Add alias"))+"\n\t\t")]),t._v(" "),t.showForm?e("ButtonVue",{attrs:{"native-type":"submit",type:"primary",form:"createAliasForm","aria-label":t.t("mail","Create alias"),disabled:t.loading},scopedSlots:t._u([{key:"icon",fn:function(){return[t.loading?e("IconLoading",{attrs:{size:20}}):e("IconCheck",{attrs:{size:20}})]},proxy:!0}],null,!1,4145190044)},[t._v("\n\t\t\t"+t._s(t.t("mail","Create alias"))+"\n\t\t")]):t._e(),t._v(" "),t.showForm?e("ButtonVue",{staticClass:"button-text",attrs:{type:"tertiary-no-background","aria-label":t.t("mail","Cancel")},on:{click:t.resetCreate}},[t._v("\n\t\t\t"+t._s(t.t("mail","Cancel"))+"\n\t\t")]):t._e()],1)])}),[],!1,null,"f01a820c",null).exports;var H=n(59744);const Y={name:"SieveAccountForm",components:{ButtonVue:N.x1,NcTextField:N.v,NcPasswordField:N.b9,NcCheckboxRadioSwitch:N.AO},props:{account:{type:Object,required:!0}},data(){return{sieveConfig:{sieveEnabled:this.account.sieveEnabled,sieveHost:this.account.sieveHost||this.account.imapHost,sievePort:this.account.sievePort||4190,sieveUser:this.account.sieveUser||"",sievePassword:"",sieveSslMode:this.account.sieveSslMode||"tls"},loading:!1,useImapCredentials:!this.account.sieveUser,errorMessage:""}},computed:{...(0,r.n2)(o.A)},methods:{updateSslMode(t){this.sieveConfig.sieveSslMode=t},updateCredentials(t){this.useImapCredentials=t},async onSubmit(){this.loading=!0,this.errorMessage="",""===this.sieveConfig.sieveUser&&""===this.sieveConfig.sievePassword&&(this.useImapCredentials=!0),this.useImapCredentials&&(this.sieveConfig.sieveUser="",this.sieveConfig.sievePassword="");try{await this.mainStore.updateSieveAccount({account:this.account,data:this.sieveConfig}),this.sieveConfig.sieveEnabled&&await this.mainStore.fetchActiveSieveScript({accountId:this.account.id})}catch(t){this.errorMessage=t.message}this.loading=!1}}};var W=n(51610),J={};J.styleTagTransform=C(),J.setAttributes=h(),J.insert=p().bind(null,"head"),J.domAPI=A(),J.insertStyleElement=g(),d()(W.A,J),W.A&&W.A.locals&&W.A.locals;const K=(0,x.A)(Y,(function(){var t=this,e=t._self._c;return e("form",{attrs:{id:"sieve-form"}},[e("p",[t._v("\n\t\t"+t._s(t.t("mail","Sieve is a powerful language for writing filters for your mailbox. You can manage the sieve scripts in Mail if your email service supports it. Sieve is also required to use Autoresponder and Filters."))+"\n\t")]),t._v(" "),e("p",[e("NcCheckboxRadioSwitch",{attrs:{checked:t.sieveConfig.sieveEnabled},on:{"update:checked":function(e){return t.$set(t.sieveConfig,"sieveEnabled",e)}}},[t._v("\n\t\t\t"+t._s(t.t("mail","Enable sieve filter"))+"\n\t\t")])],1),t._v(" "),t.sieveConfig.sieveEnabled?e("div",[e("NcTextField",{attrs:{label:t.t("mail","Sieve host"),value:t.sieveConfig.sieveHost},on:{"update:value":function(e){return t.$set(t.sieveConfig,"sieveHost",e)}}}),t._v(" "),e("h4",[t._v(t._s(t.t("mail","Sieve security")))]),t._v(" "),e("div",{staticClass:"flex-row"},[e("ButtonVue",{attrs:{pressed:"none"===t.sieveConfig.sieveSslMode},on:{click:function(e){return t.updateSslMode("none")}}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","None"))+"\n\t\t\t")]),t._v(" "),e("ButtonVue",{attrs:{pressed:"ssl"===t.sieveConfig.sieveSslMode},on:{click:function(e){return t.updateSslMode("ssl")}}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","SSL/TLS"))+"\n\t\t\t")]),t._v(" "),e("ButtonVue",{attrs:{pressed:"tls"===t.sieveConfig.sieveSslMode},on:{click:function(e){return t.updateSslMode("tls")}}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","STARTTLS"))+"\n\t\t\t")])],1),t._v(" "),e("NcTextField",{attrs:{label:t.t("mail","Sieve Port"),value:t.sieveConfig.sievePort},on:{"update:value":function(e){return t.$set(t.sieveConfig,"sievePort",e)}}}),t._v(" "),e("h4",[t._v(t._s(t.t("mail","Sieve credentials")))]),t._v(" "),e("div",{staticClass:"flex-row"},[e("ButtonVue",{attrs:{pressed:t.useImapCredentials},on:{click:function(e){return t.updateCredentials(!0)}}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","IMAP credentials"))+"\n\t\t\t")]),t._v(" "),e("ButtonVue",{attrs:{pressed:!t.useImapCredentials},on:{click:function(e){return t.updateCredentials(!1)}}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Custom"))+"\n\t\t\t")])],1),t._v(" "),t.useImapCredentials?t._e():e("p",{staticClass:"custom"},[e("NcTextField",{attrs:{label:t.t("mail","Sieve User"),value:t.sieveConfig.sieveUser},on:{"update:value":function(e){return t.$set(t.sieveConfig,"sieveUser",e)}}}),t._v(" "),e("NcPasswordField",{attrs:{label:t.t("mail","Sieve Password"),value:t.sieveConfig.sievePassword},on:{"update:value":function(e){return t.$set(t.sieveConfig,"sievePassword",e)}}})],1)],1):t._e(),t._v(" "),t._t("feedback"),t._v(" "),t.errorMessage?e("p",[t._v("\n\t\t"+t._s(t.t("mail","Oh snap!"))+"\n\t\t"+t._s(t.errorMessage)+"\n\t")]):t._e(),t._v(" "),e("ButtonVue",{attrs:{type:"primary",disabled:t.loading,"aria-label":t.t("mail","Save sieve settings")},on:{click:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[t._v("\n\t\t"+t._s(t.t("mail","Save sieve settings"))+"\n\t")])],2)}),[],!1,null,"1ea70ac4",null).exports,X={name:"SieveFilterForm",components:{ButtonVue:N.x1,IconLoading:N.ne,IconCheck:E.A},props:{account:{type:Object,required:!0}},data:()=>({script:"",loading:!0,errorMessage:""}),computed:{...(0,r.n2)(o.A),scriptData(){return this.mainStore.getActiveSieveScript(this.account.id)}},watch:{scriptData:{immediate:!0,handler(t){t&&(this.script=t.script,this.loading=!1)}}},methods:{async saveActiveScript(){this.loading=!0,this.errorMessage="";try{await this.mainStore.updateActiveSieveScript({accountId:this.account.id,scriptData:{...this.scriptData,script:this.script}})}catch(e){422===e.response.status?this.errorMessage=t("mail","The syntax seems to be incorrect:")+" "+e.response.data.message:this.errorMessage=e.message}this.loading=!1}}};var Z=n(12016),tt={};tt.styleTagTransform=C(),tt.setAttributes=h(),tt.insert=p().bind(null,"head"),tt.domAPI=A(),tt.insertStyleElement=g(),d()(Z.A,tt),Z.A&&Z.A.locals&&Z.A.locals;const et=(0,x.A)(X,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"section"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.script,expression:"script"},{name:"shortkey",rawName:"v-shortkey.avoid",modifiers:{avoid:!0}}],attrs:{id:"sieve-text-area",rows:"20",disabled:t.loading},domProps:{value:t.script},on:{input:function(e){e.target.composing||(t.script=e.target.value)}}}),t._v(" "),t.errorMessage?e("p",[t._v("\n\t\t"+t._s(t.t("mail","Oh Snap!"))+"\n\t\t"+t._s(t.errorMessage)+"\n\t")]):t._e(),t._v(" "),e("ButtonVue",{attrs:{type:"primary",disabled:t.loading,"aria-label":t.t("mail","Save sieve script")},on:{click:t.saveActiveScript},scopedSlots:t._u([{key:"icon",fn:function(){return[t.loading?e("IconLoading",{attrs:{size:20}}):e("IconCheck",{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t"+t._s(t.t("mail","Save sieve script"))+"\n\t")])],1)}),[],!1,null,"109c3bf0",null).exports;var at=n(81222),nt=n(63814),it=n(35195),st=n(66802);const ot="disabled",rt="enabled",lt="system",ct={name:"OutOfOfficeForm",components:{DatetimePicker:N.t4,TextEditor:M.A,ButtonVue:N.x1,CheckIcon:E.A,OpenInNewIcon:it.A},props:{account:{type:Object,required:!0}},data(){const t=parseInt(OC.config.version.split(".")[0]),e=(0,at.C)("mail","enable-system-out-of-office",!1);return{OOO_DISABLED:ot,OOO_ENABLED:rt,OOO_FOLLOW_SYSTEM:lt,initialized:!1,enabled:this.account.outOfOfficeFollowsSystem?lt:ot,enableLastDay:!1,firstDay:new Date,lastDay:null,subject:"",message:"",loading:!1,errorMessage:"",hasPersonalAbsenceSettings:t>=28&&e,personalAbsenceSettingsUrl:(0,nt.Jv)("/settings/user/availability"),textEditorDummyBus:(0,F.A)()}},computed:{...(0,r.n2)(o.A),valid(){return!!this.followingSystem||this.enabled===ot||!!(this.firstDay&&(!this.enableLastDay||this.enableLastDay&&this.lastDay)&&(!this.enableLastDay||this.lastDay>=this.firstDay)&&this.subject&&this.message)},aliases(){return[{name:this.account.name,alias:this.account.emailAddress},...this.account.aliases].map((t=>{let{name:e,alias:a}=t;return`${e} <${a}>`}))},followingSystem(){return this.hasPersonalAbsenceSettings&&this.enabled===lt}},watch:{enableLastDay(t){this.initialized&&(t?(this.lastDay=new Date(this.firstDay),this.lastDay.setDate(this.lastDay.getDate()+6)):this.lastDay=null)},firstDay(t,e){if(!this.initialized)return;if(!this.enableLastDay)return;const a=Math.floor((this.lastDay-e)/864e5);a<0||(this.lastDay=new Date(t),this.lastDay.setDate(t.getDate()+a))}},async mounted(){await this.fetchState(),this.initialized=!0},methods:{async fetchState(){const{state:t}=await async function(t){const e=(0,nt.Jv)("/apps/mail/api/out-of-office/{accountId}",{accountId:t}),{data:a}=await st.Ay.get(e);return a.data}(this.account.id);this.account.outOfOfficeFollowsSystem?this.enabled=lt:this.enabled=t.enabled?rt:ot,t.enabled&&t.start&&(this.firstDay=new Date(t.start)),t.enabled&&t.end&&(this.lastDay=new Date(t.end),this.lastDay.setHours(this.lastDay.getHours()-23,0,0,0),this.enableLastDay=!0),this.subject=t.subject,this.message=(0,B.Vw)((0,B.pj)(t.message)).value},async submit(){this.loading=!0,this.errorMessage="";try{if(this.followingSystem)await async function(t){const e=(0,nt.Jv)("/apps/mail/api/out-of-office/{accountId}/follow-system",{accountId:t}),{data:a}=await st.Ay.post(e);return a.data}(this.account.id),this.mainStore.patchAccountMutation({account:this.account,data:{outOfOfficeFollowsSystem:!0}});else{const t=new Date(this.firstDay);t.setHours(0,0,0,0);let e=null;this.lastDay&&(e=new Date(this.lastDay),e.setHours(24,0,0,0)),await async function(t,e){const a=(0,nt.Jv)("/apps/mail/api/out-of-office/{accountId}",{accountId:t}),{data:n}=await st.Ay.post(a,e);return n.data}(this.account.id,{enabled:this.enabled===rt,start:t.toISOString(),end:e?.toISOString()??null,subject:this.subject,message:(0,B.Ul)((0,B.qy)(this.message)).value,allowedRecipients:this.aliases}),this.mainStore.patchAccountMutation({account:this.account,data:{outOfOfficeFollowsSystem:!1}})}await this.mainStore.fetchActiveSieveScript({accountId:this.account.id})}catch(t){this.errorMessage=t.message}finally{this.loading=!1}}}};var dt=n(23719),ut={};ut.styleTagTransform=C(),ut.setAttributes=h(),ut.insert=p().bind(null,"head"),ut.domAPI=A(),ut.insertStyleElement=g(),d()(dt.A,ut),dt.A&&dt.A.locals&&dt.A.locals;const At=(0,x.A)(ct,(function(){var t=this,e=t._self._c;return e("form",{staticClass:"form",on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[e("div",{staticClass:"form__multi-row"},[e("fieldset",{staticClass:"form__fieldset"},[e("input",{staticClass:"radio",attrs:{id:"ooo-disabled",type:"radio",name:"enabled"},domProps:{checked:t.enabled===t.OOO_DISABLED},on:{change:function(e){t.enabled=t.OOO_DISABLED}}}),t._v(" "),e("label",{attrs:{for:"ooo-disabled"}},[t._v(t._s(t.t("mail","Autoresponder off")))])]),t._v(" "),e("fieldset",{staticClass:"form__fieldset"},[e("input",{staticClass:"radio",attrs:{id:"ooo-enabled",type:"radio",name:"enabled"},domProps:{checked:t.enabled===t.OOO_ENABLED},on:{change:function(e){t.enabled=t.OOO_ENABLED}}}),t._v(" "),e("label",{attrs:{for:"ooo-enabled"}},[t._v(t._s(t.t("mail","Autoresponder on")))])]),t._v(" "),t.hasPersonalAbsenceSettings?e("fieldset",{staticClass:"form__fieldset"},[e("input",{staticClass:"radio",attrs:{id:"ooo-follow-system",type:"radio",name:"enabled"},domProps:{checked:t.enabled===t.OOO_FOLLOW_SYSTEM},on:{change:function(e){t.enabled=t.OOO_FOLLOW_SYSTEM}}}),t._v(" "),e("label",{attrs:{for:"ooo-follow-system"}},[t._v(t._s(t.t("mail","Autoresponder follows system settings")))])]):t._e()]),t._v(" "),t.followingSystem?[e("p",[t._v(t._s(t.t("mail","The autoresponder follows your personal absence period settings.")))]),t._v(" "),e("ButtonVue",{attrs:{href:t.personalAbsenceSettingsUrl,target:"_blank",rel:"noopener noreferrer"},scopedSlots:t._u([{key:"icon",fn:function(){return[e("OpenInNewIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,1266168172)},[t._v("\n\t\t\t"+t._s(t.t("mail","Edit absence settings"))+"\n\t\t")])]:[e("div",{staticClass:"form__multi-row"},[e("fieldset",{staticClass:"form__fieldset"},[e("label",{attrs:{for:"ooo-first-day"}},[t._v(t._s(t.t("mail","First day")))]),t._v(" "),e("DatetimePicker",{attrs:{id:"ooo-first-day",disabled:!t.enabled},model:{value:t.firstDay,callback:function(e){t.firstDay=e},expression:"firstDay"}})],1),t._v(" "),e("fieldset",{staticClass:"form__fieldset"},[e("div",{staticClass:"form__fieldset__label"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.enableLastDay,expression:"enableLastDay"}],attrs:{id:"ooo-enable-last-day",type:"checkbox",disabled:!t.enabled},domProps:{checked:Array.isArray(t.enableLastDay)?t._i(t.enableLastDay,null)>-1:t.enableLastDay},on:{change:function(e){var a=t.enableLastDay,n=e.target,i=!!n.checked;if(Array.isArray(a)){var s=t._i(a,null);n.checked?s<0&&(t.enableLastDay=a.concat([null])):s>-1&&(t.enableLastDay=a.slice(0,s).concat(a.slice(s+1)))}else t.enableLastDay=i}}}),t._v(" "),e("label",{attrs:{for:"ooo-enable-last-day"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Last day (optional)"))+"\n\t\t\t\t\t")])]),t._v(" "),e("DatetimePicker",{attrs:{id:"ooo-last-day",disabled:!t.enabled||!t.enableLastDay},model:{value:t.lastDay,callback:function(e){t.lastDay=e},expression:"lastDay"}})],1)]),t._v(" "),e("fieldset",{staticClass:"form__fieldset"},[e("label",{attrs:{for:"ooo-subject"}},[t._v(t._s(t.t("mail","Subject")))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.subject,expression:"subject"}],attrs:{id:"ooo-subject",type:"text",disabled:t.followingSystem},domProps:{value:t.subject},on:{input:function(e){e.target.composing||(t.subject=e.target.value)}}}),t._v(" "),e("p",{staticClass:"form__fieldset__description"},[t._v("\n\t\t\t\t"+t._s(t.t("mail","${subject} will be replaced with the subject of the message you are responding to"))+"\n\t\t\t")])]),t._v(" "),e("fieldset",{staticClass:"form__fieldset"},[e("label",{attrs:{for:"ooo-message"}},[t._v(t._s(t.t("mail","Message")))]),t._v(" "),e("TextEditor",{attrs:{id:"ooo-message",html:!1,disabled:t.followingSystem,bus:t.textEditorDummyBus},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}})],1)],t._v(" "),t.errorMessage?e("p",[t._v("\n\t\t"+t._s(t.t("mail","Oh Snap!"))+"\n\t\t"+t._s(t.errorMessage)+"\n\t")]):t._e(),t._v(" "),e("ButtonVue",{attrs:{type:"primary","native-type":"submit","aria-label":t.t("mail","Save autoresponder"),disabled:t.loading||!t.valid},scopedSlots:t._u([{key:"icon",fn:function(){return[e("CheckIcon",{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t"+t._s(t.t("mail","Save autoresponder"))+"\n\t")])],2)}),[],!1,null,"f02a130c",null).exports;function mt(t,e){return t.info.notAfter<e.info.notAfter?1:t.info.notAfter>e.info.notAfter?-1:0}var pt=n(85168),vt=n(51651);const ht={name:"CertificateSettings",components:{NcSelect:N.EQ,NcButton:N.x1,NcNoteCard:N.mQ},props:{account:{type:Object,required:!0}},data:()=>({alias:null,certificate:null}),computed:{...(0,r.n2)(o.A),...(0,r.aH)(o.A,{smimeCertificates:"getSmimeCertificates"}),savedCertificate:{get(){return this.certificate?this.certificate:this.smimeCertOptions.find((t=>this.alias.smimeCertificateId===t.id))||this.noCertificateOption},set(t){this.certificate=t}},accountSmimeCertificate(){return{id:-1,alias:this.account.emailAddress,name:this.account.name,provisioned:!!this.account.provisioningId,smimeCertificateId:this.account.smimeCertificateId}},aliases(){const t=this.account.aliases.map((t=>({id:t.id,alias:t.alias,name:t.name,provisioned:!!t.provisioningId,smimeCertificateId:t.smimeCertificateId,isAccountCertificate:!1})));return t.push({...this.accountSmimeCertificate,isAccountCertificate:!0}),t},smimeCertOptions(){const t=(new Date).getTime()/1e3+86400,e=this.smimeCertificates.filter((e=>e.hasKey&&e.emailAddress===this.alias.alias&&e.info.notAfter>=t&&e.info.purposes.sign&&e.info.purposes.encrypt)).map(this.mapCertificateToOption).sort(mt);return e.push(this.noCertificateOption),e},noCertificateOption(){return{label:this.t("mail","No certificate"),isChainVerified:!0}}},methods:{async updateSmimeCertificate(){this.alias.isAccountCertificate?await this.mainStore.updateAccountSmimeCertificate({account:this.account,smimeCertificateId:this.certificate.id}).then((()=>{(0,pt.Te)(t("mail","Certificate updated"))})).catch((e=>{s.A.error("could not update account Smime ceritificate",{error:e}),(0,pt.Qg)(t("mail","Could not update certificate"))})):await this.mainStore.updateAlias({account:this.account,aliasId:this.alias.id,alias:this.alias.alias,name:this.alias.name,smimeCertificateId:this.certificate.id}).then((()=>{(0,pt.Te)(t("mail","Certificate updated"))})).catch((e=>{s.A.error("could not update alias Smime ceritificate",{error:e}),(0,pt.Qg)(t("mail","Could not update certificate"))}))},mapCertificateToOption(t){const e=this.t("mail","{commonName} - Valid until {expiryDate}",{commonName:t.info.commonName??t.info.emailAddress,expiryDate:vt.A.unix(t.info.notAfter).format("LL")});return{...t,label:e,isChainVerified:t.info.isChainVerified}}}};var ft=n(30559),gt={};gt.styleTagTransform=C(),gt.setAttributes=h(),gt.insert=p().bind(null,"head"),gt.domAPI=A(),gt.insertStyleElement=g(),d()(ft.A,gt),ft.A&&ft.A.locals&&ft.A.locals;const bt=(0,x.A)(ht,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"certificate-settings"},[e("NcSelect",{staticClass:"certificate-settings__alias",attrs:{options:t.aliases,searchable:!1,placeholder:t.t("mail","Select an alias"),"aria-label-combobox":t.t("mail","Select an alias"),label:"name"},on:{input:function(e){t.savedCertificate=null}},model:{value:t.alias,callback:function(e){t.alias=e},expression:"alias"}}),t._v(" "),null!==t.alias?e("NcSelect",{staticClass:"certificate-settings__certificate",attrs:{options:t.smimeCertOptions,"aria-label-combobox":t.t("mail","Select certificates"),searchable:!1},model:{value:t.savedCertificate,callback:function(e){t.savedCertificate=e},expression:"savedCertificate"}}):t._e(),t._v(" "),e("NcButton",{staticClass:"certificate-settings__submit",attrs:{type:"primary",disabled:null===t.certificate,"aria-label":t.t("mail","Update Certificate")},on:{click:t.updateSmimeCertificate}},[t._v("\n\t\t"+t._s(t.t("mail","Update Certificate"))+"\n\t")]),t._v(" "),t.alias&&!t.savedCertificate.isChainVerified?e("NcNoteCard",{attrs:{type:"warning"}},[e("p",[t._v(t._s(t.t("mail","The selected certificate is not trusted by the server. Recipients might not be able to verify your signature.")))])]):t._e()],1)}),[],!1,null,"4606a3c2",null).exports,Ct={name:"SearchSettings",props:{account:{type:Object,required:!0}},data(){return{searchBody:this.account.searchBody}},computed:{...(0,r.n2)(o.A)},watch:{searchBody(t,e){this.mainStore.patchAccount({account:this.account,data:{searchBody:t}}).then((()=>{s.A.info("Body search "+(t?"enabled":"disabled"))})).catch((a=>{throw s.A.error(`could not ${t?"enable":"disable"} body search`,{error:a}),this.searchBody=e,a}))}}};var yt=n(60609),_t={};_t.styleTagTransform=C(),_t.setAttributes=h(),_t.insert=p().bind(null,"head"),_t.domAPI=A(),_t.insertStyleElement=g(),d()(yt.A,_t),yt.A&&yt.A.locals&&yt.A.locals;const xt=(0,x.A)(Ct,(function(){var t=this,e=t._self._c;return e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchBody,expression:"searchBody"}],attrs:{id:"searchBody",type:"checkbox"},domProps:{checked:Array.isArray(t.searchBody)?t._i(t.searchBody,null)>-1:t.searchBody},on:{change:function(e){var a=t.searchBody,n=e.target,i=!!n.checked;if(Array.isArray(a)){var s=t._i(a,null);n.checked?s<0&&(t.searchBody=a.concat([null])):s>-1&&(t.searchBody=a.slice(0,s).concat(a.slice(s+1)))}else t.searchBody=i}}}),t._v(" "),e("label",{attrs:{for:"searchBody"}},[t._v("\n\t\t"+t._s(t.t("mail","Enable mail body search"))+"\n\t")])])}),[],!1,null,"3fbf8014",null).exports;var St=n(12572),wt=n.n(St);const kt={name:"TrashRetentionSettings",props:{account:{type:Object,required:!0}},data(){return{trashRetentionDays:this.account.trashRetentionDays,debouncedSave:wt()(1e3,this.save)}},computed:{...(0,r.n2)(o.A)},methods:{async save(){let t=parseInt(this.trashRetentionDays);isNaN(t)&&(t=0),await this.mainStore.patchAccount({account:this.account,data:{trashRetentionDays:t}})}}},Dt=(0,x.A)(kt,(function(){var t=this,e=t._self._c;return e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.trashRetentionDays,expression:"trashRetentionDays"}],attrs:{type:"number",min:"0"},domProps:{value:t.trashRetentionDays},on:{input:[function(e){e.target.composing||(t.trashRetentionDays=e.target.value)},function(e){return t.debouncedSave()}]}}),t._v(" "),e("p",[t._v("\n\t\t"+t._s(t.t("mail","Disable trash retention by leaving the field empty or setting it to 0. Only mails deleted after enabling trash retention will be processed."))+"\n\t")])])}),[],!1,null,null,null).exports;var It=n(88250),Mt=n(10362),Bt=n(83957),Ft=n(3372),Nt=n.n(Ft),Et=n(63668),Ot=n.n(Et);const Pt={name:"DeleteModal",components:{NcDialog:N.i$},props:{filter:{type:Object,required:!0},open:{type:Boolean,required:!0}},data(){return{buttons:[{label:t("mail","Cancel"),icon:Nt(),callback:()=>{this.closeModal()}},{label:t("mail","Delete filter"),type:"error",icon:Ot(),callback:()=>{this.deleteFilter()}}]}},methods:{deleteFilter(){this.$emit("delete-filter",this.filter)},closeModal(){this.$emit("close")}}},Tt=(0,x.A)(Pt,(function(){var t=this;return(0,t._self._c)("NcDialog",{attrs:{name:t.t("mail","Delete mail filter {filterName}?",{filterName:t.filter.name}),open:t.open,message:t.t("mail","Are you sure to delete the mail filter?"),buttons:t.buttons},on:{closing:function(e){return t.closeModal()}}})}),[],!1,null,null,null).exports;var Lt=n(88289),jt=n(42702);const Ut={name:"MailFilters",components:{NcButton:N.x1,NcListItem:N.l,NcActionButton:N.Ko,UpdateModal:It.A,DeleteIcon:U.A,DeleteModal:Tt,NcLoadingIcon:Lt.A},props:{account:{type:Object,required:!0}},data:()=>({showUpdateModal:!1,showDeleteModal:!1,script:"",loading:!0,errorMessage:"",currentFilter:null}),computed:{...(0,r.n2)(Bt.A,o.A),filters(){return this.mailFilterStore.filters},scriptData(){return this.mainStore.getActiveSieveScript(this.account.id)}},watch:{scriptData:{immediate:!0,handler(t){t&&(this.script=t.script,this.loading=!1)}}},async mounted(){await this.mailFilterStore.fetch(this.account.id)},methods:{createFilter(){const e=Math.max(0,...this.filters.map((t=>t.priority??0)))+10;this.currentFilter={id:(0,Mt.z)(),name:t("mail","New filter"),enable:!0,operator:"allof",tests:[{id:(0,Mt.z)(),field:jt.xj.Subject,operator:jt.R2.Is,values:[]}],actions:[{id:(0,Mt.z)(),type:"fileinto"}],priority:e},this.showUpdateModal=!0,this.loading=!1},openUpdateModal(t){this.currentFilter=t,this.showUpdateModal=!0},openDeleteModal(t){this.currentFilter=t,this.showDeleteModal=!0},async updateFilter(e){this.loading=!0,this.mailFilterStore.update(e);try{await this.mailFilterStore.store(this.account.id).then((()=>{(0,pt.Te)(t("mail","Filter saved"))})),await this.mainStore.fetchActiveSieveScript({accountId:this.account.id})}catch(e){s.A.error(e),(0,pt.Qg)(t("mail","Could not save filter"))}finally{this.loading=!1}},async deleteFilter(e){this.loading=!0,this.mailFilterStore.delete(e);try{await this.mailFilterStore.store(this.account.id).then((()=>{(0,pt.Te)(t("mail","Filter deleted"))}))}catch(e){s.A.error(e),(0,pt.Qg)(t("mail","Could not delete filter"))}finally{this.loading=!1}await this.mainStore.fetchActiveSieveScript({accountId:this.account.id})},closeModal(){this.currentFilter=null,this.showUpdateModal=!1,this.showDeleteModal=!1}}};var Vt=n(37545),qt={};qt.styleTagTransform=C(),qt.setAttributes=h(),qt.insert=p().bind(null,"head"),qt.domAPI=A(),qt.insertStyleElement=g(),d()(Vt.A,qt),Vt.A&&Vt.A.locals&&Vt.A.locals;const zt=(0,x.A)(Ut,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"section"},[e("p",[t._v(t._s(t.t("mail","Take control of your email chaos. Filters help you to prioritize what matters and eliminate clutter.")))]),t._v(" "),t.loading?e("div",{staticClass:"filter-list__loading"},[e("NcLoadingIcon"),t._v(" "),e("p",[t._v(t._s(t.t("mail","Hang tight while the filters load")))])],1):e("div",{staticClass:"filter-list"},[e("ul",t._l(t.filters,(function(a){return e("NcListItem",{key:a.id,attrs:{name:a.name,compact:!0},on:{click:function(e){return t.openUpdateModal(a)}},scopedSlots:t._u([{key:"subname",fn:function(){return[a.enable?e("span",[t._v(t._s(t.t("mail","Filter is active")))]):e("span",[t._v(t._s(t.t("mail","Filter is not active")))])]},proxy:!0},{key:"actions",fn:function(){return[e("NcActionButton",{on:{click:function(e){return t.openDeleteModal(a)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DeleteIcon",{attrs:{size:20}})]},proxy:!0}],null,!0)},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Delete filter"))+"\n\t\t\t\t\t")])]},proxy:!0}],null,!0)})})),1),t._v(" "),e("NcButton",{staticClass:"app-settings-button",attrs:{type:"primary","aria-label":t.t("mail","New filter")},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.createFilter.apply(null,arguments)}}},[t._v("\n\t\t\t"+t._s(t.t("mail","New filter"))+"\n\t\t")])],1),t._v(" "),t.showUpdateModal&&t.currentFilter?e("UpdateModal",{attrs:{filter:t.currentFilter,account:t.account,loading:t.loading},on:{"update-filter":t.updateFilter,close:t.closeModal}}):t._e(),t._v(" "),t.showDeleteModal&&t.currentFilter?e("DeleteModal",{attrs:{filter:t.currentFilter,open:t.showDeleteModal,loading:t.loading},on:{"delete-filter":t.deleteFilter,close:t.closeModal}}):t._e()],1)}),[],!1,null,"3d81abd4",null).exports,Rt={name:"AccountSettings",components:{SieveAccountForm:K,SieveFilterForm:et,AccountForm:i.A,AliasSettings:$,EditorSettings:S,SignatureSettings:L,AppSettingsDialog:N.q4,AppSettingsSection:N.Te,AccountDefaultsSettings:I,OutOfOfficeForm:At,CertificateSettings:bt,TrashRetentionSettings:Dt,SearchSettings:xt,MailFilters:zt,NcButton:N.x1,Settings:H.A},props:{account:{required:!0,type:Object},open:{type:Boolean,default:!1}},data(){return{trapElements:[],fetchActiveSieveScript:this.account.sieveEnabled}},computed:{...(0,r.n2)(o.A),displayName(){return this.account.name},email(){return this.account.emailAddress}},watch:{open(t,e){!0===t&&!0===this.fetchActiveSieveScript&&(s.A.debug(`Load active sieve script for account ${this.account.accountId}`),this.fetchActiveSieveScript=!1,this.mainStore.fetchActiveSieveScript({accountId:this.account.id}))}},methods:{scrollToAccountSettings(){this.$refs.accountForm.$el.scrollIntoView({behavior:"smooth"})},updateOpen(){this.$emit("update:open")},handleShowToolbar(t){this.trapElements.push(t)}}};var Gt=n(67421),Qt={};Qt.styleTagTransform=C(),Qt.setAttributes=h(),Qt.insert=p().bind(null,"head"),Qt.domAPI=A(),Qt.insertStyleElement=g(),d()(Gt.A,Qt),Gt.A&&Gt.A.locals&&Gt.A.locals;const $t=(0,x.A)(Rt,(function(){var t=this,e=t._self._c;return e("AppSettingsDialog",{attrs:{id:"app-settings-dialog",open:t.open,"show-navigation":!0,"additional-trap-elements":t.trapElements,name:t.t("mail","Account settings")},on:{"update:open":t.updateOpen}},[e("AppSettingsSection",{attrs:{id:"alias-settings",name:t.t("mail","Aliases")}},[e("AliasSettings",{attrs:{account:t.account},on:{"rename-primary-alias":t.scrollToAccountSettings}})],1),t._v(" "),e("AppSettingsSection",{attrs:{id:"certificate-settings",name:t.t("mail","Alias to S/MIME certificate mapping")}},[e("CertificateSettings",{attrs:{account:t.account}})],1),t._v(" "),e("AppSettingsSection",{attrs:{id:"signature",name:t.t("mail","Signature")}},[e("p",{staticClass:"settings-hint"},[t._v("\n\t\t\t"+t._s(t.t("mail","A signature is added to the text of new messages and replies."))+"\n\t\t")]),t._v(" "),e("SignatureSettings",{attrs:{account:t.account},on:{"show-toolbar":t.handleShowToolbar}})],1),t._v(" "),e("AppSettingsSection",{attrs:{id:"writing-mode",name:t.t("mail","Writing mode")}},[e("p",{staticClass:"settings-hint"},[t._v("\n\t\t\t"+t._s(t.t("mail","Preferred writing mode for new messages and replies."))+"\n\t\t")]),t._v(" "),e("EditorSettings",{attrs:{account:t.account}})],1),t._v(" "),e("AppSettingsSection",{attrs:{id:"default-folders",name:t.t("mail","Default folders")}},[e("p",{staticClass:"settings-hint"},[t._v("\n\t\t\t"+t._s(t.t("mail","The folders to use for drafts, sent messages, deleted messages, archived messages and junk messages."))+"\n\t\t")]),t._v(" "),e("AccountDefaultsSettings",{attrs:{account:t.account}})],1),t._v(" "),e("AppSettingsSection",{attrs:{id:"trash-retention",name:t.t("mail","Automatic trash deletion")}},[e("p",{staticClass:"settings-hint"},[t._v("\n\t\t\t"+t._s(t.t("mail","Days after which messages in Trash will automatically be deleted:"))+"\n\t\t")]),t._v(" "),e("TrashRetentionSettings",{attrs:{account:t.account}})],1),t._v(" "),t.account?e("AppSettingsSection",{attrs:{id:"out-of-office-replies",name:t.t("mail","Autoresponder")}},[e("p",{staticClass:"settings-hint"},[t._v("\n\t\t\t"+t._s(t.t("mail","Automated reply to incoming messages. If someone sends you several messages, this automated reply will be sent at most once every 4 days."))+"\n\t\t")]),t._v(" "),t.account.sieveEnabled?e("OutOfOfficeForm",{attrs:{account:t.account}}):e("div",[e("p",[t._v(t._s(t.t("mail","The autoresponder uses Sieve, a scripting language supported by many email providers. If you're unsure whether yours does, check with your provider. If Sieve is available, click the button to go to the settings and enable it.")))]),t._v(" "),e("NcButton",{attrs:{type:"secondary","aria-label":t.t("mail","Go to Sieve settings"),href:"#sieve-form"}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Go to Sieve settings"))+"\n\t\t\t")])],1)],1):t._e(),t._v(" "),t.account&&t.account.sieveEnabled?e("AppSettingsSection",{attrs:{id:"mail-filters",name:t.t("mail","Filters")}},[e("div",{attrs:{id:"mail-filters"}},[e("MailFilters",{key:t.account.accountId,ref:"mailFilters",attrs:{account:t.account}})],1)]):t._e(),t._v(" "),t.account?e("AppSettingsSection",{attrs:{id:"quick-actions-settings",name:t.t("mail","Quick actions")}},[e("Settings",{key:t.account.accountId,ref:"quickActions",attrs:{account:t.account}})],1):t._e(),t._v(" "),t.account&&t.account.sieveEnabled?e("AppSettingsSection",{attrs:{id:"sieve-filter",name:t.t("mail","Sieve script editor")}},[e("div",{attrs:{id:"sieve-filter"}},[e("SieveFilterForm",{key:t.account.accountId,ref:"sieveFilterForm",attrs:{account:t.account}})],1)]):t._e(),t._v(" "),t.account&&!t.account.provisioningId?e("AppSettingsSection",{attrs:{id:"mail-server",name:t.t("mail","Mail server")}},[e("div",{attrs:{id:"mail-settings"}},[e("AccountForm",{key:t.account.accountId,ref:"accountForm",attrs:{"display-name":t.displayName,email:t.email,account:t.account}})],1)]):t._e(),t._v(" "),t.account&&!t.account.provisioningId?e("AppSettingsSection",{attrs:{id:"sieve-settings",name:t.t("mail","Sieve server")}},[e("div",{attrs:{id:"sieve-settings"}},[e("SieveAccountForm",{key:t.account.accountId,ref:"sieveAccountForm",attrs:{account:t.account}})],1)]):t._e(),t._v(" "),e("AppSettingsSection",{attrs:{id:"mailbox_search",name:t.t("mail","Folder search")}},[e("SearchSettings",{attrs:{account:t.account}})],1)],1)}),[],!1,null,"359eea41",null).exports},80993:(t,e,a)=>{"use strict";a.d(e,{A:()=>r});var n=a(71354),i=a.n(n),s=a(76314),o=a.n(s)()(i());o.push([t.id,".alias-form[data-v-501538cd]{display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap;width:100%}.alias-form__form[data-v-501538cd]{display:flex;flex:1 auto;gap:10px}.alias-form__form--expand[data-v-501538cd]{flex-basis:calc(100% - 44px - 10px)}.alias-form__form__input[data-v-501538cd]{flex:1 auto}.alias-form__actions[data-v-501538cd]{display:flex}","",{version:3,sources:["webpack://./src/components/AliasForm.vue"],names:[],mappings:"AAGA,6BACC,YAAA,CACA,6BAAA,CACA,kBAAA,CACA,QANU,CAOV,cAAA,CACA,UAAA,CAEA,mCACC,YAAA,CACA,WAAA,CACA,QAAA,CAEA,2CAEC,mCAAA,CAGD,0CACC,WAAA,CAIF,sCACC,YAAA",sourcesContent:["\n$form-gap: 10px;\n\n.alias-form {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tgap: $form-gap;\n\tflex-wrap: wrap;\n\twidth: 100%;\n\n\t&__form {\n\t\tdisplay: flex;\n\t\tflex: 1 auto;\n\t\tgap: 10px; // Gap between inputs\n\n\t\t&--expand {\n\t\t\t// Prevent the submit button from being wrapped to the next line on normal sized screens\n\t\t\tflex-basis: calc(100% - 44px - $form-gap);\n\t\t}\n\n\t\t&__input {\n\t\t\tflex: 1 auto;\n\t\t}\n\t}\n\n\t&__actions {\n\t\tdisplay: flex;\n\t}\n}\n"],sourceRoot:""}]);const r=o},83407:(t,e,a)=>{"use strict";a.d(e,{A:()=>r});var n=a(71354),i=a.n(n),s=a(76314),o=a.n(s)()(i());o.push([t.id,".ck.ck-editor__editable_inline[data-v-7b8d5c2c]{width:100%;max-width:78vw;height:100%;min-height:100px;border-radius:var(--border-radius) !important;border:1px solid var(--color-border) !important;box-shadow:none !important}.primary[data-v-7b8d5c2c]{padding-inline-start:26px;background-position:6px;color:var(--color-main-background)}.primary[data-v-7b8d5c2c]:after{inset-inline-start:14px}.button-text[data-v-7b8d5c2c]{background-color:rgba(0,0,0,0);border:none;color:var(--color-text-maxcontrast);font-weight:normal}.button-text[data-v-7b8d5c2c]:hover,.button-text[data-v-7b8d5c2c]:focus{color:var(--color-main-text)}.section[data-v-7b8d5c2c]{display:block;padding:0;margin-bottom:23px}.ck-balloon-panel[data-v-7b8d5c2c]{z-index:10000 !important}.button-vue[data-v-7b8d5c2c] {display:inline-block !important;margin-top:4px !important}.warning-large-signature[data-v-7b8d5c2c]{color:#ff8c00}[data-v-7b8d5c2c] .ck.ck-toolbar-dropdown>.ck-dropdown__panel{max-width:34vw}","",{version:3,sources:["webpack://./src/components/SignatureSettings.vue"],names:[],mappings:"AACA,gDACE,UAAA,CACA,cAAA,CACA,WAAA,CACA,gBAAA,CACA,6CAAA,CACA,+CAAA,CACA,0BAAA,CAGF,0BACE,yBAAA,CACA,uBAAA,CACA,kCAAA,CAEA,gCACE,uBAAA,CAIJ,8BACE,8BAAA,CACA,WAAA,CACA,mCAAA,CACA,kBAAA,CAEA,wEAEE,4BAAA,CAIJ,0BACE,aAAA,CACA,SAAA,CACA,kBAAA,CAGF,mCACE,wBAAA,CAGF,8BACC,+BAAA,CACA,yBAAA,CAGD,0CACC,aAAA,CAGD,8DACC,cAAA",sourcesContent:["\n.ck.ck-editor__editable_inline {\n  width: 100%;\n  max-width: 78vw;\n  height: 100%;\n  min-height: 100px;\n  border-radius: var(--border-radius) !important;\n  border: 1px solid var(--color-border) !important;\n  box-shadow: none !important;\n}\n\n.primary {\n  padding-inline-start: 26px;\n  background-position: 6px;\n  color: var(--color-main-background);\n\n  &:after {\n    inset-inline-start: 14px;\n  }\n}\n\n.button-text {\n  background-color: transparent;\n  border: none;\n  color: var(--color-text-maxcontrast);\n  font-weight: normal;\n\n  &:hover,\n  &:focus {\n    color: var(--color-main-text);\n  }\n}\n\n.section {\n  display: block;\n  padding: 0;\n  margin-bottom: 23px;\n}\n\n.ck-balloon-panel {\n\t z-index: 10000 !important;\n }\n\n.button-vue:deep() {\n\tdisplay: inline-block !important;\n\tmargin-top: 4px !important;\n}\n\n.warning-large-signature {\n\tcolor: darkorange;\n}\n\n:deep(.ck.ck-toolbar-dropdown>.ck-dropdown__panel) {\n\tmax-width: 34vw;\n}\n\n"],sourceRoot:""}]);const r=o}}]);
//# sourceMappingURL=mail.account-settings.cd17131f10c02bbb9556.js.map