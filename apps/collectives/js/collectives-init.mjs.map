{"version":3,"file":"collectives-init.mjs","sources":["../src/views/FileListInfo.vue","../src/files/FilesCollectiveHeader.js","../src/init.js"],"sourcesContent":["<!--\n  - SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<div v-if=\"active\" class=\"filelist-collectives-wrapper\">\n\t\t<div class=\"infobox\">\n\t\t\t<InformationIcon fill-color=\"var(--color-primary-element)\" />\n\n\t\t\t<div class=\"content\">\n\t\t\t\t{{ t('collectives', 'The content of this folder is best viewed in the Collectives app.') }}\n\n\t\t\t\t<a :href=\"collectivesLink\">\n\t\t\t\t\t<NcButton\n\t\t\t\t\t\t:aria-label=\"t('collectives', 'Open in Collectives')\"\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\tclass=\"button\">\n\t\t\t\t\t\t{{ t('collectives', 'Open in Collectives') }}\n\t\t\t\t\t</NcButton>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { generateUrl } from '@nextcloud/router'\nimport NcButton from '@nextcloud/vue/components/NcButton'\nimport InformationIcon from 'vue-material-design-icons/InformationOutline.vue'\n\nexport default {\n\tname: 'FileListInfo',\n\n\tcomponents: {\n\t\tInformationIcon,\n\t\tNcButton,\n\t},\n\n\tprops: {\n\t\tcollectivesFolder: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\n\t\tpath: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tactive: false,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tcollectivesLink() {\n\t\t\tconst collectivesPath = this.path.startsWith(this.collectivesFolder)\n\t\t\t\t? this.path.slice(this.collectivesFolder.length)\n\t\t\t\t: ''\n\t\t\treturn generateUrl('/apps/collectives' + collectivesPath)\n\t\t},\n\t},\n\n\twatch: {\n\t\tpath: function() {\n\t\t\tthis.setActive()\n\t\t},\n\t},\n\n\tmounted() {\n\t\tthis.setActive()\n\t},\n\n\tmethods: {\n\t\tsetActive() {\n\t\t\tthis.active = this.collectivesFolder && this.collectivesFolder !== '/' && this.path.startsWith(this.collectivesFolder)\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.filelist-collectives-wrapper {\n\tpadding: 28px 30px 0 50px;\n\tmargin-bottom: 20px;\n\tdisplay: flex;\n\toverflow: hidden;\n\tflex-wrap: wrap;\n\tmin-width: 0;\n\n\t.infobox {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: flex-start;\n\n\t\tbackground-color: var(--color-background-hover);\n\t\tborder-left-color: var(--color-primary-element);\n\t\tborder-radius: var(--border-radius);\n\t\tpadding: 1em;\n\t\tpadding-left: 0.5em;\n\t\tborder-left-width: 0.3em;\n\t\tborder-left-style: solid;\n\t\tmargin-bottom: 0.5em;\n\n\t\t.content {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: flex-start;\n\n\t\t\tmargin-left: 1em;\n\t\t\tmargin-bottom: 0;\n\n\t\t\t.button {\n\t\t\t\tmargin-left: 12px;\n\t\t\t}\n\t\t}\n\t}\n}\n</style>\n","/**\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { Header } from '@nextcloud/files'\nimport { loadState } from '@nextcloud/initial-state'\nimport Vue from 'vue'\nimport FileListInfo from '../views/FileListInfo.vue'\n\nlet vm = null\n\nconst FilesCollectiveHeader = new Header({\n\tid: 'collective',\n\torder: 9,\n\n\tenabled(folder, view) {\n\t\treturn view.id === 'files' || view.id === 'files.public'\n\t},\n\n\trender(el, folder) {\n\t\tel.id = 'files-collective-wrapper'\n\t\tVue.prototype.t = window.t\n\t\tVue.prototype.n = window.n\n\t\tconst collectivesFolder = loadState('collectives', 'user_folder', null)\n\t\tconst View = Vue.extend(FileListInfo)\n\t\tvm = new View({\n\t\t\tpropsData: {\n\t\t\t\tcollectivesFolder,\n\t\t\t\tpath: folder.path,\n\t\t\t},\n\t\t}).$mount(el)\n\t},\n\n\tupdated(folder) {\n\t\tvm.path = folder.path\n\t},\n})\n\nexport {\n\tFilesCollectiveHeader,\n}\n","/**\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { registerFileListHeaders } from '@nextcloud/files'\nimport { FilesCollectiveHeader } from './files/FilesCollectiveHeader.js'\n\nregisterFileListHeaders(FilesCollectiveHeader)\n"],"names":["_sfc_main","InformationIcon","NcButton","collectivesPath","generateUrl","vm","FilesCollectiveHeader","Header","folder","view","el","Vue","collectivesFolder","loadState","View","FileListInfo","registerFileListHeaders"],"mappings":";wPA+BA,MAAAA,EAAA,CACA,KAAA,eAEA,WAAA,CACA,gBAAAC,EACA,SAAAC,CACA,EAEA,MAAA,CACA,kBAAA,CACA,KAAA,OACA,SAAA,EACA,EAEA,KAAA,CACA,KAAA,OACA,SAAA,EACA,CACA,EAEA,MAAA,CACA,MAAA,CACA,OAAA,EACA,CACA,EAEA,SAAA,CACA,iBAAA,CACA,MAAAC,EAAA,KAAA,KAAA,WAAA,KAAA,iBAAA,EACA,KAAA,KAAA,MAAA,KAAA,kBAAA,MAAA,EACA,GACA,OAAAC,EAAA,oBAAAD,CAAA,CACA,CACA,EAEA,MAAA,CACA,KAAA,UAAA,CACA,KAAA,UAAA,CACA,CACA,EAEA,SAAA,CACA,KAAA,UAAA,CACA,EAEA,QAAA,CACA,WAAA,CACA,KAAA,OAAA,KAAA,mBAAA,KAAA,oBAAA,KAAA,KAAA,KAAA,WAAA,KAAA,iBAAA,CACA,CACA,CACA,8oBCvEA,IAAIE,EAAK,KAET,MAAMC,EAAwB,IAAIC,EAAO,CACxC,GAAI,aACJ,MAAO,EAEP,QAAQC,EAAQC,EAAM,CACrB,OAAOA,EAAK,KAAO,SAAWA,EAAK,KAAO,cAC3C,EAEA,OAAOC,EAAIF,EAAQ,CAClBE,EAAG,GAAK,2BACRC,EAAI,UAAU,EAAI,OAAO,EACzBA,EAAI,UAAU,EAAI,OAAO,EACzB,MAAMC,EAAoBC,EAAU,cAAe,cAAe,IAAI,EAChEC,EAAOH,EAAI,OAAOI,CAAY,EACpCV,EAAK,IAAIS,EAAK,CACb,UAAW,CACV,kBAAAF,EACA,KAAMJ,EAAO,IACjB,CACA,CAAG,EAAE,OAAOE,CAAE,CACb,EAEA,QAAQF,EAAQ,CACfH,EAAG,KAAOG,EAAO,IAClB,CACD,CAAC,EC7BDQ,EAAwBV,CAAqB"}