{"version":3,"file":"collectives-reference.mjs","sources":["../src/views/PageReferenceWidget.vue","../src/reference.js"],"sourcesContent":["<!--\n  - SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<a\n\t\tv-if=\"richObject\"\n\t\t:href=\"richObject.link\"\n\t\ttarget=\"_blank\"\n\t\tclass=\"collective-page\"\n\t\t@click=\"clickLink\">\n\t\t<div class=\"collective-page--image\">\n\t\t\t<span\n\t\t\t\tv-if=\"emoji\"\n\t\t\t\tclass=\"page-emoji\">\n\t\t\t\t{{ emoji }}\n\t\t\t</span>\n\t\t\t<PageIcon\n\t\t\t\tv-else\n\t\t\t\t:size=\"50\" />\n\t\t</div>\n\t\t<div class=\"collective-page--info\">\n\t\t\t<div class=\"line\">\n\t\t\t\t<strong>\n\t\t\t\t\t{{ richObject.page.title }}\n\t\t\t\t</strong>\n\t\t\t</div>\n\t\t\t<div class=\"description\">\n\t\t\t\t{{ richObject.description }}\n\t\t\t</div>\n\t\t\t<div class=\"last-edited\">\n\t\t\t\t{{ richObject.lastEdited }}\n\t\t\t\t<NcUserBubble\n\t\t\t\t\t:user=\"richObject.page.lastUserId\"\n\t\t\t\t\t:display-name=\"richObject.page.lastUserDisplayName\" />\n\t\t\t</div>\n\t\t</div>\n\t</a>\n</template>\n\n<script>\nimport { generateUrl } from '@nextcloud/router'\nimport NcUserBubble from '@nextcloud/vue/components/NcUserBubble'\nimport PageIcon from '../components/Icon/PageIcon.vue'\n\nexport default {\n\tname: 'PageReferenceWidget',\n\n\tcomponents: {\n\t\tPageIcon,\n\t\tNcUserBubble,\n\t},\n\n\t/* eslint-disable vue/no-unused-properties */\n\t/* eslint-disable vue/no-boolean-default */\n\tprops: {\n\t\trichObjectType: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\n\t\trichObject: {\n\t\t\ttype: Object,\n\t\t\tdefault: null,\n\t\t},\n\n\t\taccessible: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\n\tcomputed: {\n\t\temoji() {\n\t\t\treturn this.richObject.page.emoji\n\t\t},\n\t},\n\n\tmethods: {\n\t\tclickLink(event) {\n\t\t\tconst appUrl = '/apps/collectives'\n\t\t\tconst linkUrl = new URL(this.richObject.link, window.location)\n\t\t\t// Only consider rerouting if we're inside the collectives app and for links to collectives app\n\t\t\tif (OCA.Collectives?.vueRouter\n\t\t\t\t&& linkUrl.pathname.toString().startsWith(generateUrl(appUrl))) {\n\t\t\t\tevent.preventDefault()\n\t\t\t\tconst collectivesUrl = linkUrl.href.substring(linkUrl.href.indexOf(appUrl) + appUrl.length)\n\t\t\t\tOCA.Collectives.vueRouter.push(collectivesUrl)\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style scoped lang=\"scss\">\n.collective-page {\n\twidth: 100%;\n\twhite-space: normal;\n\tpadding: 12px !important;\n\tdisplay: flex;\n\ttext-decoration: unset !important;\n\tcolor: var(--color-main-text) !important;\n\n\t&--image {\n\t\tmargin-right: 12px;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\t.page-emoji {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\theight: 50px;\n\t\t\tfont-size: 50px;\n\t\t}\n\t}\n\n\t.spacer {\n\t\tflex-grow: 1;\n\t}\n}\n</style>\n","/**\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport Vue from 'vue'\nimport { registerWidget } from '@nextcloud/vue/components/NcRichText'\nimport PageReferenceWidget from './views/PageReferenceWidget.vue'\n\nVue.prototype.t = t\nVue.prototype.n = n\nVue.prototype.OC = OC\nVue.prototype.OCA = OCA\n\nregisterWidget('collectives_page', (el, { richObjectType, richObject, accessible }) => {\n\tconst Widget = Vue.extend(PageReferenceWidget)\n\tnew Widget({\n\t\tpropsData: {\n\t\t\trichObjectType,\n\t\t\trichObject,\n\t\t\taccessible,\n\t\t},\n\t}).$mount(el)\n})\n"],"names":["_sfc_main","PageIcon","NcUserBubble","event","appUrl","linkUrl","generateUrl","collectivesUrl","Vue","registerWidget","el","richObjectType","richObject","accessible","Widget","PageReferenceWidget"],"mappings":";wLA8CA,MAAAA,EAAA,CACA,KAAA,sBAEA,WAAA,CACA,SAAAC,EACA,aAAAC,CACA,EAIA,MAAA,CACA,eAAA,CACA,KAAA,OACA,QAAA,EACA,EAEA,WAAA,CACA,KAAA,OACA,QAAA,IACA,EAEA,WAAA,CACA,KAAA,QACA,QAAA,EACA,CACA,EAEA,SAAA,CACA,OAAA,CACA,OAAA,KAAA,WAAA,KAAA,KACA,CACA,EAEA,QAAA,CACA,UAAAC,EAAA,CACA,MAAAC,EAAA,oBACAC,EAAA,IAAA,IAAA,KAAA,WAAA,KAAA,OAAA,QAAA,EAEA,GAAA,IAAA,aAAA,WACAA,EAAA,SAAA,SAAA,EAAA,WAAAC,EAAAF,CAAA,CAAA,EAAA,CACAD,EAAA,eAAA,EACA,MAAAI,EAAAF,EAAA,KAAA,UAAAA,EAAA,KAAA,QAAAD,CAAA,EAAAA,EAAA,MAAA,EACA,IAAA,YAAA,UAAA,KAAAG,CAAA,CACA,CACA,CACA,CACA,izBCnFAC,EAAI,UAAU,EAAI,EAClBA,EAAI,UAAU,EAAI,EAClBA,EAAI,UAAU,GAAK,GACnBA,EAAI,UAAU,IAAM,IAEpBC,EAAe,mBAAoB,CAACC,EAAI,CAAE,eAAAC,EAAgB,WAAAC,EAAY,WAAAC,KAAiB,CACtF,MAAMC,EAASN,EAAI,OAAOO,CAAmB,EAC7C,IAAID,EAAO,CACV,UAAW,CACV,eAAAH,EACA,WAAAC,EACA,WAAAC,CACH,CACA,CAAE,EAAE,OAAOH,CAAE,CACb,CAAC"}