/*! third party licenses: js/vendor.LICENSE.txt */
import{n as m,s as a,u as i,l as s,t as d,a as n}from"./modulepreload-polyfill-DsqUG6ei.chunk.mjs";import{V as o}from"./vendor-DyfrS5kh.chunk.mjs";import{N as p}from"./NcEmptyContent-4nhQl1Jo.chunk.mjs";import{S as l}from"./Submit-C5uhIhQb.chunk.mjs";import"./NcSettingsSection-CX5q924g-LnPhDy5H.chunk.mjs";const c={name:"FormsSubmit",components:{NcContent:p,Submit:l},data(){return{form:s("forms","form"),isLoggedIn:s("forms","isLoggedIn"),isEmbedded:s("forms","isEmbedded",!1),shareHash:s("forms","shareHash")}},destroyed(){i("forms:last-updated:set",this.emitSubmitMessage)},mounted(){if(this.isEmbedded){a("forms:last-updated:set",this.emitSubmitMessage);const e=new ResizeObserver(t=>{this.emitResizeMessage(t[0].target)});this.$nextTick(()=>e.observe(document.querySelector(".app-forms-embedded form")))}},methods:{emitSubmitMessage(e){window.parent?.postMessage({type:"form-saved",payload:{id:e}},"*")},emitResizeMessage(e){let t=e.getBoundingClientRect().top+e.scrollHeight,r=e.scrollWidth;t===0&&(e=document.querySelector(".app-forms-embedded main .empty-content"),t=e.getBoundingClientRect().top+e.scrollHeight,r=Math.max(e.scrollWidth,document.querySelector(".app-forms-embedded main header").scrollWidth)),window.parent?.postMessage({type:"resize-iframe",payload:{width:r,height:t}},"*")}}};var f=function(){var e=this,t=e._self._c;return t("NcContent",{class:{"app-forms-embedded":e.isEmbedded},attrs:{"app-name":"forms"}},[t("Submit",{attrs:{form:e.form,"public-view":"","share-hash":e.shareHash,"is-logged-in":e.isLoggedIn,"sidebar-opened":!1}})],1)},h=[],u=m(c,f,h,!1,null,null);const g=u.exports;o.prototype.t=d,o.prototype.n=n,new o({el:"#content",name:"FormsSubmitRoot",render:e=>e(g)});
//# sourceMappingURL=forms-submit.mjs.map
