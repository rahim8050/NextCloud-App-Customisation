/*! third party licenses: js/vendor.LICENSE.txt */
import{n as g,l as s,t as h,a as w}from"./modulepreload-polyfill-DsqUG6ei.chunk.mjs";import{V as e}from"./vendor-DyfrS5kh.chunk.mjs";import{N as f,a as d,b as C,c as l,_ as r,l as c,s as p}from"./NcSettingsSection-CX5q924g-LnPhDy5H.chunk.mjs";const n="forms";const m={name:"FormsSettings",components:{NcCheckboxRadioSwitch:C,NcSelect:d,NcSettingsSection:f},data(){return{appConfig:s(n,"appConfig"),availableGroups:s(n,"availableGroups")}},methods:{async onRestrictCreationChange(o){const i=this.$refs.switchRestrictCreation;i.loading=!0,await this.saveAppConfig("restrictCreation",o),i.loading=!1},async onCreationAllowedGroupsChange(o){const i=this.$refs.switchRestrictCreation;i.loading=!0,await this.saveAppConfig("creationAllowedGroups",o.map(a=>a.groupId)),i.loading=!1},async onAllowPublicLinkChange(o){const i=this.$refs.switchAllowPublicLink;i.loading=!0,await this.saveAppConfig("allowPublicLink",o),i.loading=!1},async onAllowPermitAllChange(o){const i=this.$refs.switchAllowPermitAll;i.loading=!0,await this.saveAppConfig("allowPermitAll",o),i.loading=!1},async onAllowShowToAllChange(o){const i=this.$refs.switchAllowShowToAll;i.loading=!0,await this.saveAppConfig("allowShowToAll",o),i.loading=!1},async saveAppConfig(o,i){try{await l.patch(r("apps/forms/config"),{configKey:o,configValue:i})}catch(a){c.error("Error while saving configuration",{error:a}),p(t("forms","Error while saving configuration")),await this.reloadAppConfig()}},async reloadAppConfig(){try{const o=await l.get(r("apps/forms/config"));this.appConfig=o.data}catch(o){c.error("Error while reloading config",{error:o}),p(t("forms","Error while reloading config"))}}}};var u=function(){var o=this,i=o._self._c;return i("div",[i("NcSettingsSection",{attrs:{name:o.t("forms","Form creation")}},[i("NcCheckboxRadioSwitch",{ref:"switchRestrictCreation",staticClass:"forms-settings__creation__switch",attrs:{checked:o.appConfig.restrictCreation,type:"switch"},on:{"update:checked":[function(a){return o.$set(o.appConfig,"restrictCreation",a)},o.onRestrictCreationChange]}},[o._v(" "+o._s(o.t("forms","Restrict form creation to selected groups"))+" ")]),i("NcSelect",{staticClass:"forms-settings__creation__multiselect",attrs:{disabled:!o.appConfig.restrictCreation,multiple:"",options:o.availableGroups,placeholder:o.t("forms","Select groups"),label:"displayName"},on:{input:o.onCreationAllowedGroupsChange},model:{value:o.appConfig.creationAllowedGroups,callback:function(a){o.$set(o.appConfig,"creationAllowedGroups",a)},expression:"appConfig.creationAllowedGroups"}})],1),i("NcSettingsSection",{attrs:{name:o.t("forms","Form sharing")}},[i("NcCheckboxRadioSwitch",{ref:"switchAllowPublicLink",attrs:{checked:o.appConfig.allowPublicLink,type:"switch"},on:{"update:checked":[function(a){return o.$set(o.appConfig,"allowPublicLink",a)},o.onAllowPublicLinkChange]}},[o._v(" "+o._s(o.t("forms","Allow sharing by link"))+" ")]),i("NcCheckboxRadioSwitch",{ref:"switchAllowPermitAll",attrs:{checked:o.appConfig.allowPermitAll,type:"switch"},on:{"update:checked":[function(a){return o.$set(o.appConfig,"allowPermitAll",a)},o.onAllowPermitAllChange]}},[o._v(" "+o._s(o.t("forms","Allow sharing to all logged in accounts"))+" ")]),i("NcCheckboxRadioSwitch",{ref:"switchAllowShowToAll",attrs:{checked:o.appConfig.allowShowToAll,type:"switch"},on:{"update:checked":[function(a){return o.$set(o.appConfig,"allowShowToAll",a)},o.onAllowShowToAllChange]}},[o._v(" "+o._s(o.t("forms","Allow showing form to all logged in accounts on sidebar"))+" ")])],1)],1)},A=[],S=g(m,u,A,!1,null,"f116e614");const k=S.exports;e.prototype.t=h,e.prototype.n=w,new e({el:"#forms-settings",name:"FormsSettings",render:o=>o(k)});
//# sourceMappingURL=forms-settings.mjs.map
