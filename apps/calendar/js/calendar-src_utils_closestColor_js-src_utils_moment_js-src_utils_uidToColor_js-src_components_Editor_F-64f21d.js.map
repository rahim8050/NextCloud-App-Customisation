{"version":3,"file":"calendar-src_utils_closestColor_js-src_utils_moment_js-src_utils_uidToColor_js-src_components_Editor_F-64f21d.js?v=10dffb9d1d0996f5d8fc","mappings":"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ED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,aAAc,CACb,MACA,uGACA,8CAED,aAAc,CACb,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,aAAc,CACb,MACA,uGACA,8CAED,aAAc,CACb,MACA,uGACA,8CAED,aAAc,CACb,MACA,uGACA,8CAED,aAAc,CACb,MACA,uGACA,8CAED,aAAc,CACb,MACA,uGACA,8CAED,aAAc,CACb,KACA,uGACA,8CAED,aAAc,CACb,MACA,uGACA,8CAED,aAAc,CACb,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,aAAc,CACb,MACA,uGACA,8CAED,aAAc,CACb,MACA,uGACA,8CAED,aAAc,CACb,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,KACA,uGACA,8CAED,UAAW,CACV,KACA,uGACA,8CAED,UAAW,CACV,IACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,WAAY,CACX,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,aAAc,CACb,MACA,uGACA,8CAED,aAAc,CACb,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,gBAAiB,CAChB,MACA,uGACA,8CAED,gBAAiB,CAChB,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,aAAc,CACb,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,aAAc,CACb,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,cAAe,CACd,KACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,aAAc,CACb,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,KACA,uGACA,8CAED,aAAc,CACb,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,cAAe,CACd,MACA,uGACA,8CAED,aAAc,CACb,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,aAAc,CACb,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,KACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,KACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,eAAgB,CACf,KACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,KACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,WAAY,CACX,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,aAAc,CACb,MACA,uGACA,8CAED,WAAY,CACX,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,WAAY,CACX,MACA,uGACA,8CAED,gBAAiB,CAChB,MACA,uGACA,8CAED,WAAY,CACX,MACA,uGACA,8CAED,aAAc,CACb,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,eAAgB,CACf,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,gBAAiB,CAChB,MACA,uGACA,8CAED,UAAW,CACV,MACA,uGACA,8CAED,aAAc,CACb,MACA,uGACA,8CAED,aAAc,CACb,KACA,uGACA,8CAED,aAAc,CACb,MACA,uGACA,8CAED,aAAc,CACb,MACA,uGACA,+CAGF,SAAS+tC,EAAoBC,GAC5B,IAAIC,EAAoBC,EAAEluC,EAAKguC,GAC9B,OAAOhmC,QAAQsoB,UAAU6d,MAAK,KAC7B,IAAInqC,EAAI,IAAIgT,MAAM,uBAAyBg3B,EAAM,KAEjD,MADAhqC,EAAEoqC,KAAO,mBACHpqC,CAAC,IAIT,IAAIqqC,EAAMruC,EAAIguC,GAAM/sC,EAAKotC,EAAI,GAC7B,OAAOrmC,QAAQC,IAAIomC,EAAIvtC,MAAM,GAAGd,IAAIiuC,EAAoBjqC,IAAImqC,MAAK,IACzDF,EAAoB9qC,EAAElC,EAAI,KAEnC,CACA8sC,EAAoB7vB,KAAO,IAAOhiB,OAAOgiB,KAAKle,GAC9C+tC,EAAoB9sC,GAAK,MACzB6sC,EAAOQ,QAAUP,C,sKCprBbzuC,EAAU,CAAC,EAEfA,EAAQivC,kBAAoB,IAC5BjvC,EAAQkvC,cAAgB,IACxBlvC,EAAQmvC,OAAS,SAAc,KAAM,QACrCnvC,EAAQovC,OAAS,IACjBpvC,EAAQqvC,mBAAqB,IAEhB,IAAI,IAASrvC,GAKJ,KAAW,IAAQsvC,QAAS,IAAQA,M,0FCJ1D,SAXgB,E,SAAA,GACd,IACA,IACA,KACA,EACA,KACA,WACA,MAI8B,O,mFCDhC,SAXgB,E,SAAA,GACd,IACA,IACA,KACA,EACA,KACA,WACA,MAI8B,O,gDCnBoJ,Q,SAAkB,C,gDCAR,Q,SAAkB,C,sICGhN,IAAIC,EAAU,EAAQ,OACnBA,EAAQC,aAAYD,EAAUA,EAAQlyC,SACnB,iBAAZkyC,IAAsBA,EAAU,CAAC,CAACf,EAAO7sC,GAAI4tC,EAAS,MAC7DA,EAAQD,SAAQd,EAAOQ,QAAUO,EAAQD,SAG/BG,EADH,YACO,WAAYF,GAAS,EAAM,CAAC,E,iBCN7C,IAAIA,EAAU,EAAQ,OACnBA,EAAQC,aAAYD,EAAUA,EAAQlyC,SACnB,iBAAZkyC,IAAsBA,EAAU,CAAC,CAACf,EAAO7sC,GAAI4tC,EAAS,MAC7DA,EAAQD,SAAQd,EAAOQ,QAAUO,EAAQD,SAG/BG,EADH,YACO,WAAYF,GAAS,EAAM,CAAC,E","sources":["webpack:///calendar/src/components/Editor/FreeBusy/FreeBusy.vue","webpack:///calendar/src/components/Editor/Invitees/InviteesListSearch.vue","webpack://calendar/./src/components/Editor/FreeBusy/FreeBusy.vue?7113","webpack://calendar/./src/components/Editor/Invitees/InviteesListSearch.vue?ae67","webpack:///calendar/src/defaults/defaultCategories.js","webpack:///calendar/src/filters/dateFormat.js","webpack:///calendar/src/filters/dateRangeFormat.js","webpack:///calendar/src/fullcalendar/eventSources/freeBusyEventSource.js","webpack:///calendar/src/fullcalendar/eventSources/freeBusyResourceEventSourceFunction.js","webpack:///calendar/src/fullcalendar/localization/dateFormattingConfig.js","webpack:///calendar/src/fullcalendar/localization/localeProvider.js","webpack:///calendar/src/fullcalendar/localization/momentPlugin.js","webpack:///calendar/src/fullcalendar/timezones/vtimezoneNamedTimezoneImpl.js","webpack:///calendar/src/models/alarm.js","webpack:///calendar/src/models/attachment.js","webpack:///calendar/src/models/calendar.js","webpack:///calendar/src/models/calendarObject.js","webpack:///calendar/src/models/calendarShare.js","webpack:///calendar/src/models/event.js","webpack:///calendar/src/models/principal.js","webpack:///calendar/src/models/recurrenceRule.js","webpack:///calendar/src/models/rfcProps.js","webpack:///calendar/src/services/attachmentService.js","webpack:///calendar/src/services/circleService.js","webpack:///calendar/src/services/freeBusySlotService.js","webpack:///calendar/src/services/isCirclesEnabled.js","webpack:///calendar/src/services/settings.js","webpack:///calendar/src/services/timezoneDataProviderService.js","webpack:///calendar/src/services/timezoneDetectionService.js","webpack:///calendar/src/store/calendarObjectInstance.js","webpack:///calendar/src/store/calendarObjects.js","webpack:///calendar/src/store/calendars.js","webpack:///calendar/src/store/fetchedTimeRanges.js","webpack:///calendar/src/store/importFiles.js","webpack:///calendar/src/store/importState.js","webpack:///calendar/src/store/principals.js","webpack:///calendar/src/store/settings.js","webpack:///calendar/src/store/unscheduledTasks.js","webpack:///calendar/src/utils/alarms.js","webpack:///calendar/src/utils/closestColor.js","webpack:///calendar/src/utils/moment.js","webpack:///calendar/src/utils/randomId.js","webpack:///calendar/src/utils/recurrence.js","webpack:///calendar/src/utils/settings.js","webpack:///calendar/src/utils/uidToColor.js","webpack:///calendar/src/components/Editor/FreeBusy/FreeBusy.vue?vue&type=style&index=0&id=2913064d&prod&lang=scss&scoped=true","webpack:///calendar/src/components/Editor/FreeBusy/FreeBusy.vue?vue&type=style&index=1&id=2913064d&prod&lang=scss","webpack:///calendar/src/components/Editor/Invitees/InviteesListSearch.vue?vue&type=style&index=0&id=1780911c&prod&scoped=true&lang=css","webpack:///calendar/node_modules/moment/locale|lazy|/^\\.\\/.*\\.js$/|groupOptions: {}|namespace object","webpack://calendar/./src/components/Editor/Invitees/InviteesListSearch.vue?394e","webpack://calendar/./src/components/Editor/FreeBusy/FreeBusy.vue?19c8","webpack://calendar/./src/components/Editor/Invitees/InviteesListSearch.vue?175c","webpack:///calendar/src/components/Editor/FreeBusy/FreeBusy.vue?vue&type=script&lang=js","webpack:///calendar/src/components/Editor/Invitees/InviteesListSearch.vue?vue&type=script&lang=js","webpack://calendar/./src/components/Editor/FreeBusy/FreeBusy.vue?4b2a","webpack://calendar/./src/components/Editor/FreeBusy/FreeBusy.vue?19bf"],"sourcesContent":["<!--\n  - SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<NcModal size=\"full\"\n\t\t:name=\"dialogName || $t('calendar', 'Availability of attendees, resources and rooms')\"\n\t\t@close=\"$emit('close')\">\n\t\t<div class=\"modal\">\n\t\t\t<div class=\"modal__content\">\n\t\t\t\t<div v-if=\"loadingIndicator\" class=\"loading-indicator\">\n\t\t\t\t\t<div class=\"icon-loading\" />\n\t\t\t\t</div>\n\t\t\t\t<div class=\"modal__content__header\">\n\t\t\t\t\t<p v-if=\"isMobile && freeSlots && !disableFindTime\">\n\t\t\t\t\t\t<NcSelect class=\"modal__content__header__available-slots\"\n\t\t\t\t\t\t\t:options=\"freeSlots\"\n\t\t\t\t\t\t\t:placeholder=\"placeholder\"\n\t\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t\tinput-id=\"slot\"\n\t\t\t\t\t\t\tlabel=\"displayStart\"\n\t\t\t\t\t\t\t:label-outside=\"true\"\n\t\t\t\t\t\t\t:value=\"selectedSlot\"\n\t\t\t\t\t\t\t@option:selected=\"setSlotSuggestion\">\n\t\t\t\t\t\t\t<template #selected-option=\"{}\">\n\t\t\t\t\t\t\t\t{{ $t('calendar', 'Suggestion accepted') }}\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</NcSelect>\n\t\t\t\t\t</p>\n\t\t\t\t\t<div v-if=\"isMobile\" class=\"modal__content__header__attendees\">\n\t\t\t\t\t\t<InviteesListSearch v-if=\"isMobile\"\n\t\t\t\t\t\t\tclass=\"modal__content__header__attendees__search\"\n\t\t\t\t\t\t\t:already-invited-emails=\"alreadyInvitedEmails\"\n\t\t\t\t\t\t\t:organizer=\"organizer\"\n\t\t\t\t\t\t\t@add-attendee=\"addAttendee\" />\n\t\t\t\t\t\t<NcUserBubble :size=\"24\" :display-name=\"organizer.commonName\" />\n\t\t\t\t\t\t<NcUserBubble v-for=\"attendee in attendees\"\n\t\t\t\t\t\t\t:key=\"attendee.id\"\n\t\t\t\t\t\t\t:size=\"24\"\n\t\t\t\t\t\t\tclass=\"modal__content__header__attendees__user-bubble\"\n\t\t\t\t\t\t\t:display-name=\"attendee.commonName\">\n\t\t\t\t\t\t\t<template #name>\n\t\t\t\t\t\t\t\t<a href=\"#\"\n\t\t\t\t\t\t\t\t\ttitle=\"Remove user\"\n\t\t\t\t\t\t\t\t\tclass=\"icon-close\"\n\t\t\t\t\t\t\t\t\t@click=\"removeAttendee(attendee)\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</NcUserBubble>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"modal__content__actions\" :class=\"{'modal__content__actions--mobile': isMobile}\">\n\t\t\t\t\t<div v-if=\"isMobile\" class=\"modal__content__actions__date date-navigation\">\n\t\t\t\t\t\t<NcButton type=\"secondary\"\n\t\t\t\t\t\t\t:aria-label=\"t('calendar', 'Today')\"\n\t\t\t\t\t\t\t@click=\"handleActions('today')\">\n\t\t\t\t\t\t\t{{ $t('calendar', 'Today') }}\n\t\t\t\t\t\t</NcButton>\n\t\t\t\t\t\t<NcButton type=\"secondary\"\n\t\t\t\t\t\t\t:aria-label=\"isRTL? t('calendar', 'Previous date') : t('calendar', 'Next date')\"\n\t\t\t\t\t\t\t@click=\"handleActions(isRTL ? 'next' : 'prev')\">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<ChevronRightIcon v-if=\"isRTL\" :size=\"22\" />\n\t\t\t\t\t\t\t\t<ChevronLeftIcon v-else :size=\"22\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</NcButton>\n\t\t\t\t\t\t<NcDateTimePickerNative :hide-label=\"true\"\n\t\t\t\t\t\t\t:value=\"currentStart\"\n\t\t\t\t\t\t\t@input=\"(date)=>handleActions('picker', date)\" />\n\t\t\t\t\t\t<NcButton type=\"secondary\"\n\t\t\t\t\t\t\t:aria-label=\"isRTL? t('calendar', 'Next date') : t('calendar', 'Previous date')\"\n\t\t\t\t\t\t\t@click=\"handleActions(isRTL ? 'prev' : 'next')\">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<ChevronLeftIcon v-if=\"isRTL\" :size=\"22\" />\n\t\t\t\t\t\t\t\t<ChevronRightIcon v-else :size=\"22\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</NcButton>\n\t\t\t\t\t\t<NcPopover :focus-trap=\"false\">\n\t\t\t\t\t\t\t<template #trigger>\n\t\t\t\t\t\t\t\t<NcButton type=\"tertiary-no-background\"\n\t\t\t\t\t\t\t\t\t:aria-label=\"t('calendar', 'Legend')\">\n\t\t\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t\t\t<HelpCircleIcon :size=\"20\" />\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t</NcButton>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template #default>\n\t\t\t\t\t\t\t\t<div class=\"freebusy-caption\">\n\t\t\t\t\t\t\t\t\t<div class=\"freebusy-caption__calendar-user-types\" />\n\t\t\t\t\t\t\t\t\t<div class=\"freebusy-caption__colors\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"freebusy-caption-item\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"freebusy-caption-item__color\" />\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"\n\t\t\t\t\t\t\t\t\t\t\tfreebusy-caption-item__label\">\n\t\t\t\t\t\t\t\t\t\t\t\t{{ $t('calendar', 'Out of office') }}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</NcPopover>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"modal__content__title\" :class=\"{'modal__content__title--mobile': isMobile}\">\n\t\t\t\t\t<div v-if=\"!isMobile\" class=\"modal__content__actions__title__date date-navigation\">\n\t\t\t\t\t\t<NcButton type=\"secondary\"\n\t\t\t\t\t\t\t:aria-label=\"t('calendar', 'Today')\"\n\t\t\t\t\t\t\t@click=\"handleActions('today')\">\n\t\t\t\t\t\t\t{{ $t('calendar', 'Today') }}\n\t\t\t\t\t\t</NcButton>\n\t\t\t\t\t\t<NcButton type=\"secondary\"\n\t\t\t\t\t\t\t:aria-label=\"isRTL? t('calendar', 'Previous date') : t('calendar', 'Next date')\"\n\t\t\t\t\t\t\t@click=\"handleActions(isRTL ? 'next' : 'prev')\">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<ChevronRightIcon v-if=\"isRTL\" :size=\"22\" />\n\t\t\t\t\t\t\t\t<ChevronLeftIcon v-else :size=\"22\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</NcButton>\n\t\t\t\t\t\t<NcDateTimePickerNative :hide-label=\"true\"\n\t\t\t\t\t\t\t:value=\"currentStart\"\n\t\t\t\t\t\t\t@input=\"(date)=>handleActions('picker', date)\" />\n\t\t\t\t\t\t<NcButton type=\"secondary\"\n\t\t\t\t\t\t\t:aria-label=\"isRTL? t('calendar', 'Next date') : t('calendar', 'Previous date')\"\n\t\t\t\t\t\t\t@click=\"handleActions(isRTL ? 'prev' : 'next')\">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<ChevronLeftIcon v-if=\"isRTL\" :size=\"22\" />\n\t\t\t\t\t\t\t\t<ChevronRightIcon v-else :size=\"22\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</NcButton>\n\t\t\t\t\t\t<NcPopover :focus-trap=\"false\">\n\t\t\t\t\t\t\t<template #trigger>\n\t\t\t\t\t\t\t\t<NcButton type=\"tertiary-no-background\">\n\t\t\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t\t\t<HelpCircleIcon :size=\"20\" />\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t</NcButton>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template #default>\n\t\t\t\t\t\t\t\t<div class=\"freebusy-caption\">\n\t\t\t\t\t\t\t\t\t<div class=\"freebusy-caption__calendar-user-types\" />\n\t\t\t\t\t\t\t\t\t<div class=\"freebusy-caption__colors\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"freebusy-caption-item\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"freebusy-caption-item__color\" />\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"\n\t\t\t\t\t\t\t\t\t\t\tfreebusy-caption-item__label\">\n\t\t\t\t\t\t\t\t\t\t\t\t{{ $t('calendar', 'Out of office') }}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</NcPopover>\n\t\t\t\t\t</div>\n\t\t\t\t\t<h2>{{ weekNumber }}</h2>\n\t\t\t\t\t<div class=\"modal__content__title__buttons\">\n\t\t\t\t\t\t<NcButton :type=\"view === 'timeGridWeek' ? 'secondary' : 'tertiary'\"\n\t\t\t\t\t\t\t:disabled=\"view === 'timeGridWeek'\"\n\t\t\t\t\t\t\t@click=\"updateView('timeGridWeek')\">\n\t\t\t\t\t\t\t{{ t('calendar','Week') }}\n\t\t\t\t\t\t</NcButton>\n\t\t\t\t\t\t<NcButton :type=\"view === 'timeGridDay' ? 'secondary' : 'tertiary'\"\n\t\t\t\t\t\t\t:disabled=\"view === 'timeGridDay'\"\n\t\t\t\t\t\t\t@click=\"updateView('timeGridDay')\">\n\t\t\t\t\t\t\t{{ t('calendar','Day') }}\n\t\t\t\t\t\t</NcButton>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"modal__content__body\">\n\t\t\t\t\t<div v-if=\"!isMobile\" class=\"modal__content__body__sidebar\">\n\t\t\t\t\t\t<p v-if=\"freeSlots && !disableFindTime\">\n\t\t\t\t\t\t\t<NcSelect class=\"available-slots__multiselect\"\n\t\t\t\t\t\t\t\t:options=\"freeSlots\"\n\t\t\t\t\t\t\t\t:placeholder=\"placeholder\"\n\t\t\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t\t\tinput-id=\"slot\"\n\t\t\t\t\t\t\t\tlabel=\"displayStart\"\n\t\t\t\t\t\t\t\t:label-outside=\"true\"\n\t\t\t\t\t\t\t\t:value=\"selectedSlot\"\n\t\t\t\t\t\t\t\t:loading=\"loadingIndicator\"\n\t\t\t\t\t\t\t\t:disabled=\"loadingIndicator\"\n\t\t\t\t\t\t\t\t@option:selected=\"setSlotSuggestion\">\n\t\t\t\t\t\t\t\t<template #selected-option=\"{}\">\n\t\t\t\t\t\t\t\t\t{{ $t('calendar', 'Suggestion accepted') }}\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</NcSelect>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<div class=\"modal__content__body__sidebar__attendees\">\n\t\t\t\t\t\t\t{{ $t('calendar', 'Attendees:') }}\n\t\t\t\t\t\t\t<InviteesListSearch class=\"modal__content__actions__select\"\n\t\t\t\t\t\t\t\t:already-invited-emails=\"alreadyInvitedEmails\"\n\t\t\t\t\t\t\t\t:organizer=\"organizer\"\n\t\t\t\t\t\t\t\t@add-attendee=\"addAttendee\" />\n\t\t\t\t\t\t\t<NcListItemIcon :name=\"organizer.commonName\"\n\t\t\t\t\t\t\t\tclass=\"modal__content__body__sidebar__attendees__item\" />\n\t\t\t\t\t\t\t<NcListItemIcon v-for=\"attendee in attendees\"\n\t\t\t\t\t\t\t\t:key=\"attendee.id\"\n\t\t\t\t\t\t\t\t:name=\"attendee.commonName\"\n\t\t\t\t\t\t\t\tclass=\"modal__content__body__sidebar__attendees__item\">\n\t\t\t\t\t\t\t\t<NcActions>\n\t\t\t\t\t\t\t\t\t<NcActionButton @click=\"removeAttendee(attendee)\">\n\t\t\t\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t\t\t\t<Close :size=\"20\" />\n\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t{{ t('calendar','Delete') }}\n\t\t\t\t\t\t\t\t\t</NcActionButton>\n\t\t\t\t\t\t\t\t</NcActions>\n\t\t\t\t\t\t\t</NcListItemIcon>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"modal__content__body__calendar\">\n\t\t\t\t\t\t<FullCalendar ref=\"freeBusyFullCalendar\"\n\t\t\t\t\t\t\t:options=\"options\" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"modal__content__footer\">\n\t\t\t\t<div class=\"modal__content__footer__content\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<p class=\"modal__content__footer__content__date\">\n\t\t\t\t\t\t\t{{ formattedCurrentStart }}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p>{{ formattedCurrentTime }}<span class=\"modal__content__footer__content__timezone\">{{ formattedTimeZone }}</span></p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<NcButton type=\"primary\"\n\t\t\t\t\t\t@click=\"save\">\n\t\t\t\t\t\t{{ $t('calendar', 'Done') }}\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<CheckIcon :size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</NcButton>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</NcModal>\n</template>\n\n<script>\n// Import FullCalendar itself\nimport FullCalendar from '@fullcalendar/vue'\nimport timeGridPlugin from '@fullcalendar/timegrid'\nimport interactionPlugin from '@fullcalendar/interaction'\n\n// Import event sources\nimport freeBusyEventSource from '../../../fullcalendar/eventSources/freeBusyEventSource.js'\n\n// Import localization plugins\nimport { getDateFormattingConfig } from '../../../fullcalendar/localization/dateFormattingConfig.js'\nimport { getFullCalendarLocale } from '../../../fullcalendar/localization/localeProvider.js'\nimport momentPlugin from '../../../fullcalendar/localization/momentPlugin.js'\n\n// Import timezone plugins\nimport VTimezoneNamedTimezone from '../../../fullcalendar/timezones/vtimezoneNamedTimezoneImpl.js'\n\nimport { NcDateTimePickerNative, NcButton, NcPopover, NcUserBubble, NcModal, NcSelect, NcListItemIcon, NcActions, NcActionButton } from '@nextcloud/vue'\nimport isMobile from '@nextcloud/vue/dist/Mixins/isMobile.js'\nimport { AttendeeProperty } from '@nextcloud/calendar-js'\nimport { isRTL } from '@nextcloud/l10n'\n\nimport ChevronRightIcon from 'vue-material-design-icons/ChevronRight.vue'\nimport ChevronLeftIcon from 'vue-material-design-icons/ChevronLeft.vue'\nimport CheckIcon from 'vue-material-design-icons/Check.vue'\nimport Close from 'vue-material-design-icons/Close.vue'\nimport HelpCircleIcon from 'vue-material-design-icons/HelpCircleOutline.vue'\n\nimport InviteesListSearch from '../Invitees/InviteesListSearch.vue'\n\nimport { getFirstFreeSlot, getBusySlots } from '../../../services/freeBusySlotService.js'\nimport dateFormat from '../../../filters/dateFormat.js'\nimport { mapState } from 'pinia'\nimport useSettingsStore from '../../../store/settings.js'\nimport useCalendarsStore from '../../../store/calendars.js'\nimport { uidToHexColor } from '../../../utils/color.js'\nimport formatDateRange from '../../../filters/dateRangeFormat.js'\n\nexport default {\n\tname: 'FreeBusy',\n\tcomponents: {\n\t\tNcSelect,\n\t\tFullCalendar,\n\t\tInviteesListSearch,\n\t\tNcActions,\n\t\tNcActionButton,\n\t\tNcDateTimePickerNative,\n\t\tNcModal,\n\t\tNcButton,\n\t\tNcPopover,\n\t\tNcUserBubble,\n\t\tNcListItemIcon,\n\t\tChevronRightIcon,\n\t\tChevronLeftIcon,\n\t\tCheckIcon,\n\t\tHelpCircleIcon,\n\t\tClose,\n\t},\n\tmixins: [isMobile],\n\tprops: {\n\t\t/**\n\t\t * The organizer object.\n\t\t * See /src/models/attendee.js for details\n\t\t */\n\t\torganizer: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\t/**\n\t\t * The attendee objects.\n\t\t * See /src/models/attendee.js for details\n\t\t */\n\t\tattendees: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\t/**\n\t\t * The start-date to query free-busy information from\n\t\t */\n\t\tstartDate: {\n\t\t\ttype: Date,\n\t\t\trequired: true,\n\t\t},\n\t\t/**\n\t\t * The end-date to query free-busy information from\n\t\t */\n\t\tendDate: {\n\t\t\ttype: Date,\n\t\t\trequired: true,\n\t\t},\n\t\tallDay: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\teventTitle: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\talreadyInvitedEmails: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tdialogName: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t},\n\t\tdisableFindTime: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloadingIndicator: true,\n\t\t\tcurrentIsAllDay: this.allDay,\n\t\t\tcurrentStart: this.startDate,\n\t\t\tcurrentEnd: this.endDate,\n\t\t\tlang: getFullCalendarLocale().locale,\n\t\t\tformattingOptions: { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' },\n\t\t\tfreeSlots: [],\n\t\t\tselectedSlot: null,\n\t\t\tview: 'timeGridWeek',\n\t\t\t// used to avoid double update of start and end date\n\t\t\tnavigatingWithButtons: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\t...mapState(useSettingsStore, {\n\t\t\ttimezoneId: 'getResolvedTimezone',\n\t\t}),\n\t\t...mapState(useSettingsStore, {\n\t\t\tlocale: 'momentLocale',\n\t\t}),\n\t\t...mapState(useSettingsStore, ['showWeekends', 'showWeekNumbers', 'timezone']),\n\t\t...mapState(useCalendarsStore, {\n\t\t\tpersonalCalendarColor: 'getPersonalCalendarColor',\n\t\t}),\n\t\tisRTL() {\n\t\t\treturn isRTL()\n\t\t},\n\t\tweekNumber() {\n\t\t\treturn formatDateRange(this.currentStart, this.view, this.locale)\n\t\t},\n\t\tplaceholder() {\n\t\t\treturn this.$t('calendar', 'Suggested times')\n\t\t},\n\t\t/**\n\t\t * FullCalendar Plugins\n\t\t *\n\t\t * @return {(PluginDef)[]}\n\t\t */\n\t\tplugins() {\n\t\t\treturn [\n\t\t\t\ttimeGridPlugin,\n\t\t\t\tmomentPlugin,\n\t\t\t\tVTimezoneNamedTimezone,\n\t\t\t\tinteractionPlugin,\n\t\t\t]\n\t\t},\n\t\tformattedCurrentStart() {\n\t\t\t// Check if the event spawns over multiple days\n\t\t\tif (this.currentStart.getDate() !== this.currentEnd.getDate()) {\n\t\t\t\treturn this.currentStart.toLocaleDateString(this.lang, this.formattingOptions) + ' - '\n\t\t\t\t\t+ this.currentEnd.toLocaleDateString(this.lang, this.formattingOptions)\n\t\t\t}\n\t\t\treturn this.currentStart.toLocaleDateString(this.lang, this.formattingOptions)\n\t\t},\n\t\tformattedCurrentTime() {\n\t\t\tconst options = { hour: '2-digit', minute: '2-digit', hour12: true }\n\n\t\t\tconst startTime = this.currentStart.toLocaleTimeString(this.lang, options)\n\t\t\tconst endTime = this.currentEnd?.toLocaleTimeString(this.lang, options)\n\n\t\t\treturn `${startTime} - ${endTime} `\n\t\t},\n\t\tformattedTimeZone() {\n\t\t\treturn this.timezoneId.replace('/', '-')\n\t\t},\n\t\teventSources() {\n\t\t\tconst attendees = this.attendees.map((a) => a.attendeeProperty)\n\t\t\tconst organizer = new AttendeeProperty('ATTENDEE', this.organizer.attendeeProperty.email)\n\t\t\torganizer.commonName = this.organizer.attendeeProperty.commonName\n\t\t\treturn [...attendees, organizer].map((a) => freeBusyEventSource(\n\t\t\t\tthis._uid,\n\t\t\t\tthis.organizer.attendeeProperty,\n\t\t\t\ta,\n\t\t\t))\n\t\t},\n\t\tresources() {\n\t\t\tconst resources = []\n\t\t\tconst roles = {\n\t\t\t\tCHAIR: this.$t('calendar', 'chairperson'),\n\t\t\t\t'REQ-PARTICIPANT': this.$t('calendar', 'required participant'),\n\t\t\t\t'NON-PARTICIPANT': this.$t('calendar', 'non-participant'),\n\t\t\t\t'OPT-PARTICIPANT': this.$t('calendar', 'optional participant'),\n\t\t\t}\n\t\t\tfor (const attendee of [this.organizer, ...this.attendees]) {\n\t\t\t\tlet title = attendee.commonName || attendee.uri.slice(7)\n\t\t\t\tif (attendee === this.organizer) {\n\t\t\t\t\ttitle = this.$t('calendar', '{organizer} (organizer)', {\n\t\t\t\t\t\torganizer: title,\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\ttitle = this.$t('calendar', '{attendee} ({role})', {\n\t\t\t\t\t\tattendee: title,\n\t\t\t\t\t\trole: roles[attendee.role],\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tresources.push({\n\t\t\t\t\tid: attendee.attendeeProperty.email,\n\t\t\t\t\ttitle,\n\t\t\t\t})\n\t\t\t}\n\t\t\t// Sort the resources by ID, just like fullcalendar does. This ensures that\n\t\t\t// the fake blocking event can know the first and last resource reliably\n\t\t\t// ref https://fullcalendar.io/docs/resourceOrder\n\t\t\tresources.sort((a, b) => (a.id > b.id) - (a.id < b.id))\n\n\t\t\treturn resources\n\t\t},\n\t\t/**\n\t\t * Configuration options for FullCalendar\n\t\t * Please see https://fullcalendar.io/docs#toc for details\n\t\t *\n\t\t * @return {object}\n\t\t */\n\t\toptions() {\n\t\t\treturn {\n\t\t\t\t// Initialization:\n\t\t\t\tinitialView: this.view,\n\t\t\t\tinitialDate: this.currentStart,\n\t\t\t\tschedulerLicenseKey: 'GPL-My-Project-Is-Open-Source',\n\t\t\t\t// Data\n\t\t\t\teventSources: this.eventSources,\n\t\t\t\t// Plugins\n\t\t\t\tplugins: this.plugins,\n\t\t\t\t// Interaction:\n\t\t\t\teditable: false,\n\t\t\t\tselectable: true,\n\t\t\t\tselect: this.handleSelect,\n\t\t\t\teventDidMount: this.eventDidMount,\n\t\t\t\teventChange: this.handleChange,\n\t\t\t\t// Localization:\n\t\t\t\t...getDateFormattingConfig(),\n\t\t\t\t...getFullCalendarLocale(),\n\t\t\t\t// Rendering\n\t\t\t\theight: 'parent',\n\t\t\t\tloading: this.loading,\n\t\t\t\theaderToolbar: false,\n\t\t\t\t// Timezones:\n\t\t\t\ttimeZone: this.timezoneId,\n\t\t\t\t// Formatting of the title\n\t\t\t\t// will produce something like \"Tuesday, September 18, 2018\"\n\t\t\t\t// ref https://fullcalendar.io/docs/date-formatting\n\t\t\t\ttitleFormat: {\n\t\t\t\t  month: 'long',\n\t\t\t\t  year: 'numeric',\n\t\t\t\t  day: 'numeric',\n\t\t\t\t  weekday: 'long',\n\t\t\t\t},\n\t\t\t\tdateClick: this.findFreeSlots(),\n\t\t\t}\n\t\t},\n\t},\n\twatch: {\n\t\tview(newView) {\n\t\t\tconst calendar = this.$refs.freeBusyFullCalendar.getApi()\n\t\t\tcalendar.changeView(newView)\n\t\t},\n\t\tattendees(newVal) {\n\t\t\tif (newVal.length === 0) {\n\t\t\t\tthis.$emit('close:no-attendees')\n\t\t\t}\n\t\t},\n\t},\n\tmounted() {\n\t\tconst calendar = this.$refs.freeBusyFullCalendar.getApi()\n\t\tthis.view = this.attendees.length > 4 || this.isMobile ? 'timeGridDay' : 'timeGridWeek'\n\t\tif (this.allDay) {\n\t\t\tthis.currentEnd.setDate(this.currentStart.getDate() + 1)\n\t\t}\n\t\tcalendar.addEvent({\n\t\t\tid: 'selected-event-slot',\n\t\t\ttitle: t('calendar', 'Selected slot'),\n\t\t\tstart: this.currentStart,\n\t\t\tend: this.currentEnd,\n\t\t\ttextColor: 'var(--color-main-text)',\n\t\t\tbackgroundColor: 'rgba(0, 0, 0, 0)',\n\t\t\teditable: true,\n\t\t\toverlap: true,\n\t\t\tallDay: this.allDay,\n\t\t})\n\n\t\tthis.findFreeSlots()\n\n\t\tthis.$nextTick(() => calendar.updateSize())\n\t},\n\tmethods: {\n\t\tupdateView(view) {\n\t\t\tconst calendar = this.$refs.freeBusyFullCalendar.getApi()\n\t\t\tcalendar.changeView(view)\n\t\t\tthis.view = view\n\t\t},\n\t\thandleSelect(arg) {\n\t\t\tconst calendar = this.$refs.freeBusyFullCalendar.getApi()\n\t\t\tthis.currentStart = arg.start\n\t\t\tthis.currentEnd = arg.end\n\t\t\tthis.currentIsAllDay = arg.allDay\n\t\t\tcalendar.getEventById('selected-event-slot').setDates(arg.start, arg.end)\n\t\t},\n\t\thandleChange(e) {\n\t\t\tif (this.navigatingWithButtons) {\n\t\t\t\tthis.navigatingWithButtons = false\n\t\t\t\treturn\n\t\t\t}\n\t\t\t// Selected slot is the only editable event\n\t\t\tif (e.event.id === 'selected-event-slot') {\n\t\t\t\tthis.currentStart = e.event.start\n\t\t\t\tthis.currentEnd = e.event.end\n\t\t\t}\n\n\t\t},\n\t\teventDidMount(e) {\n\t\t\tconst eventElement = e.el\n\t\t\tif (e.event.id === 'selected-event-slot') {\n\t\t\t\teventElement.style.setProperty('border', `2px solid ${this.personalCalendarColor}`, 'important')\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (e.el.classList.contains('free-busy-busy-unavailable--organizer')) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (e.el.classList.contains('free-busy-organizer')) {\n\t\t\t\teventElement.style.background = `repeating-linear-gradient(45deg, ${this.personalCalendarColor}, ${this.personalCalendarColor} 1px, transparent 1px, transparent 3.5px)`\n\t\t\t\treturn\n\t\t\t}\n\t\t\teventElement.style.background = uidToHexColor(e.event.title)\n\t\t},\n\t\tsave() {\n\t\t\tthis.$emit('update-dates', { start: this.currentStart, end: this.currentEnd })\n\t\t},\n\t\taddAttendee(attendee) {\n\t\t\tthis.$emit('add-attendee', attendee)\n\t\t\tthis.findFreeSlots()\n\t\t},\n\t\tremoveAttendee(attendee) {\n\t\t\tthis.$emit('remove-attendee', attendee)\n\t\t\tthis.findFreeSlots()\n\t\t},\n\t\tloading(isLoading) {\n\t\t\tthis.loadingIndicator = isLoading\n\t\t},\n\t\thandleActions(action, date = null) {\n\t\t\tthis.navigatingWithButtons = true\n\t\t\tconst calendar = this.$refs.freeBusyFullCalendar.getApi()\n\t\t\tswitch (action) {\n\t\t\tcase 'today':\n\t\t\t\tcalendar.today()\n\t\t\t\tbreak\n\t\t\tcase 'prev':\n\t\t\t\tcalendar.prev()\n\t\t\t\tbreak\n\t\t\tcase 'next':\n\t\t\t\tcalendar.next()\n\t\t\t\tbreak\n\t\t\tcase 'picker':\n\t\t\t\tcalendar.gotoDate(date)\n\t\t\t\tbreak\n\t\t\t}\n\n\t\t\tconst newStart = calendar.getDate()\n\t\t\tconst oldStart = new Date(this.currentStart)\n\t\t\tconst oldEnd = new Date(this.currentEnd)\n\n\t\t\t// we want to preserve hh:mm as actions are only for changing the date\n\t\t\toldStart.setDate(newStart.getDate())\n\t\t\toldStart.setMonth(newStart.getMonth())\n\t\t\toldStart.setFullYear(newStart.getFullYear())\n\n\t\t\toldEnd.setDate(this.currentIsAllDay ? newStart.getDate() + 1 : newStart.getDate())\n\t\t\toldEnd.setMonth(newStart.getMonth())\n\t\t\toldEnd.setFullYear(newStart.getFullYear())\n\n\t\t\tthis.currentStart = oldStart\n\t\t\tthis.currentEnd = oldEnd\n\n\t\t\tcalendar.getEventById('selected-event-slot').setStart(this.currentStart)\n\t\t\tcalendar.getEventById('selected-event-slot').setEnd(this.currentEnd)\n\t\t\tthis.findFreeSlots()\n\t\t},\n\t\tasync findFreeSlots() {\n\t\t\t// Doesn't make sense for multiple days\n\t\t\tif (this.currentStart.getDate() !== this.currentEnd.getDate()) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// Needed to update with full calendar widget changes\n\t\t\tconst startSearch = new Date(this.currentStart)\n\n\t\t\tconst endSearch = new Date(this.currentEnd)\n\n\t\t\ttry {\n\t\t\t\t// for now search slots only in the first week days\n\t\t\t\tconst endSearchDate = new Date(startSearch)\n\t\t\t\tendSearchDate.setDate(startSearch.getDate() + 8)\n\t\t\t\tconst eventResults = await getBusySlots(\n\t\t\t\t\tthis.organizer.attendeeProperty,\n\t\t\t\t\tthis.attendees.map((a) => a.attendeeProperty),\n\t\t\t\t\tstartSearch,\n\t\t\t\t\tendSearchDate,\n\t\t\t\t\tthis.timezoneId,\n\t\t\t\t)\n\n\t\t\t\tconst freeSlots = getFirstFreeSlot(\n\t\t\t\t\tstartSearch,\n\t\t\t\t\tendSearch,\n\t\t\t\t\teventResults.events,\n\t\t\t\t)\n\n\t\t\t\tfreeSlots.forEach((slot) => {\n\t\t\t\t\tslot.displayStart = dateFormat(slot.start, false, getFullCalendarLocale().locale)\n\t\t\t\t})\n\n\t\t\t\tthis.freeSlots = freeSlots\n\t\t\t} catch (error) {\n\t\t\t\t// Handle error here\n\t\t\t\tconsole.error('Error occurred while finding free slots:', error)\n\t\t\t\tthrow error // Re-throwing the error to handle it in the caller\n\t\t\t}\n\t\t},\n\t\tsetSlotSuggestion(slot) {\n\t\t\tthis.loading(true)\n\t\t\tthis.selectedSlot = slot\n\n\t\t\tconst calendar = this.$refs.freeBusyFullCalendar.getApi()\n\t\t\tcalendar.gotoDate(slot.start)\n\n\t\t\t// have to make these \"selected\" version of the props seeing as they can't be modified directly, and they aren't updated reactively when vuex is\n\t\t\tthis.currentStart = slot.start\n\t\t\tthis.currentEnd = slot.end\n\t\t\tcalendar.getEventById('selected-event-slot').setStart(this.currentStart)\n\t\t\tcalendar.getEventById('selected-event-slot').setEnd(this.currentEnd)\n\n\t\t\tconst checkCondition = () => {\n\t\t\t\tif (calendar.getDate() === slot.start) {\n\t\t\t\t\tthis.loading(false)\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tsetTimeout(checkCondition, 100)\n\t\t\t}\n\t\t\tcheckCondition()\n\t\t},\n\t},\n}\n</script>\n\n<style lang='scss' scoped>\n.icon-close {\n\tdisplay: block;\n\theight: 100%;\n}\n\n.freebusy-caption-item{\n\t&__color{\n\t\tbackground: repeating-linear-gradient(45deg, #dbdbdb, #dbdbdb 1px, transparent 1px, transparent 3.5px) !important;\n\t}\n}\n\n.modal{\n\tdisplay: flex !important;\n\tjustify-content: center;\n\talign-items: stretch;\n\twidth: 100%;\n\theight: 100%;\n\toverflow: hidden;\n\n\t:deep(.free-busy-busy-unavailable--organizer){\n\t\tbackground: repeating-linear-gradient(45deg, #dbdbdb, #dbdbdb 1px, transparent 1px, transparent 3.5px) !important;\n\t}\n\n\t.date-navigation{\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\t& > *{\n\t\t\tmargin-inline-start: var(--default-grid-baseline);\n\t\t}\n\t}\n\n\t&__content {\n\t\tmax-width: 1200px;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tpadding: 0 calc(var(--default-grid-baseline) * 4);\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\t&__actions{\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tjustify-content: space-between;\n\t\t\talign-items: center;\n\t\t\tmargin-bottom: calc(var(--default-grid-baseline) * 4);\n\t\t\t&--mobile{\n\t\t\t\talign-items: flex-start;\n\t\t\t}\n\t\t\t;\n\t\t\t&__select{\n\t\t\t\twidth: 260px;\n\t\t\t}\n\t\t}\n\t\t&__title{\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t\talign-items: center;\n\t\t\tmargin-bottom: calc(var(--default-grid-baseline) * 4);\n\t\t\twidth: calc(100% - 260px);\n\t\t\tmargin-inline-start: 260px;\n\t\t\t&--mobile{\n\t\t\t\twidth: 100%;\n\t\t\t\tmargin: 0;\n\t\t\t}\n\t\t\th2{\n\t\t\t\tfont-weight: 500;\n\t\t\t\tmargin: 0;\n\t\t\t}\n\t\t\t&__buttons{\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: flex-end;\n\t\t\t\talign-items: center;\n\t\t\t}\n\t\t}\n\t\t&__header{\n\t\t\tmargin: calc(var(--default-grid-baseline) * 4) 0;\n\t\t\th3{\n\t\t\t\tfont-weight: 500;\n\t\t\t}\n\t\t\t&__available-slots{\n\t\t\t\tmargin: var(--default-grid-baseline) 0;\n\t\t\t\twidth: 100%;\n\t\t\t\tmargin-top: calc(4 * var(--default-grid-baseline)) !important;\n\t\t\t\tmargin-bottom: calc(2 * var(--default-grid-baseline)) !important;\n\t\t\t}\n\t\t\t&__attendees{\n\t\t\t\t&__search{\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\tmargin-bottom: calc(2 * var(--default-grid-baseline)) !important;\n\t\t\t\t}\n\t\t\t\t&__user-bubble{\n\t\t\t\t\tmargin-inline-end: var(--default-grid-baseline);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t&__body{\n\t\t\tdisplay: flex;\n\t\t\twidth: 100%;\n\t\t\tflex: 1 1 auto;\n\t\t\toverflow: hidden;\n\t\t\tposition: relative;\n\t\t\tpadding-bottom: 80px;\n\t\t\t&__sidebar{\n\t\t\t\tmargin-top: var(--default-grid-baseline);\n\t\t\t\twidth: 260px;\n\t\t\t\tflex-shrink: 0;\n\t\t\t\tmargin-inline-end: calc(2 * var(--default-grid-baseline));\n\t\t\t\t&__attendees{\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t}\n\t\t\t}\n\t\t\t&__calendar{\n\t\t\t\tflex: 1 1 0%;\n\t\t\t}\n\t\t}\n\t\t&__footer{\n\t\t\tbackground-color: var(--color-main-background);\n\t\t\tpadding: 10px 12px;\n\t\t\theight: 60px;\n\t\t\tz-index: 9998;\n\t\t\twidth: calc(100% - 24px);\n\t\t\tinset-inline-end: 0;\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: center;\n\t\t\tposition: absolute;\n\t\t\tbottom: 0;\n\t\t\tbox-shadow: 0 -4px 8px rgba(0, 0, 0, 0.05);\n\t\t\t&__content{\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: space-between;\n\t\t\t\talign-items: flex-end;\n\t\t\t\twidth: 1200px;\n\t\t\t\t&__date{\n\t\t\t\t\tmargin-top: calc(var(--default-grid-baseline) * 4);\n\t\t\t\t\tfont-weight: 600;\n\t\t\t\t}\n\t\t\t\t&__timezone{\n\t\t\t\t\t\tcolor: var(--color-text-lighter);\n\t\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n:deep(.vs__search ) {\n\ttext-overflow: ellipsis;\n}\n\n:deep(.mx-input) {\n\theight: 38px !important;\n}\n\n:deep(.fc-event) {\n\tpointer-events: none;\n\tmargin-inline-end: 0 !important;\n\tborder-radius: 6px !important;\n\tborder: 2px solid transparent !important;\n}\n\n:deep(.fc-event-time){\n\tdisplay: none !important;\n}\n\n:deep(.fc) {\n\theight: 100% !important;\n\twidth: 100%;\n}\n\n:deep(.fc-scroller) {\n\toverflow-y: auto !important;\n}\n\n</style>\n\n<style lang=\"scss\">\n.blocking-event-free-busy {\n\t// Show the blocking event above any other blocks, especially the *blocked for all* one\n\tz-index: 3 !important;\n}\n\n.free-busy-block {\n\topacity: 0.7 !important;\n}\n</style>\n","<!--\n  - SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<NcSelect class=\"invitees-search__vselect\"\n\t\t:options=\"matches\"\n\t\t:searchable=\"true\"\n\t\t:max-height=\"600\"\n\t\t:placeholder=\"placeholder\"\n\t\t:class=\"{ 'showContent': inputGiven, 'icon-loading': isLoading }\"\n\t\t:clearable=\"false\"\n\t\t:label-outside=\"true\"\n\t\tinput-id=\"uid\"\n\t\tlabel=\"dropdownName\"\n\t\t@search=\"findAttendees\"\n\t\t@option:selected=\"addAttendee\">\n\t\t<template #option=\"option\">\n\t\t\t<div class=\"invitees-search-list-item\">\n\t\t\t\t<!-- We need to specify a unique key here for the avatar to be reactive. -->\n\t\t\t\t<Avatar v-if=\"option.isUser\"\n\t\t\t\t\t:key=\"option.uid\"\n\t\t\t\t\t:user=\"option.avatar\"\n\t\t\t\t\t:display-name=\"option.dropdownName\" />\n\t\t\t\t<Avatar v-else-if=\"option.type === 'circle'\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<GoogleCirclesCommunitiesIcon :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t</Avatar>\n\t\t\t\t<Avatar v-if=\"!option.isUser && option.type !== 'circle'\"\n\t\t\t\t\t:key=\"option.uid\"\n\t\t\t\t\t:url=\"option.avatar\"\n\t\t\t\t\t:display-name=\"option.commonName\" />\n\n\t\t\t\t<div class=\"invitees-search-list-item__label\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{{ option.commonName }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"option.email !== option.commonName && option.type !== 'circle' && option.type !== 'contactsgroup'\">\n\t\t\t\t\t\t{{ option.email }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"option.type === 'circle' || option.type === 'contactsgroup'\">\n\t\t\t\t\t\t{{ option.subtitle }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t</NcSelect>\n</template>\n\n<script>\nimport {\n\tNcAvatar as Avatar,\n\tNcSelect,\n} from '@nextcloud/vue'\nimport { principalPropertySearchByDisplaynameOrEmail } from '../../../services/caldavService.js'\nimport isCirclesEnabled from '../../../services/isCirclesEnabled.js'\nimport {\n\tcircleSearchByName,\n\tcircleGetMembers,\n} from '../../../services/circleService.js'\nimport HttpClient from '@nextcloud/axios'\nimport debounce from 'debounce'\nimport { linkTo } from '@nextcloud/router'\nimport { randomId } from '../../../utils/randomId.js'\nimport GoogleCirclesCommunitiesIcon from 'vue-material-design-icons/GoogleCirclesCommunities.vue'\nimport { showInfo } from '@nextcloud/dialogs'\nimport { removeMailtoPrefix } from '../../../utils/attendee.js'\n\nexport default {\n\tname: 'InviteesListSearch',\n\tcomponents: {\n\t\tAvatar,\n\t\tNcSelect,\n\t\tGoogleCirclesCommunitiesIcon,\n\t},\n\tprops: {\n\t\talreadyInvitedEmails: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\torganizer: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tisLoading: false,\n\t\t\tinputGiven: false,\n\t\t\tmatches: [],\n\t\t\tisCirclesEnabled,\n\t\t}\n\t},\n\tcomputed: {\n\t\tplaceholder() {\n\t\t\treturn this.$t('calendar', 'Search for emails, users, contacts, contact groups or teams')\n\t\t},\n\t\tnoResult() {\n\t\t\treturn this.$t('calendar', 'No match found')\n\t\t},\n\t},\n\tmethods: {\n\t\tfindAttendees: debounce(async function(query) {\n\t\t\tthis.isLoading = true\n\t\t\tconst matches = []\n\n\t\t\tif (query.length > 0) {\n\t\t\t\tconst promises = [\n\t\t\t\t\tthis.findAttendeesFromContactsAPI(query),\n\t\t\t\t\tthis.findAttendeesFromDAV(query),\n\t\t\t\t]\n\t\t\t\tif (isCirclesEnabled) {\n\t\t\t\t\tpromises.push(this.findAttendeesFromCircles(query))\n\t\t\t\t}\n\n\t\t\t\tconst [contactsResults, davResults, circleResults] = await Promise.all(promises)\n\t\t\t\tmatches.push(...contactsResults)\n\t\t\t\tmatches.push(...davResults)\n\t\t\t\tif (isCirclesEnabled) {\n\t\t\t\t\tmatches.push(...circleResults)\n\t\t\t\t}\n\n\t\t\t\t// Source of the Regex: https://stackoverflow.com/a/46181\n\t\t\t\t// eslint-disable-next-line\n\t\t\t\tconst emailRegex = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n\t\t\t\tif (emailRegex.test(query)) {\n\t\t\t\t\tconst alreadyInList = matches.find((attendee) => attendee.email.toLowerCase() === query.toLowerCase())\n\t\t\t\t\tif (!alreadyInList) {\n\t\t\t\t\t\tmatches.unshift({\n\t\t\t\t\t\t\tcalendarUserType: 'INDIVIDUAL',\n\t\t\t\t\t\t\tcommonName: query,\n\t\t\t\t\t\t\temail: query,\n\t\t\t\t\t\t\tisUser: false,\n\t\t\t\t\t\t\tavatar: null,\n\t\t\t\t\t\t\tlanguage: null,\n\t\t\t\t\t\t\ttimezoneId: null,\n\t\t\t\t\t\t\thasMultipleEMails: false,\n\t\t\t\t\t\t\tdropdownName: query,\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Generate a unique id for every result to make the avatar components reactive\n\t\t\t\tfor (const match of matches) {\n\t\t\t\t\tmatch.uid = randomId()\n\t\t\t\t}\n\n\t\t\t\tthis.isLoading = false\n\t\t\t\tthis.inputGiven = true\n\t\t\t} else {\n\t\t\t\tthis.inputGiven = false\n\t\t\t\tthis.isLoading = false\n\t\t\t}\n\n\t\t\tthis.matches = matches\n\t\t}, 500),\n\t\taddAttendee(selectedValue) {\n\n\t\t\tif (selectedValue.type === 'circle') {\n\t\t\t\tshowInfo(this.$t('calendar', 'Note that members of circles get invited but are not synced yet.'))\n\t\t\t\tthis.resolveCircleMembers(selectedValue.id)\n\t\t\t}\n\t\t\tif (selectedValue.type === 'contactsgroup') {\n\t\t\t\tshowInfo(this.$t('calendar', 'Note that members of contact groups get invited but are not synced yet.'))\n\t\t\t\tthis.getContactGroupMembers(selectedValue.commonName)\n\t\t\t\tconst group = {\n\t\t\t\t\tcalendarUserType: 'GROUP',\n\t\t\t\t\tcommonName: selectedValue.commonName,\n\t\t\t\t\tdropdownName: selectedValue.dropdownName,\n\t\t\t\t\temail: selectedValue.email,\n\t\t\t\t\tisUser: false,\n\t\t\t\t\tsubtitle: selectedValue.subtitle,\n\t\t\t\t\ttype: 'contactsgroup',\n\t\t\t\t}\n\t\t\t\tthis.$emit('add-attendee', group)\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.$emit('add-attendee', selectedValue)\n\t\t},\n\t\tasync resolveCircleMembers(circleId) {\n\t\t\tlet results\n\t\t\ttry {\n\t\t\t\t// Going to query custom backend to fetch Circle members since we're going to use\n\t\t\t\t// mail addresses of local circle members. The Circles API doesn't expose member\n\t\t\t\t// emails yet. Change approved by @miaulalala and @ChristophWurst.\n\t\t\t\tresults = await circleGetMembers(circleId)\n\t\t\t} catch (error) {\n\t\t\t\tconsole.debug(error)\n\t\t\t\treturn []\n\t\t\t}\n\t\t\tresults.data.forEach((member) => {\n\t\t\t\tif (!this.organizer || member.email !== this.organizer.uri) {\n\t\t\t\t\tthis.$emit('add-attendee', member)\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tasync getContactGroupMembers(groupName) {\n\t\t\tlet results\n\t\t\ttry {\n\t\t\t\tresults = await HttpClient.post(linkTo('calendar', 'index.php') + '/v1/autocompletion/groupmembers', {\n\t\t\t\t\tgroupName,\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Failed to fetch contact group members', error)\n\t\t\t\treturn []\n\t\t\t}\n\n\t\t\tresults.data.forEach((member) => {\n\t\t\t\tif (!this.organizer || member.email !== this.organizer.uri) {\n\t\t\t\t\tthis.$emit('add-attendee', member)\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tasync findAttendeesFromContactsAPI(query) {\n\t\t\tlet response\n\n\t\t\ttry {\n\t\t\t\tresponse = await HttpClient.post(linkTo('calendar', 'index.php') + '/v1/autocompletion/attendee', {\n\t\t\t\t\tsearch: query,\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tconsole.debug(error)\n\t\t\t\treturn []\n\t\t\t}\n\n\t\t\tconst data = response.data\n\t\t\treturn data.reduce((arr, result) => {\n\t\t\t\tconst hasMultipleEMails = result.emails.length > 1\n\n\t\t\t\tresult.emails.forEach((email) => {\n\t\t\t\t\tlet name\n\t\t\t\t\tif (result.name && !hasMultipleEMails) {\n\t\t\t\t\t\tname = result.name\n\t\t\t\t\t} else if (result.name && hasMultipleEMails) {\n\t\t\t\t\t\tname = `${result.name} (${email})`\n\t\t\t\t\t} else {\n\t\t\t\t\t\tname = email\n\t\t\t\t\t}\n\n\t\t\t\t\tif (email && this.alreadyInvitedEmails.includes(removeMailtoPrefix(email))) {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tif (result.type === 'contactsgroup') {\n\t\t\t\t\t\tarr.push({\n\t\t\t\t\t\t\tcalendarUserType: 'GROUP',\n\t\t\t\t\t\t\tcommonName: result.name,\n\t\t\t\t\t\t\tsubtitle: this.$n('calendar', '%n member', '%n members', result.members),\n\t\t\t\t\t\t\tmembers: { length: result.members },\n\t\t\t\t\t\t\temail,\n\t\t\t\t\t\t\tisUser: false,\n\t\t\t\t\t\t\tavatar: result.photo,\n\t\t\t\t\t\t\tlanguage: result.lang,\n\t\t\t\t\t\t\ttimezoneId: result.tzid,\n\t\t\t\t\t\t\thasMultipleEMails: false,\n\t\t\t\t\t\t\tdropdownName: name,\n\t\t\t\t\t\t\ttype: 'contactsgroup',\n\t\t\t\t\t\t})\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tarr.push({\n\t\t\t\t\t\tcalendarUserType: 'INDIVIDUAL',\n\t\t\t\t\t\tcommonName: result.name,\n\t\t\t\t\t\temail,\n\t\t\t\t\t\tisUser: false,\n\t\t\t\t\t\tavatar: result.photo,\n\t\t\t\t\t\tlanguage: result.lang,\n\t\t\t\t\t\ttimezoneId: result.tzid,\n\t\t\t\t\t\thasMultipleEMails,\n\t\t\t\t\t\tdropdownName: name,\n\t\t\t\t\t})\n\t\t\t\t})\n\n\t\t\t\treturn arr\n\t\t\t}, [])\n\t\t},\n\t\tasync findAttendeesFromDAV(query) {\n\t\t\tlet results\n\t\t\ttry {\n\t\t\t\tresults = await principalPropertySearchByDisplaynameOrEmail(query)\n\t\t\t} catch (error) {\n\t\t\t\tconsole.debug(error)\n\t\t\t\treturn []\n\t\t\t}\n\n\t\t\treturn results.filter((principal) => {\n\t\t\t\tif (!principal.email) {\n\t\t\t\t\treturn false\n\t\t\t\t}\n\n\t\t\t\tif (this.alreadyInvitedEmails.includes(principal.email)) {\n\t\t\t\t\treturn false\n\t\t\t\t}\n\n\t\t\t\t// Do not include resources and rooms\n\t\t\t\tif (['ROOM', 'RESOURCE'].includes(principal.calendarUserType)) {\n\t\t\t\t\treturn false\n\t\t\t\t}\n\n\t\t\t\treturn true\n\t\t\t}).map((principal) => {\n\t\t\t\treturn {\n\t\t\t\t\tcommonName: principal.displayname,\n\t\t\t\t\tcalendarUserType: principal.calendarUserType,\n\t\t\t\t\temail: principal.email,\n\t\t\t\t\tlanguage: principal.language,\n\t\t\t\t\tisUser: principal.calendarUserType === 'INDIVIDUAL',\n\t\t\t\t\tavatar: decodeURIComponent(principal.userId),\n\t\t\t\t\thasMultipleEMails: false,\n\t\t\t\t\tdropdownName: principal.displayname ? [principal.displayname, principal.email].join(' ') : principal.email,\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tasync findAttendeesFromCircles(query) {\n\t\t\tlet results\n\t\t\ttry {\n\t\t\t\tresults = await circleSearchByName(query)\n\t\t\t} catch (error) {\n\t\t\t\tconsole.debug(error)\n\t\t\t\treturn []\n\t\t\t}\n\n\t\t\treturn results.map((circle) => {\n\t\t\t\treturn {\n\t\t\t\t\tcommonName: circle.displayname,\n\t\t\t\t\tcalendarUserType: 'GROUP',\n\t\t\t\t\temail: 'circle+' + circle.id + '@' + circle.instance,\n\t\t\t\t\tisUser: false,\n\t\t\t\t\tdropdownName: circle.displayname,\n\t\t\t\t\ttype: 'circle',\n\t\t\t\t\tid: circle.id,\n\t\t\t\t\tsubtitle: this.$n('calendar', '%n member', '%n members', circle.population),\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n:deep(.avatardiv) {\n\toverflow: visible !important;\n}\n</style>\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('NcModal',{attrs:{\"size\":\"full\",\"name\":_vm.dialogName || _vm.$t('calendar', 'Availability of attendees, resources and rooms')},on:{\"close\":function($event){return _vm.$emit('close')}}},[_c('div',{staticClass:\"modal\"},[_c('div',{staticClass:\"modal__content\"},[(_vm.loadingIndicator)?_c('div',{staticClass:\"loading-indicator\"},[_c('div',{staticClass:\"icon-loading\"})]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"modal__content__header\"},[(_vm.isMobile && _vm.freeSlots && !_vm.disableFindTime)?_c('p',[_c('NcSelect',{staticClass:\"modal__content__header__available-slots\",attrs:{\"options\":_vm.freeSlots,\"placeholder\":_vm.placeholder,\"clearable\":false,\"input-id\":\"slot\",\"label\":\"displayStart\",\"label-outside\":true,\"value\":_vm.selectedSlot},on:{\"option:selected\":_vm.setSlotSuggestion},scopedSlots:_vm._u([{key:\"selected-option\",fn:function({}){return [_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.$t('calendar', 'Suggestion accepted'))+\"\\n\\t\\t\\t\\t\\t\\t\")]}}],null,false,1565055063)})],1):_vm._e(),_vm._v(\" \"),(_vm.isMobile)?_c('div',{staticClass:\"modal__content__header__attendees\"},[(_vm.isMobile)?_c('InviteesListSearch',{staticClass:\"modal__content__header__attendees__search\",attrs:{\"already-invited-emails\":_vm.alreadyInvitedEmails,\"organizer\":_vm.organizer},on:{\"add-attendee\":_vm.addAttendee}}):_vm._e(),_vm._v(\" \"),_c('NcUserBubble',{attrs:{\"size\":24,\"display-name\":_vm.organizer.commonName}}),_vm._v(\" \"),_vm._l((_vm.attendees),function(attendee){return _c('NcUserBubble',{key:attendee.id,staticClass:\"modal__content__header__attendees__user-bubble\",attrs:{\"size\":24,\"display-name\":attendee.commonName},scopedSlots:_vm._u([{key:\"name\",fn:function(){return [_c('a',{staticClass:\"icon-close\",attrs:{\"href\":\"#\",\"title\":\"Remove user\"},on:{\"click\":function($event){return _vm.removeAttendee(attendee)}}})]},proxy:true}],null,true)})})],2):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"modal__content__actions\",class:{'modal__content__actions--mobile': _vm.isMobile}},[(_vm.isMobile)?_c('div',{staticClass:\"modal__content__actions__date date-navigation\"},[_c('NcButton',{attrs:{\"type\":\"secondary\",\"aria-label\":_vm.t('calendar', 'Today')},on:{\"click\":function($event){return _vm.handleActions('today')}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.$t('calendar', 'Today'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('NcButton',{attrs:{\"type\":\"secondary\",\"aria-label\":_vm.isRTL? _vm.t('calendar', 'Previous date') : _vm.t('calendar', 'Next date')},on:{\"click\":function($event){return _vm.handleActions(_vm.isRTL ? 'next' : 'prev')}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [(_vm.isRTL)?_c('ChevronRightIcon',{attrs:{\"size\":22}}):_c('ChevronLeftIcon',{attrs:{\"size\":22}})]},proxy:true}],null,false,1358314897)}),_vm._v(\" \"),_c('NcDateTimePickerNative',{attrs:{\"hide-label\":true,\"value\":_vm.currentStart},on:{\"input\":(date)=>_vm.handleActions('picker', date)}}),_vm._v(\" \"),_c('NcButton',{attrs:{\"type\":\"secondary\",\"aria-label\":_vm.isRTL? _vm.t('calendar', 'Next date') : _vm.t('calendar', 'Previous date')},on:{\"click\":function($event){return _vm.handleActions(_vm.isRTL ? 'prev' : 'next')}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [(_vm.isRTL)?_c('ChevronLeftIcon',{attrs:{\"size\":22}}):_c('ChevronRightIcon',{attrs:{\"size\":22}})]},proxy:true}],null,false,1870829617)}),_vm._v(\" \"),_c('NcPopover',{attrs:{\"focus-trap\":false},scopedSlots:_vm._u([{key:\"trigger\",fn:function(){return [_c('NcButton',{attrs:{\"type\":\"tertiary-no-background\",\"aria-label\":_vm.t('calendar', 'Legend')},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('HelpCircleIcon',{attrs:{\"size\":20}})]},proxy:true}],null,false,2680586304)})]},proxy:true},{key:\"default\",fn:function(){return [_c('div',{staticClass:\"freebusy-caption\"},[_c('div',{staticClass:\"freebusy-caption__calendar-user-types\"}),_vm._v(\" \"),_c('div',{staticClass:\"freebusy-caption__colors\"},[_c('div',{staticClass:\"freebusy-caption-item\"},[_c('div',{staticClass:\"freebusy-caption-item__color\"}),_vm._v(\" \"),_c('div',{staticClass:\"freebusy-caption-item__label\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.$t('calendar', 'Out of office'))+\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\")])])])])]},proxy:true}],null,false,843471570)})],1):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"modal__content__title\",class:{'modal__content__title--mobile': _vm.isMobile}},[(!_vm.isMobile)?_c('div',{staticClass:\"modal__content__actions__title__date date-navigation\"},[_c('NcButton',{attrs:{\"type\":\"secondary\",\"aria-label\":_vm.t('calendar', 'Today')},on:{\"click\":function($event){return _vm.handleActions('today')}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.$t('calendar', 'Today'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('NcButton',{attrs:{\"type\":\"secondary\",\"aria-label\":_vm.isRTL? _vm.t('calendar', 'Previous date') : _vm.t('calendar', 'Next date')},on:{\"click\":function($event){return _vm.handleActions(_vm.isRTL ? 'next' : 'prev')}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [(_vm.isRTL)?_c('ChevronRightIcon',{attrs:{\"size\":22}}):_c('ChevronLeftIcon',{attrs:{\"size\":22}})]},proxy:true}],null,false,1358314897)}),_vm._v(\" \"),_c('NcDateTimePickerNative',{attrs:{\"hide-label\":true,\"value\":_vm.currentStart},on:{\"input\":(date)=>_vm.handleActions('picker', date)}}),_vm._v(\" \"),_c('NcButton',{attrs:{\"type\":\"secondary\",\"aria-label\":_vm.isRTL? _vm.t('calendar', 'Next date') : _vm.t('calendar', 'Previous date')},on:{\"click\":function($event){return _vm.handleActions(_vm.isRTL ? 'prev' : 'next')}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [(_vm.isRTL)?_c('ChevronLeftIcon',{attrs:{\"size\":22}}):_c('ChevronRightIcon',{attrs:{\"size\":22}})]},proxy:true}],null,false,1870829617)}),_vm._v(\" \"),_c('NcPopover',{attrs:{\"focus-trap\":false},scopedSlots:_vm._u([{key:\"trigger\",fn:function(){return [_c('NcButton',{attrs:{\"type\":\"tertiary-no-background\"},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('HelpCircleIcon',{attrs:{\"size\":20}})]},proxy:true}],null,false,2680586304)})]},proxy:true},{key:\"default\",fn:function(){return [_c('div',{staticClass:\"freebusy-caption\"},[_c('div',{staticClass:\"freebusy-caption__calendar-user-types\"}),_vm._v(\" \"),_c('div',{staticClass:\"freebusy-caption__colors\"},[_c('div',{staticClass:\"freebusy-caption-item\"},[_c('div',{staticClass:\"freebusy-caption-item__color\"}),_vm._v(\" \"),_c('div',{staticClass:\"freebusy-caption-item__label\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.$t('calendar', 'Out of office'))+\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\")])])])])]},proxy:true}],null,false,2553328958)})],1):_vm._e(),_vm._v(\" \"),_c('h2',[_vm._v(_vm._s(_vm.weekNumber))]),_vm._v(\" \"),_c('div',{staticClass:\"modal__content__title__buttons\"},[_c('NcButton',{attrs:{\"type\":_vm.view === 'timeGridWeek' ? 'secondary' : 'tertiary',\"disabled\":_vm.view === 'timeGridWeek'},on:{\"click\":function($event){return _vm.updateView('timeGridWeek')}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('calendar','Week'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('NcButton',{attrs:{\"type\":_vm.view === 'timeGridDay' ? 'secondary' : 'tertiary',\"disabled\":_vm.view === 'timeGridDay'},on:{\"click\":function($event){return _vm.updateView('timeGridDay')}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('calendar','Day'))+\"\\n\\t\\t\\t\\t\\t\")])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"modal__content__body\"},[(!_vm.isMobile)?_c('div',{staticClass:\"modal__content__body__sidebar\"},[(_vm.freeSlots && !_vm.disableFindTime)?_c('p',[_c('NcSelect',{staticClass:\"available-slots__multiselect\",attrs:{\"options\":_vm.freeSlots,\"placeholder\":_vm.placeholder,\"clearable\":false,\"input-id\":\"slot\",\"label\":\"displayStart\",\"label-outside\":true,\"value\":_vm.selectedSlot,\"loading\":_vm.loadingIndicator,\"disabled\":_vm.loadingIndicator},on:{\"option:selected\":_vm.setSlotSuggestion},scopedSlots:_vm._u([{key:\"selected-option\",fn:function({}){return [_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.$t('calendar', 'Suggestion accepted'))+\"\\n\\t\\t\\t\\t\\t\\t\\t\")]}}],null,false,2079017815)})],1):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"modal__content__body__sidebar__attendees\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.$t('calendar', 'Attendees:'))+\"\\n\\t\\t\\t\\t\\t\\t\"),_c('InviteesListSearch',{staticClass:\"modal__content__actions__select\",attrs:{\"already-invited-emails\":_vm.alreadyInvitedEmails,\"organizer\":_vm.organizer},on:{\"add-attendee\":_vm.addAttendee}}),_vm._v(\" \"),_c('NcListItemIcon',{staticClass:\"modal__content__body__sidebar__attendees__item\",attrs:{\"name\":_vm.organizer.commonName}}),_vm._v(\" \"),_vm._l((_vm.attendees),function(attendee){return _c('NcListItemIcon',{key:attendee.id,staticClass:\"modal__content__body__sidebar__attendees__item\",attrs:{\"name\":attendee.commonName}},[_c('NcActions',[_c('NcActionButton',{on:{\"click\":function($event){return _vm.removeAttendee(attendee)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('Close',{attrs:{\"size\":20}})]},proxy:true}],null,true)},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('calendar','Delete'))+\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\")])],1)],1)})],2)]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"modal__content__body__calendar\"},[_c('FullCalendar',{ref:\"freeBusyFullCalendar\",attrs:{\"options\":_vm.options}})],1)])]),_vm._v(\" \"),_c('div',{staticClass:\"modal__content__footer\"},[_c('div',{staticClass:\"modal__content__footer__content\"},[_c('div',[_c('p',{staticClass:\"modal__content__footer__content__date\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.formattedCurrentStart)+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm.formattedCurrentTime)),_c('span',{staticClass:\"modal__content__footer__content__timezone\"},[_vm._v(_vm._s(_vm.formattedTimeZone))])])]),_vm._v(\" \"),_c('NcButton',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.save},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('CheckIcon',{attrs:{\"size\":20}})]},proxy:true}])},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.$t('calendar', 'Done'))+\"\\n\\t\\t\\t\\t\\t\")])],1)])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('NcSelect',{staticClass:\"invitees-search__vselect\",class:{ 'showContent': _vm.inputGiven, 'icon-loading': _vm.isLoading },attrs:{\"options\":_vm.matches,\"searchable\":true,\"max-height\":600,\"placeholder\":_vm.placeholder,\"clearable\":false,\"label-outside\":true,\"input-id\":\"uid\",\"label\":\"dropdownName\"},on:{\"search\":_vm.findAttendees,\"option:selected\":_vm.addAttendee},scopedSlots:_vm._u([{key:\"option\",fn:function(option){return [_c('div',{staticClass:\"invitees-search-list-item\"},[(option.isUser)?_c('Avatar',{key:option.uid,attrs:{\"user\":option.avatar,\"display-name\":option.dropdownName}}):(option.type === 'circle')?_c('Avatar',{scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('GoogleCirclesCommunitiesIcon',{attrs:{\"size\":20}})]},proxy:true}],null,true)}):_vm._e(),_vm._v(\" \"),(!option.isUser && option.type !== 'circle')?_c('Avatar',{key:option.uid,attrs:{\"url\":option.avatar,\"display-name\":option.commonName}}):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"invitees-search-list-item__label\"},[_c('div',[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(option.commonName)+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),(option.email !== option.commonName && option.type !== 'circle' && option.type !== 'contactsgroup')?_c('div',[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(option.email)+\"\\n\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(option.type === 'circle' || option.type === 'contactsgroup')?_c('div',[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(option.subtitle)+\"\\n\\t\\t\\t\\t\")]):_vm._e()])],1)]}}])})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport { translate as t } from '@nextcloud/l10n'\n\n/**\n *\n */\nexport function getDefaultCategories() {\n\t// This list was taken from https://tools.ietf.org/html/rfc5545#section-5\n\tconst values = [\n\t\tt('calendar', 'Anniversary'),\n\t\tt('calendar', 'Appointment'),\n\t\tt('calendar', 'Business'),\n\t\tt('calendar', 'Education'),\n\t\tt('calendar', 'Holiday'),\n\t\tt('calendar', 'Meeting'),\n\t\tt('calendar', 'Miscellaneous'),\n\t\tt('calendar', 'Non-working hours'),\n\t\tt('calendar', 'Not in office'),\n\t\tt('calendar', 'Personal'),\n\t\tt('calendar', 'Phone call'),\n\t\tt('calendar', 'Sick day'),\n\t\tt('calendar', 'Special occasion'),\n\t\tt('calendar', 'Travel'),\n\t\tt('calendar', 'Vacation'),\n\t]\n\treturn values.map(value => ({ value, label: value }))\n}\n\nexport default getDefaultCategories\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport moment from '@nextcloud/moment'\n\n/**\n * Formats a date object\n *\n * @param {Date} value The date object to format\n * @param {boolean} isAllDay Whether or not to display only the date part\n * @param {string} locale The locale to format it in\n * @return {string}\n */\nexport default (value, isAllDay, locale) => {\n\tif (isAllDay) {\n\t\treturn moment(value).locale(locale).format('ll')\n\t} else {\n\t\treturn moment(value).locale(locale).format('lll')\n\t}\n}\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport moment from '@nextcloud/moment'\nimport { translate as t } from '@nextcloud/l10n'\n\n/**\n * Formats a date-range depending on the user's current view\n *\n * @param {string | Date} value The date to format\n * @param {string} view The current view of the user\n * @param {string} locale Which locale to format it in\n * @return {string}\n */\nexport default (value, view, locale) => {\n\tswitch (view) {\n\tcase 'timeGridDay':\n\t\treturn moment(value).locale(locale).format('ll')\n\n\tcase 'timeGridWeek':\n\t\treturn t('calendar', 'Week {number} of {year}', {\n\t\t\tnumber: moment(value).locale(locale).week(),\n\t\t\tyear: moment(value).locale(locale).weekYear(),\n\t\t})\n\n\tcase 'multiMonthYear':\n\t\treturn moment(value).locale(locale).format('YYYY')\n\n\tcase 'dayGridMonth':\n\tcase 'listMonth':\n\tdefault:\n\t\treturn moment(value).locale(locale).format('MMMM YYYY')\n\t}\n}\n","/**\n * SPDX-FileCopyrightText: 2025 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport { AttendeeProperty } from '@nextcloud/calendar-js'\nimport { getBusySlots } from '../../services/freeBusySlotService.js'\n\n/**\n * Returns an event source for event free-busy\n *\n * @param {string} id Identification for this source\n * @param {AttendeeProperty} organizer The organizer of the event\n * @param {AttendeeProperty} attendee The event's attendee\n * @return {{startEditable: boolean, resourceEditable: boolean, editable: boolean, id: string, durationEditable: boolean, events: events, color: string}}\n */\nexport default function(id, organizer, attendee) {\n\treturn {\n\t\tid: 'free-busy-event-source-' + id,\n\t\teditable: false,\n\t\tstartEditable: false,\n\t\tdurationEditable: false,\n\t\tresourceEditable: false,\n\t\tevents: async ({ start, end, timeZone }, successCallback, failureCallback) => {\n\t\t\tconst result = await getBusySlots(organizer, [attendee], start, end, timeZone, false)\n\t\t\tif (result.error) {\n\t\t\t\tfailureCallback(result.error)\n\t\t\t} else {\n\t\t\t\tsuccessCallback(result.events)\n\t\t\t}\n\t\t},\n\t}\n}\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { getParserManager } from '@nextcloud/calendar-js'\n\n/**\n * Converts the response\n *\n * @param {string} uri URI of the resource\n * @param {string} calendarData Calendar-data containing free-busy data\n * @param {boolean} success Whether or not the free-busy request was successful\n * @param {Date} start The start of the fetched time-range\n * @param {Date} end The end of the fetched time-range\n * @param {string} timezone Timezone of user viewing data\n * @param {string} attendeeName name of the attendee, used as title for the event\n * @param {boolean} isOrganizer Whether or not the user is the organizer of the event\n * @return {object[]}\n */\nexport default function(uri, calendarData, success, start, end, timezone, attendeeName, isOrganizer = false) {\n\tif (!success) {\n\t\treturn [{\n\t\t\tid: Math.random().toString(36).substring(7),\n\t\t\tstart: start.getInTimezone(timezone).jsDate.toISOString(),\n\t\t\tend: end.getInTimezone(timezone).jsDate.toISOString(),\n\t\t\tresourceId: uri,\n\t\t\tdisplay: 'background',\n\t\t\tallDay: false,\n\t\t\ttitle: attendeeName,\n\t\t\ttextColor: '#FFFFFF',\n\t\t}]\n\t}\n\n\tconst parserManager = getParserManager()\n\tconst parser = parserManager.getParserForFileType('text/calendar')\n\tparser.parse(calendarData)\n\n\t// TODO: fix me upstream, parser only exports VEVENT, VJOURNAL and VTODO at the moment\n\tconst calendarComponent = parser._calendarComponent\n\tconst freeBusyComponent = calendarComponent.getFirstComponent('VFREEBUSY')\n\tif (!freeBusyComponent) {\n\t\treturn []\n\t}\n\n\tconst events = []\n\tfor (const freeBusyProperty of freeBusyComponent.getPropertyIterator('FREEBUSY')) {\n\t\t/** @member {FreeBusyProperty} freeBusyProperty */\n\t\tevents.push({\n\t\t\tid: Math.random().toString(36).substring(7),\n\t\t\tstart: freeBusyProperty.getFirstValue().start.getInTimezone(timezone).jsDate,\n\t\t\tend: freeBusyProperty.getFirstValue().end.getInTimezone(timezone).jsDate,\n\t\t\tallDay: (freeBusyProperty.getFirstValue().end.unixTime - freeBusyProperty.getFirstValue().start.unixTime) >= 24 * 60 * 60,\n\t\t\tresourceId: uri,\n\t\t\tdisplay: 'auto',\n\t\t\tclassNames: [\n\t\t\t\t'free-busy-block',\n\t\t\t\tisOrganizer ? 'free-busy-organizer' : '',\n\t\t\t\t'free-busy-' + freeBusyProperty.type.toLowerCase(),\n\t\t\t\tisOrganizer && freeBusyProperty.type === 'BUSY-UNAVAILABLE' ? 'free-busy-busy-unavailable--organizer' : '',\n\t\t\t],\n\t\t\ttitle: attendeeName,\n\t\t\ttextColor: 'var(--color-main-text)',\n\t\t})\n\t}\n\n\treturn events\n}\n","/**\n * SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\n/**\n * Returns the date-formatting config for FullCalendar\n *\n * @return {object}\n */\nconst getDateFormattingConfig = () => {\n\tconst defaultConfig = {\n\t\tdayHeaderFormat: 'ddd l',\n\t\ttitleFormat: 'll',\n\t\tslotLabelFormat: 'LT',\n\t}\n\n\treturn {\n\t\t// Date formatting:\n\t\teventTimeFormat: 'LT',\n\t\tviews: {\n\t\t\tdayGridMonth: {\n\t\t\t\t...defaultConfig,\n\t\t\t\tdayHeaderFormat: 'ddd',\n\t\t\t},\n\t\t\tmultiMonthYear: {\n\t\t\t\t...defaultConfig,\n\t\t\t\tdayHeaderFormat: 'ddd',\n\t\t\t\tmultiMonthMaxColumns: 4,\n\t\t\t},\n\t\t\ttimeGridDay: defaultConfig,\n\t\t\ttimeGridWeek: defaultConfig,\n\t\t\tlistMonth: {\n\t\t\t\t// Changes for the List View\n\t\t\t\tlistDayFormat: 'LL, dddd',\n\t\t\t\tlistDaySideFormat: false,\n\t\t\t},\n\t\t\tresourceTimelineDay: defaultConfig,\n\t\t},\n\t}\n}\n\nexport { getDateFormattingConfig }\n","/**\n * SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport { translate as t, getLanguage, getFirstDay, isRTL } from '@nextcloud/l10n'\n\n/**\n * Returns localization settings for the FullCalender package.\n *\n * @see https://fullcalendar.io/docs\n * @return {object}\n */\nconst getFullCalendarLocale = () => {\n\treturn {\n\t\tfirstDay: getFirstDay(),\n\t\tlocale: getLanguage(),\n\t\tdirection: isRTL() ? 'rtl' : 'ltr',\n\t\t// TRANSLATORS W is an abbreviation for Week\n\t\tweekText: t('calendar', 'W'),\n\t\tallDayText: t('calendar', 'All day'),\n\t\tmoreLinkText: (n) => t('calendar', '%n more', {}, n),\n\t\tnoEventsText: t('calendar', 'No events to display'),\n\t}\n}\n\nexport {\n\tgetFullCalendarLocale,\n}\n","/**\n * SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport moment from '@nextcloud/moment'\nimport { createPlugin } from '@fullcalendar/core'\nimport useSettingsStore from '../../store/settings.js'\n\n/**\n * Creates a new moment object using the locale from the global Pinia store\n *\n * @param {object[]} data FullCalendar object containing the date etc.\n * @param {number[]} data.array Input data to initialize moment\n * @return {moment.Moment}\n */\nconst momentFactory = ({ array }) => {\n\tconst settingsStore = useSettingsStore()\n\treturn moment(array).locale(settingsStore.momentLocale)\n}\n\n/**\n * Formats a date with given cmdStr\n *\n * @param {string} cmdStr The formatting string\n * @param {object} arg An Object containing the date, etc.\n * @return {function(string, string):string} cmdFormatter function\n */\nconst cmdFormatter = (cmdStr, arg) => {\n\t// With our specific DateFormattingConfig,\n\t// cmdStr will always be a moment parsable string\n\t// like LT, etc.\n\t//\n\t// No need to manually parse it.\n\t//\n\t// This is not the case, if you use the standard FC\n\t// formatting config.\n\n\t// If arg.end is defined, this is a time-range\n\tif (arg.end) {\n\t\tconst start = momentFactory(arg.start).format(cmdStr)\n\t\tconst end = momentFactory(arg.end).format(cmdStr)\n\n\t\tif (start === end) {\n\t\t\treturn start\n\t\t}\n\n\t\treturn start + arg.defaultSeparator + end\n\t}\n\n\treturn momentFactory(arg.start).format(cmdStr)\n}\n\nexport default createPlugin({\n\tname: '@nextcloud/moment-plugin',\n\tcmdFormatter,\n})\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport { createPlugin } from '@fullcalendar/core'\nimport { NamedTimeZoneImpl } from '@fullcalendar/core/internal'\nimport getTimezoneManager from '../../services/timezoneDataProviderService.js'\nimport logger from '../../utils/logger.js'\n\n/**\n * Our own FullCalendar Timezone implementation based on the VTimezones we ship\n */\nclass VTimezoneNamedTimezone extends NamedTimeZoneImpl {\n\n\t/**\n\t * gets UTC offset for given date of this timezone\n\t *\n\t * @param {number[]} date an array that mirrors the parameters from new Date()\n\t * @return {number} offset in minutes\n\t */\n\toffsetForArray([year, month, day, hour, minute, second]) {\n\t\tlet timezone = getTimezoneManager().getTimezoneForId(this.timeZoneName)\n\t\tif (!timezone) {\n\t\t\ttimezone = getTimezoneManager().getTimezoneForId('UTC')\n\t\t\tlogger.error(`VTimezoneNamedTimezoneImpl: Timezone ${this.timeZoneName} not found, falling back to UTC.`)\n\t\t}\n\t\t// calendar-js works with natural month numbers,\n\t\t// not the javascript 0-based ones\n\t\tmonth += 1\n\n\t\treturn timezone.offsetForArray(year, month, day, hour, minute, second) / 60\n\t}\n\n\t/**\n\t * returns parameters for Date object in this timezone based on given timestamp\n\t *\n\t * @param {number} ms Timestamp in milliseconds\n\t * @return {number[]}\n\t */\n\ttimestampToArray(ms) {\n\t\tlet timezone = getTimezoneManager().getTimezoneForId(this.timeZoneName)\n\t\tif (!timezone) {\n\t\t\ttimezone = getTimezoneManager().getTimezoneForId('UTC')\n\t\t\tlogger.error(`VTimezoneNamedTimezoneImpl: Timezone ${this.timeZoneName} not found, falling back to UTC.`)\n\t\t}\n\t\tconst timestampArray = timezone.timestampToArray(ms)\n\n\t\t// calendar-js works with natural month numbers,\n\t\t// not the javascript 0-based ones\n\t\ttimestampArray[1]--\n\n\t\treturn timestampArray\n\t}\n\n}\n\nexport default createPlugin({\n\tname: '@nextcloud/v-timezone-named-timezone-plugin',\n\tnamedTimeZonedImpl: VTimezoneNamedTimezone,\n})\n","/**\n * SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport {\n\tgetAmountAndUnitForTimedEvents,\n\tgetAmountHoursMinutesAndUnitForAllDayEvents,\n} from '../utils/alarms.js'\nimport { getDateFromDateTimeValue } from '../utils/date.js'\n\n/**\n * Creates a complete alarm object based on given props\n *\n * @param {object} props The alarm properties already provided\n * @return {object}\n */\nconst getDefaultAlarmObject = (props = {}) => Object.assign({}, {\n\t// The calendar-js alarm component\n\talarmComponent: null,\n\t// Type of alarm: DISPLAY, EMAIL, AUDIO\n\ttype: null,\n\t// Whether or not the alarm is relative\n\tisRelative: false,\n\t// Date object of an absolute alarm (if it's absolute, it must be DATE-TIME)\n\tabsoluteDate: null,\n\t// The time zone id of for absolute alarms\n\tabsoluteTimezoneId: null,\n\t// Whether or not the relative alarm is before the event,\n\trelativeIsBefore: null,\n\t// Whether or not the alarm is relative to the event's start\n\trelativeIsRelatedToStart: null,\n\t// TIMED EVENTS:\n\t// Unit (seconds, minutes, hours, ...) if this alarm is inside a timed event\n\trelativeUnitTimed: null,\n\t// The amount of unit if this alarm is inside a timed event\n\trelativeAmountTimed: null,\n\t// ALL-DAY EVENTS:\n\t// Unit (seconds, minutes, hours, ...) if this alarm is inside an all-day event\n\trelativeUnitAllDay: null,\n\t// The amount of unit if this alarm is inside a all-day event\n\trelativeAmountAllDay: null,\n\t// The hours to display alarm for in an all-day event (e.g. 1 day before at 9:00 am)\n\trelativeHoursAllDay: null,\n\t// The minutes to display alarm for in an all-day event (e.g. 1 day before at 9:30 am)\n\trelativeMinutesAllDay: null,\n\t// The total amount of seconds for a relative alarm\n\trelativeTrigger: null,\n}, props)\n\n/**\n * Map an alarm component to our alarm object\n *\n * @param {AlarmComponent} alarmComponent The calendar-js alarm-component to turn into an alarm object\n * @return {object}\n */\nconst mapAlarmComponentToAlarmObject = (alarmComponent) => {\n\tif (alarmComponent.trigger.isRelative()) {\n\t\tconst relativeIsBefore = alarmComponent.trigger.value.isNegative\n\t\tconst relativeIsRelatedToStart = alarmComponent.trigger.related === 'START'\n\n\t\tconst {\n\t\t\tamount: relativeAmountTimed,\n\t\t\tunit: relativeUnitTimed,\n\t\t} = getAmountAndUnitForTimedEvents(alarmComponent.trigger.value.totalSeconds)\n\n\t\tconst {\n\t\t\tunit: relativeUnitAllDay,\n\t\t\tamount: relativeAmountAllDay,\n\t\t\thours: relativeHoursAllDay,\n\t\t\tminutes: relativeMinutesAllDay,\n\t\t} = getAmountHoursMinutesAndUnitForAllDayEvents(alarmComponent.trigger.value.totalSeconds)\n\n\t\tconst relativeTrigger = alarmComponent.trigger.value.totalSeconds\n\n\t\treturn getDefaultAlarmObject({\n\t\t\talarmComponent,\n\t\t\ttype: alarmComponent.action,\n\t\t\tisRelative: alarmComponent.trigger.isRelative(),\n\t\t\trelativeIsBefore,\n\t\t\trelativeIsRelatedToStart,\n\t\t\trelativeUnitTimed,\n\t\t\trelativeAmountTimed,\n\t\t\trelativeUnitAllDay,\n\t\t\trelativeAmountAllDay,\n\t\t\trelativeHoursAllDay,\n\t\t\trelativeMinutesAllDay,\n\t\t\trelativeTrigger,\n\t\t})\n\t} else {\n\t\tconst absoluteDate = getDateFromDateTimeValue(alarmComponent.trigger.value)\n\n\t\treturn getDefaultAlarmObject({\n\t\t\talarmComponent,\n\t\t\ttype: alarmComponent.action,\n\t\t\tisRelative: alarmComponent.trigger.isRelative(),\n\t\t\tabsoluteDate,\n\t\t\tabsoluteTimezoneId: alarmComponent.trigger.value.timezoneId,\n\t\t})\n\t}\n}\n\nexport {\n\tgetDefaultAlarmObject,\n\tmapAlarmComponentToAlarmObject,\n}\n","/**\n * SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\n/**\n * Creates a complete attachment object based on given props\n *\n * @param {object} props The attachment properties already provided\n * @return {object}\n */\nconst getDefaultAttachmentObject = (props = {}) => Object.assign({}, {\n\t// The calendar-js attachment property\n\tattachmentProperty: null,\n\t// The file name of the attachment\n\tfileName: null,\n\t// The attachment mime type\n\tformatType: null,\n\t// The uri of the attachment\n\turi: null,\n\t// The value from calendar object\n\tvalue: null,\n\t// Preview of file\n\txNcHasPreview: null,\n\t// File id in NC\n\txNcFileId: null,\n}, props)\n\n/**\n * Maps a calendar-js attachment property to our attachment object\n *\n * @param {attachmentProperty} attachmentProperty The calendar-js attachmentProperty to turn into a attachment object\n * @return {object}\n */\nconst mapAttachmentPropertyToAttchmentObject = (attachmentProperty) => {\n\treturn getDefaultAttachmentObject({\n\t\tattachmentProperty,\n\t\tfileName: attachmentProperty.getParameterFirstValue('FILENAME'),\n\t\tformatType: attachmentProperty.formatType,\n\t\turi: attachmentProperty.uri,\n\t\tvalue: attachmentProperty.value,\n\t\txNcHasPreview: attachmentProperty.getParameterFirstValue('X-NC-HAS-PREVIEW') === 'true',\n\t\txNcFileId: attachmentProperty.getParameterFirstValue('X-NC-FILE-ID'),\n\t})\n}\n\nexport {\n\tgetDefaultAttachmentObject,\n\tmapAttachmentPropertyToAttchmentObject,\n}\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport { detectColor, uidToHexColor } from '../utils/color.js'\nimport { mapDavShareeToCalendarShareObject } from './calendarShare.js'\n\n/**\n * Creates a complete calendar-object based on given props\n *\n * @param {object} props Calendar-props already provided\n * @return {object}\n */\nconst getDefaultCalendarObject = (props = {}) => Object.assign({}, {\n\t// Id of the calendar\n\tid: '',\n\t// Visible display name\n\tdisplayName: '',\n\t// Color of the calendar\n\tcolor: uidToHexColor(''),\n\t// Whether or not the calendar is visible in the grid\n\tenabled: true,\n\t// Whether or not the calendar is loading events at the moment\n\tloading: false,\n\t// Whether this calendar supports VEvents\n\tsupportsEvents: true,\n\t// Whether this calendar supports VJournals\n\tsupportsJournals: false,\n\t// Whether this calendar supports VTodos\n\tsupportsTasks: false,\n\t// The principal uri of the owner\n\towner: '',\n\t// Timezone set for this calendar\n\ttimezone: null,\n\t// List of shares\n\tshares: [],\n\t// Published url\n\tpublishURL: null,\n\t// Internal CalDAV url of this calendar\n\turl: '',\n\t// Whether this calendar is read-only\n\treadOnly: false,\n\t// The order of this calendar in the calendar-list\n\torder: 0,\n\t// Whether or not the calendar is shared with me\n\tisSharedWithMe: false,\n\t// Whether or not the calendar can be shared by me\n\tcanBeShared: false,\n\t// Whether or not the calendar can be published by me\n\tcanBePublished: false,\n\t// Reference to cdav-lib object\n\tdav: false,\n\t// All calendar-objects from this calendar that have already been fetched\n\tcalendarObjects: [],\n\t// Time-ranges that have already been fetched for this calendar\n\tfetchedTimeRanges: [],\n\t// Scheduling transparency\n\ttransparency: 'opaque',\n}, props)\n\n/**\n * Map a dav collection to our calendar object model\n *\n * @param {object} calendar The calendar object from the cdav library\n * @param {object=} currentUserPrincipal The principal model of the current user principal\n * @return {object}\n */\nconst mapDavCollectionToCalendar = (calendar, currentUserPrincipal) => {\n\tconst id = btoa(calendar.url)\n\tconst displayName = calendar.displayname || getCalendarUriFromUrl(calendar.url)\n\n\t// calendar.color can be set to anything on the server,\n\t// so make sure it's something that remotely looks like a color\n\tlet color = detectColor(calendar.color)\n\tif (!color) {\n\t\t// As fallback if we don't know what color that is supposed to be\n\t\tcolor = uidToHexColor(displayName)\n\t}\n\n\tconst supportsEvents = calendar.components.includes('VEVENT')\n\tconst supportsJournals = calendar.components.includes('VJOURNAL')\n\tconst supportsTasks = calendar.components.includes('VTODO')\n\tconst owner = calendar.owner\n\tconst readOnly = !calendar.isWriteable()\n\tconst canBeShared = calendar.isShareable()\n\tconst canBePublished = calendar.isPublishable()\n\tconst order = calendar.order || 0\n\tconst url = calendar.url\n\tconst publishURL = calendar.publishURL || null\n\tconst timezone = calendar.timezone || null\n\t// If this property is not present on a calendar collection,\n\t// then the default value CALDAV:opaque MUST be assumed.\n\t// https://datatracker.ietf.org/doc/html/rfc6638#section-9.1\n\tconst transparency = calendar.transparency || 'opaque'\n\n\tlet isSharedWithMe = false\n\tif (!currentUserPrincipal) {\n\t\t// If the user is not authenticated, the calendar\n\t\t// will always be marked as shared with them\n\t\tisSharedWithMe = true\n\t} else {\n\t\tisSharedWithMe = (owner !== currentUserPrincipal.url)\n\t}\n\n\tlet enabled\n\tif (!currentUserPrincipal) {\n\t\t// If the user is not authenticated,\n\t\t// always enable the calendar\n\t\tenabled = true\n\t} else if (typeof calendar.enabled === 'boolean') {\n\t\t// If calendar-enabled is set, we will just take that\n\t\tenabled = calendar.enabled\n\t} else {\n\t\t// If there is no calendar-enabled,\n\t\t// we will display the calendar by default and set enabled\n\t\tenabled = true\n\t\tcalendar.enabled = true\n\t}\n\n\tconst shares = []\n\tif (!!currentUserPrincipal && Array.isArray(calendar.shares)) {\n\t\tfor (const share of calendar.shares) {\n\t\t\tif (share.href === currentUserPrincipal.principalScheme) {\n\t\t\t\tcontinue\n\t\t\t}\n\n\t\t\tshares.push(mapDavShareeToCalendarShareObject(share))\n\t\t}\n\t}\n\n\treturn getDefaultCalendarObject({\n\t\tid,\n\t\tdisplayName,\n\t\tcolor,\n\t\torder,\n\t\turl,\n\t\tenabled,\n\t\tsupportsEvents,\n\t\tsupportsJournals,\n\t\tsupportsTasks,\n\t\tisSharedWithMe,\n\t\towner,\n\t\treadOnly,\n\t\tpublishURL,\n\t\tcanBeShared,\n\t\tcanBePublished,\n\t\tshares,\n\t\ttimezone,\n\t\ttransparency,\n\t\tdav: calendar,\n\t})\n}\n\n/**\n * Gets the calendar uri from the url\n *\n * @param {string} url The url to get calendar uri from\n * @return {string}\n */\nfunction getCalendarUriFromUrl(url) {\n\tif (url.endsWith('/')) {\n\t\turl = url.substring(0, url.length - 1)\n\t}\n\n\treturn url.substring(url.lastIndexOf('/') + 1)\n}\n\nexport {\n\tgetDefaultCalendarObject,\n\tmapDavCollectionToCalendar,\n}\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport { getParserManager } from '@nextcloud/calendar-js'\nimport {\n\tCOMPONENT_NAME_EVENT,\n\tCOMPONENT_NAME_JOURNAL,\n\tCOMPONENT_NAME_VTODO,\n} from './consts.js'\n\n/**\n * Creates a complete calendar-object-object based on given props\n *\n * @param {object} props Calendar-object-props already provided\n * @return {object}\n */\nconst getDefaultCalendarObjectObject = (props = {}) => Object.assign({}, {\n\t// Id of this calendar-object\n\tid: null,\n\t// Id of the associated calendar\n\tcalendarId: null,\n\t// The cdav-library object storing the calendar-object\n\tdav: null,\n\t// The parsed calendar-js object\n\tcalendarComponent: null,\n\t// The uid of the calendar-object\n\tuid: null,\n\t// The uri of the calendar-object\n\turi: null,\n\t// The type of calendar-object\n\tobjectType: null,\n\t// Whether or not the calendar-object is an event\n\tisEvent: false,\n\t// Whether or not the calendar-object is a journal\n\tisJournal: false,\n\t// Whether or not the calendar-object is a task\n\tisTodo: false,\n\t// Whether or not the calendar-object exists on the server\n\texistsOnServer: false,\n}, props)\n\n/**\n * Maps a calendar-object from c-dav to our calendar-object object\n *\n * @param {VObject} dav The c-dav VObject\n * @param {string} calendarId The calendar-id this object is associated with\n * @return {object}\n */\nconst mapCDavObjectToCalendarObject = (dav, calendarId) => {\n\tconst parserManager = getParserManager()\n\tconst parser = parserManager.getParserForFileType('text/calendar')\n\n\t// This should not be the case, but let's just be on the safe side\n\tif (typeof dav.data !== 'string' || dav.data.trim() === '') {\n\t\tthrow new Error('Empty calendar object')\n\t}\n\n\tparser.parse(dav.data)\n\tconst calendarComponentIterator = parser.getItemIterator()\n\tconst calendarComponent = calendarComponentIterator.next().value\n\tif (!calendarComponent) {\n\t\tthrow new Error('Empty calendar object')\n\t}\n\n\tconst vObjectIterator = calendarComponent.getVObjectIterator()\n\tconst firstVObject = vObjectIterator.next().value\n\n\treturn getDefaultCalendarObjectObject({\n\t\tid: btoa(dav.url),\n\t\tcalendarId,\n\t\tdav,\n\t\tcalendarComponent,\n\t\tuid: firstVObject.uid,\n\t\turi: dav.url,\n\t\tobjectType: firstVObject.name,\n\t\tisEvent: firstVObject.name === COMPONENT_NAME_EVENT,\n\t\tisJournal: firstVObject.name === COMPONENT_NAME_JOURNAL,\n\t\tisTodo: firstVObject.name === COMPONENT_NAME_VTODO,\n\t\texistsOnServer: true,\n\t})\n}\n\n/**\n * Maps a calendar-component from calendar-js to our calendar-object object\n *\n * @param {CalendarComponent} calendarComponent The calendarComponent to create the calendarObject from\n * @param {string=} calendarId The associated calendar if applicable\n * @return {object}\n */\nconst mapCalendarJsToCalendarObject = (calendarComponent, calendarId = null) => {\n\tconst vObjectIterator = calendarComponent.getVObjectIterator()\n\tconst firstVObject = vObjectIterator.next().value\n\tif (!firstVObject) {\n\t\tthrow new Error('Calendar object without vobjects')\n\t}\n\n\treturn getDefaultCalendarObjectObject({\n\t\tcalendarId,\n\t\tcalendarComponent,\n\t\tuid: firstVObject.uid,\n\t\tobjectType: firstVObject.name,\n\t\tisEvent: firstVObject.name === COMPONENT_NAME_EVENT,\n\t\tisJournal: firstVObject.name === COMPONENT_NAME_JOURNAL,\n\t\tisTodo: firstVObject.name === COMPONENT_NAME_VTODO,\n\t})\n}\n\nexport {\n\tgetDefaultCalendarObjectObject,\n\tmapCDavObjectToCalendarObject,\n\tmapCalendarJsToCalendarObject,\n}\n","/**\n * SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport {\n\tPRINCIPAL_PREFIX_CIRCLE,\n\tPRINCIPAL_PREFIX_GROUP,\n\tPRINCIPAL_PREFIX_REMOTE_USER,\n\tPRINCIPAL_PREFIX_USER,\n} from './consts.js'\n\n/**\n * Creates a complete calendar-share-object based on given props\n *\n * @param {object} props Calendar-share-props already provided\n * @return {object}\n */\nconst getDefaultCalendarShareObject = (props = {}) => Object.assign({}, {\n\t// Unique identifier\n\tid: null,\n\t// Displayname of the sharee\n\tdisplayName: null,\n\t// Whether or not share is writable\n\twriteable: false,\n\t// Whether or not sharee is an individual user\n\tisUser: false,\n\t// Whether or not sharee is an admin-defined group\n\tisGroup: false,\n\t// Whether or not sharee is a user-defined group\n\tisCircle: false,\n\t// Whether or not sharee is a remote user (on a federated instance)\n\tisRemoteUser: false,\n\t// Uri necessary for deleting / updating share\n\turi: null,\n}, props)\n\n/**\n * Map a dav collection to our calendar object model\n *\n * @param {object} sharee The sharee object from the cdav library shares\n * @return {object}\n */\nconst mapDavShareeToCalendarShareObject = (sharee) => {\n\t// sharee.href might contain non-latin characters, so let's uri encode it first\n\tconst id = btoa(encodeURI(sharee.href))\n\n\tlet displayName\n\tif (sharee['common-name'] && sharee['common-name'].trim() !== '') {\n\t\tdisplayName = sharee['common-name']\n\t} else if (sharee.href.startsWith(PRINCIPAL_PREFIX_GROUP)) {\n\t\tdisplayName = decodeURIComponent(sharee.href.slice(28))\n\t} else if (sharee.href.startsWith(PRINCIPAL_PREFIX_USER)) {\n\t\tdisplayName = decodeURIComponent(sharee.href.slice(27))\n\t} else if (sharee.href.startsWith(PRINCIPAL_PREFIX_REMOTE_USER)) {\n\t\tdisplayName = atob(sharee.href.slice(34))\n\t} else {\n\t\tdisplayName = sharee.href\n\t}\n\n\tconst writeable = sharee.access[0].endsWith('read-write')\n\tconst isUser = sharee.href.startsWith(PRINCIPAL_PREFIX_USER)\n\tconst isGroup = sharee.href.startsWith(PRINCIPAL_PREFIX_GROUP)\n\tconst isCircle = sharee.href.startsWith(PRINCIPAL_PREFIX_CIRCLE)\n\tconst isRemoteUser = sharee.href.startsWith(PRINCIPAL_PREFIX_REMOTE_USER)\n\tconst uri = sharee.href\n\n\treturn getDefaultCalendarShareObject({\n\t\tid,\n\t\tdisplayName,\n\t\twriteable,\n\t\tisUser,\n\t\tisGroup,\n\t\tisCircle,\n\t\tisRemoteUser,\n\t\turi,\n\t})\n}\n\nexport {\n\tgetDefaultCalendarShareObject,\n\tmapDavShareeToCalendarShareObject,\n}\n","/**\n * SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { getDateFromDateTimeValue } from '../utils/date.js'\nimport { DurationValue, DateTimeValue } from '@nextcloud/calendar-js'\nimport { getHexForColorName, getClosestCSS3ColorNameForHex } from '../utils/color.js'\nimport { mapAlarmComponentToAlarmObject } from './alarm.js'\nimport { mapAttendeePropertyToAttendeeObject } from './attendee.js'\nimport { mapAttachmentPropertyToAttchmentObject } from './attachment.js'\nimport {\n\tgetDefaultRecurrenceRuleObject,\n\tmapRecurrenceRuleValueToRecurrenceRuleObject,\n} from './recurrenceRule.js'\n\n/**\n * Creates a complete calendar-object-instance-object based on given props\n *\n * @param {object} props The props already provided\n * @return {object}\n */\nconst getDefaultEventObject = (props = {}) => Object.assign({}, {\n\t// The real event-component coming from calendar-js\n\teventComponent: null,\n\t// Title of the event\n\ttitle: null,\n\t// Start date of the event\n\tstartDate: null,\n\t// Timezone of the start date\n\tstartTimezoneId: null,\n\t// End date of the event\n\tendDate: null,\n\t// Timezone of the end date\n\tendTimezoneId: null,\n\t// Indicator whether or not event is all-day\n\tisAllDay: false,\n\t// Whether or not the user is allowed to toggle the all-day checkbox\n\tcanModifyAllDay: true,\n\t// Location that the event takes places in\n\tlocation: null,\n\t// description of the event\n\tdescription: null,\n\t// Access class of the event (PUBLIC, PRIVATE, CONFIDENTIAL)\n\taccessClass: null,\n\t// Status of the event (CONFIRMED, TENTATIVE, CANCELLED)\n\tstatus: null,\n\t// Whether or not to block this event in Free-Busy reports (TRANSPARENT, OPAQUE)\n\ttimeTransparency: null,\n\t// The recurrence rule of this event. We only support one recurrence-rule\n\trecurrenceRule: getDefaultRecurrenceRuleObject(),\n\t// Whether or not this event has multiple recurrence-rules\n\thasMultipleRRules: false,\n\t// Whether or not this is the master item\n\tisMasterItem: false,\n\t// Whether or not this is a recurrence-exception\n\tisRecurrenceException: false,\n\t// Whether or not the applied modifications require to update this and all future\n\tforceThisAndAllFuture: false,\n\t// Whether or not it's possible to create a recurrence-exception for this event\n\tcanCreateRecurrenceException: false,\n\t// Attendees of this event\n\tattendees: [],\n\t// Organizer of the event\n\torganizer: null,\n\t// Alarm of the event\n\talarms: [],\n\t// Custom color of the event\n\tcustomColor: null,\n\t// Categories\n\tcategories: [],\n\t// Attachments of this event\n\tattachments: [],\n}, props)\n\n/**\n *\n * @param {EventComponent} eventComponent The calendar-js eventComponent\n * @return {object}\n */\nconst mapEventComponentToEventObject = (eventComponent) => {\n\tconst eventObject = getDefaultEventObject({\n\t\teventComponent,\n\t\ttitle: eventComponent.title,\n\t\tisAllDay: eventComponent.isAllDay(),\n\t\tcanModifyAllDay: eventComponent.canModifyAllDay(),\n\t\tlocation: eventComponent.location,\n\t\tdescription: eventComponent.description,\n\t\taccessClass: eventComponent.accessClass,\n\t\tstatus: eventComponent.status,\n\t\ttimeTransparency: eventComponent.timeTransparency,\n\t\tcategories: Array.from(eventComponent.getCategoryIterator()),\n\t\tisMasterItem: eventComponent.isMasterItem(),\n\t\tisRecurrenceException: eventComponent.isRecurrenceException(),\n\t\tcanCreateRecurrenceException: eventComponent.canCreateRecurrenceExceptions(),\n\t})\n\n\t/**\n\t * According to RFC5545, DTEND is exclusive. This is rather intuitive for timed-events\n\t * but rather unintuitive for all-day events\n\t *\n\t * That's why, when an event is all-day from 2019-10-03 to 2019-10-04,\n\t * it will be displayed as 2019-10-03 to 2019-10-03 in the editor.\n\t */\n\teventObject.startDate = getDateFromDateTimeValue(eventComponent.startDate)\n\teventObject.startTimezoneId = eventComponent.startDate.timezoneId\n\n\tif (eventComponent.isAllDay()) {\n\t\tconst endDate = eventComponent.endDate.clone()\n\t\tendDate.addDuration(DurationValue.fromSeconds(-1 * 60 * 60 * 24))\n\t\teventObject.endDate = getDateFromDateTimeValue(endDate)\n\t} else {\n\t\teventObject.endDate = getDateFromDateTimeValue(eventComponent.endDate)\n\t}\n\teventObject.endTimezoneId = eventComponent.endDate.timezoneId\n\n\t/**\n\t * Extract organizer if there is any\n\t */\n\tif (eventComponent.organizer) {\n\t\tconst organizerProperty = eventComponent.getFirstProperty('ORGANIZER')\n\t\teventObject.organizer = {\n\t\t\tcommonName: organizerProperty.commonName,\n\t\t\turi: organizerProperty.email,\n\t\t\tattendeeProperty: organizerProperty,\n\t\t}\n\t}\n\n\t/**\n\t * Extract alarms\n\t */\n\tfor (const alarm of eventComponent.getAlarmIterator()) {\n\t\teventObject.alarms.push(mapAlarmComponentToAlarmObject(alarm))\n\t}\n\n\t/**\n\t * Extract attendees\n\t */\n\tfor (const attendee of eventComponent.getAttendeeIterator()) {\n\t\teventObject.attendees.push(mapAttendeePropertyToAttendeeObject(attendee))\n\t}\n\n\t/**\n\t * Extract attachments\n\t */\n\n\tfor (const attachment of eventComponent.getPropertyIterator('ATTACH')) {\n\t\teventObject.attachments.push(mapAttachmentPropertyToAttchmentObject(attachment))\n\t}\n\n\t/**\n\t * Extract recurrence-rule\n\t */\n\tconst recurrenceRuleIterator = eventComponent.getPropertyIterator('RRULE')\n\tconst recurrenceRuleFirstIteration = recurrenceRuleIterator.next()\n\n\tconst firstRecurrenceRule = recurrenceRuleFirstIteration.value\n\tif (firstRecurrenceRule) {\n\t\teventObject.recurrenceRule = mapRecurrenceRuleValueToRecurrenceRuleObject(firstRecurrenceRule.getFirstValue(), eventComponent.startDate)\n\t\teventObject.hasMultipleRRules = !recurrenceRuleIterator.next().done\n\t}\n\n\t/**\n\t * Convert the CSS 3 color name to a hex color\n\t */\n\tif (eventComponent.hasProperty('COLOR')) {\n\t\tconst hexColor = getHexForColorName(eventComponent.getFirstPropertyFirstValue('COLOR'))\n\t\tif (hexColor !== null) {\n\t\t\teventObject.customColor = hexColor\n\t\t}\n\t}\n\n\treturn eventObject\n}\n\n/**\n * Copy data from a calendar-object-instance into a calendar-js event-component\n *\n * @param {object} eventObject The calendar-object-instance object\n * @param {EventComponent} eventComponent The calendar-js EventComponent object\n * @param {boolean} resetAttendeeStatus Whether or not to reset the attendee status\n */\nconst copyCalendarObjectInstanceIntoEventComponent = (eventObject, eventComponent, resetAttendeeStatus = false) => {\n\teventComponent.title = eventObject.title\n\teventComponent.location = eventObject.location\n\teventComponent.description = eventObject.description\n\teventComponent.accessClass = eventObject.accessClass\n\teventComponent.status = eventObject.status\n\teventComponent.timeTransparency = eventObject.timeTransparency\n\n\tfor (const category of eventObject.categories) {\n\t\teventComponent.addCategory(category)\n\t}\n\n\tif (eventObject.organizer) {\n\t\teventComponent.setOrganizerFromNameAndEMail(eventObject.organizer.commonName, eventObject.organizer.uri)\n\t}\n\n\tfor (const alarm of eventObject.alarms) {\n\t\tif (alarm.isRelative) {\n\t\t\tconst duration = DurationValue.fromSeconds(alarm.relativeTrigger)\n\t\t\teventComponent.addRelativeAlarm(alarm.type, duration, alarm.relativeIsRelatedToStart)\n\t\t} else {\n\t\t\tconst date = DateTimeValue.fromJSDate(alarm.absoluteDate)\n\t\t\teventComponent.addAbsoluteAlarm(alarm.type, date)\n\t\t}\n\t}\n\n\tfor (const attendee of eventObject.attendees) {\n\t\tif (resetAttendeeStatus) {\n\t\t\tattendee.attendeeProperty.participationStatus = 'NEEDS-ACTION'\n\t\t\tattendee.attendeeProperty.rsvp = true\n\t\t}\n\n\t\teventComponent.addProperty(attendee.attendeeProperty)\n\t}\n\n\tfor (const rule of eventObject.eventComponent.getPropertyIterator('RRULE')) {\n\t\teventComponent.addProperty(rule)\n\t}\n\n\tif (eventObject.customColor) {\n\t\teventComponent.color = getClosestCSS3ColorNameForHex(eventObject.customColor)\n\t}\n}\n\nexport {\n\tgetDefaultEventObject,\n\tmapEventComponentToEventObject,\n\tcopyCalendarObjectInstanceIntoEventComponent,\n}\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport {\n\tPRINCIPAL_PREFIX_CALENDAR_RESOURCE,\n\tPRINCIPAL_PREFIX_CALENDAR_ROOM,\n\tPRINCIPAL_PREFIX_CIRCLE,\n\tPRINCIPAL_PREFIX_GROUP,\n\tPRINCIPAL_PREFIX_USER,\n} from './consts.js'\n\n/**\n * Creates a complete principal-object based on given props\n *\n * @param {object} props Principal-props already provided\n * @return {any}\n */\nconst getDefaultPrincipalObject = (props) => Object.assign({}, {\n\t// Id of the principal\n\tid: null,\n\t// Calendar-user-type. This can be INDIVIDUAL, GROUP, RESOURCE or ROOM\n\tcalendarUserType: 'INDIVIDUAL',\n\t// E-Mail address of principal used for scheduling\n\temailAddress: null,\n\t// The principals display-name\n\t// TODO: this should be renamed to displayName\n\tdisplayname: null,\n\t// principalScheme\n\tprincipalScheme: null,\n\t// The internal user-id in case it is of type INDIVIDUAL and a user\n\t// TODO: userId is deprecrated, use principalId instead\n\tuserId: null,\n\t// url to the DAV-principal-resource\n\turl: null,\n\t// The cdav-library object\n\tdav: null,\n\t// Whether or not this principal represents a circle\n\tisCircle: false,\n\t// Whether or not this principal represents a user\n\tisUser: false,\n\t// Whether or not this principal represents a group\n\tisGroup: false,\n\t// Whether or not this principal represents a calendar-resource\n\tisCalendarResource: false,\n\t// Whether or not this principal represents a calendar-room\n\tisCalendarRoom: false,\n\t// The id of the principal without prefix. e.g. userId / groupId / etc.\n\tprincipalId: null,\n\t// The url of the default calendar for invitations\n\tscheduleDefaultCalendarUrl: null,\n}, props)\n\n/**\n * converts a dav principal into a vuex object\n *\n * @param {object} dav cdav-library Principal object\n * @return {object}\n */\nconst mapDavToPrincipal = (dav) => {\n\tconst id = btoa(encodeURI(dav.url))\n\tconst calendarUserType = dav.calendarUserType\n\tconst principalScheme = dav.principalScheme\n\tconst emailAddress = dav.email\n\n\tconst displayname = dav.displayname\n\tconst scheduleDefaultCalendarUrl = dav.scheduleDefaultCalendarUrl\n\n\tconst isUser = dav.principalScheme.startsWith(PRINCIPAL_PREFIX_USER)\n\tconst isGroup = dav.principalScheme.startsWith(PRINCIPAL_PREFIX_GROUP)\n\tconst isCircle = dav.principalScheme.startsWith(PRINCIPAL_PREFIX_CIRCLE)\n\tconst isCalendarResource = dav.principalScheme.startsWith(PRINCIPAL_PREFIX_CALENDAR_RESOURCE)\n\tconst isCalendarRoom = dav.principalScheme.startsWith(PRINCIPAL_PREFIX_CALENDAR_ROOM)\n\n\tlet principalId = null\n\tif (isUser) {\n\t\tprincipalId = dav.principalScheme.substring(PRINCIPAL_PREFIX_USER.length)\n\t} else if (isGroup) {\n\t\tprincipalId = dav.principalScheme.substring(PRINCIPAL_PREFIX_GROUP.length)\n\t} else if (isCircle) {\n\t\tprincipalId = dav.principalScheme.substring(PRINCIPAL_PREFIX_CIRCLE.length)\n\t} else if (isCalendarResource) {\n\t\tprincipalId = dav.principalScheme.substring(PRINCIPAL_PREFIX_CALENDAR_RESOURCE.length)\n\t} else if (isCalendarRoom) {\n\t\tprincipalId = dav.principalScheme.substring(PRINCIPAL_PREFIX_CALENDAR_ROOM.length)\n\t}\n\n\tconst url = dav.principalUrl\n\tconst userId = dav.userId\n\n\treturn getDefaultPrincipalObject({\n\t\tid,\n\t\tcalendarUserType,\n\t\tprincipalScheme,\n\t\temailAddress,\n\t\tdisplayname,\n\t\turl,\n\t\tdav,\n\t\tisUser,\n\t\tisGroup,\n\t\tisCircle,\n\t\tisCalendarResource,\n\t\tisCalendarRoom,\n\t\tprincipalId,\n\t\tuserId,\n\t\tscheduleDefaultCalendarUrl,\n\t})\n}\n\nexport {\n\tgetDefaultPrincipalObject,\n\tmapDavToPrincipal,\n}\n","/**\n * SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport { getWeekDayFromDate } from '../utils/recurrence.js'\nimport { getDateFromDateTimeValue } from '../utils/date.js'\n\n/**\n * Creates a complete recurrence-rule-object based on given props\n *\n * @param {object} props Recurrence-rule-object-props already provided\n * @return {object}\n */\nconst getDefaultRecurrenceRuleObject = (props = {}) => Object.assign({}, {\n\t// The calendar-js recurrence-rule value\n\trecurrenceRuleValue: null,\n\t// The frequency of the recurrence-rule (DAILY, WEEKLY, ...)\n\tfrequency: 'NONE',\n\t// The interval of the recurrence-rule, must be a positive integer\n\tinterval: 1,\n\t// Positive integer if recurrence-rule limited by count, null otherwise\n\tcount: null,\n\t// Date if recurrence-rule limited by date, null otherwise\n\t// We do not store a timezone here, since we only care about the date part\n\tuntil: null,\n\t// List of byDay components to limit/expand the recurrence-rule\n\tbyDay: [],\n\t// List of byMonth components to limit/expand the recurrence-rule\n\tbyMonth: [],\n\t// List of byMonthDay components to limit/expand the recurrence-rule\n\tbyMonthDay: [],\n\t// A position to limit the recurrence-rule (e.g. -1 for last Friday)\n\tbySetPosition: null,\n\t// Whether or not the rule is not supported for editing\n\tisUnsupported: false,\n}, props)\n\n/**\n * Maps a calendar-js recurrence-rule-value to an recurrence-rule-object\n *\n * @param {RecurValue} recurrenceRuleValue The calendar-js recurrence rule value\n * @param {DateTimeValue} baseDate The base-date used to fill unset values\n * @return {object}\n */\nconst mapRecurrenceRuleValueToRecurrenceRuleObject = (recurrenceRuleValue, baseDate) => {\n\tswitch (recurrenceRuleValue.frequency) {\n\tcase 'DAILY':\n\t\treturn mapDailyRuleValueToRecurrenceRuleObject(recurrenceRuleValue)\n\n\tcase 'WEEKLY':\n\t\treturn mapWeeklyRuleValueToRecurrenceRuleObject(recurrenceRuleValue, baseDate)\n\n\tcase 'MONTHLY':\n\t\treturn mapMonthlyRuleValueToRecurrenceRuleObject(recurrenceRuleValue, baseDate)\n\n\tcase 'YEARLY':\n\t\treturn mapYearlyRuleValueToRecurrenceRuleObject(recurrenceRuleValue, baseDate)\n\n\tdefault: // SECONDLY, MINUTELY, HOURLY\n\t\treturn getDefaultRecurrenceRuleObjectForRecurrenceValue(recurrenceRuleValue, {\n\t\t\tisUnsupported: true,\n\t\t})\n\t}\n}\n\nconst FORBIDDEN_BY_PARTS_DAILY = [\n\t'BYSECOND',\n\t'BYMINUTE',\n\t'BYHOUR',\n\t'BYDAY',\n\t'BYMONTHDAY',\n\t'BYYEARDAY',\n\t'BYWEEKNO',\n\t'BYMONTH',\n\t'BYSETPOS',\n]\nconst FORBIDDEN_BY_PARTS_WEEKLY = [\n\t'BYSECOND',\n\t'BYMINUTE',\n\t'BYHOUR',\n\t'BYMONTHDAY',\n\t'BYYEARDAY',\n\t'BYWEEKNO',\n\t'BYMONTH',\n\t'BYSETPOS',\n]\nconst FORBIDDEN_BY_PARTS_MONTHLY = [\n\t'BYSECOND',\n\t'BYMINUTE',\n\t'BYHOUR',\n\t'BYYEARDAY',\n\t'BYWEEKNO',\n\t'BYMONTH',\n]\nconst FORBIDDEN_BY_PARTS_YEARLY = [\n\t'BYSECOND',\n\t'BYMINUTE',\n\t'BYHOUR',\n\t'BYYEARDAY',\n\t'BYWEEKNO',\n]\n\nconst SUPPORTED_BY_DAY_WEEKLY = [\n\t'SU',\n\t'MO',\n\t'TU',\n\t'WE',\n\t'TH',\n\t'FR',\n\t'SA',\n]\n\nconst SUPPORTED_BY_MONTHDAY_MONTHLY = [...Array(31).keys().map(i => i + 1)]\n\nconst SUPPORTED_BY_MONTH_YEARLY = [...Array(12).keys().map(i => i + 1)]\n\n/**\n * Maps a daily calendar-js recurrence-rule-value to an recurrence-rule-object\n *\n * @param recurrenceRuleValue\n * @return {object}\n */\nconst mapDailyRuleValueToRecurrenceRuleObject = (recurrenceRuleValue) => {\n\t/**\n\t * We only support DAILY rules without any by-parts in the editor.\n\t * If the recurrence-rule contains any by-parts, mark it as unsupported.\n\t */\n\tconst isUnsupported = containsRecurrenceComponent(recurrenceRuleValue, FORBIDDEN_BY_PARTS_DAILY)\n\n\treturn getDefaultRecurrenceRuleObjectForRecurrenceValue(recurrenceRuleValue, {\n\t\tisUnsupported,\n\t})\n}\n\n/**\n * Maps a weekly calendar-js recurrence-rule-value to an recurrence-rule-object\n *\n * @param {RecurValue} recurrenceRuleValue The calendar-js recurrence rule value\n * @param {DateTimeValue} baseDate The base-date used to fill unset values\n * @return {object}\n */\nconst mapWeeklyRuleValueToRecurrenceRuleObject = (recurrenceRuleValue, baseDate) => {\n\t/**\n\t * For WEEKLY recurrences, our editor only allows BYDAY\n\t *\n\t * As defined in RFC5545 3.3.10. Recurrence Rule:\n\t * > Each BYDAY value can also be preceded by a positive (+n) or\n\t * > negative (-n) integer.  If present, this indicates the nth\n\t * > occurrence of a specific day within the MONTHLY or YEARLY \"RRULE\".\n\t *\n\t * RFC 5545 specifies other components, which can be used along WEEKLY.\n\t * Among them are BYMONTH and BYSETPOS. We don't support those.\n\t */\n\tconst containsUnsupportedByParts = containsRecurrenceComponent(recurrenceRuleValue, FORBIDDEN_BY_PARTS_WEEKLY)\n\tconst containsInvalidByDayPart = recurrenceRuleValue.getComponent('BYDAY')\n\t\t.some((weekday) => !SUPPORTED_BY_DAY_WEEKLY.includes(weekday))\n\n\tconst isUnsupported = containsUnsupportedByParts || containsInvalidByDayPart\n\n\tconst byDay = recurrenceRuleValue.getComponent('BYDAY')\n\t\t.filter((weekday) => SUPPORTED_BY_DAY_WEEKLY.includes(weekday))\n\n\t// If the BYDAY is empty, add the day that the event occurs in\n\t// E.g. if the event is on a Wednesday, automatically set BYDAY:WE\n\tif (byDay.length === 0) {\n\t\tbyDay.push(getWeekDayFromDate(baseDate.jsDate))\n\t}\n\n\treturn getDefaultRecurrenceRuleObjectForRecurrenceValue(recurrenceRuleValue, {\n\t\tbyDay,\n\t\tisUnsupported,\n\t})\n}\n\n/**\n * Maps a monthly calendar-js recurrence-rule-value to an recurrence-rule-object\n *\n * @param {RecurValue} recurrenceRuleValue The calendar-js recurrence rule value\n * @param {DateTimeValue} baseDate The base-date used to fill unset values\n * @return {object}\n */\nconst mapMonthlyRuleValueToRecurrenceRuleObject = (recurrenceRuleValue, baseDate) => {\n\t/**\n\t * We only supports BYMONTHDAY, BYDAY, BYSETPOS in order to expand the monthly rule.\n\t * It supports either BYMONTHDAY or the combination of BYDAY and BYSETPOS. They have to be used exclusively\n\t * and cannot be combined.\n\t *\n\t * We do not support other BY-parts like BYMONTH\n\t *\n\t * For monthly recurrence-rules, BYDAY components are allowed to be preceded by positive or negative integers.\n\t * The Nextcloud-editor supports at most one BYDAY component with an integer.\n\t * If it's presented with such a BYDAY component, it will internally be converted to BYDAY without integer and BYSETPOS.\n\t * e.g.\n\t * BYDAY=3WE => BYDAY=WE,BYSETPOS=3\n\t *\n\t * BYSETPOS is limited to -2, -1, 1, 2, 3, 4, 5\n\t * Other values are not supported\n\t *\n\t * BYDAY is limited to \"MO\", \"TU\", \"WE\", \"TH\", \"FR\", \"SA\", \"SU\",\n\t * \"MO,TU,WE,TH,FR,SA,SU\", \"MO,TU,WE,TH,FR\", \"SA,SU\"\n\t *\n\t * BYMONTHDAY is limited to \"1\", \"2\", ..., \"31\"\n\t */\n\tlet isUnsupported = containsRecurrenceComponent(recurrenceRuleValue, FORBIDDEN_BY_PARTS_MONTHLY)\n\n\tlet byDay = []\n\tlet bySetPosition = null\n\tlet byMonthDay = []\n\n\t// This handles the first case, where we have a BYMONTHDAY rule\n\tif (containsRecurrenceComponent(recurrenceRuleValue, ['BYMONTHDAY'])) {\n\t\t// verify there is no BYDAY or BYSETPOS at the same time\n\t\tif (containsRecurrenceComponent(recurrenceRuleValue, ['BYDAY', 'BYSETPOS'])) {\n\t\t\tisUnsupported = true\n\t\t}\n\n\t\tconst containsInvalidByMonthDay = recurrenceRuleValue.getComponent('BYMONTHDAY')\n\t\t\t.some((monthDay) => !SUPPORTED_BY_MONTHDAY_MONTHLY.includes(monthDay))\n\t\tisUnsupported = isUnsupported || containsInvalidByMonthDay\n\n\t\tbyMonthDay = recurrenceRuleValue.getComponent('BYMONTHDAY')\n\t\t\t.filter((monthDay) => SUPPORTED_BY_MONTHDAY_MONTHLY.includes(monthDay))\n\t\t\t.map((monthDay) => monthDay)\n\n\t\t// This handles cases where we have both BYDAY and BYSETPOS\n\t} else if (containsRecurrenceComponent(recurrenceRuleValue, ['BYDAY']) && containsRecurrenceComponent(recurrenceRuleValue, ['BYSETPOS'])) {\n\n\t\tif (isAllowedByDay(recurrenceRuleValue.getComponent('BYDAY'))) {\n\t\t\tbyDay = recurrenceRuleValue.getComponent('BYDAY')\n\t\t} else {\n\t\t\tbyDay = ['MO', 'TU', 'WE', 'TH', 'FR', 'SA', 'SU']\n\t\t\tisUnsupported = true\n\t\t}\n\n\t\tconst setPositionArray = recurrenceRuleValue.getComponent('BYSETPOS')\n\t\tif (setPositionArray.length === 1 && isAllowedBySetPos(setPositionArray[0])) {\n\t\t\tbySetPosition = setPositionArray[0]\n\t\t} else {\n\t\t\tbySetPosition = 1\n\t\t\tisUnsupported = true\n\t\t}\n\n\t\t// This handles cases where we only have a BYDAY\n\t} else if (containsRecurrenceComponent(recurrenceRuleValue, ['BYDAY'])) {\n\n\t\tconst byDayArray = recurrenceRuleValue.getComponent('BYDAY')\n\n\t\tif (byDayArray.length > 1) {\n\t\t\tbyMonthDay.push(baseDate.day)\n\t\t\tisUnsupported = true\n\t\t} else {\n\t\t\tconst firstElement = byDayArray[0]\n\n\t\t\tconst match = /^(-?\\d)([A-Z]{2})$/.exec(firstElement)\n\t\t\tif (match) {\n\t\t\t\tconst matchedBySetPosition = match[1]\n\t\t\t\tconst matchedByDay = match[2]\n\n\t\t\t\tif (isAllowedBySetPos(matchedBySetPosition)) {\n\t\t\t\t\tbyDay = [matchedByDay]\n\t\t\t\t\tbySetPosition = parseInt(matchedBySetPosition, 10)\n\t\t\t\t} else {\n\t\t\t\t\tbyDay = [matchedByDay]\n\t\t\t\t\tbySetPosition = 1\n\t\t\t\t\tisUnsupported = true\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tbyMonthDay.push(baseDate.day)\n\t\t\t\tisUnsupported = true\n\t\t\t}\n\t\t}\n\n\t\t// This is a fallback where we just default BYMONTHDAY to the start date of the event\n\t} else {\n\t\tbyMonthDay.push(baseDate.day)\n\t}\n\n\treturn getDefaultRecurrenceRuleObjectForRecurrenceValue(recurrenceRuleValue, {\n\t\tbyDay,\n\t\tbySetPosition,\n\t\tbyMonthDay,\n\t\tisUnsupported,\n\t})\n}\n\n/**\n * Maps a yearly calendar-js recurrence-rule-value to an recurrence-rule-object\n *\n * @param {RecurValue} recurrenceRuleValue The calendar-js recurrence rule value\n * @param {DateTimeValue} baseDate The base-date used to fill unset values\n * @return {object}\n */\nconst mapYearlyRuleValueToRecurrenceRuleObject = (recurrenceRuleValue, baseDate) => {\n\t/**\n\t * We only supports BYMONTH, BYDAY, BYSETPOS in order to expand the yearly rule.\n\t * It supports a combination of them.\n\t *\n\t * We do not support other BY-parts.\n\t *\n\t * For yearly recurrence-rules, BYDAY components are allowed to be preceded by positive or negative integers.\n\t * The Nextcloud-editor supports at most one BYDAY component with an integer.\n\t * If it's presented with such a BYDAY component, it will internally be converted to BYDAY without integer and BYSETPOS.\n\t * e.g.\n\t * BYDAY=3WE => BYDAY=WE,BYSETPOS=3\n\t *\n\t * BYSETPOS is limited to -2, -1, 1, 2, 3, 4, 5\n\t * Other values are not supported\n\t *\n\t * BYDAY is limited to \"MO\", \"TU\", \"WE\", \"TH\", \"FR\", \"SA\", \"SU\",\n\t * \"MO,TU,WE,TH,FR,SA,SU\", \"MO,TU,WE,TH,FR\", \"SA,SU\"\n\t */\n\tlet isUnsupported = containsRecurrenceComponent(recurrenceRuleValue, FORBIDDEN_BY_PARTS_YEARLY)\n\n\tlet byDay = []\n\tlet bySetPosition = null\n\tlet byMonth = []\n\tlet byMonthDay = []\n\n\tif (containsRecurrenceComponent(recurrenceRuleValue, ['BYMONTH'])) {\n\t\t// This handles the first case, where we have a BYMONTH rule\n\n\t\tconst containsInvalidByMonth = recurrenceRuleValue.getComponent('BYMONTH')\n\t\t\t.some((month) => !SUPPORTED_BY_MONTH_YEARLY.includes(month))\n\t\tisUnsupported = isUnsupported || containsInvalidByMonth\n\n\t\tbyMonth = recurrenceRuleValue.getComponent('BYMONTH')\n\t\t\t.filter((month) => SUPPORTED_BY_MONTH_YEARLY.includes(month))\n\t\t\t.map((month) => month)\n\n\t} else {\n\t\t// This is a fallback where we just default BYMONTH to the start date of the event\n\n\t\tbyMonth.push(baseDate.month)\n\t}\n\n\tif (containsRecurrenceComponent(recurrenceRuleValue, ['BYMONTHDAY'])) {\n\t\t// This handles the first case, where we have a BYMONTHDAY rule\n\n\t\t// verify there is no BYDAY or BYSETPOS at the same time\n\t\tif (containsRecurrenceComponent(recurrenceRuleValue, ['BYDAY', 'BYSETPOS'])) {\n\t\t\tisUnsupported = true\n\t\t}\n\n\t\tconst containsInvalidByMonthDay = recurrenceRuleValue.getComponent('BYMONTHDAY')\n\t\t\t.some((monthDay) => !SUPPORTED_BY_MONTHDAY_MONTHLY.includes(monthDay))\n\t\tisUnsupported = isUnsupported || containsInvalidByMonthDay\n\n\t\tbyMonthDay = recurrenceRuleValue.getComponent('BYMONTHDAY')\n\t\t\t.filter((monthDay) => SUPPORTED_BY_MONTHDAY_MONTHLY.includes(monthDay))\n\t\t\t.map((monthDay) => monthDay)\n\n\t} else if (containsRecurrenceComponent(recurrenceRuleValue, ['BYDAY']) && containsRecurrenceComponent(recurrenceRuleValue, ['BYSETPOS'])) {\n\t\t// This handles cases where we have both BYDAY and BYSETPOS\n\n\t\tif (isAllowedByDay(recurrenceRuleValue.getComponent('BYDAY'))) {\n\t\t\tbyDay = recurrenceRuleValue.getComponent('BYDAY')\n\t\t} else {\n\t\t\tbyDay = ['MO', 'TU', 'WE', 'TH', 'FR', 'SA', 'SU']\n\t\t\tisUnsupported = true\n\t\t}\n\n\t\tconst setPositionArray = recurrenceRuleValue.getComponent('BYSETPOS')\n\t\tif (setPositionArray.length === 1 && isAllowedBySetPos(setPositionArray[0])) {\n\t\t\tbySetPosition = setPositionArray[0]\n\t\t} else {\n\t\t\tbySetPosition = 1\n\t\t\tisUnsupported = true\n\t\t}\n\t} else if (containsRecurrenceComponent(recurrenceRuleValue, ['BYDAY'])) {\n\t\t// This handles cases where we only have a BYDAY\n\n\t\tconst byDayArray = recurrenceRuleValue.getComponent('BYDAY')\n\n\t\tif (byDayArray.length > 1) {\n\t\t\tbyMonthDay.push(baseDate.day)\n\t\t\tisUnsupported = true\n\t\t} else {\n\t\t\tconst firstElement = byDayArray[0]\n\n\t\t\tconst match = /^(-?\\d)([A-Z]{2})$/.exec(firstElement)\n\t\t\tif (match) {\n\t\t\t\tconst matchedBySetPosition = match[1]\n\t\t\t\tconst matchedByDay = match[2]\n\n\t\t\t\tif (isAllowedBySetPos(matchedBySetPosition)) {\n\t\t\t\t\tbyDay = [matchedByDay]\n\t\t\t\t\tbySetPosition = parseInt(matchedBySetPosition, 10)\n\t\t\t\t} else {\n\t\t\t\t\tbyDay = [matchedByDay]\n\t\t\t\t\tbySetPosition = 1\n\t\t\t\t\tisUnsupported = true\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tbyMonthDay.push(baseDate.day)\n\t\t\t\tisUnsupported = true\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// This is a fallback where we just default BYMONTHDAY to the start date of the event\n\t\tbyMonthDay.push(baseDate.day)\n\t}\n\n\treturn getDefaultRecurrenceRuleObjectForRecurrenceValue(recurrenceRuleValue, {\n\t\tbyDay,\n\t\tbySetPosition,\n\t\tbyMonth,\n\t\tbyMonthDay,\n\t\tisUnsupported,\n\t})\n}\n\n/**\n * Checks if the given parameter is a supported BYDAY value\n *\n * @param {string[]} byDay The byDay component to check\n * @return {boolean}\n */\nconst isAllowedByDay = (byDay) => {\n\treturn [\n\t\t'MO',\n\t\t'TU',\n\t\t'WE',\n\t\t'TH',\n\t\t'FR',\n\t\t'SA',\n\t\t'SU',\n\t\t'FR,MO,SA,SU,TH,TU,WE',\n\t\t'FR,MO,TH,TU,WE',\n\t\t'SA,SU',\n\t].includes(byDay.slice().sort().join(','))\n}\n\n/**\n * Checks if the given parameter is a supported BYSETPOS value\n *\n * @param {string} bySetPos The bySetPos component to check\n * @return {boolean}\n */\nconst isAllowedBySetPos = (bySetPos) => {\n\treturn [\n\t\t'-2',\n\t\t'-1',\n\t\t'1',\n\t\t'2',\n\t\t'3',\n\t\t'4',\n\t\t'5',\n\t].includes(bySetPos.toString())\n}\n\n/**\n * Checks if the recurrence-rule contains any of the given components\n *\n * @param {RecurValue} recurrenceRule The recurrence-rule value to check for the given components\n * @param {string[]} components List of components to check for\n * @return {boolean}\n */\nconst containsRecurrenceComponent = (recurrenceRule, components) => {\n\tfor (const component of components) {\n\t\tconst componentValue = recurrenceRule.getComponent(component)\n\t\tif (componentValue.length > 0) {\n\t\t\treturn true\n\t\t}\n\t}\n\n\treturn false\n}\n\n/**\n * Returns a full recurrence-rule-object with default values derived from recurrenceRuleValue\n * and additional props\n *\n * @param {RecurValue} recurrenceRuleValue The recurrence-rule value to get default values from\n * @param {object} props The properties to provide on top of default one\n * @return {object}\n */\nconst getDefaultRecurrenceRuleObjectForRecurrenceValue = (recurrenceRuleValue, props) => {\n\tconst isUnsupported = recurrenceRuleValue.count !== null && recurrenceRuleValue.until !== null\n\tlet isUnsupportedProps = {}\n\n\tif (isUnsupported) {\n\t\tisUnsupportedProps = {\n\t\t\tisUnsupported,\n\t\t}\n\t}\n\n\treturn getDefaultRecurrenceRuleObject(Object.assign({}, {\n\t\trecurrenceRuleValue,\n\t\tfrequency: recurrenceRuleValue.frequency,\n\t\tinterval: parseInt(recurrenceRuleValue.interval, 10) || 1,\n\t\tcount: recurrenceRuleValue.count,\n\t\tuntil: recurrenceRuleValue.until\n\t\t\t? getDateFromDateTimeValue(recurrenceRuleValue.until)\n\t\t\t: null,\n\t}, props, isUnsupportedProps))\n}\n\nexport {\n\tgetDefaultRecurrenceRuleObject,\n\tmapRecurrenceRuleValueToRecurrenceRuleObject,\n}\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport { translate as t } from '@nextcloud/l10n'\nimport { getDefaultCategories } from '../defaults/defaultCategories.js'\n\n/**\n * Gets all supported RFC properties\n *\n * @return {{color: {readableName: *, icon: string, multiple: boolean, info: *}, timeTransparency: {readableName: *, defaultValue: string, icon: string, multiple: boolean, options: *[], info: *}, description: {readableName: *, icon: string, placeholder: *, defaultNumberOfRows: number}, location: {readableName: *, icon: string, placeholder: *}, categories: {readableName: *, icon: string, multiple: boolean, options: *, tagPlaceholder: *, placeholder: *, info: *}, accessClass: {readableName: *, defaultValue: string, icon: string, options: *[], multiple: boolean, info: *}, status: {readableName: *, defaultValue: string, icon: string, options: *[], multiple: boolean, info: *}}}\n */\nconst getRFCProperties = () => {\n\treturn {\n\t\t/**\n\t\t * https://tools.ietf.org/html/rfc5545#section-3.8.1.3\n\t\t */\n\t\taccessClass: {\n\t\t\treadableName: t('calendar', 'When shared show'),\n\t\t\ticon: 'Eye',\n\t\t\toptions: [\n\t\t\t\t{ value: 'PUBLIC', label: t('calendar', 'When shared show full event') },\n\t\t\t\t{ value: 'CONFIDENTIAL', label: t('calendar', 'When shared show only busy') },\n\t\t\t\t{ value: 'PRIVATE', label: t('calendar', 'When shared hide this event') },\n\t\t\t],\n\t\t\tmultiple: false,\n\t\t\tinfo: t('calendar', 'The visibility of this event in shared calendars.'),\n\t\t\tdefaultValue: 'PUBLIC',\n\t\t},\n\t\t/**\n\t\t * https://tools.ietf.org/html/rfc5545#section-3.8.1.7\n\t\t */\n\t\tlocation: {\n\t\t\treadableName: t('calendar', 'Location'),\n\t\t\tplaceholder: t('calendar', 'Add a location'),\n\t\t\ticon: 'MapMarker',\n\t\t},\n\t\t/**\n\t\t * https://tools.ietf.org/html/rfc5545#section-3.8.1.5\n\t\t */\n\t\tdescription: {\n\t\t\treadableName: t('calendar', 'Description'),\n\t\t\tplaceholder: t('calendar', 'Add a description\\n'\n\t\t\t\t+ '\\n'\n\t\t\t\t+ '- What is this meeting about\\n'\n\t\t\t\t+ '- Agenda items\\n'\n\t\t\t\t+ '- Anything participants need to prepare'),\n\t\t\ticon: 'TextBoxOutline',\n\t\t\tdefaultNumberOfRows: 2,\n\t\t},\n\t\t/**\n\t\t * https://tools.ietf.org/html/rfc5545#section-3.8.1.11\n\t\t */\n\t\tstatus: {\n\t\t\treadableName: t('calendar', 'Status'),\n\t\t\ticon: 'Check',\n\t\t\toptions: [\n\t\t\t\t{ value: 'CONFIRMED', label: t('calendar', 'Confirmed') },\n\t\t\t\t{ value: 'TENTATIVE', label: t('calendar', 'Tentative') },\n\t\t\t\t{ value: 'CANCELLED', label: t('calendar', 'Canceled') },\n\t\t\t],\n\t\t\tmultiple: false,\n\t\t\tinfo: t('calendar', 'Confirmation about the overall status of the event.'),\n\t\t\tdefaultValue: 'CONFIRMED',\n\t\t},\n\t\t/**\n\t\t * https://tools.ietf.org/html/rfc5545#section-3.8.2.7\n\t\t */\n\t\ttimeTransparency: {\n\t\t\treadableName: t('calendar', 'Show as'),\n\t\t\ticon: 'Briefcase',\n\t\t\tmultiple: false,\n\t\t\tinfo: t('calendar', 'Take this event into account when calculating free-busy information.'),\n\t\t\toptions: [\n\t\t\t\t{ value: 'TRANSPARENT', label: t('calendar', 'Free') },\n\t\t\t\t{ value: 'OPAQUE', label: t('calendar', 'Busy') },\n\t\t\t],\n\t\t\tdefaultValue: 'TRANSPARENT',\n\t\t},\n\t\t/**\n\t\t * https://tools.ietf.org/html/rfc5545#section-3.8.1.2\n\t\t */\n\t\tcategories: {\n\t\t\treadableName: t('calendar', 'Categories'),\n\t\t\ticon: 'Tag',\n\t\t\tmultiple: true,\n\t\t\tinfo: t('calendar', 'Categories help you to structure and organize your events.'),\n\t\t\tplaceholder: t('calendar', 'Search or add categories'),\n\t\t\ttagPlaceholder: t('calendar', 'Add this as a new category'),\n\t\t\toptions: getDefaultCategories(),\n\t\t},\n\t\t/**\n\t\t * https://tools.ietf.org/html/rfc7986#section-5.9\n\t\t */\n\t\tcolor: {\n\t\t\treadableName: t('calendar', 'Custom color'),\n\t\t\ticon: 'EyedropperVariant',\n\t\t\tmultiple: false,\n\t\t\tinfo: t('calendar', 'Special color of this event. Overrides the calendar-color.'),\n\t\t},\n\t}\n}\n\nexport {\n\tgetRFCProperties,\n}\n","/**\n * SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport axios from '@nextcloud/axios'\nimport { generateOcsUrl, generateRemoteUrl } from '@nextcloud/router'\nimport { showError, showSuccess } from '@nextcloud/dialogs'\nimport { translate as t } from '@nextcloud/l10n'\nimport { parseXML } from 'webdav'\nimport { parseUploadError } from '../utils/propfindErrorParse.js'\n\n/**\n * Makes a share link for a given file or directory.\n *\n * @param {string} path The file path from the user's root directory. e.g. `/myfile.txt`\n * @return {string} url share link\n */\nconst shareFile = async function(path) {\n\ttry {\n\t\tconst res = await axios.post(generateOcsUrl('apps/files_sharing/api/v1/', 2) + 'shares', {\n\t\t\tshareType: OC.Share.SHARE_TYPE_LINK,\n\t\t\tpath,\n\t\t})\n\t\treturn res.data.ocs.data\n\t} catch (error) {\n\t\tif (error?.response?.data?.ocs?.meta?.message) {\n\t\t\tconsole.error(`Error while sharing file: ${error.response.data.ocs.meta.message}`)\n\t\t\tshowError(error.response.data.ocs.meta.message)\n\t\t\tthrow error\n\t\t} else {\n\t\t\tconsole.error('Error while sharing file: Unknown error')\n\t\t\tshowError(t('calendar', 'Error while sharing file'))\n\t\t\tthrow error\n\t\t}\n\t}\n}\n\n/**\n * Share file with a user with permissions\n *\n * @param path\n * @param sharedWith\n * @param permissions\n * @return {Promise<[{path: string, permissions, scope: string, name: string, backend: string, type: string},{path: string, permissions: *, scope: string, name: string, backend: string, type: string}]>}\n */\nconst shareFileWith = async function(path, sharedWith, permissions = 17) {\n\ttry {\n\t\tconst url = generateOcsUrl('apps/files_sharing/api/v1/', 2)\n\t\tconst res = await axios.post(`${url}shares`, {\n\t\t\tpassword: null,\n\t\t\tshareType: OC.Share.SHARE_TYPE_USER, // WITH USERS,\n\t\t\tpermissions, // 14 - edit, 17 - view\n\t\t\tpath,\n\t\t\tshareWith: sharedWith,\n\t\t})\n\t\treturn res.data.ocs.data\n\t} catch (error) {\n\t\tif (error?.response?.data?.ocs?.meta?.message) {\n\t\t\tconsole.error(`Error while sharing file with user: ${error.response.data.ocs.meta.message}`)\n\t\t\tshowError(error.response.data.ocs.meta.message)\n\t\t\tthrow error\n\t\t} else {\n\t\t\tconsole.error('Error while sharing file with user: Unknown error')\n\t\t\tshowError(t('calendar', 'Error while sharing file with user'))\n\t\t\tthrow error\n\t\t}\n\t}\n}\n\nconst createFolder = async function(folderName, userId) {\n\tconst url = generateRemoteUrl(`dav/files/${userId}/${folderName}`)\n\ttry {\n\t\tawait axios({\n\t\t\tmethod: 'MKCOL',\n\t\t\turl,\n\t\t})\n\t} catch (e) {\n\t\tif (e?.response?.status !== 405) {\n\t\t\tshowError(t('calendar', 'Error creating a folder {folder}', {\n\t\t\t\tfolder: folderName,\n\t\t\t}))\n\t\t\t// Maybe the actual upload succeeds -> keep going\n\t\t\treturn folderName\n\t\t}\n\n\t\t// Folder already exists\n\t\tif (folderName !== '/') {\n\t\t\tfolderName = await findFirstOwnedFolder(folderName, userId)\n\t\t}\n\t}\n\n\treturn folderName\n}\n\nconst findFirstOwnedFolder = async function(path, userId) {\n\tconst infoXml = await getFileInfo(path, userId)\n\tconst info = await parseXML(infoXml)\n\tconst mountType = info?.multistatus?.response[0]?.propstat?.prop?.['mount-type']\n\tif (mountType !== 'shared') {\n\t\treturn path\n\t}\n\n\tconst hierarchy = path.split('/')\n\thierarchy.pop()\n\tif (hierarchy.length === 1) {\n\t\treturn '/'\n\t}\n\n\treturn findFirstOwnedFolder(hierarchy.join('/'), userId)\n}\n\nconst uploadLocalAttachment = async function(folder, files, dav, componentAttachments) {\n\tconst attachments = []\n\tconst promises = []\n\n\tfiles.forEach(file => {\n\t\t// temp fix, until we decide where to save the attachments\n\t\tif (componentAttachments.map(attachment => attachment.fileName.split('/').pop()).indexOf(file.name) !== -1) {\n\t\t\t// TODO may be show user confirmation dialog to create a file named Existing_File_(2) ?\n\t\t\tshowError(t('calendar', 'Attachment {fileName} already exists!', {\n\t\t\t\tfileName: file.name,\n\t\t\t}))\n\t\t} else {\n\t\t\tconst url = generateRemoteUrl(`dav/files/${dav.userId}/${folder}/${file.name}`)\n\t\t\tconst res = axios.put(url, file).then(resp => {\n\t\t\t\tconst data = {\n\t\t\t\t\tfileName: file.name,\n\t\t\t\t\tformatType: file.type,\n\t\t\t\t\turi: url,\n\t\t\t\t\tvalue: url,\n\t\t\t\t\tpath: `/${file.name}`,\n\t\t\t\t}\n\t\t\t\tif (resp.status === 204 || resp.status === 201) {\n\t\t\t\t\tshowSuccess(t('calendar', 'Attachment {fileName} added!', {\n\t\t\t\t\t\tfileName: file.name,\n\t\t\t\t\t}))\n\t\t\t\t\tattachments.push(data)\n\t\t\t\t}\n\t\t\t}).catch(async (exception) => {\n\t\t\t\tif (exception.response) {\n\t\t\t\t\tconst message = await parseUploadError(exception)\n\t\t\t\t\tif (message) {\n\t\t\t\t\t\tshowError(message)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tshowError(t('calendar', 'An error occurred during uploading file {fileName}', {\n\t\t\t\t\t\t\tfileName: file.name,\n\t\t\t\t\t\t}))\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\tpromises.push(res)\n\t\t}\n\n\t})\n\tawait Promise.all(promises)\n\treturn attachments\n\n}\n\n// TODO is shared or not @share-types@\nconst getFileInfo = async function(path, userId) {\n\tconst url = generateRemoteUrl(`dav/files/${userId}/${path}`)\n\tconst res = await axios({\n\t\tmethod: 'PROPFIND',\n\t\turl,\n\t\tdata: `<?xml version=\"1.0\"?>\n\t\t\t<d:propfind\n\t\t\txmlns:d=\"DAV:\"\n\t\t\txmlns:oc=\"http://owncloud.org/ns\"\n\t\t\txmlns:nc=\"http://nextcloud.org/ns\">\n\t\t\t\t<d:prop>\n\t\t\t\t\t<d:getcontenttype />\n\t\t\t\t\t<oc:size />\n\t\t\t\t\t<oc:fileid />\n\t\t\t\t\t<oc:share-types />\n\t\t\t\t\t<nc:has-preview />\n\t\t\t\t\t<nc:mount-type />\n\t\t\t\t</d:prop>\n\t\t\t</d:propfind>`,\n\t}).catch(() => {\n\t\tshowError(t('calendar', 'An error occurred during getting file information'))\n\t})\n\treturn res.data\n}\n\nexport {\n\tgetFileInfo,\n\tshareFile,\n\tshareFileWith,\n\tuploadLocalAttachment,\n\tcreateFolder,\n}\n","/**\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport HttpClient from '@nextcloud/axios'\nimport {\n\tgenerateOcsUrl,\n\tlinkTo,\n} from '@nextcloud/router'\n\n/**\n * Finds circles by displayname\n *\n * @param {string} query The search-term\n * @return {Promise<void>}\n */\nconst circleSearchByName = async (query) => {\n\tlet results\n\ttry {\n\t\tresults = await HttpClient.get(generateOcsUrl('apps/files_sharing/api/v1/') + 'sharees', {\n\t\t\tparams: {\n\t\t\t\tformat: 'json',\n\t\t\t\tsearch: query,\n\t\t\t\tperPage: 200,\n\t\t\t\titemType: 'pringroucipals',\n\t\t\t},\n\t\t})\n\t} catch (error) {\n\t\treturn []\n\t}\n\n\tif (results.data.ocs.meta.status === 'failure') {\n\t\treturn []\n\t}\n\n\tlet circles = []\n\tif (Array.isArray(results.data.ocs.data.circles)) {\n\t\tcircles = circles.concat(results.data.ocs.data.circles)\n\t}\n\tif (Array.isArray(results.data.ocs.data.exact.circles)) {\n\t\tcircles = circles.concat(results.data.ocs.data.exact.circles)\n\t}\n\n\tif (circles.length === 0) {\n\t\treturn []\n\t}\n\n\treturn circles.filter((circle) => {\n\t\treturn true\n\t}).map(circle => ({\n\t\tdisplayname: circle.label,\n\t\tpopulation: circle.value.circle.population,\n\t\tid: circle.value.circle.id,\n\t\tinstance: circle.value.circle.owner.instance,\n\t}))\n}\n\n/**\n * Get members of circle by id\n *\n * @param {string} circleId The circle id to query\n * @return {Promise<void>}\n */\nconst circleGetMembers = async (circleId) => {\n\tlet results\n\ttry {\n\t\tresults = await HttpClient.get(linkTo('calendar', 'index.php') + '/v1/circles/getmembers', {\n\t\t\tparams: {\n\t\t\t\tformat: 'json',\n\t\t\t\tcircleId,\n\t\t\t},\n\t\t})\n\t} catch (error) {\n\t\tconsole.debug(error)\n\t\treturn []\n\t}\n\treturn results\n}\n\nexport {\n\tcircleSearchByName,\n\tcircleGetMembers,\n}\n","/**\n * SPDX-FileCopyrightText: 2024 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { AttendeeProperty, createFreeBusyRequest, DateTimeValue } from '@nextcloud/calendar-js'\nimport { findSchedulingOutbox } from './caldavService.js'\nimport freeBusyResourceEventSourceFunction from '../fullcalendar/eventSources/freeBusyResourceEventSourceFunction.js'\nimport getTimezoneManager from './timezoneDataProviderService.js'\nimport logger from '../utils/logger.js'\n\nconst daysToSearch = 7\n\n/**\n * Get busy slots for organizer and/or attendee/s\n *\n * @param {Principal} organizer The organizer of the event\n * @param {AttendeeProperty[]} attendees Array of the event's attendees\n * @param {Date} start The start date and time of the event\n * @param {Date} end The end date and time of the event\n * @param timeZoneId\n * @param {boolean} bulk fetch all attendees in one request\n * @return {Promise<>}\n */\nexport async function getBusySlots(organizer, attendees, start, end, timeZoneId, bulk = true) {\n\t// We start searching a day earlier because if we don't availability events get cut off in weird ways\n\tconst clonedStart = new Date(start.getTime())\n\tclonedStart.setDate(clonedStart.getDate() - 1)\n\tlet timezoneObject = getTimezoneManager().getTimezoneForId(timeZoneId)\n\tif (!timezoneObject) {\n\t\ttimezoneObject = getTimezoneManager().getTimezoneForId('UTC')\n\t\tlogger.error(`FreeBusyEventSource: Timezone ${timeZoneId} not found, falling back to UTC.`)\n\t}\n\n\tconst startDateTime = DateTimeValue.fromJSDate(clonedStart, true)\n\tconst endDateTime = DateTimeValue.fromJSDate(end, true)\n\tlet freeBusyComponent\n\tlet isOrganizer = false\n\tif (bulk) {\n\t\tconst organizerAsAttendee = new AttendeeProperty('ATTENDEE', organizer.email)\n\t\tfreeBusyComponent = createFreeBusyRequest(startDateTime, endDateTime, organizer, [organizerAsAttendee, ...attendees])\n\t} else {\n\t\tfreeBusyComponent = createFreeBusyRequest(startDateTime, endDateTime, organizer, attendees)\n\t\tisOrganizer = attendees[0].email === organizer.email\n\t}\n\tconst freeBusyICS = freeBusyComponent.toICS()\n\tlet outbox\n\ttry {\n\t\toutbox = await findSchedulingOutbox()\n\t} catch (error) {\n\t\treturn { error }\n\t}\n\n\tlet freeBusyData\n\ttry {\n\t\tfreeBusyData = await outbox.freeBusyRequest(freeBusyICS)\n\t} catch (error) {\n\t\treturn { error }\n\t}\n\tconst events = []\n\tfor (const [uri, data] of Object.entries(freeBusyData)) {\n\t\tif (bulk) {\n\t\t\tevents.push(...freeBusyResourceEventSourceFunction(uri, data.calendarData, data.success, startDateTime, endDateTime, timezoneObject))\n\t\t} else {\n\t\t\tevents.push(...freeBusyResourceEventSourceFunction(uri, data.calendarData, data.success, startDateTime, endDateTime, timezoneObject, attendees[0].commonName, isOrganizer))\n\t\t}\n\t}\n\treturn { events }\n}\n\n/**\n * Get the first available slot for an event using the freebusy API\n *\n\n * @param {Date} start The start date and time of the event\n * @param {Date} end The end date and time of the event\n * @param retrievedEvents Events found by the freebusy API\n * @return []\n */\nexport function getFirstFreeSlot(start, end, retrievedEvents) {\n\n\t// Here we are trying to understand the duration of the event, this is needed to check that the start and end points of a theoretical slot are free\n\tlet duration = getDurationInSeconds(start, end)\n\tif (duration === 0) {\n\t\tduration = 86400 // One day\n\t}\n\n\t// We check all events in a weekly span from the start of the event\n\tconst endSearchDate = new Date(start)\n\tendSearchDate.setDate(start.getDate() + daysToSearch)\n\n\tif (retrievedEvents.error) {\n\t\treturn [{ error: retrievedEvents.error }]\n\t}\n\n\t// Events have to be sorted to be checked cronologically\n\tlet events = sortEvents(retrievedEvents)\n\n\tevents = events.filter(function(event) {\n\t    return new Date(start) < new Date(event.end)\n\t})\n\n\tconst totalSlots = []\n\n\t// Check times after every event\n\tfor (let i = 0; i < events.length; i++) {\n\t\tconst foundSlots = checkTime(new Date(events[i].end), duration, events)\n\n\t\tif (foundSlots) totalSlots.push(foundSlots)\n\t}\n\n\t// Check current time\n\tconst foundSlots = checkTime(new Date(start), duration, events, false, false)\n\n\tif (foundSlots) {\n\t\ttotalSlots.unshift(foundSlots)\n\t}\n\n\treturn totalSlots\n}\n\n/**\n *\n * @param start\n * @param end\n * @return {number}\n */\nfunction getDurationInSeconds(start, end) {\n\t// Convert dates to UTC to account for daylight saving time\n\tconst startUTC = new Date(start).toUTCString()\n\tconst endUTC = new Date(end).toUTCString()\n\n\tconst durationMs = new Date(endUTC) - new Date(startUTC)\n\t// Convert milliseconds to seconds\n\treturn Math.floor(durationMs / 1000)\n}\n\n/**\n *\n * @param currentCheckedTime\n * @param duration\n * @param events\n * @param toRound\n * @parma toRound\n */\nfunction checkTime(currentCheckedTime, duration, events, toRound = true) {\n\tlet timeValid = true\n\n\t// We sometimes don't want to round, like when using the current time\n\tif (toRound) {\n\t\tcurrentCheckedTime = roundToNearestQuarter(currentCheckedTime)\n\t}\n\n\tconst currentCheckedTimeEnd = new Date(currentCheckedTime)\n\tcurrentCheckedTimeEnd.setSeconds(currentCheckedTime.getSeconds() + duration)\n\n\tevents.every(\n\t\t(event) => {\n\t\t\tconst eventStart = new Date(event.start)\n\t\t\tconst eventEnd = new Date(event.end)\n\n\t\t\t// Start of event is within the range that we are checking\n\t\t\tif (eventStart >= currentCheckedTime && eventStart <= currentCheckedTimeEnd) {\n\t\t\t\ttimeValid = false\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\t// End of event is within range that we are checking\n\t\t\tif (eventEnd >= currentCheckedTime && eventEnd <= currentCheckedTimeEnd) {\n\t\t\t\ttimeValid = false\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\t// Range that we are checking is within ends of event\n\t\t\tif (eventStart <= currentCheckedTime && eventEnd >= currentCheckedTimeEnd) {\n\t\t\t\ttimeValid = false\n\t\t\t\treturn false\n\t\t\t}\n\t\t\treturn true\n\t\t},\n\t)\n\n\tif (timeValid) {\n\t\treturn { start: currentCheckedTime, end: currentCheckedTimeEnd }\n\t} else {\n\t\treturn false\n\t}\n}\n\n/**\n *\n * @param events\n */\nfunction sortEvents(events) {\n\t// Remove events that have the same start and end time, if not done causes problems\n\tconst mappedEvents = new Map()\n\n\tfor (const obj of events) {\n\t\tconst key = obj.start.toString() + obj.end.toString()\n\n\t\tif (!mappedEvents.has(key)) {\n\t\t\tmappedEvents.set(key, obj)\n\t\t}\n\t}\n\n\treturn Array.from(mappedEvents.values()).sort((a, b) => new Date(a.start) - new Date(b.start))\n}\n\n/**\n *\n * @param date\n */\nfunction roundToNearestQuarter(date) {\n\t// Needed because it doesn't work with 0\n\tif (date.getMinutes() % 15 === 0) date.setMinutes(date.getMinutes() + 1)\n\n\tconst roundedMinutes = Math.ceil(date.getMinutes() / 15) * 15\n\n\tdate.setMinutes(roundedMinutes)\n\n\t// Reset seconds and milliseconds\n\tdate.setSeconds(0)\n\tdate.setMilliseconds(0)\n\n\treturn date\n}\n","/**\n * SPDX-FileCopyrightText: 2021 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { loadState } from '@nextcloud/initial-state'\n\nconst isCirclesEnabled = loadState('calendar', 'isCirclesEnabled', false)\nexport default isCirclesEnabled\n","/**\n * SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport HttpClient from '@nextcloud/axios'\nimport { getLinkToConfig } from '../utils/settings.js'\n\n/**\n *\n * @param {string} key Config-key to set\n * @param {string | number | boolean} value Config-value to set\n * @return {Promise<void>}\n */\nconst setConfig = async (key, value) => {\n\tawait HttpClient.post(getLinkToConfig(key), { value })\n}\n\nexport {\n\tsetConfig,\n}\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport { getTimezoneManager } from '@nextcloud/timezones'\n\nconst timezoneManager = getTimezoneManager()\nlet initialized = false\n\n/**\n * Gets the timezone-manager\n * initializes it if necessary\n *\n * @return {TimezoneManager}\n */\nexport default function() {\n\tif (!initialized) {\n\t\ttimezoneManager.registerDefaultTimezones()\n\n\t\tinitialized = true\n\t}\n\n\treturn timezoneManager\n}\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport jstz from 'jstz'\n\n/**\n * Returns the current timezone of the user\n *\n * @return {string} Current timezone of user\n */\nconst detectTimezone = () => {\n\tconst determinedTimezone = jstz.determine()\n\tif (!determinedTimezone) {\n\t\treturn 'UTC'\n\t}\n\n\tconst timezoneName = determinedTimezone.name()\n\tif (!timezoneName) {\n\t\treturn 'UTC'\n\t}\n\n\treturn timezoneName\n}\n\nexport default detectTimezone\nexport {\n\tdetectTimezone,\n}\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport getTimezoneManager from '../services/timezoneDataProviderService.js'\nimport {\n\tgetDateFromDateTimeValue,\n} from '../utils/date.js'\nimport { AttendeeProperty, Property, DateTimeValue, DurationValue, RecurValue, AttachmentProperty, Parameter } from '@nextcloud/calendar-js'\nimport { getBySetPositionAndBySetFromDate, getWeekDayFromDate } from '../utils/recurrence.js'\nimport {\n\tcopyCalendarObjectInstanceIntoEventComponent,\n\tgetDefaultEventObject,\n\tmapEventComponentToEventObject,\n} from '../models/event.js'\nimport {\n\tgetAmountAndUnitForTimedEvents,\n\tgetAmountHoursMinutesAndUnitForAllDayEvents,\n\tgetTotalSecondsFromAmountAndUnitForTimedEvents,\n\tgetTotalSecondsFromAmountHourMinutesAndUnitForAllDayEvents,\n\tupdateAlarms,\n} from '../utils/alarms.js'\nimport { mapAlarmComponentToAlarmObject } from '../models/alarm.js'\nimport { getObjectAtRecurrenceId } from '../utils/calendarObject.js'\nimport logger from '../utils/logger.js'\nimport { getRFCProperties } from '../models/rfcProps.js'\nimport { generateUrl } from '@nextcloud/router'\nimport { updateTalkParticipants } from '../services/talkService.js'\nimport useCalendarObjectsStore from './calendarObjects.js'\nimport useCalendarsStore from './calendars.js'\nimport useSettingsStore from './settings.js'\nimport { getClosestCSS3ColorNameForHex, getHexForColorName } from '../utils/color.js'\n\nimport { defineStore } from 'pinia'\nimport Vue from 'vue'\n\nexport default defineStore('calendarObjectInstance', {\n\tstate: () => {\n\t\treturn {\n\t\t\tisNew: null,\n\t\t\tcalendarObject: null,\n\t\t\tcalendarObjectInstance: null,\n\t\t\texistingEvent: {\n\t\t\t\tobjectId: null,\n\t\t\t\trecurrenceId: null,\n\t\t\t},\n\t\t}\n\t},\n\tactions: {\n\t\t/**\n\t\t * Set a calendar-object-instance that will be opened in the editor (existing event)\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.calendarObject The calendar-object currently being edited\n\t\t * @param {object} data.calendarObjectInstance The calendar-object-instance currently being edited\n\t\t * @param {string} data.objectId The objectId of the calendar-object\n\t\t * @param {number} data.recurrenceId The recurrence-id of the calendar-object-instance\n\t\t */\n\t\tsetCalendarObjectInstanceForExistingEvent({\n\t\t\tcalendarObject,\n\t\t\tcalendarObjectInstance,\n\t\t\tobjectId,\n\t\t\trecurrenceId,\n\t\t}) {\n\t\t\tthis.isNew = false\n\t\t\tthis.calendarObject = calendarObject\n\t\t\tthis.calendarObjectInstance = calendarObjectInstance\n\t\t\tthis.existingEvent.objectId = objectId\n\t\t\tthis.existingEvent.recurrenceId = recurrenceId\n\t\t},\n\n\t\t/**\n\t\t * Set a calendar-object-instance that will be opened in the editor (new event)\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.calendarObject The calendar-object currently being created\n\t\t * @param {object} data.calendarObjectInstance The calendar-object-instance currently being crated\n\t\t */\n\t\tsetCalendarObjectInstanceForNewEvent({\n\t\t\tcalendarObject,\n\t\t\tcalendarObjectInstance,\n\t\t}) {\n\t\t\tthis.isNew = true\n\t\t\tthis.calendarObject = calendarObject\n\t\t\tthis.calendarObjectInstance = calendarObjectInstance\n\t\t\tthis.existingEvent.objectId = null\n\t\t\tthis.existingEvent.recurrenceId = null\n\t\t},\n\n\t\tresetCalendarObjectInstanceObjectIdAndRecurrenceId() {\n\t\t\tthis.isNew = false\n\t\t\tthis.calendarObject = null\n\t\t\tthis.calendarObjectInstance = null\n\t\t\tthis.existingEvent.objectId = null\n\t\t\tthis.existingEvent.recurrenceId = null\n\t\t},\n\n\t\t/**\n\t\t * Change the title of the event\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.calendarObjectInstance The calendarObjectInstance object\n\t\t * @param {string} data.title The new Title\n\t\t */\n\t\tchangeTitle({ calendarObjectInstance, title }) {\n\t\t\tcalendarObjectInstance.eventComponent.title = title\n\t\t\tcalendarObjectInstance.title = title\n\t\t},\n\n\t\t/**\n\t\t * Change the event's start\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.calendarObjectInstance The calendarObjectInstance object\n\t\t * @param {Date} data.startDate New start date to set\n\t\t */\n\t\tchangeStartDateMutation({\n\t\t\tcalendarObjectInstance,\n\t\t\tstartDate,\n\t\t}) {\n\t\t\tcalendarObjectInstance.eventComponent.startDate.year = startDate.getFullYear()\n\t\t\tcalendarObjectInstance.eventComponent.startDate.month = startDate.getMonth() + 1\n\t\t\tcalendarObjectInstance.eventComponent.startDate.day = startDate.getDate()\n\t\t\tcalendarObjectInstance.eventComponent.startDate.hour = startDate.getHours()\n\t\t\tcalendarObjectInstance.eventComponent.startDate.minute = startDate.getMinutes()\n\t\t\tcalendarObjectInstance.eventComponent.startDate.second = 0\n\n\t\t\tconst isAllDay = calendarObjectInstance.eventComponent.isAllDay()\n\t\t\tconst endDateObj = calendarObjectInstance.eventComponent.endDate.clone()\n\t\t\tconst startDateObj = calendarObjectInstance.eventComponent.startDate.clone()\n\n\t\t\tif (isAllDay) {\n\t\t\t\tendDateObj.addDuration(DurationValue.fromSeconds(-1 * 60 * 60 * 24))\n\n\t\t\t\tif (endDateObj.compare(startDateObj) === -1) {\n\t\t\t\t\tconst timezone = getTimezoneManager().getTimezoneForId(endDateObj.timezoneId)\n\t\t\t\t\tcalendarObjectInstance.eventComponent.endDate\n\t\t\t\t\t\t= calendarObjectInstance.eventComponent.startDate.getInTimezone(timezone)\n\t\t\t\t\tcalendarObjectInstance.endDate = getDateFromDateTimeValue(calendarObjectInstance.eventComponent.endDate)\n\t\t\t\t\tcalendarObjectInstance.eventComponent.endDate.addDuration(DurationValue.fromSeconds(60 * 60 * 24))\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (endDateObj.compare(startDateObj) === -1) {\n\t\t\t\t\tconst timezone = getTimezoneManager().getTimezoneForId(endDateObj.timezoneId)\n\t\t\t\t\tcalendarObjectInstance.eventComponent.endDate\n\t\t\t\t\t\t= calendarObjectInstance.eventComponent.startDate.getInTimezone(timezone)\n\t\t\t\t\tcalendarObjectInstance.endDate = getDateFromDateTimeValue(calendarObjectInstance.eventComponent.endDate)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcalendarObjectInstance.startDate = startDate\n\t\t},\n\n\t\t/**\n\t\t * Change the timezone of the event's start\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.calendarObjectInstance The calendarObjectInstance object\n\t\t * @param {string} data.startTimezone New timezone to set for start\n\t\t */\n\t\tchangeStartTimezoneMutation({\n\t\t\tcalendarObjectInstance,\n\t\t\tstartTimezone,\n\t\t}) {\n\t\t\tconst timezone = getTimezoneManager().getTimezoneForId(startTimezone)\n\t\t\tcalendarObjectInstance.eventComponent.startDate.replaceTimezone(timezone)\n\t\t\tcalendarObjectInstance.startTimezoneId = startTimezone\n\n\t\t\t// Either both are floating or both have a timezone, but it can't be mixed\n\t\t\tif (startTimezone === 'floating' || calendarObjectInstance.endTimezoneId === 'floating') {\n\t\t\t\tcalendarObjectInstance.eventComponent.endDate.replaceTimezone(timezone)\n\t\t\t\tcalendarObjectInstance.endTimezoneId = startTimezone\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Change the event's end\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.calendarObjectInstance The calendarObjectInstance object\n\t\t * @param {Date} data.endDate New end date to set\n\t\t */\n\t\tchangeEndDateMutation({\n\t\t\tcalendarObjectInstance,\n\t\t\tendDate,\n\t\t}) {\n\t\t\t// If the event is using DURATION, endDate is dynamically generated.\n\t\t\t// In order to alter it, we need to explicitly set DTEND\n\t\t\tconst endDateObject = calendarObjectInstance.eventComponent.endDate\n\t\t\tcalendarObjectInstance.eventComponent.endDate = endDateObject\n\n\t\t\tcalendarObjectInstance.eventComponent.endDate.year = endDate.getFullYear()\n\t\t\tcalendarObjectInstance.eventComponent.endDate.month = endDate.getMonth() + 1\n\t\t\tcalendarObjectInstance.eventComponent.endDate.day = endDate.getDate()\n\t\t\tcalendarObjectInstance.eventComponent.endDate.hour = endDate.getHours()\n\t\t\tcalendarObjectInstance.eventComponent.endDate.minute = endDate.getMinutes()\n\t\t\tcalendarObjectInstance.eventComponent.endDate.second = 0\n\n\t\t\tconst isAllDay = calendarObjectInstance.eventComponent.isAllDay()\n\t\t\tconst endDateObj = calendarObjectInstance.eventComponent.endDate.clone()\n\t\t\tconst startDateObj = calendarObjectInstance.eventComponent.startDate.clone()\n\n\t\t\tif (isAllDay) {\n\t\t\t\tif (endDateObj.compare(startDateObj) === -1) {\n\t\t\t\t\tconst timezone = getTimezoneManager().getTimezoneForId(startDateObj.timezoneId)\n\t\t\t\t\tcalendarObjectInstance.eventComponent.startDate\n\t\t\t\t\t\t= calendarObjectInstance.eventComponent.endDate.getInTimezone(timezone)\n\t\t\t\t\tcalendarObjectInstance.startDate = getDateFromDateTimeValue(calendarObjectInstance.eventComponent.startDate)\n\t\t\t\t}\n\n\t\t\t\t// endDate is inclusive, but DTEND needs to be exclusive, so always add one day\n\t\t\t\tcalendarObjectInstance.eventComponent.endDate.addDuration(DurationValue.fromSeconds(60 * 60 * 24))\n\t\t\t} else {\n\t\t\t\t// Is end before start?\n\t\t\t\tif (endDateObj.compare(startDateObj) === -1) {\n\t\t\t\t\t// Is end more than one day before start?\n\t\t\t\t\tendDateObj.addDuration(DurationValue.fromSeconds(60 * 60 * 24))\n\t\t\t\t\tif (endDateObj.compare(startDateObj) === -1) {\n\t\t\t\t\t\tconst timezone = getTimezoneManager().getTimezoneForId(startDateObj.timezoneId)\n\t\t\t\t\t\tcalendarObjectInstance.eventComponent.startDate\n\t\t\t\t\t\t\t= calendarObjectInstance.eventComponent.endDate.getInTimezone(timezone)\n\t\t\t\t\t\tcalendarObjectInstance.startDate = getDateFromDateTimeValue(calendarObjectInstance.eventComponent.startDate)\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// add one day to endDate if the endDate is before the startDate which allows to easily create events that reach over or to 0:00\n\t\t\t\t\t\tcalendarObjectInstance.eventComponent.endDate.addDuration(DurationValue.fromSeconds(60 * 60 * 24))\n\t\t\t\t\t\tendDate = new Date(endDate.getTime() + 24 * 60 * 60 * 1000)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcalendarObjectInstance.endDate = endDate\n\t\t},\n\n\t\t/**\n\t\t * Change the timezone of the event's end\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.calendarObjectInstance The calendarObjectInstance object\n\t\t * @param {string} data.endTimezone New timezone to set for end\n\t\t */\n\t\tchangeEndTimezoneMutation({\n\t\t\tcalendarObjectInstance,\n\t\t\tendTimezone,\n\t\t}) {\n\t\t\tconst timezone = getTimezoneManager().getTimezoneForId(endTimezone)\n\t\t\tcalendarObjectInstance.eventComponent.endDate.replaceTimezone(timezone)\n\t\t\tcalendarObjectInstance.endTimezoneId = endTimezone\n\n\t\t\t// Either both are floating or both have a timezone, but it can't be mixed\n\t\t\tif (endTimezone === 'floating' || calendarObjectInstance.startTimezoneId === 'floating') {\n\t\t\t\tcalendarObjectInstance.eventComponent.startDate.replaceTimezone(timezone)\n\t\t\t\tcalendarObjectInstance.startTimezoneId = endTimezone\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Switch from a timed event to allday or vice versa\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.calendarObjectInstance The calendarObjectInstance object\n\t\t */\n\t\ttoggleAllDayMutation({ calendarObjectInstance }) {\n\t\t\tif (!calendarObjectInstance.eventComponent.canModifyAllDay() && this.calendarObject.existsOnServer) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst isAllDay = calendarObjectInstance.eventComponent.isAllDay()\n\t\t\tcalendarObjectInstance.eventComponent.startDate.isDate = !isAllDay\n\t\t\tcalendarObjectInstance.eventComponent.endDate.isDate = !isAllDay\n\t\t\tcalendarObjectInstance.isAllDay = calendarObjectInstance.eventComponent.isAllDay()\n\n\t\t\t// isAllDay = old value\n\t\t\tif (isAllDay) {\n\t\t\t\tcalendarObjectInstance.eventComponent.endDate.addDuration(DurationValue.fromSeconds(-1 * 60 * 60 * 24))\n\t\t\t} else {\n\t\t\t\tcalendarObjectInstance.eventComponent.endDate.addDuration(DurationValue.fromSeconds(60 * 60 * 24))\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Changes the time of a timed event to the default values\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.calendarObjectInstance The calendarObjectInstance object\n\t\t */\n\t\tchangeTimeToDefaultForTimedEvents({ calendarObjectInstance }) {\n\t\t\tconst startDate = calendarObjectInstance.eventComponent.startDate\n\t\t\tconst endDate = calendarObjectInstance.eventComponent.endDate\n\t\t\tif (startDate.hour === 0 && startDate.minute === 0 && endDate.hour === 0 && endDate.minute === 0) {\n\t\t\t\tstartDate.hour = 10\n\t\t\t\tendDate.hour = 11\n\n\t\t\t\tcalendarObjectInstance.startDate = getDateFromDateTimeValue(startDate)\n\t\t\t\tcalendarObjectInstance.endDate = getDateFromDateTimeValue(endDate)\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Change the location of an event\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.calendarObjectInstance The calendarObjectInstance object\n\t\t * @param {string} data.location New location to set\n\t\t */\n\t\tchangeLocation({\n\t\t\tcalendarObjectInstance,\n\t\t\tlocation,\n\t\t}) {\n\t\t\t// Special case: delete Apple-specific location property to avoid inconsistencies\n\t\t\tcalendarObjectInstance.eventComponent.deleteAllProperties('X-APPLE-STRUCTURED-LOCATION')\n\n\t\t\tcalendarObjectInstance.eventComponent.location = location\n\t\t\tcalendarObjectInstance.location = location\n\t\t},\n\n\t\t/**\n\t\t * Change the description of an event\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.calendarObjectInstance The calendarObjectInstance object\n\t\t * @param {string} data.description New description to set\n\t\t */\n\t\tchangeDescription({\n\t\t\tcalendarObjectInstance,\n\t\t\tdescription,\n\t\t}) {\n\t\t\t// To avoid inconsistencies (bug #3863), remove all parameters (e.g., ALTREP) upon modification\n\t\t\tconst descriptionProperty = calendarObjectInstance.eventComponent.getFirstProperty('Description')\n\t\t\tif (descriptionProperty) {\n\t\t\t\tfor (const parameter of descriptionProperty.getParametersIterator()) {\n\t\t\t\t\tdescriptionProperty.deleteParameter(parameter.name)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Delete custom description properties\n\t\t\tcalendarObjectInstance.eventComponent.deleteAllProperties('X-ALT-DESC')\n\n\t\t\tcalendarObjectInstance.eventComponent.description = description\n\t\t\tcalendarObjectInstance.description = description\n\t\t},\n\n\t\t/**\n\t\t * Change the access class of an event\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.calendarObjectInstance The calendarObjectInstance object\n\t\t * @param {string} data.accessClass New access class to set\n\t\t */\n\t\tchangeAccessClass({ calendarObjectInstance, accessClass }) {\n\t\t\tcalendarObjectInstance.eventComponent.accessClass = accessClass\n\t\t\tcalendarObjectInstance.accessClass = accessClass\n\t\t},\n\n\t\t/**\n\t\t * Change the status of an event\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.calendarObjectInstance The calendarObjectInstance object\n\t\t * @param {string} data.status New status to set\n\t\t */\n\t\tchangeStatus({ calendarObjectInstance, status }) {\n\t\t\tcalendarObjectInstance.eventComponent.status = status\n\t\t\tcalendarObjectInstance.status = status\n\t\t},\n\n\t\t/**\n\t\t * Change the time-transparency of an event\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.calendarObjectInstance The calendarObjectInstance object\n\t\t * @param {string} data.timeTransparency New time-transparency to set\n\t\t */\n\t\tchangeTimeTransparency({ calendarObjectInstance, timeTransparency }) {\n\t\t\tcalendarObjectInstance.eventComponent.timeTransparency = timeTransparency\n\t\t\tcalendarObjectInstance.timeTransparency = timeTransparency\n\t\t},\n\n\t\t/**\n\t\t * Change the customized color of an event\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.calendarObjectInstance The calendarObjectInstance object\n\t\t * @param {string | null} data.customColor New color to set\n\t\t */\n\t\tchangeCustomColor({ calendarObjectInstance, customColor }) {\n\t\t\tif (customColor === null) {\n\t\t\t\tcalendarObjectInstance.eventComponent.deleteAllProperties('COLOR')\n\t\t\t\t// TODO: get rid of Vue.set in Vue 3\n\t\t\t\tVue.set(calendarObjectInstance, 'customColor', null)\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst cssColorName = getClosestCSS3ColorNameForHex(customColor)\n\t\t\tconst hexColorOfCssName = getHexForColorName(cssColorName)\n\n\t\t\t// Abort if either is undefined\n\t\t\tif (!cssColorName || !hexColorOfCssName) {\n\t\t\t\tconsole.error('Setting custom color failed')\n\t\t\t\tconsole.error('customColor: ', customColor)\n\t\t\t\tconsole.error('cssColorName: ', cssColorName)\n\t\t\t\tconsole.error('hexColorOfCssName: ', hexColorOfCssName)\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tcalendarObjectInstance.eventComponent.color = cssColorName\n\t\t\t// TODO: get rid of Vue.set in Vue 3\n\t\t\tVue.set(calendarObjectInstance, 'customColor', hexColorOfCssName)\n\t\t},\n\n\t\t/**\n\t\t * Adds an attendee to the event and sets the organizer if not present already\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.calendarObjectInstance The calendarObjectInstance object\n\t\t * @param {string} data.commonName Displayname of attendee\n\t\t * @param {string} data.uri Email address of attendee\n\t\t * @param {string} data.calendarUserType Calendar-user-type of attendee (INDIVIDUAL, GROUP, RESOURCE, ROOM)\n\t\t * @param {string} data.participationStatus Participation Status of attendee\n\t\t * @param {string} data.role Role of Attendee\n\t\t * @param {boolean} data.rsvp Whether or not to request a response from the attendee\n\t\t * @param {string=} data.language Preferred language of the attendee\n\t\t * @param {string=} data.timezoneId Preferred timezone of the attendee\n\t\t * @param {object=} data.organizer Principal of the organizer to be set if not present\n\t\t * @param {string | Array} data.member Group membership(s)\n\t\t */\n\t\taddAttendee({\n\t\t\tcalendarObjectInstance,\n\t\t\tcommonName,\n\t\t\turi,\n\t\t\tcalendarUserType = null,\n\t\t\tparticipationStatus = null,\n\t\t\trole = null,\n\t\t\trsvp = null,\n\t\t\tlanguage = null,\n\t\t\ttimezoneId = null,\n\t\t\torganizer = null,\n\t\t\tmember = null,\n\t\t}) {\n\t\t\tconst attendee = AttendeeProperty.fromNameAndEMail(commonName, uri)\n\t\t\tif (calendarUserType !== null) {\n\t\t\t\tattendee.userType = calendarUserType\n\t\t\t}\n\t\t\tif (participationStatus !== null) {\n\t\t\t\tattendee.participationStatus = participationStatus\n\t\t\t}\n\t\t\tif (role !== null) {\n\t\t\t\tattendee.role = role\n\t\t\t}\n\t\t\tif (rsvp !== null) {\n\t\t\t\tattendee.rsvp = rsvp\n\t\t\t}\n\t\t\tif (language !== null) {\n\t\t\t\tattendee.language = language\n\t\t\t}\n\t\t\tif (timezoneId !== null) {\n\t\t\t\tattendee.updateParameterIfExist('TZID', timezoneId)\n\t\t\t}\n\t\t\tif (member !== null) {\n\t\t\t\tattendee.updateParameterIfExist('MEMBER', member)\n\t\t\t}\n\n\t\t\t// TODO - use real addAttendeeFrom method\n\t\t\tcalendarObjectInstance.eventComponent.addProperty(attendee)\n\t\t\tcalendarObjectInstance.attendees.push({\n\t\t\t\tcommonName,\n\t\t\t\tparticipationStatus,\n\t\t\t\trole,\n\t\t\t\trsvp,\n\t\t\t\turi,\n\t\t\t\tattendeeProperty: attendee,\n\t\t\t})\n\n\t\t\tif (!calendarObjectInstance.organizer && organizer) {\n\t\t\t\tthis.setOrganizer({\n\t\t\t\t\tcalendarObjectInstance,\n\t\t\t\t\tcommonName: organizer.displayname,\n\t\t\t\t\temail: organizer.emailAddress,\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Removes an attendee from the event\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.calendarObjectInstance The calendarObjectInstance object\n\t\t * @param {object} data.attendee The attendee object to remove\n\t\t */\n\t\tremoveAttendee({\n\t\t\tcalendarObjectInstance,\n\t\t\tattendee,\n\t\t}) {\n\t\t\tcalendarObjectInstance.eventComponent.removeAttendee(attendee.attendeeProperty)\n\t\t\t// Also remove members if attendee is a group\n\t\t\tif (attendee.attendeeProperty.userType === 'GROUP') {\n\t\t\t\tattendee.members.forEach(function(member) {\n\t\t\t\t\tif (Array.isArray(member.attendeeProperty.member) && member.attendeeProperty.member.length > 1) {\n\t\t\t\t\t\tconst removeIndex = member.attendeeProperty.member.findIndex(function(groupname) {\n\t\t\t\t\t\t\tif (groupname === attendee.uri) {\n\t\t\t\t\t\t\t\treturn true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false\n\t\t\t\t\t\t})\n\t\t\t\t\t\tif (removeIndex !== -1) {\n\t\t\t\t\t\t\tmember.attendeeProperty.member.splice(removeIndex, 1)\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcalendarObjectInstance.eventComponent.removeAttendee(member.attendeeProperty)\n\t\t\t\t\t\tconst index = calendarObjectInstance.attendees.indexOf(member)\n\t\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\t\tcalendarObjectInstance.attendees.splice(index, 1)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tconst index = calendarObjectInstance.attendees.indexOf(attendee)\n\t\t\tif (index !== -1) {\n\t\t\t\tcalendarObjectInstance.attendees.splice(index, 1)\n\t\t\t}\n\n\t\t\tif (calendarObjectInstance.attendees.length === 0) {\n\t\t\t\tcalendarObjectInstance.organizer = null\n\t\t\t\tcalendarObjectInstance.eventComponent.deleteAllProperties('ORGANIZER')\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Changes an attendees' participation status\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.attendee The attendee object\n\t\t * @param {string} data.participationStatus New Participation Status of attendee\n\t\t */\n\t\tchangeAttendeesParticipationStatus({\n\t\t\tattendee,\n\t\t\tparticipationStatus,\n\t\t}) {\n\t\t\tattendee.attendeeProperty.participationStatus = participationStatus\n\t\t\tattendee.participationStatus = participationStatus\n\t\t},\n\n\t\t/**\n\t\t * Changes an attendees' role\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.attendee The attendee object\n\t\t * @param {string} data.role New role of attendee\n\t\t */\n\t\tchangeAttendeesRole({\n\t\t\tattendee,\n\t\t\trole,\n\t\t}) {\n\t\t\tattendee.attendeeProperty.role = role\n\t\t\tattendee.role = role\n\t\t},\n\n\t\t/**\n\t\t * Changes an attendees' RVSP\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.attendee The attendee object\n\t\t */\n\t\ttoggleAttendeeRSVP({ attendee }) {\n\t\t\tconst oldRSVP = attendee.attendeeProperty.rsvp\n\t\t\tattendee.attendeeProperty.rsvp = !oldRSVP\n\t\t\tattendee.rsvp = !oldRSVP\n\t\t},\n\n\t\t/**\n\t\t * Set the event's organizer\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.calendarObjectInstance The calendarObjectInstance object\n\t\t * @param {string=} data.commonName Displayname of organizer\n\t\t * @param {string} data.email Email-address of organizer\n\t\t */\n\t\tsetOrganizer({ calendarObjectInstance, commonName = null, email }) {\n\t\t\tcalendarObjectInstance.eventComponent.setOrganizerFromNameAndEMail(commonName, email)\n\t\t\tVue.set(calendarObjectInstance, 'organizer', {\n\t\t\t\tcommonName,\n\t\t\t\turi: email,\n\t\t\t\tattendeeProperty: calendarObjectInstance.eventComponent.getFirstProperty('ORGANIZER'),\n\t\t\t})\n\t\t},\n\n\t\t/**\n\t\t * Adds a category to the event\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.calendarObjectInstance The calendarObjectInstance object\n\t\t * @param {string} data.category Category to add\n\t\t */\n\t\taddCategory({ calendarObjectInstance, category }) {\n\t\t\tcalendarObjectInstance.eventComponent.addCategory(category)\n\t\t\tcalendarObjectInstance.categories.push(category)\n\t\t},\n\n\t\t/**\n\t\t * Removes a category from the event\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.calendarObjectInstance The calendarObjectInstance object\n\t\t * @param {string} data.category Category to remove\n\t\t */\n\t\tremoveCategory({ calendarObjectInstance, category }) {\n\t\t\tcalendarObjectInstance.eventComponent.removeCategory(category)\n\n\t\t\tconst index = calendarObjectInstance.categories.indexOf(category)\n\t\t\tif (index !== -1) {\n\t\t\t\tcalendarObjectInstance.categories.splice(index, 1)\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Change the interval of the recurrence-rule\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.recurrenceRule The recurrenceRule object to modify\n\t\t * @param {string} data.interval The new interval to set\n\t\t */\n\t\tchangeRecurrenceInterval({\n\t\t\trecurrenceRule,\n\t\t\tinterval,\n\t\t}) {\n\t\t\tif (recurrenceRule.recurrenceRuleValue) {\n\t\t\t\trecurrenceRule.recurrenceRuleValue.interval = interval\n\t\t\t\trecurrenceRule.interval = interval\n\n\t\t\t\tconsole.debug(recurrenceRule.recurrenceRuleValue._innerValue.toString())\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Change the frequency of the recurrence-rule\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.recurrenceRule The recurrenceRule object to modify\n\t\t * @param {string} data.frequency The new frequency to set\n\t\t */\n\t\tchangeRecurrenceFrequencyMutation({\n\t\t\trecurrenceRule,\n\t\t\tfrequency,\n\t\t}) {\n\t\t\tif (recurrenceRule.recurrenceRuleValue) {\n\t\t\t\trecurrenceRule.recurrenceRuleValue.frequency = frequency\n\t\t\t\trecurrenceRule.frequency = frequency\n\n\t\t\t\tconsole.debug(recurrenceRule.recurrenceRuleValue._innerValue.toString())\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Change the count limit of the recurrence-rule\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.recurrenceRule The recurrenceRule object to modify\n\t\t * @param {string} data.count The new count to set\n\t\t */\n\t\tchangeRecurrenceCount({\n\t\t\trecurrenceRule,\n\t\t\tcount,\n\t\t}) {\n\t\t\tif (recurrenceRule.recurrenceRuleValue) {\n\t\t\t\trecurrenceRule.recurrenceRuleValue.count = count\n\t\t\t\trecurrenceRule.count = count\n\t\t\t\trecurrenceRule.until = null\n\n\t\t\t\tconsole.debug(recurrenceRule.recurrenceRuleValue._innerValue.toString())\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Change the until limit of the recurrence-rule\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.calendarObjectInstance The calendarObjectInstance object\n\t\t * @param {object} data.recurrenceRule The recurrenceRule object to modify\n\t\t * @param {Date} data.until The new until to set\n\t\t */\n\t\tchangeRecurrenceUntil({\n\t\t\tcalendarObjectInstance,\n\t\t\trecurrenceRule,\n\t\t\tuntil,\n\t\t}) {\n\t\t\tif (recurrenceRule.recurrenceRuleValue) {\n\t\t\t\t// RFC 5545, setion 3.3.10: until must be in UTC if the start time is timezone-aware\n\t\t\t\tif (calendarObjectInstance.startTimezoneId !== 'floating') {\n\t\t\t\t\trecurrenceRule.recurrenceRuleValue.until = DateTimeValue.fromJSDate(until, { zone: 'utc' })\n\t\t\t\t} else {\n\t\t\t\t\trecurrenceRule.recurrenceRuleValue.until = DateTimeValue.fromJSDate(until)\n\t\t\t\t}\n\t\t\t\trecurrenceRule.until = until\n\t\t\t\trecurrenceRule.count = null\n\n\t\t\t\tconsole.debug(recurrenceRule.recurrenceRuleValue._innerValue.toString())\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Changes the recurrence-rule to never end\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.recurrenceRule The recurrenceRule object to modify\n\t\t */\n\t\tchangeRecurrenceToInfinite({ recurrenceRule }) {\n\t\t\tif (recurrenceRule.recurrenceRuleValue) {\n\t\t\t\trecurrenceRule.recurrenceRuleValue.setToInfinite()\n\t\t\t\trecurrenceRule.until = null\n\t\t\t\trecurrenceRule.count = null\n\n\t\t\t\tconsole.debug(recurrenceRule.recurrenceRuleValue._innerValue.toString())\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Reset the By-parts of the recurrence rule\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.recurrenceRule The recurrenceRule object to modify\n\t\t */\n\t\tresetRecurrenceByParts({ recurrenceRule }) {\n\t\t\tif (recurrenceRule.recurrenceRuleValue) {\n\t\t\t\tconst parts = [\n\t\t\t\t\t'BYSECOND',\n\t\t\t\t\t'BYMINUTE',\n\t\t\t\t\t'BYHOUR',\n\t\t\t\t\t'BYDAY',\n\t\t\t\t\t'BYMONTHDAY',\n\t\t\t\t\t'BYYEARDAY',\n\t\t\t\t\t'BYWEEKNO',\n\t\t\t\t\t'BYMONTH',\n\t\t\t\t\t'BYSETPOS',\n\t\t\t\t]\n\n\t\t\t\tfor (const part of parts) {\n\t\t\t\t\trecurrenceRule.recurrenceRuleValue.setComponent(part, [])\n\t\t\t\t}\n\n\t\t\t\t/* TODO\n\t\t\t\trecurrenceRule.byDay = []\n\t\t\t\trecurrenceRule.byMonth = []\n\t\t\t\trecurrenceRule.byMonthDay = []\n\t\t\t\trecurrenceRule.bySetPosition = null\n\t\t\t\t*/\n\n\t\t\t\tVue.set(recurrenceRule, 'byDay', [])\n\t\t\t\tVue.set(recurrenceRule, 'byMonth', [])\n\t\t\t\tVue.set(recurrenceRule, 'byMonthDay', [])\n\t\t\t\tVue.set(recurrenceRule, 'bySetPosition', null)\n\n\t\t\t\tconsole.debug(recurrenceRule.recurrenceRuleValue._innerValue.toString())\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.calendarObjectInstance The calendarObjectInstance object\n\t\t * @param {object} data.recurrenceRule The recurrenceRule object to modify\n\t\t */\n\t\tsetDefaultRecurrenceByPartsForMonthlyBySetPosition({\n\t\t\tcalendarObjectInstance,\n\t\t\trecurrenceRule,\n\t\t}) {\n\t\t\tif (recurrenceRule.recurrenceRuleValue) {\n\t\t\t\tconst {\n\t\t\t\t\tbyDay,\n\t\t\t\t\tbySetPosition,\n\t\t\t\t} = getBySetPositionAndBySetFromDate(calendarObjectInstance.startDate)\n\t\t\t\trecurrenceRule.recurrenceRuleValue.setComponent('BYDAY', [byDay])\n\t\t\t\trecurrenceRule.recurrenceRuleValue.setComponent('BYSETPOS', [bySetPosition])\n\n\t\t\t\trecurrenceRule.byDay.push(byDay)\n\t\t\t\trecurrenceRule.bySetPosition = bySetPosition\n\n\t\t\t\tconsole.debug(recurrenceRule.recurrenceRuleValue._innerValue.toString())\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.calendarObjectInstance The calendarObjectInstance object\n\t\t * @param {object} data.recurrenceRule The recurrenceRule object to modify\n\t\t */\n\t\tsetDefaultRecurrenceByPartsForYearlyBySetPosition({\n\t\t\tcalendarObjectInstance,\n\t\t\trecurrenceRule,\n\t\t}) {\n\t\t\tif (recurrenceRule.recurrenceRuleValue) {\n\t\t\t\tconst byMonth = calendarObjectInstance.startDate.getMonth() + 1\n\t\t\t\tconst { byDay, bySetPosition } = getBySetPositionAndBySetFromDate(calendarObjectInstance.startDate)\n\n\t\t\t\trecurrenceRule.recurrenceRuleValue.setComponent('BYMONTH', [byMonth])\n\t\t\t\trecurrenceRule.recurrenceRuleValue.setComponent('BYDAY', [byDay])\n\t\t\t\trecurrenceRule.recurrenceRuleValue.setComponent('BYSETPOS', [bySetPosition])\n\n\t\t\t\trecurrenceRule.byMonth.push(byMonth)\n\t\t\t\trecurrenceRule.byDay.push(byDay)\n\t\t\t\trecurrenceRule.bySetPosition = bySetPosition\n\n\t\t\t\tconsole.debug(recurrenceRule.recurrenceRuleValue._innerValue.toString())\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Change the until limit of the recurrence-rule\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.recurrenceRule The recurrenceRule object to modify\n\t\t * @param {string} data.byDay The new until to set\n\t\t */\n\t\taddByDayToRecurrenceRule({\n\t\t\trecurrenceRule,\n\t\t\tbyDay,\n\t\t}) {\n\t\t\tif (recurrenceRule.recurrenceRuleValue) {\n\t\t\t\tconst byDayList = recurrenceRule.recurrenceRuleValue.getComponent('BYDAY')\n\t\t\t\tconst index = byDayList.indexOf(byDay)\n\t\t\t\tif (index === -1) {\n\t\t\t\t\tbyDayList.push(byDay)\n\t\t\t\t\trecurrenceRule.recurrenceRuleValue.setComponent('BYDAY', byDayList)\n\t\t\t\t}\n\n\t\t\t\tconst index2 = recurrenceRule.byDay.indexOf(byDay)\n\t\t\t\tif (index2 === -1) {\n\t\t\t\t\trecurrenceRule.byDay.push(byDay)\n\t\t\t\t}\n\n\t\t\t\tconsole.debug(recurrenceRule.recurrenceRuleValue._innerValue.toString())\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Change the until limit of the recurrence-rule\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.recurrenceRule The recurrenceRule object to modify\n\t\t * @param {string} data.byDay The new until to set\n\t\t */\n\t\tremoveByDayFromRecurrenceRule({\n\t\t\trecurrenceRule,\n\t\t\tbyDay,\n\t\t}) {\n\t\t\tif (recurrenceRule.recurrenceRuleValue) {\n\t\t\t\tconst byDayList = recurrenceRule.recurrenceRuleValue.getComponent('BYDAY')\n\t\t\t\tconst index = byDayList.indexOf(byDay)\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tbyDayList.splice(index, 1)\n\t\t\t\t\trecurrenceRule.recurrenceRuleValue.setComponent('BYDAY', byDayList)\n\t\t\t\t}\n\n\t\t\t\tconst index2 = recurrenceRule.byDay.indexOf(byDay)\n\t\t\t\tif (index2 !== -1) {\n\t\t\t\t\trecurrenceRule.byDay.splice(index2, 1)\n\t\t\t\t}\n\n\t\t\t\tconsole.debug(recurrenceRule.recurrenceRuleValue._innerValue.toString())\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Change the until limit of the recurrence-rule\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.recurrenceRule The recurrenceRule object to modify\n\t\t * @param {string} data.byMonthDay The new until to set\n\t\t */\n\t\taddByMonthDayToRecurrenceRule({\n\t\t\trecurrenceRule,\n\t\t\tbyMonthDay,\n\t\t}) {\n\t\t\tif (recurrenceRule.recurrenceRuleValue) {\n\t\t\t\tconst byMonthDayList = recurrenceRule.recurrenceRuleValue.getComponent('BYMONTHDAY')\n\t\t\t\tconst index = byMonthDayList.indexOf(byMonthDay)\n\t\t\t\tif (index === -1) {\n\t\t\t\t\tbyMonthDayList.push(byMonthDay)\n\t\t\t\t\trecurrenceRule.recurrenceRuleValue.setComponent('BYMONTHDAY', byMonthDayList)\n\t\t\t\t}\n\n\t\t\t\tconst index2 = recurrenceRule.byMonthDay.indexOf(byMonthDay)\n\t\t\t\tif (index2 === -1) {\n\t\t\t\t\trecurrenceRule.byMonthDay.push(byMonthDay)\n\t\t\t\t}\n\n\t\t\t\tconsole.debug(recurrenceRule.recurrenceRuleValue._innerValue.toString())\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Change the until limit of the recurrence-rule\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.recurrenceRule The recurrenceRule object to modify\n\t\t * @param {string} data.byMonthDay The new until to set\n\t\t */\n\t\tremoveByMonthDayFromRecurrenceRule({\n\t\t\trecurrenceRule,\n\t\t\tbyMonthDay,\n\t\t}) {\n\t\t\tif (recurrenceRule.recurrenceRuleValue) {\n\t\t\t\tconst byMonthDayList = recurrenceRule.recurrenceRuleValue.getComponent('BYMONTHDAY')\n\t\t\t\tconst index = byMonthDayList.indexOf(byMonthDay)\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tbyMonthDayList.splice(index, 1)\n\t\t\t\t\trecurrenceRule.recurrenceRuleValue.setComponent('BYMONTHDAY', byMonthDayList)\n\t\t\t\t}\n\n\t\t\t\tconst index2 = recurrenceRule.byMonthDay.indexOf(byMonthDay)\n\t\t\t\tif (index2 !== -1) {\n\t\t\t\t\trecurrenceRule.byMonthDay.splice(index2, 1)\n\t\t\t\t}\n\n\t\t\t\tconsole.debug(recurrenceRule.recurrenceRuleValue._innerValue.toString())\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Change the until limit of the recurrence-rule\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.recurrenceRule The recurrenceRule object to modify\n\t\t * @param {string} data.byMonth The new until to set\n\t\t */\n\t\taddByMonthToRecurrenceRule({\n\t\t\trecurrenceRule,\n\t\t\tbyMonth,\n\t\t}) {\n\t\t\tif (recurrenceRule.recurrenceRuleValue) {\n\t\t\t\tconsole.debug('addByMonthToRecurrenceRule', byMonth)\n\n\t\t\t\tconst byMonthList = recurrenceRule.recurrenceRuleValue.getComponent('BYMONTH')\n\t\t\t\tconst index = byMonthList.indexOf(byMonth)\n\t\t\t\tif (index === -1) {\n\t\t\t\t\tbyMonthList.push(byMonth)\n\t\t\t\t\trecurrenceRule.recurrenceRuleValue.setComponent('BYMONTH', byMonthList)\n\t\t\t\t}\n\n\t\t\t\tconst index2 = recurrenceRule.byMonth.indexOf(byMonth)\n\t\t\t\tif (index2 === -1) {\n\t\t\t\t\trecurrenceRule.byMonth.push(byMonth)\n\t\t\t\t}\n\n\t\t\t\tconsole.debug(recurrenceRule.recurrenceRuleValue._innerValue.toString())\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Change the until limit of the recurrence-rule\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.recurrenceRule The recurrenceRule object to modify\n\t\t * @param {string} data.byMonth The new until to set\n\t\t */\n\t\tremoveByMonthFromRecurrenceRule({\n\t\t\trecurrenceRule,\n\t\t\tbyMonth,\n\t\t}) {\n\t\t\tif (recurrenceRule.recurrenceRuleValue) {\n\t\t\t\tconsole.debug('removeByMonthFromRecurrenceRule', byMonth)\n\n\t\t\t\tconst byMonthList = recurrenceRule.recurrenceRuleValue.getComponent('BYMONTH')\n\t\t\t\tconst index = byMonthList.indexOf(byMonth)\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tbyMonthList.splice(index, 1)\n\t\t\t\t\trecurrenceRule.recurrenceRuleValue.setComponent('BYMONTH', byMonthList)\n\t\t\t\t}\n\n\t\t\t\tconst index2 = recurrenceRule.byMonth.indexOf(byMonth)\n\t\t\t\tif (index2 !== -1) {\n\t\t\t\t\trecurrenceRule.byMonth.splice(index2, 1)\n\t\t\t\t}\n\n\t\t\t\tconsole.debug(recurrenceRule.recurrenceRuleValue._innerValue.toString())\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.recurrenceRule The recurrenceRule object to modify\n\t\t * @param {string[]} data.byDay The new until to set\n\t\t */\n\t\tchangeRecurrenceByDay({\n\t\t\trecurrenceRule,\n\t\t\tbyDay,\n\t\t}) {\n\t\t\tif (recurrenceRule.recurrenceRuleValue) {\n\t\t\t\trecurrenceRule.recurrenceRuleValue.setComponent('BYDAY', byDay)\n\t\t\t\t// TODO recurrenceRule.byDay = byDay\n\t\t\t\tVue.set(recurrenceRule, 'byDay', byDay)\n\n\t\t\t\tconsole.debug(recurrenceRule.recurrenceRuleValue._innerValue.toString())\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Change the until limit of the recurrence-rule\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.recurrenceRule The recurrenceRule object to modify\n\t\t * @param {string} data.bySetPosition The new until to set\n\t\t */\n\t\tchangeRecurrenceBySetPosition({\n\t\t\trecurrenceRule,\n\t\t\tbySetPosition,\n\t\t}) {\n\t\t\tif (recurrenceRule.recurrenceRuleValue) {\n\t\t\t\trecurrenceRule.recurrenceRuleValue.setComponent('BYSETPOS', [bySetPosition])\n\t\t\t\t/// TODO recurrenceRule.bySetPosition = bySetPosition\n\t\t\t\tVue.set(recurrenceRule, 'bySetPosition', bySetPosition)\n\n\t\t\t\tconsole.debug(recurrenceRule.recurrenceRuleValue._innerValue.toString())\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.recurrenceRule The recurrenceRule object to modify\n\t\t */\n\t\tmarkRecurrenceRuleAsSupported({ recurrenceRule }) {\n\t\t\trecurrenceRule.isUnsupported = false\n\t\t},\n\n\t\t/**\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.alarm The alarm object\n\t\t * @param {string} data.type New type of alarm\n\t\t */\n\t\tchangeAlarmType({\n\t\t\talarm,\n\t\t\ttype,\n\t\t}) {\n\t\t\tif (alarm.alarmComponent) {\n\t\t\t\talarm.alarmComponent.action = type\n\t\t\t\talarm.type = type\n\n\t\t\t\tconsole.debug(alarm.alarmComponent.toICALJs().toString())\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.alarm The alarm object\n\t\t * @param {Date} data.date New date object\n\t\t */\n\t\tchangeAlarmAbsoluteDate({\n\t\t\talarm,\n\t\t\tdate,\n\t\t}) {\n\t\t\tif (alarm.alarmComponent) {\n\t\t\t\talarm.alarmComponent.trigger.value.year = date.getFullYear()\n\t\t\t\talarm.alarmComponent.trigger.value.month = date.getMonth() + 1\n\t\t\t\talarm.alarmComponent.trigger.value.day = date.getDate()\n\t\t\t\talarm.alarmComponent.trigger.value.hour = date.getHours()\n\t\t\t\talarm.alarmComponent.trigger.value.minute = date.getMinutes()\n\t\t\t\talarm.alarmComponent.trigger.value.second = 0\n\n\t\t\t\talarm.absoluteDate = date\n\n\t\t\t\tconsole.debug(alarm.alarmComponent.toICALJs().toString())\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.alarm The alarm object\n\t\t * @param {string} data.timezoneId New timezoneId\n\t\t */\n\t\tchangeAlarmAbsoluteTimezoneId({\n\t\t\talarm,\n\t\t\ttimezoneId,\n\t\t}) {\n\t\t\tif (alarm.alarmComponent) {\n\t\t\t\tconst timezone = getTimezoneManager().getTimezoneForId(timezoneId)\n\t\t\t\talarm.alarmComponent.trigger.value.replaceTimezone(timezone)\n\n\t\t\t\talarm.absoluteTimezoneId = timezoneId\n\n\t\t\t\tconsole.debug(alarm.alarmComponent.toICALJs().toString())\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.alarm The alarm object\n\t\t */\n\t\tupdateAlarmAllDayParts({ alarm }) {\n\t\t\tif (alarm.alarmComponent) {\n\t\t\t\tconst totalSeconds = alarm.alarmComponent.trigger.value.totalSeconds\n\t\t\t\tconst allDayParts = getAmountHoursMinutesAndUnitForAllDayEvents(totalSeconds)\n\n\t\t\t\talarm.relativeUnitAllDay = allDayParts.unit\n\t\t\t\talarm.relativeAmountAllDay = allDayParts.amount\n\t\t\t\talarm.relativeHoursAllDay = allDayParts.hours\n\t\t\t\talarm.relativeMinutesAllDay = allDayParts.minutes\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.alarm The alarm object\n\t\t */\n\t\tupdateAlarmTimedParts({ alarm }) {\n\t\t\tif (alarm.alarmComponent) {\n\t\t\t\tconst totalSeconds = alarm.alarmComponent.trigger.value.totalSeconds\n\t\t\t\tconst timedParts = getAmountAndUnitForTimedEvents(totalSeconds)\n\n\t\t\t\talarm.relativeUnitTimed = timedParts.unit\n\t\t\t\talarm.relativeAmountTimed = timedParts.amount\n\n\t\t\t\tconsole.debug(alarm.alarmComponent.toICALJs().toString())\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.calendarObjectInstance The calendarObjectInstance object\n\t\t * @param {string} data.type Type of alarm\n\t\t * @param {number} data.totalSeconds Total amount of seconds for new alarm\n\t\t */\n\t\taddAlarmToCalendarObjectInstance({\n\t\t\tcalendarObjectInstance,\n\t\t\ttype,\n\t\t\ttotalSeconds,\n\t\t}) {\n\t\t\tif (calendarObjectInstance.eventComponent) {\n\t\t\t\tconst eventComponent = calendarObjectInstance.eventComponent\n\n\t\t\t\tconst duration = DurationValue.fromSeconds(totalSeconds)\n\t\t\t\tconst alarmComponent = eventComponent.addRelativeAlarm(type, duration)\n\n\t\t\t\tconst alarmObject = mapAlarmComponentToAlarmObject(alarmComponent)\n\n\t\t\t\tcalendarObjectInstance.alarms.push(alarmObject)\n\n\t\t\t\tconsole.debug(alarmObject.alarmComponent.toICALJs().toString())\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.calendarObjectInstance The calendarObjectInstance object\n\t\t * @param {object} data.alarm The alarm object\n\t\t */\n\t\tremoveAlarmFromCalendarObjectInstance({\n\t\t\tcalendarObjectInstance,\n\t\t\talarm,\n\t\t}) {\n\t\t\tif (alarm.alarmComponent) {\n\t\t\t\tcalendarObjectInstance.eventComponent.removeAlarm(alarm.alarmComponent)\n\n\t\t\t\tconst index = calendarObjectInstance.alarms.indexOf(alarm)\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tcalendarObjectInstance.alarms.splice(index, 1)\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * @deprecated\n\t\t * @param calendarObjectInstance.calendarObjectInstance\n\t\t * @param calendarObjectInstance\n\t\t * @param calendarObjectInstance.sharedData\n\t\t * @param sharedData\n\t\t */\n\t\taddAttachmentBySharedData({\n\t\t\tcalendarObjectInstance,\n\t\t\tsharedData,\n\t\t}) {\n\t\t\tconst attachment = AttachmentProperty.fromLink(sharedData.url)\n\t\t\tconst fileName = sharedData.fileName\n\n\t\t\t// hot-fix needed temporary, because calendar-js has no fileName get-setter\n\t\t\tconst parameterFileName = new Parameter('FILENAME', fileName)\n\t\t\t// custom has-preview parameter from dav file\n\t\t\tconst xNcHasPreview = new Parameter('X-NC-HAS-PREVIEW', sharedData['has-preview'].toString())\n\t\t\t// custom file id parameter from dav file\n\t\t\tconst xNcFileId = new Parameter('X-NC-FILE-ID', sharedData.fileid.toString())\n\t\t\t// custom share-types parameter from dav file\n\t\t\tconst xNcSharedTypes = new Parameter('X-NC-SHARED-TYPES', sharedData['share-types']['share-type']\n\t\t\t\t? sharedData['share-types']['share-type'].join(',')\n\t\t\t\t: '')\n\t\t\tattachment.setParameter(parameterFileName)\n\t\t\tattachment.setParameter(xNcFileId)\n\t\t\tattachment.setParameter(xNcHasPreview)\n\t\t\tattachment.setParameter(xNcSharedTypes)\n\t\t\tattachment.isNew = true\n\t\t\tattachment.shareTypes = sharedData['share-types']['share-type']\n\t\t\t\t? sharedData['share-types']['share-type'].join(',')\n\t\t\t\t: ''\n\t\t\tattachment.fileName = fileName\n\t\t\tattachment.xNcFileId = sharedData.fileid\n\t\t\tattachment.xNcHasPreview = sharedData['has-preview']\n\t\t\tattachment.formatType = sharedData.getcontenttype\n\t\t\tattachment.uri = sharedData.url ? sharedData.url : generateUrl(`/f/${sharedData.fileid}`)\n\n\t\t\tcalendarObjectInstance.eventComponent.addProperty(attachment)\n\t\t\tcalendarObjectInstance.attachments.push(attachment)\n\t\t},\n\n\t\t/**\n\t\t *\n\t\t * @param calendarObjectInstance.calendarObjectInstance\n\t\t * @param calendarObjectInstance\n\t\t * @param sharedData\n\t\t * @param calendarObjectInstance.sharedData\n\t\t */\n\t\taddAttachmentWithProperty({\n\t\t\tcalendarObjectInstance,\n\t\t\tsharedData,\n\t\t}) {\n\t\t\tconst attachment = {}\n\t\t\tconst fileName = sharedData.fileName\n\t\t\tattachment.isNew = true\n\t\t\tattachment.shareTypes = (typeof sharedData?.['share-types']?.['share-type'] === 'number'\n\t\t\t\t? sharedData?.['share-types']?.['share-type']?.toString()\n\t\t\t\t: sharedData?.['share-types']?.['share-type']?.join(',')) ?? null\n\t\t\tattachment.fileName = fileName\n\t\t\tattachment.xNcFileId = sharedData.fileid\n\t\t\tattachment.xNcHasPreview = sharedData['has-preview']\n\t\t\tattachment.formatType = sharedData.getcontenttype\n\t\t\tattachment.uri = sharedData.url ? sharedData.url : generateUrl(`/f/${sharedData.fileid}`)\n\n\t\t\tconst attachmentProperty = AttachmentProperty.fromLink(attachment.uri, attachment.formatType)\n\t\t\tconst parameterFileName = new Parameter('FILENAME', fileName)\n\t\t\tconst xNcHasPreview = new Parameter('X-NC-HAS-PREVIEW', attachment.xNcHasPreview.toString())\n\t\t\tconst xNcFileId = new Parameter('X-NC-FILE-ID', attachment.xNcFileId.toString())\n\t\t\t// ADD X-NC-SHARED-TYPES only if sharet-type not empty\n\t\t\tif (attachment.shareTypes !== null) {\n\t\t\t\tconst xNcSharedTypes = new Parameter('X-NC-SHARED-TYPES', attachment.shareTypes)\n\t\t\t\tattachmentProperty.setParameter(xNcSharedTypes)\n\t\t\t}\n\n\t\t\tattachmentProperty.setParameter(parameterFileName)\n\t\t\tattachmentProperty.setParameter(xNcFileId)\n\t\t\tattachmentProperty.setParameter(xNcHasPreview)\n\t\t\tattachmentProperty.uri = attachment.uri\n\n\t\t\tattachment.attachmentProperty = attachmentProperty\n\n\t\t\tcalendarObjectInstance.eventComponent.addProperty(attachmentProperty)\n\t\t\tcalendarObjectInstance.attachments.push(attachment)\n\t\t},\n\n\t\t/**\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.calendarObjectInstance The calendarObjectInstance object\n\t\t * @param {object} data.attachment The attachment object\n\t\t */\n\t\tdeleteAttachment({\n\t\t\tcalendarObjectInstance,\n\t\t\tattachment,\n\t\t}) {\n\t\t\ttry {\n\t\t\t\tconst index = calendarObjectInstance.attachments.indexOf(attachment)\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tcalendarObjectInstance.attachments.splice(index, 1)\n\t\t\t\t}\n\t\t\t\tcalendarObjectInstance.eventComponent.removeAttachment(attachment.attachmentProperty)\n\t\t\t} catch {\n\t\t\t}\n\n\t\t},\n\n\t\t// start of actions\n\t\t/**\n\t\t * Returns the closest existing recurrence-id of a calendar-object\n\t\t * close to the given date.\n\t\t * This is either the next occurrence in the future or\n\t\t * in case there are no more future occurrences the closest\n\t\t * occurrence in the past\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {string} data.objectId The objectId of the calendar-object to edit\n\t\t * @param {Date} data.closeToDate The date to get a close occurrence to\n\t\t * @return {Promise<number>}\n\t\t */\n\t\tasync resolveClosestRecurrenceIdForCalendarObject({\n\t\t\tobjectId,\n\t\t\tcloseToDate,\n\t\t}) {\n\t\t\tconst calendarsStore = useCalendarsStore()\n\t\t\tconst calendarObject = await calendarsStore.getEventByObjectId({ objectId })\n\t\t\tconst iterator = calendarObject.calendarComponent.getVObjectIterator()\n\t\t\tconst firstVObject = iterator.next().value\n\n\t\t\tconst d = DateTimeValue.fromJSDate(closeToDate, true)\n\t\t\treturn firstVObject\n\t\t\t\t.recurrenceManager\n\t\t\t\t.getClosestOccurrence(d)\n\t\t\t\t.getReferenceRecurrenceId()\n\t\t\t\t.unixTime\n\t\t},\n\n\t\t/**\n\t\t * Gets the calendar-object and calendar-object-instance\n\t\t * for a given objectId and recurrenceId.\n\t\t *\n\t\t * If the recurrenceId does not represent a valid instance,\n\t\t * an error will be thrown.\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {string} data.objectId The objectId of the calendar-object to edit\n\t\t * @param {number} data.recurrenceId The recurrence-id to edit\n\t\t * @return {Promise<{calendarObject: object, calendarObjectInstance: object}>}\n\t\t */\n\t\tasync getCalendarObjectInstanceByObjectIdAndRecurrenceId({\n\t\t\tobjectId,\n\t\t\trecurrenceId,\n\t\t}) {\n\t\t\tconst calendarsStore = useCalendarsStore()\n\t\t\tif (this.existingEvent.objectId === objectId && this.existingEvent.recurrenceId === recurrenceId) {\n\t\t\t\treturn Promise.resolve({\n\t\t\t\t\tcalendarObject: this.calendarObject,\n\t\t\t\t\tcalendarObjectInstance: this.calendarObjectInstance,\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tconst recurrenceIdDate = new Date(recurrenceId * 1000)\n\t\t\tconst calendarObject = await calendarsStore.getEventByObjectId({ objectId })\n\t\t\tconst eventComponent = getObjectAtRecurrenceId(calendarObject, recurrenceIdDate)\n\t\t\tif (eventComponent === null) {\n\t\t\t\tthrow new Error('Not a valid recurrence-id')\n\t\t\t}\n\n\t\t\tconst calendarObjectInstance = mapEventComponentToEventObject(eventComponent)\n\t\t\tthis.setCalendarObjectInstanceForExistingEvent({\n\t\t\t\tcalendarObject,\n\t\t\t\tcalendarObjectInstance,\n\t\t\t\tobjectId,\n\t\t\t\trecurrenceId,\n\t\t\t})\n\n\t\t\treturn {\n\t\t\t\tcalendarObject,\n\t\t\t\tcalendarObjectInstance,\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Gets the new calendar-object-instance.\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {boolean} data.isAllDay Whether or not the new event is supposed to be all-day\n\t\t * @param {number} data.start The start of the new event (unixtime)\n\t\t * @param {number} data.end The end of the new event (unixtime)\n\t\t * @param {string} data.timezoneId The timezoneId of the new event\n\t\t * @return {Promise<{calendarObject: object, calendarObjectInstance: object}>}\n\t\t */\n\t\tasync getCalendarObjectInstanceForNewEvent({\n\t\t\tisAllDay,\n\t\t\tstart,\n\t\t\tend,\n\t\t\ttimezoneId,\n\t\t}) {\n\t\t\tconst calendarObjectsStore = useCalendarObjectsStore()\n\t\t\tconst settingsStore = useSettingsStore()\n\n\t\t\tif (this.isNew === true) {\n\t\t\t\treturn Promise.resolve({\n\t\t\t\t\tcalendarObject: this.calendarObject,\n\t\t\t\t\tcalendarObjectInstance: this.calendarObjectInstance,\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tconst calendarObject = await calendarObjectsStore.createNewEvent({\n\t\t\t\tstart,\n\t\t\t\tend,\n\t\t\t\tisAllDay,\n\t\t\t\ttimezoneId,\n\t\t\t})\n\t\t\tconst startDate = new Date(start * 1000)\n\t\t\tconst eventComponent = getObjectAtRecurrenceId(calendarObject, startDate)\n\t\t\tconst calendarObjectInstance = mapEventComponentToEventObject(eventComponent)\n\n\t\t\t// Add an alarm if the user set a default one in the settings. If\n\t\t\t// not, defaultReminder will not be a number (rather the string \"none\").\n\t\t\tconst defaultReminder = parseInt(settingsStore.defaultReminder)\n\t\t\tif (!isNaN(defaultReminder)) {\n\t\t\t\tthis.addAlarmToCalendarObjectInstance({\n\t\t\t\t\tcalendarObjectInstance,\n\t\t\t\t\ttype: 'DISPLAY',\n\t\t\t\t\ttotalSeconds: defaultReminder,\n\t\t\t\t})\n\t\t\t\tlogger.debug(`Added defaultReminder (${defaultReminder}s) to newly created event`)\n\t\t\t}\n\n\t\t\t// Add default status\n\t\t\tconst rfcProps = getRFCProperties()\n\t\t\tconst status = rfcProps.status.defaultValue\n\n\t\t\tcalendarObjectInstance.eventComponent.status = status\n\t\t\tcalendarObjectInstance.status = status\n\n\t\t\tthis.setCalendarObjectInstanceForNewEvent({\n\t\t\t\tcalendarObject,\n\t\t\t\tcalendarObjectInstance,\n\t\t\t})\n\n\t\t\treturn {\n\t\t\t\tcalendarObject,\n\t\t\t\tcalendarObjectInstance,\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Updates the existing calendar-object-instance.\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {boolean} data.isAllDay Whether or not the new event is supposed to be all-day\n\t\t * @param {number} data.start The start of the new event (unixtime)\n\t\t * @param {number} data.end The end of the new event (unixtime)\n\t\t * @param {string} data.timezoneId The timezoneId of the new event\n\t\t * @return {Promise<{calendarObject: object, calendarObjectInstance: object}>}\n\t\t */\n\t\tasync updateCalendarObjectInstanceForNewEvent({\n\t\t\tisAllDay,\n\t\t\tstart,\n\t\t\tend,\n\t\t\ttimezoneId,\n\t\t}) {\n\t\t\tconst calendarObjectsStore = useCalendarObjectsStore()\n\n\t\t\tawait calendarObjectsStore.updateTimeOfNewEvent({\n\t\t\t\tcalendarObjectInstance: this.calendarObjectInstance,\n\t\t\t\tstart,\n\t\t\t\tend,\n\t\t\t\tisAllDay,\n\t\t\t\ttimezoneId,\n\t\t\t})\n\t\t\tthis.setCalendarObjectInstanceForNewEvent({\n\t\t\t\tcalendarObject: this.calendarObject,\n\t\t\t\tcalendarObjectInstance: this.calendarObjectInstance,\n\t\t\t})\n\n\t\t\treturn {\n\t\t\t\tcalendarObject: this.calendarObject,\n\t\t\t\tcalendarObjectInstance: this.calendarObjectInstance,\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Saves changes made to a single calendar-object-instance\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {boolean} data.thisAndAllFuture Whether or not to save changes for all future occurrences or just this one\n\t\t * @param {string} data.calendarId The new calendar-id to store it in\n\t\t * @return {Promise<void>}\n\t\t */\n\t\tasync saveCalendarObjectInstance({\n\t\t\tthisAndAllFuture,\n\t\t\tcalendarId,\n\t\t}) {\n\t\t\tconst calendarObjectsStore = useCalendarObjectsStore()\n\n\t\t\tconst eventComponent = this.calendarObjectInstance.eventComponent\n\t\t\tconst calendarObject = this.calendarObject\n\n\t\t\tupdateAlarms(eventComponent)\n\t\t\tawait updateTalkParticipants(eventComponent)\n\n\t\t\tif (eventComponent.isDirty()) {\n\t\t\t\tconst isForkedItem = eventComponent.primaryItem !== null\n\t\t\t\tlet original = null\n\t\t\t\tlet fork = null\n\n\t\t\t\t// We check if two things apply:\n\t\t\t\t// - primaryItem !== null -> Is this a fork or not?\n\t\t\t\t// - eventComponent.canCreateRecurrenceExceptions() - Can we create a recurrence-exception for this item\n\t\t\t\tif (isForkedItem && eventComponent.canCreateRecurrenceExceptions()) {\n\t\t\t\t\t[original, fork] = eventComponent.createRecurrenceException(thisAndAllFuture)\n\t\t\t\t}\n\n\t\t\t\tawait calendarObjectsStore.updateCalendarObject({ calendarObject })\n\n\t\t\t\tif (original !== null && fork !== null && original.root !== fork.root) {\n\t\t\t\t\tawait calendarObjectsStore.createCalendarObjectFromFork({\n\t\t\t\t\t\teventComponent: fork,\n\t\t\t\t\t\tcalendarId,\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (calendarId !== this.calendarObject.calendarId) {\n\t\t\t\tawait calendarObjectsStore.moveCalendarObject({\n\t\t\t\t\tcalendarObject,\n\t\t\t\t\tnewCalendarId: calendarId,\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Duplicate calendar-object-instance\n\t\t *\n\t\t * @return {Promise<void>}\n\t\t */\n\t\tasync duplicateCalendarObjectInstance() {\n\t\t\tconst calendarObjectsStore = useCalendarObjectsStore()\n\n\t\t\tconst oldCalendarObjectInstance = this.calendarObjectInstance\n\t\t\tconst oldEventComponent = oldCalendarObjectInstance.eventComponent\n\t\t\tconst startDate = oldEventComponent.startDate.getInUTC()\n\t\t\tconst endDate = oldEventComponent.endDate.getInUTC()\n\t\t\tconst calendarObject = await calendarObjectsStore.createNewEvent({\n\t\t\t\tstart: startDate.unixTime,\n\t\t\t\tend: endDate.unixTime,\n\t\t\t\ttimezoneId: oldEventComponent.startDate.timezoneId,\n\t\t\t\tisAllDay: oldEventComponent.isAllDay(),\n\t\t\t})\n\t\t\tconst eventComponent = getObjectAtRecurrenceId(calendarObject, startDate.jsDate)\n\t\t\tcopyCalendarObjectInstanceIntoEventComponent(oldCalendarObjectInstance, eventComponent, true)\n\t\t\tconst calendarObjectInstance = mapEventComponentToEventObject(eventComponent)\n\n\t\t\tawait this.setCalendarObjectInstanceForNewEvent({\n\t\t\t\tcalendarObject,\n\t\t\t\tcalendarObjectInstance,\n\t\t\t})\n\t\t},\n\n\t\t/**\n\t\t * Deletes a calendar-object-instance\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {boolean} data.thisAndAllFuture Whether or not to delete all future occurrences or just this one\n\t\t * @return {Promise<void>}\n\t\t */\n\t\tasync deleteCalendarObjectInstance({ thisAndAllFuture }) {\n\t\t\tconst calendarObjectsStore = useCalendarObjectsStore()\n\n\t\t\tconst eventComponent = this.calendarObjectInstance.eventComponent\n\t\t\tconst isRecurrenceSetEmpty = eventComponent.removeThisOccurrence(thisAndAllFuture)\n\t\t\tconst calendarObject = this.calendarObject\n\n\t\t\tif (isRecurrenceSetEmpty) {\n\t\t\t\tawait calendarObjectsStore.deleteCalendarObject({ calendarObject })\n\t\t\t} else {\n\t\t\t\tawait calendarObjectsStore.updateCalendarObject({ calendarObject })\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t *\n\t\t * @param {object} data The destructuring object for data\n\t\t * @param {object} data.calendarObjectInstance The calendarObjectInstance object\n\t\t * @param {Date} data.startDate The new start-date\n\t\t * @param {boolean} data.onlyTime Only update time\n\t\t * @param data.changeEndDate\n\t\t */\n\t\tchangeStartDate({\n\t\t\tcalendarObjectInstance,\n\t\t\tstartDate,\n\t\t\tonlyTime = false,\n\t\t\tchangeEndDate = true,\n\t\t}) {\n\t\t\t// Calculate current duration between start and end\n\t\t\tconst oldDuration = calendarObjectInstance.endDate.getTime() - calendarObjectInstance.startDate.getTime()\n\n\t\t\tif (onlyTime) {\n\t\t\t\tstartDate.setFullYear(calendarObjectInstance.startDate.getFullYear(), calendarObjectInstance.startDate.getMonth(), calendarObjectInstance.startDate.getDate())\n\t\t\t}\n\n\t\t\tthis.changeStartDateMutation({\n\t\t\t\tcalendarObjectInstance,\n\t\t\t\tstartDate,\n\t\t\t})\n\n\t\t\t// When changing time, preserve the original duration\n\t\t\tif (changeEndDate) {\n\t\t\t\tconst newEndDate = new Date(startDate.getTime() + oldDuration)\n\t\t\t\tthis.changeEndDateMutation({\n\t\t\t\t\tcalendarObjectInstance,\n\t\t\t\t\tendDate: newEndDate,\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Change the timezone of the event's start\n\t\t *\n\t\t * @param {object} data The destructuring object for data\n\t\t * @param {object} data.calendarObjectInstance The calendarObjectInstance object\n\t\t * @param {string} data.startTimezone New timezone to set for start\n\t\t */\n\t\tchangeStartTimezone({\n\t\t\tcalendarObjectInstance,\n\t\t\tstartTimezone,\n\t\t}) {\n\t\t\tthis.changeStartTimezoneMutation({\n\t\t\t\tcalendarObjectInstance,\n\t\t\t\tstartTimezone,\n\t\t\t})\n\n\t\t\t// Simulate a change of the start time to trigger the comparison\n\t\t\t// of start and end and trigger an update of end if necessary\n\t\t\tthis.changeStartDateMutation({\n\t\t\t\tcalendarObjectInstance,\n\t\t\t\tstartDate: calendarObjectInstance.startDate,\n\t\t\t})\n\t\t},\n\n\t\t/**\n\t\t *\n\t\t * @param {object} data The destructuring object for data\n\t\t * @param {object} data.calendarObjectInstance The calendarObjectInstance object\n\t\t * @param {Date} data.endDate The new end-date\n\t\t * @param {boolean} data.onlyTime Only update time\n\t\t */\n\t\tchangeEndDate({\n\t\t\tcalendarObjectInstance,\n\t\t\tendDate,\n\t\t\tonlyTime = false,\n\t\t}) {\n\t\t\tif (onlyTime) {\n\t\t\t\tendDate.setFullYear(calendarObjectInstance.endDate.getFullYear(), calendarObjectInstance.endDate.getMonth(), calendarObjectInstance.endDate.getDate())\n\t\t\t}\n\n\t\t\tthis.changeEndDateMutation({\n\t\t\t\tcalendarObjectInstance,\n\t\t\t\tendDate,\n\t\t\t})\n\t\t},\n\n\t\t/**\n\t\t * Change the timezone of the event's end\n\t\t *\n\t\t * @param {object} data The destructuring object for data\n\t\t * @param {object} data.calendarObjectInstance The calendarObjectInstance object\n\t\t * @param {string} data.endTimezone New timezone to set for end\n\t\t */\n\t\tchangeEndTimezone({\n\t\t\tcalendarObjectInstance,\n\t\t\tendTimezone,\n\t\t}) {\n\t\t\tthis.changeEndTimezoneMutation({\n\t\t\t\tcalendarObjectInstance,\n\t\t\t\tendTimezone,\n\t\t\t})\n\n\t\t\t// Simulate a change of the end time to trigger the comparison\n\t\t\t// of start and end and trigger an update of start if necessary\n\t\t\tthis.changeEndDateMutation({\n\t\t\t\tcalendarObjectInstance,\n\t\t\t\tendDate: calendarObjectInstance.endDate,\n\t\t\t})\n\t\t},\n\n\t\t/**\n\t\t *\n\t\t * @param {object} data The destructuring object for data\n\t\t * @param {object} data.calendarObjectInstance The calendarObjectInstance object\n\t\t * @param {object} data.recurrenceRule The recurrenceRule object to modify\n\t\t * @param {string} data.frequency The new frequency to set\n\t\t */\n\t\tchangeRecurrenceFrequency({\n\t\t\tcalendarObjectInstance,\n\t\t\trecurrenceRule,\n\t\t\tfrequency,\n\t\t}) {\n\n\t\t\tconsole.debug(calendarObjectInstance)\n\t\t\tconsole.debug(recurrenceRule)\n\t\t\tconsole.debug(frequency)\n\n\t\t\tif (recurrenceRule.frequency === 'NONE' && frequency !== 'NONE') {\n\t\t\t\t// Add a new recurrence-rule\n\t\t\t\tconst recurrenceValue = RecurValue.fromData({})\n\t\t\t\tconst recurrenceProperty = new Property('RRULE', recurrenceValue)\n\t\t\t\tcalendarObjectInstance.eventComponent.addProperty(recurrenceProperty)\n\t\t\t\tcalendarObjectInstance.recurrenceRule.recurrenceRuleValue = recurrenceValue\n\n\t\t\t\tthis.resetRecurrenceByParts({ recurrenceRule })\n\t\t\t\tthis.changeRecurrenceFrequencyMutation({\n\t\t\t\t\tcalendarObjectInstance,\n\t\t\t\t\trecurrenceRule: calendarObjectInstance.recurrenceRule,\n\t\t\t\t\tfrequency,\n\t\t\t\t})\n\t\t\t\tthis.changeRecurrenceInterval({\n\t\t\t\t\tcalendarObjectInstance,\n\t\t\t\t\trecurrenceRule: calendarObjectInstance.recurrenceRule,\n\t\t\t\t\tinterval: 1,\n\t\t\t\t})\n\t\t\t\tthis.changeRecurrenceToInfinite({\n\t\t\t\t\trecurrenceRule: calendarObjectInstance.recurrenceRule,\n\t\t\t\t})\n\t\t\t\tthis.setDefaultRecurrenceByParts({\n\t\t\t\t\tcalendarObjectInstance,\n\t\t\t\t\trecurrenceRule,\n\t\t\t\t\tfrequency,\n\t\t\t\t})\n\n\t\t\t\tconsole.debug(`changed from none to ${frequency}`)\n\t\t\t} else if (recurrenceRule.frequency !== 'NONE' && frequency === 'NONE') {\n\t\t\t\tconsole.debug('calling removeRecurrenceRuleFromCalendarObjectInstance')\n\t\t\t\t// Remove the recurrence-rule\n\t\t\t\tif (recurrenceRule.recurrenceRuleValue) {\n\t\t\t\t\tcalendarObjectInstance.eventComponent.deleteAllProperties('RRULE')\n\t\t\t\t\t/// TODO calendarObjectInstance.recurrenceRule = getDefaultEventObject().recurrenceRule\n\t\t\t\t\tVue.set(calendarObjectInstance, 'recurrenceRule', getDefaultEventObject().recurrenceRule)\n\n\t\t\t\t\tconsole.debug(calendarObjectInstance)\n\t\t\t\t\tconsole.debug(recurrenceRule)\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Change frequency of existing recurrence-rule\n\t\t\t\tthis.resetRecurrenceByParts({ recurrenceRule })\n\t\t\t\tthis.changeRecurrenceFrequencyMutation({\n\t\t\t\t\tcalendarObjectInstance,\n\t\t\t\t\trecurrenceRule: calendarObjectInstance.recurrenceRule,\n\t\t\t\t\tfrequency,\n\t\t\t\t})\n\t\t\t\tthis.setDefaultRecurrenceByParts({\n\t\t\t\t\tcalendarObjectInstance,\n\t\t\t\t\trecurrenceRule,\n\t\t\t\t\tfrequency,\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t *\n\t\t * @param {object} data The destructuring object for data\n\t\t * @param {object} data.calendarObjectInstance The calendarObjectInstance object\n\t\t * @param {object} data.recurrenceRule The recurrenceRule object to modify\n\t\t * @param {string} data.frequency The new frequency to set\n\t\t */\n\t\tsetDefaultRecurrenceByParts({\n\t\t\tcalendarObjectInstance,\n\t\t\trecurrenceRule,\n\t\t\tfrequency,\n\t\t}) {\n\t\t\tswitch (frequency) {\n\t\t\tcase 'WEEKLY':\n\t\t\t\tif (recurrenceRule.recurrenceRuleValue) {\n\t\t\t\t\tconst byDay = getWeekDayFromDate(calendarObjectInstance.startDate)\n\t\t\t\t\trecurrenceRule.recurrenceRuleValue.setComponent('BYDAY', [byDay])\n\t\t\t\t\trecurrenceRule.byDay.push(byDay)\n\n\t\t\t\t\tconsole.debug(recurrenceRule.recurrenceRuleValue._innerValue.toString())\n\t\t\t\t}\n\t\t\t\tbreak\n\n\t\t\tcase 'MONTHLY':\n\t\t\t\tif (recurrenceRule.recurrenceRuleValue) {\n\t\t\t\t\tconst byMonthDay = calendarObjectInstance.startDate.getDate()\n\t\t\t\t\trecurrenceRule.recurrenceRuleValue.setComponent('BYMONTHDAY', [byMonthDay])\n\t\t\t\t\trecurrenceRule.byMonthDay.push(byMonthDay)\n\n\t\t\t\t\tconsole.debug(recurrenceRule.recurrenceRuleValue._innerValue.toString())\n\t\t\t\t}\n\t\t\t\tbreak\n\n\t\t\tcase 'YEARLY':\n\t\t\t\tif (recurrenceRule.recurrenceRuleValue) {\n\t\t\t\t\tconst byMonth = calendarObjectInstance.startDate.getMonth() + 1 // Javascript months are zero-based\n\t\t\t\t\trecurrenceRule.recurrenceRuleValue.setComponent('BYMONTH', [byMonth])\n\t\t\t\t\trecurrenceRule.byMonth.push(byMonth)\n\n\t\t\t\t\tconst byMonthDay = calendarObjectInstance.startDate.getDate()\n\t\t\t\t\trecurrenceRule.recurrenceRuleValue.setComponent('BYMONTHDAY', [byMonthDay])\n\t\t\t\t\trecurrenceRule.byMonthDay.push(byMonthDay)\n\n\t\t\t\t\tconsole.debug(recurrenceRule.recurrenceRuleValue._innerValue.toString())\n\t\t\t\t}\n\t\t\t\tbreak\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t *\n\t\t * @param {object} data The destructuring object for data\n\t\t * @param {object} data.calendarObjectInstance The calendarObjectInstance object\n\t\t * @param {object} data.recurrenceRule The recurrenceRule object to modify\n\t\t */\n\t\tchangeMonthlyRecurrenceFromByDayToBySetPosition({\n\t\t\tcalendarObjectInstance,\n\t\t\trecurrenceRule,\n\t\t}) {\n\t\t\tconsole.debug('changeMonthlyRecurrenceFromByDayToBySetPosition')\n\t\t\tthis.resetRecurrenceByParts({ recurrenceRule })\n\t\t\tthis.setDefaultRecurrenceByPartsForMonthlyBySetPosition({\n\t\t\t\tcalendarObjectInstance,\n\t\t\t\trecurrenceRule,\n\t\t\t})\n\t\t},\n\n\t\t/**\n\t\t *\n\t\t * @param {object} data The destructuring object for data\n\t\t * @param {object} data.calendarObjectInstance The calendarObjectInstance object\n\t\t * @param {object} data.recurrenceRule The recurrenceRule object to modify\n\t\t */\n\t\tchangeMonthlyRecurrenceFromBySetPositionToByDay({\n\t\t\tcalendarObjectInstance,\n\t\t\trecurrenceRule,\n\t\t}) {\n\t\t\tconsole.debug('changeMonthlyRecurrenceFromBySetPositionToByDay')\n\t\t\tthis.resetRecurrenceByParts({ recurrenceRule })\n\n\t\t\tif (recurrenceRule.recurrenceRuleValue) {\n\t\t\t\tconst byMonthDay = calendarObjectInstance.startDate.getDate()\n\t\t\t\trecurrenceRule.recurrenceRuleValue.setComponent('BYMONTHDAY', [byMonthDay])\n\t\t\t\trecurrenceRule.byMonthDay.push(byMonthDay)\n\n\t\t\t\tconsole.debug(recurrenceRule.recurrenceRuleValue._innerValue.toString())\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t *\n\t\t * @param {object} data The destructuring object for data\n\t\t * @param {object} data.calendarObjectInstance The calendarObjectInstance object\n\t\t * @param {object} data.recurrenceRule The recurrenceRule object to modify\n\t\t */\n\t\tchangeYearlyRecurrenceFromByDayToBySetPosition({\n\t\t\tcalendarObjectInstance,\n\t\t\trecurrenceRule,\n\t\t}) {\n\t\t\tthis.resetRecurrenceByParts({ recurrenceRule })\n\t\t\tthis.setDefaultRecurrenceByPartsForYearlyBySetPosition({\n\t\t\t\tcalendarObjectInstance,\n\t\t\t\trecurrenceRule,\n\t\t\t})\n\t\t},\n\n\t\t/**\n\t\t *\n\t\t * @param {object} data The destructuring object for data\n\t\t * @param {object} data.calendarObjectInstance The calendarObjectInstance object\n\t\t * @param {object} data.recurrenceRule The recurrenceRule object to modify\n\t\t */\n\t\tchangeYearlyRecurrenceFromBySetPositionToByDay({\n\t\t\tcalendarObjectInstance,\n\t\t\trecurrenceRule,\n\t\t}) {\n\t\t\tthis.resetRecurrenceByParts({ recurrenceRule })\n\n\t\t\tif (recurrenceRule.recurrenceRuleValue) {\n\t\t\t\tconst byMonth = calendarObjectInstance.startDate.getMonth() + 1 // Javascript months are zero-based\n\t\t\t\trecurrenceRule.recurrenceRuleValue.setComponent('BYMONTH', [byMonth])\n\t\t\t\trecurrenceRule.byMonth.push(byMonth)\n\n\t\t\t\tconst byMonthDay = calendarObjectInstance.startDate.getDate()\n\t\t\t\trecurrenceRule.recurrenceRuleValue.setComponent('BYMONTHDAY', [byMonthDay])\n\t\t\t\trecurrenceRule.byMonthDay.push(byMonthDay)\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t *\n\t\t * @param {object} data The destructuring object for data\n\t\t * @param {object} data.calendarObjectInstance The calendarObjectInstance object\n\t\t * @param {object} data.recurrenceRule The recurrenceRule object to modify\n\t\t */\n\t\tenableRecurrenceLimitByUntil({\n\t\t\tcalendarObjectInstance,\n\t\t\trecurrenceRule,\n\t\t}) {\n\t\t\tlet until\n\t\t\tswitch (recurrenceRule.frequency) {\n\t\t\t// Defaults to 7 days\n\t\t\tcase 'DAILY':\n\t\t\t\tuntil = new Date(calendarObjectInstance.startDate.getTime() + 7 * 24 * 60 * 60 * 1000)\n\t\t\t\tbreak\n\n\t\t\t\t// Defaults to 4 weeks\n\t\t\tcase 'WEEKLY':\n\t\t\t\tuntil = new Date(calendarObjectInstance.startDate.getTime() + 4 * 7 * 24 * 60 * 60 * 1000)\n\t\t\t\tbreak\n\n\t\t\t\t// Defaults to 10 year\n\t\t\tcase 'YEARLY':\n\t\t\t\tuntil = new Date(\n\t\t\t\t\tcalendarObjectInstance.startDate.getFullYear() + 10,\n\t\t\t\t\tcalendarObjectInstance.startDate.getMonth(),\n\t\t\t\t\tcalendarObjectInstance.startDate.getDate(),\n\t\t\t\t\t23,\n\t\t\t\t\t59,\n\t\t\t\t\t59,\n\t\t\t\t)\n\t\t\t\tbreak\n\n\t\t\t\t// Defaults to 12 months\n\t\t\tcase 'MONTHLY':\n\t\t\tdefault:\n\t\t\t\tuntil = new Date(\n\t\t\t\t\tcalendarObjectInstance.startDate.getFullYear() + 1,\n\t\t\t\t\tcalendarObjectInstance.startDate.getMonth(),\n\t\t\t\t\tcalendarObjectInstance.startDate.getDate(),\n\t\t\t\t\t23,\n\t\t\t\t\t59,\n\t\t\t\t\t59,\n\t\t\t\t)\n\t\t\t\tbreak\n\t\t\t}\n\n\t\t\tthis.changeRecurrenceToInfinite({\n\t\t\t\trecurrenceRule,\n\t\t\t})\n\t\t\tthis.changeRecurrenceUntil({\n\t\t\t\tcalendarObjectInstance,\n\t\t\t\trecurrenceRule,\n\t\t\t\tuntil,\n\t\t\t})\n\t\t},\n\n\t\t/**\n\t\t *\n\t\t * @param {object} data The destructuring object for data\n\t\t * @param {object} data.recurrenceRule The recurrenceRule object to modify\n\t\t */\n\t\tenableRecurrenceLimitByCount({ recurrenceRule }) {\n\t\t\tthis.changeRecurrenceToInfinite({\n\t\t\t\trecurrenceRule,\n\t\t\t})\n\t\t\tthis.changeRecurrenceCount({\n\t\t\t\trecurrenceRule,\n\t\t\t\tcount: 2, // Default value is two\n\t\t\t})\n\t\t},\n\n\t\tchangeAlarmAmountTimed({\n\t\t\talarm,\n\t\t\tamount,\n\t\t}) {\n\t\t\tif (alarm.alarmComponent) {\n\t\t\t\talarm.alarmComponent.trigger.value.totalSeconds\n\t\t\t\t\t= getTotalSecondsFromAmountAndUnitForTimedEvents(amount, alarm.relativeUnitTimed, alarm.relativeIsBefore)\n\n\t\t\t\talarm.relativeAmountTimed = amount\n\t\t\t\talarm.relativeTrigger = alarm.alarmComponent.trigger.value.totalSeconds\n\n\t\t\t\tconsole.debug(alarm.alarmComponent.toICALJs().toString())\n\t\t\t}\n\t\t\tthis.updateAlarmAllDayParts({ alarm })\n\t\t},\n\n\t\tchangeAlarmUnitTimed({\n\t\t\talarm,\n\t\t\tunit,\n\t\t}) {\n\t\t\tif (alarm.alarmComponent) {\n\t\t\t\talarm.alarmComponent.trigger.value.totalSeconds\n\t\t\t\t\t= getTotalSecondsFromAmountAndUnitForTimedEvents(alarm.relativeAmountTimed, unit, alarm.relativeIsBefore)\n\n\t\t\t\talarm.relativeUnitTimed = unit\n\t\t\t\talarm.relativeTrigger = alarm.alarmComponent.trigger.value.totalSeconds\n\n\t\t\t\tconsole.debug(alarm.alarmComponent.toICALJs().toString())\n\t\t\t}\n\t\t\tthis.updateAlarmAllDayParts({ alarm })\n\t\t},\n\n\t\tchangeAlarmAmountAllDay({\n\t\t\talarm,\n\t\t\tamount,\n\t\t}) {\n\t\t\tif (alarm.alarmComponent) {\n\t\t\t\talarm.alarmComponent.trigger.value.totalSeconds\n\t\t\t\t\t= getTotalSecondsFromAmountHourMinutesAndUnitForAllDayEvents(amount,\n\t\t\t\t\t\talarm.relativeHoursAllDay, alarm.relativeMinutesAllDay, alarm.relativeUnitAllDay)\n\n\t\t\t\talarm.relativeAmountAllDay = amount\n\t\t\t\talarm.relativeTrigger = alarm.alarmComponent.trigger.value.totalSeconds\n\n\t\t\t\tconsole.debug(alarm.alarmComponent.toICALJs().toString())\n\t\t\t}\n\n\t\t\tthis.updateAlarmTimedParts({ alarm })\n\t\t},\n\n\t\tchangeAlarmUnitAllDay({\n\t\t\talarm,\n\t\t\tunit,\n\t\t}) {\n\t\t\tif (alarm.alarmComponent) {\n\t\t\t\talarm.alarmComponent.trigger.value.totalSeconds\n\t\t\t\t\t= getTotalSecondsFromAmountHourMinutesAndUnitForAllDayEvents(alarm.relativeAmountAllDay,\n\t\t\t\t\t\talarm.relativeHoursAllDay, alarm.relativeMinutesAllDay, unit)\n\n\t\t\t\talarm.relativeUnitAllDay = unit\n\t\t\t\talarm.relativeTrigger = alarm.alarmComponent.trigger.value.totalSeconds\n\n\t\t\t\tconsole.debug(alarm.alarmComponent.toICALJs().toString())\n\t\t\t}\n\n\t\t\tthis.updateAlarmTimedParts({ alarm })\n\t\t},\n\n\t\tchangeAlarmHoursMinutesAllDay({\n\t\t\talarm,\n\t\t\thours,\n\t\t\tminutes,\n\t\t}) {\n\t\t\tif (alarm.alarmComponent) {\n\t\t\t\talarm.alarmComponent.trigger.value.totalSeconds\n\t\t\t\t\t= getTotalSecondsFromAmountHourMinutesAndUnitForAllDayEvents(alarm.relativeAmountAllDay,\n\t\t\t\t\t\thours, minutes, alarm.relativeUnitAllDay)\n\n\t\t\t\talarm.relativeHoursAllDay = hours\n\t\t\t\talarm.relativeMinutesAllDay = minutes\n\t\t\t\talarm.relativeTrigger = alarm.alarmComponent.trigger.value.totalSeconds\n\n\t\t\t\tconsole.debug(alarm.alarmComponent.toICALJs().toString())\n\t\t\t}\n\n\t\t\tthis.updateAlarmTimedParts({ alarm })\n\t\t},\n\n\t\tchangeAlarmFromRelativeToAbsolute({\n\t\t\tcalendarObjectInstance,\n\t\t\talarm,\n\t\t}) {\n\t\t\tif (alarm.alarmComponent) {\n\t\t\t\tconst triggerDateTime = calendarObjectInstance.eventComponent.startDate.clone()\n\t\t\t\t// The trigger of an alarm must be DATE-TIME, startDate can be either.\n\t\t\t\ttriggerDateTime.isDate = false\n\n\t\t\t\ttriggerDateTime.addDuration(alarm.alarmComponent.trigger.value)\n\n\t\t\t\talarm.alarmComponent.setTriggerFromAbsolute(triggerDateTime)\n\n\t\t\t\talarm.absoluteDate = getDateFromDateTimeValue(alarm.alarmComponent.trigger.value)\n\t\t\t\talarm.absoluteTimezoneId = alarm.alarmComponent.trigger.value.timezoneId\n\n\t\t\t\tconsole.debug(alarm.alarmComponent.toICALJs().toString())\n\t\t\t}\n\n\t\t\talarm.relativeIsBefore = null\n\t\t\talarm.relativeIsRelatedToStart = null\n\t\t\talarm.relativeUnitTimed = null\n\t\t\talarm.relativeAmountTimed = null\n\t\t\talarm.relativeUnitAllDay = null\n\t\t\talarm.relativeAmountAllDay = null\n\t\t\talarm.relativeHoursAllDay = null\n\t\t\talarm.relativeMinutesAllDay = null\n\t\t\talarm.relativeTrigger = null\n\t\t},\n\n\t\tchangeAlarmFromAbsoluteToRelative({\n\t\t\tcalendarObjectInstance,\n\t\t\talarm,\n\t\t}) {\n\t\t\tif (alarm.alarmComponent) {\n\t\t\t\tconst duration = alarm.alarmComponent.trigger.value\n\t\t\t\t\t.subtractDateWithTimezone(calendarObjectInstance.eventComponent.startDate)\n\n\t\t\t\talarm.alarmComponent.setTriggerFromRelative(duration)\n\t\t\t\talarm.relativeIsBefore = alarm.alarmComponent.trigger.value.isNegative\n\t\t\t\talarm.relativeIsRelatedToStart = true\n\t\t\t\talarm.relativeTrigger = duration.totalSeconds\n\t\t\t}\n\n\t\t\tthis.updateAlarmAllDayParts({ alarm })\n\t\t\tthis.updateAlarmTimedParts({ alarm })\n\n\t\t\talarm.absoluteDate = null\n\t\t\talarm.absoluteTimezoneId = null\n\t\t},\n\n\t\ttoggleAllDay({ calendarObjectInstance }) {\n\t\t\tconst settingsStore = useSettingsStore()\n\t\t\tthis.toggleAllDayMutation({ calendarObjectInstance })\n\n\t\t\tif (!calendarObjectInstance.isAllDay) {\n\t\t\t\tif (calendarObjectInstance.startTimezoneId === 'floating') {\n\t\t\t\t\tconst startTimezone = settingsStore.getResolvedTimezone\n\t\t\t\t\tthis.changeStartTimezoneMutation({\n\t\t\t\t\t\tcalendarObjectInstance,\n\t\t\t\t\t\tstartTimezone,\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tthis.changeTimeToDefaultForTimedEvents({ calendarObjectInstance })\n\t\t\t}\n\t\t},\n\t},\n})\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport { mapCalendarJsToCalendarObject } from '../models/calendarObject.js'\nimport logger from '../utils/logger.js'\nimport {\n\tcreateEvent,\n\tgetParserManager,\n\tDateTimeValue,\n} from '@nextcloud/calendar-js'\nimport useFetchedTimeRangesStore from './fetchedTimeRanges.js'\nimport useCalendarsStore from './calendars.js'\nimport { defineStore } from 'pinia'\nimport useCalendarObjectInstanceStore from './calendarObjectInstance.js'\nimport Vue from 'vue'\nimport { getTimezoneManager } from '@nextcloud/timezones'\n\nexport default defineStore('calendarObjects', {\n\tstate: () => {\n\t\treturn {\n\t\t\tcalendarObjects: {},\n\t\t\tmodificationCount: 0,\n\t\t}\n\t},\n\tgetters: {\n\t\t/**\n\t\t * Gets a calendar-object based on its id\n\t\t *\n\t\t * @param {object} state The store data\n\t\t * @return {function({String}): CalendarObject}\n\t\t */\n\t\tgetCalendarObjectById: (state) => (id) => state.calendarObjects[id],\n\t},\n\tactions: {\n\t\t/**\n\t\t * Moves a calendar-object to a different calendar\n\t\t *\n\t\t * @param {object} data destructuring object\n\t\t * @param {CalendarObject} data.calendarObject Calendar-object to delete\n\t\t * @param {string} data.newCalendarId Calendar-Id of calendar to move this calendar-object to\n\t\t * @return {Promise<void>}\n\t\t */\n\t\tasync moveCalendarObject({ calendarObject, newCalendarId }) {\n\t\t\tif (!calendarObject.existsOnServer) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst fetchedTimeRangesStore = useFetchedTimeRangesStore()\n\t\t\tconst calendarsStore = useCalendarsStore()\n\n\t\t\tconst oldCalendarObjectId = calendarObject.id\n\t\t\tconst oldCalendarId = calendarObject.calendarId\n\n\t\t\tif (oldCalendarId === newCalendarId) {\n\t\t\t\tlogger.error('Old calendar Id and new calendar Id are the same, nothing to move')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst newCalendar = calendarsStore.getCalendarById(newCalendarId)\n\t\t\tif (!newCalendar) {\n\t\t\t\tlogger.error('Calendar to move to not found, aborting')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tawait calendarObject.dav.move(newCalendar.dav)\n\t\t\t// Update calendarId in calendarObject manually as it is not stored in dav\n\t\t\tthis.calendarObjects[calendarObject.id].calendarId = newCalendarId\n\n\t\t\tcalendarsStore.addCalendarObjectToCalendarMutation({\n\t\t\t\tcalendar: {\n\t\t\t\t\tid: newCalendarId,\n\t\t\t\t},\n\t\t\t\tcalendarObjectId: calendarObject.id,\n\t\t\t})\n\t\t\tfetchedTimeRangesStore.addCalendarObjectIdToAllTimeRangesOfCalendar({\n\t\t\t\tcalendarId: newCalendarId,\n\t\t\t\tcalendarObjectId: calendarObject.id,\n\t\t\t})\n\n\t\t\tcalendarsStore.deleteCalendarObjectFromCalendarMutation({\n\t\t\t\tcalendar: {\n\t\t\t\t\tid: oldCalendarId,\n\t\t\t\t},\n\t\t\t\tcalendarObjectId: oldCalendarObjectId,\n\t\t\t})\n\t\t\tfetchedTimeRangesStore.removeCalendarObjectIdFromAllTimeRangesOfCalendar({\n\t\t\t\tcalendarId: oldCalendarId,\n\t\t\t\tcalendarObjectId: oldCalendarObjectId,\n\t\t\t})\n\n\t\t\tthis.modificationCount++\n\t\t},\n\n\t\t/**\n\t\t * Updates a calendar-object\n\t\t *\n\t\t * @param {object} data destructuring object\n\t\t * @param {CalendarObject} data.calendarObject Calendar-object to delete\n\t\t * @return {Promise<void>}\n\t\t */\n\t\tasync updateCalendarObject({ calendarObject }) {\n\t\t\tconst fetchedTimeRangesStore = useFetchedTimeRangesStore()\n\t\t\tconst calendarsStore = useCalendarsStore()\n\n\t\t\tif (calendarObject.existsOnServer) {\n\t\t\t\tcalendarObject.dav.data = calendarObject.calendarComponent.toICS()\n\t\t\t\tawait calendarObject.dav.update()\n\n\t\t\t\tfetchedTimeRangesStore.addCalendarObjectIdToAllTimeRangesOfCalendar({\n\t\t\t\t\tcalendarId: calendarObject.calendarId,\n\t\t\t\t\tcalendarObjectId: calendarObject.id,\n\t\t\t\t})\n\t\t\t\tthis.modificationCount++\n\n\t\t\t\treturn\n\n\t\t\t\t// TODO - catch conflicts\n\t\t\t}\n\n\t\t\tconst calendar = calendarsStore.getCalendarById(calendarObject.calendarId)\n\t\t\tcalendarObject.dav = await calendar.dav.createVObject(calendarObject.calendarComponent.toICS())\n\t\t\tcalendarObject.existsOnServer = true\n\t\t\tthis.updateCalendarObjectIdMutation({ calendarObject })\n\n\t\t\tthis.appendCalendarObjectMutation({ calendarObject })\n\t\t\tcalendarsStore.addCalendarObjectToCalendarMutation({\n\t\t\t\tcalendar: {\n\t\t\t\t\tid: calendarObject.calendarId,\n\t\t\t\t},\n\t\t\t\tcalendarObjectId: calendarObject.id,\n\t\t\t})\n\t\t\tfetchedTimeRangesStore.addCalendarObjectIdToAllTimeRangesOfCalendar({\n\t\t\t\tcalendarId: calendarObject.calendarId,\n\t\t\t\tcalendarObjectId: calendarObject.id,\n\t\t\t})\n\t\t\tthis.resetCalendarObjectToDavMutation({ calendarObject })\n\t\t\tthis.modificationCount++\n\t\t},\n\n\t\t/**\n\t\t * Creates a new calendar-object from an recurrence-exception fork\n\t\t *\n\t\t * @param {object} data destructuring object\n\t\t * @param {EventComponent} data.eventComponent EventComponent to store\n\t\t * @param {string} data.calendarId The calendar-id to store it in\n\t\t * @return {Promise<void>}\n\t\t */\n\t\tasync createCalendarObjectFromFork({ eventComponent, calendarId }) {\n\t\t\tconst calendarsStore = useCalendarsStore()\n\t\t\tconst fetchedTimeRangesStore = useFetchedTimeRangesStore()\n\n\t\t\tconst calendar = calendarsStore.getCalendarById(calendarId)\n\t\t\tconst calendarObject = mapCalendarJsToCalendarObject(eventComponent.root, calendar.id)\n\n\t\t\tcalendarObject.dav = await calendar.dav.createVObject(calendarObject.calendarComponent.toICS())\n\t\t\tcalendarObject.existsOnServer = true\n\t\t\tthis.updateCalendarObjectIdMutation({ calendarObject })\n\n\t\t\tthis.appendCalendarObjectMutation({ calendarObject })\n\t\t\tcalendarsStore.addCalendarObjectToCalendarMutation({\n\t\t\t\tcalendar: {\n\t\t\t\t\tid: calendarObject.calendarId,\n\t\t\t\t},\n\t\t\t\tcalendarObjectId: calendarObject.id,\n\t\t\t})\n\t\t\tfetchedTimeRangesStore.addCalendarObjectIdToAllTimeRangesOfCalendar({\n\t\t\t\tcalendarId: calendar.id,\n\t\t\t\tcalendarObjectId: calendarObject.id,\n\t\t\t})\n\t\t\tthis.modificationCount++\n\t\t},\n\n\t\t/**\n\t\t * Deletes a calendar-object\n\t\t *\n\t\t * @param {object} data destructuring object\n\t\t * @param {CalendarObject} data.calendarObject Calendar-object to delete\n\t\t * @return {Promise<void>}\n\t\t */\n\t\tasync deleteCalendarObject({ calendarObject }) {\n\t\t\tconst calendarsStore = useCalendarsStore()\n\t\t\tconst fetchedTimeRangesStore = useFetchedTimeRangesStore()\n\n\t\t\t// If this calendar-object was not created on the server yet,\n\t\t\t// no need to send requests to the server\n\t\t\tif (calendarObject.existsOnServer) {\n\t\t\t\tawait calendarObject.dav.delete()\n\t\t\t}\n\n\t\t\t/// TODO: delete this.calendarObjects[calendarObject.id]\n\t\t\tVue.delete(this.calendarObjects, calendarObject.id)\n\t\t\tcalendarsStore.deleteCalendarObjectFromCalendarMutation({\n\t\t\t\tcalendar: {\n\t\t\t\t\tid: calendarObject.calendarId,\n\t\t\t\t},\n\t\t\t\tcalendarObjectId: calendarObject.id,\n\t\t\t})\n\t\t\tfetchedTimeRangesStore.removeCalendarObjectIdFromAnyTimeRange({\n\t\t\t\tcalendarObjectId: calendarObject.id,\n\t\t\t})\n\n\t\t\tthis.modificationCount++\n\t\t},\n\n\t\t/**\n\t\t * Creates a new calendar object based on start, end, timezone and isAllDay\n\t\t *\n\t\t * @param {object} data destructuring object\n\t\t * @param {number} data.start Timestamp for start of new event\n\t\t * @param {number} data.end Timestamp for end of new event\n\t\t * @param {string} data.timezoneId asd\n\t\t * @param {boolean} data.isAllDay foo\n\t\t * @return {Promise<CalendarObject>}\n\t\t */\n\t\tcreateNewEvent({ start, end, timezoneId, isAllDay }) {\n\t\t\tconst calendarsStore = useCalendarsStore()\n\t\t\tconst timezoneManager = getTimezoneManager()\n\t\t\tconst timezone = timezoneManager.getTimezoneForId(timezoneId)\n\n\t\t\tconst startDate = new Date(start * 1000)\n\t\t\tconst endDate = new Date(end * 1000)\n\n\t\t\tconst startDateTime = DateTimeValue\n\t\t\t\t.fromJSDate(startDate, true)\n\t\t\t\t.getInTimezone(timezone)\n\t\t\tconst endDateTime = DateTimeValue\n\t\t\t\t.fromJSDate(endDate, true)\n\t\t\t\t.getInTimezone(timezone)\n\n\t\t\tif (isAllDay) {\n\t\t\t\tstartDateTime.isDate = true\n\t\t\t\tendDateTime.isDate = true\n\t\t\t}\n\n\t\t\tconst calendar = createEvent(startDateTime, endDateTime)\n\t\t\tfor (const vObject of calendar.getVObjectIterator()) {\n\t\t\t\tvObject.undirtify()\n\t\t\t}\n\n\t\t\tconst firstCalendar = calendarsStore.sortedCalendars[0].id\n\t\t\treturn Promise.resolve(mapCalendarJsToCalendarObject(calendar, firstCalendar))\n\t\t},\n\n\t\t/**\n\t\t * Updates the time of the new calendar object\n\t\t *\n\t\t * @param {object} data destructuring object\n\t\t * @param {CalendarObject} data.calendarObjectInstance Calendar-object to\n\t\t * @param {number} data.start Timestamp for start of new event\n\t\t * @param {number} data.end Timestamp for end of new event\n\t\t * @param {string} data.timezoneId asd\n\t\t * @param {boolean} data.isAllDay foo\n\t\t */\n\t\tupdateTimeOfNewEvent({ calendarObjectInstance, start, end, timezoneId, isAllDay }) {\n\t\t\tconst calendarObjectInstanceStore = useCalendarObjectInstanceStore()\n\t\t\tconst isDirty = calendarObjectInstanceStore.calendarObjectInstance.eventComponent.isDirty()\n\t\t\tconst startDate = new Date(start * 1000)\n\t\t\tconst endDate = new Date(end * 1000)\n\n\t\t\tif (calendarObjectInstance.isAllDay !== isAllDay) {\n\t\t\t\tcalendarObjectInstanceStore.toggleAllDayMutation({ calendarObjectInstance })\n\t\t\t}\n\n\t\t\tcalendarObjectInstanceStore.changeStartTimezone({\n\t\t\t\tcalendarObjectInstance,\n\t\t\t\tstartTimezone: timezoneId,\n\t\t\t})\n\t\t\tcalendarObjectInstanceStore.changeEndTimezone({\n\t\t\t\tcalendarObjectInstance,\n\t\t\t\tendTimezone: timezoneId,\n\t\t\t})\n\n\t\t\tcalendarObjectInstanceStore.changeStartDateMutation({\n\t\t\t\tcalendarObjectInstance,\n\t\t\t\tstartDate,\n\t\t\t})\n\n\t\t\tif (isAllDay) {\n\t\t\t\t// The full-calendar end date is exclusive, but the end-date\n\t\t\t\t// that changeEndDate expects is inclusive, so we have to deduct one day.\n\t\t\t\tcalendarObjectInstanceStore.changeEndDateMutation({\n\t\t\t\t\tcalendarObjectInstance,\n\t\t\t\t\tendDate: new Date(endDate.getTime() - 24 * 60 * 60 * 1000),\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tcalendarObjectInstanceStore.changeEndDateMutation({\n\t\t\t\t\tcalendarObjectInstance,\n\t\t\t\t\tendDate,\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tif (!isDirty) {\n\t\t\t\tcalendarObjectInstance.eventComponent.undirtify()\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Adds an array of calendar-objects to the store or update them if they already exist\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object[]} data.calendarObjects Calendar-objects to add\n\t\t */\n\t\tappendOrUpdateCalendarObjectsMutation({ calendarObjects = [] }) {\n\t\t\tfor (const calendarObject of calendarObjects) {\n\t\t\t\t/// TODO this.calendarObjects[calendarObject.id] = calendarObject\n\t\t\t\tVue.set(this.calendarObjects, calendarObject.id, calendarObject)\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Adds one calendar-object to the store\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.calendarObject Calendar-object to add\n\t\t */\n\t\tappendCalendarObjectMutation({ calendarObject }) {\n\t\t\tif (!this.calendarObjects[calendarObject.id]) {\n\t\t\t\t/// TODO this.calendarObjects[calendarObject.id] = calendarObject\n\t\t\t\tVue.set(this.calendarObjects, calendarObject.id, calendarObject)\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Updates a calendar-object id\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.calendarObject Calendar-object to update\n\t\t */\n\t\tupdateCalendarObjectIdMutation({ calendarObject }) {\n\t\t\tif (calendarObject.dav === null) {\n\t\t\t\tcalendarObject.id = null\n\t\t\t} else {\n\t\t\t\tcalendarObject.id = btoa(calendarObject.dav.url)\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Resets a calendar-object to its original server state\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.calendarObject Calendar-object to reset\n\t\t */\n\t\tresetCalendarObjectToDavMutation({ calendarObject }) {\n\t\t\tcalendarObject = this.calendarObjects[calendarObject.id]\n\n\t\t\t// If this object does not exist on the server yet, there is nothing to do\n\t\t\tif (!calendarObject || !calendarObject.existsOnServer) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst parserManager = getParserManager()\n\t\t\tconst parser = parserManager.getParserForFileType('text/calendar')\n\t\t\tparser.parse(calendarObject.dav.data)\n\n\t\t\tconst itemIterator = parser.getItemIterator()\n\t\t\tconst firstVCalendar = itemIterator.next().value\n\t\t\tif (firstVCalendar) {\n\t\t\t\tcalendarObject.calendarComponent = firstVCalendar\n\t\t\t}\n\t\t},\n\t},\n})\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport {\n\tcreateCalendar,\n\tcreateSubscription,\n\tfindAll,\n\tfindAllDeletedCalendars,\n\tfindPublicCalendarsByTokens,\n} from '../services/caldavService.js'\nimport { mapCDavObjectToCalendarObject } from '../models/calendarObject.js'\nimport { dateFactory, getUnixTimestampFromDate } from '../utils/date.js'\nimport { getDefaultCalendarObject, mapDavCollectionToCalendar } from '../models/calendar.js'\nimport pLimit from 'p-limit'\nimport { uidToHexColor } from '../utils/color.js'\nimport { translate as t } from '@nextcloud/l10n'\nimport getTimezoneManager from '../services/timezoneDataProviderService.js'\nimport { CalendarComponent, TimezoneComponent } from '@nextcloud/calendar-js'\nimport { Timezone } from '@nextcloud/timezones'\nimport {\n\tCALDAV_BIRTHDAY_CALENDAR,\n\tCALDAV_PERSONAL_CALENDAR,\n\tIMPORT_STAGE_IMPORTING,\n\tIMPORT_STAGE_PROCESSING,\n} from '../models/consts.js'\nimport { showError } from '@nextcloud/dialogs'\nimport useImportStateStore from './importState.js'\nimport useImportFilesStore from './importFiles.js'\nimport useSettingsStore from './settings.js'\nimport useFetchedTimeRangesStore from './fetchedTimeRanges.js'\nimport usePrincipalsStore from './principals.js'\nimport useCalendarObjectsStore from './calendarObjects.js'\n\nimport { defineStore } from 'pinia'\nimport Vue from 'vue'\n\nexport default defineStore('calendars', {\n\tstate: () => {\n\t\treturn {\n\t\t\tcalendars: [],\n\t\t\ttrashBin: undefined,\n\t\t\tscheduleInbox: undefined,\n\t\t\tdeletedCalendars: [],\n\t\t\tdeletedCalendarObjects: [],\n\t\t\tcalendarsById: {},\n\t\t\tinitialCalendarsLoaded: false,\n\t\t\teditCalendarModal: undefined,\n\t\t\tsyncTokens: new Map(),\n\t\t}\n\t},\n\tgetters: {\n\t\t/**\n\t\t * List of sorted calendars and subscriptions\n\t\t *\n\t\t * @param {object} state the store data\n\t\t * @param {object} store the store\n\t\t * @return {Array}\n\t\t */\n\t\tsortedCalendarsSubscriptions(state) {\n\t\t\tconst settingsStore = useSettingsStore()\n\n\t\t\treturn state.calendars\n\t\t\t\t.filter(calendar => calendar.supportsEvents || (settingsStore.showTasks && calendar.supportsTasks))\n\t\t\t\t.sort((a, b) => a.order - b.order)\n\t\t},\n\n\t\t/**\n\t\t * List of sorted writable calendars\n\t\t *\n\t\t * @param {object} state the store data\n\t\t * @return {Array}\n\t\t */\n\t\tsortedCalendars(state) {\n\t\t\treturn state.calendars\n\t\t\t\t.filter(calendar => calendar.supportsEvents)\n\t\t\t\t.filter(calendar => !calendar.readOnly)\n\t\t\t\t.sort((a, b) => a.order - b.order)\n\t\t},\n\n\t\t/**\n\t\t * List of sorted all calendars\n\t\t *\n\t\t * @param {object} state the store data\n\t\t * @return {Array}\n\t\t */\n\t\tsortedCalendarsAll(state) {\n\t\t\treturn state.calendars\n\t\t\t\t.filter(calendar => calendar.supportsEvents)\n\t\t\t\t.sort((a, b) => a.order - b.order)\n\t\t},\n\n\t\t/**\n\t\t * List of sorted calendars owned by the principal\n\t\t *\n\t\t * @param {object} state the store data\n\t\t * @return {Array}\n\t\t */\n\t\townSortedCalendars(state) {\n\t\t\treturn state.calendars\n\t\t\t\t.filter(calendar => calendar.supportsEvents)\n\t\t\t\t.filter(calendar => !calendar.readOnly)\n\t\t\t\t.filter(calendar => !calendar.isSharedWithMe)\n\t\t\t\t.sort((a, b) => a.order - b.order)\n\t\t},\n\n\t\thasTrashBin(state) {\n\t\t\treturn state.trashBin !== undefined && state.trashBin.retentionDuration !== 0\n\t\t},\n\n\t\t/**\n\t\t * List of deleted sorted calendars\n\t\t *\n\t\t * @param {object} state the store data\n\t\t * @return {Array}\n\t\t */\n\t\tsortedDeletedCalendars(state) {\n\t\t\treturn state.deletedCalendars\n\t\t\t\t.sort((a, b) => a.deletedAt - b.deletedAt)\n\t\t},\n\n\t\t/**\n\t\t * List of deleted calendars objects\n\t\t *\n\t\t * @param {object} state the store data\n\t\t * @return {Array}\n\t\t */\n\t\tallDeletedCalendarObjects(state) {\n\t\t\tconst calendarUriMap = {}\n\t\t\tstate.calendars.forEach(calendar => {\n\t\t\t\tconst withoutTrail = calendar.url.replace(/\\/$/, '')\n\t\t\t\tconst uri = withoutTrail.slice(withoutTrail.lastIndexOf('/') + 1)\n\t\t\t\tcalendarUriMap[uri] = calendar\n\t\t\t})\n\n\t\t\treturn state.deletedCalendarObjects.map(obj => ({\n\t\t\t\tcalendar: calendarUriMap[obj.dav._props['{http://nextcloud.com/ns}calendar-uri']],\n\t\t\t\t...obj,\n\t\t\t}))\n\t\t},\n\n\t\t/**\n\t\t * List of sorted subscriptions\n\t\t *\n\t\t * @param {object} state the store data\n\t\t * @return {Array}\n\t\t */\n\t\tsortedSubscriptions(state) {\n\t\t\treturn state.calendars\n\t\t\t\t.filter(calendar => calendar.supportsEvents)\n\t\t\t\t.filter(calendar => calendar.readOnly)\n\t\t\t\t.sort((a, b) => a.order - b.order)\n\t\t},\n\n\t\t/**\n\t\t * List of enabled calendars and subscriptions\n\t\t *\n\t\t * @param {object} state the store data\n\t\t * @return {Array}\n\t\t */\n\t\tenabledCalendars(state) {\n\t\t\tconst settingsStore = useSettingsStore()\n\n\t\t\treturn state.calendars\n\t\t\t\t.filter(calendar => calendar.supportsEvents || (settingsStore.showTasks && calendar.supportsTasks))\n\t\t\t\t.filter(calendar => calendar.enabled)\n\t\t},\n\n\t\t/**\n\t\t * Gets a calendar by its Id\n\t\t *\n\t\t * @param {object} state the store data\n\t\t * @return {function({String}): {Object}}\n\t\t */\n\t\tgetCalendarById: (state) => (calendarId) => state.calendarsById[calendarId],\n\n\t\t/**\n\t\t * Gets a calendar by its url\n\t\t *\n\t\t * @param {object} state the store data\n\t\t * @return {function({String}): {Object}}\n\t\t */\n\t\tgetCalendarByUrl: (state) => (url) => state.calendars.find((calendar) => calendar.url === url),\n\n\t\t/**\n\t\t * Gets the contact's birthday calendar or null\n\t\t *\n\t\t * @param {object} state the store data\n\t\t * @return {object | null}\n\t\t */\n\t\tgetBirthdayCalendar: (state) => {\n\t\t\tfor (const calendar of state.calendars) {\n\t\t\t\tconst url = calendar.url.slice(0, -1)\n\t\t\t\tconst lastSlash = url.lastIndexOf('/')\n\t\t\t\tconst uri = url.slice(lastSlash + 1)\n\n\t\t\t\tif (uri === CALDAV_BIRTHDAY_CALENDAR) {\n\t\t\t\t\treturn calendar\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null\n\t\t},\n\n\t\t/**\n\t\t * Gets the personal calendar's color or null\n\t\t *\n\t\t * @param {object} state the store data\n\t\t * @return {object | null}\n\t\t */\n\t\tgetPersonalCalendarColor: (state) => {\n\t\t\tfor (const calendar of state.calendars) {\n\t\t\t\tconst url = calendar.url.slice(0, -1)\n\t\t\t\tconst lastSlash = url.lastIndexOf('/')\n\t\t\t\tconst uri = url.slice(lastSlash + 1)\n\t\t\t\tif (uri === CALDAV_PERSONAL_CALENDAR) {\n\t\t\t\t\treturn calendar.color\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null\n\t\t},\n\n\t\t/**\n\t\t * @return {function({Boolean}, {Boolean}, {Boolean}): {Object}[]}\n\t\t */\n\t\tsortedCalendarFilteredByComponents() {\n\t\t\treturn (vevent, vjournal, vtodo) => {\n\t\t\t\treturn this.sortedCalendars.filter((calendar) => {\n\t\t\t\t\tif (vevent && !calendar.supportsEvents) {\n\t\t\t\t\t\treturn false\n\t\t\t\t\t}\n\n\t\t\t\t\tif (vjournal && !calendar.supportsJournals) {\n\t\t\t\t\t\treturn false\n\t\t\t\t\t}\n\n\t\t\t\t\tif (vtodo && !calendar.supportsTasks) {\n\t\t\t\t\t\treturn false\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Get the current sync token of a calendar or undefined it the calendar is not present\n\t\t *\n\t\t * @param {object} state The pinia state object\n\t\t * @return {function({id: string}): string | undefined}\n\t\t */\n\t\tgetCalendarSyncToken: (state) => (calendar) => {\n\t\t\tconst existingCalendar = state.calendarsById[calendar.id]\n\t\t\tif (!existingCalendar) {\n\t\t\t\treturn undefined\n\t\t\t}\n\n\t\t\treturn state.syncTokens.get(calendar.id) ?? existingCalendar.dav.syncToken\n\t\t},\n\t},\n\tactions: {\n\t\t/**\n\t\t * Retrieve and commit calendars and other collections\n\t\t *\n\t\t * @return {Promise<object>} the results\n\t\t */\n\t\tasync loadCollections() {\n\t\t\tconst principalsStore = usePrincipalsStore()\n\t\t\tconst { calendars, trashBins, scheduleInboxes, subscriptions } = await findAll()\n\t\t\tconsole.info('calendar home scanned', calendars, trashBins, subscriptions)\n\t\t\tcalendars.map((calendar) => mapDavCollectionToCalendar(calendar, principalsStore.getCurrentUserPrincipal)).forEach(calendar => {\n\t\t\t\tthis.addCalendarMutation({ calendar })\n\t\t\t})\n\t\t\tif (trashBins.length) {\n\t\t\t\tthis.trashBin = trashBins[0]\n\t\t\t}\n\t\t\tif (scheduleInboxes.length) {\n\t\t\t\tthis.scheduleInbox = scheduleInboxes[0]\n\t\t\t}\n\n\t\t\tthis.initialCalendarsLoaded = true\n\t\t\treturn {\n\t\t\t\tcalendars: this.calendars,\n\t\t\t\ttrashBin: this.trashBin,\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Retrieve and commit deleted calendars\n\t\t *\n\t\t * @return {Promise<Array>} the calendars\n\t\t */\n\t\tasync loadDeletedCalendars() {\n\t\t\tconst calendars = await findAllDeletedCalendars()\n\n\t\t\tcalendars.forEach(calendar => {\n\t\t\t\tif (this.deletedCalendars.some(c => c.url === calendar.url)) {\n\t\t\t\t\t// This calendar is already known\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tthis.deletedCalendars.push(calendar)\n\t\t\t})\n\t\t},\n\n\t\t/**\n\t\t * Retrieve and commit deleted calendar objects\n\t\t */\n\t\tasync loadDeletedCalendarObjects() {\n\t\t\tconst vobjects = await this.trashBin.findDeletedObjects() /// TODO what is this?\n\t\t\tconsole.info('vobjects loaded', { vobjects })\n\n\t\t\tvobjects.forEach(vobject => {\n\t\t\t\ttry {\n\t\t\t\t\tconst calendarObject = mapCDavObjectToCalendarObject(vobject, undefined)\n\n\t\t\t\t\tif (this.deletedCalendarObjects.some(c => c.uri === calendarObject.uri)) {\n\t\t\t\t\t\t// This vobject is already known\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\tthis.deletedCalendarObjects.push(calendarObject)\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('could not convert calendar object', vobject, error)\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\t\t/**\n\t\t * Retrieve and commit public calendars\n\t\t *\n\t\t * @param {object} data The data destructuring object\n\t\t * @param {string[]} data.tokens The tokens to load\n\t\t * @return {Promise<object[]>}\n\t\t */\n\t\tasync getPublicCalendars({ tokens }) {\n\t\t\tconst calendars = await findPublicCalendarsByTokens(tokens)\n\t\t\tconst calendarObjects = []\n\t\t\tfor (const davCalendar of calendars) {\n\t\t\t\tconst calendar = mapDavCollectionToCalendar(davCalendar)\n\t\t\t\tthis.addCalendarMutation({ calendar })\n\t\t\t\tcalendarObjects.push(calendar)\n\t\t\t}\n\n\t\t\tthis.initialCalendarsLoaded = true\n\t\t\treturn calendarObjects\n\t\t},\n\n\t\t/**\n\t\t * Append a new calendar to array of existing calendars\n\t\t *\n\t\t * @param {object} data destructuring object\n\t\t * @param {object} data.displayName The name of the new calendar\n\t\t * @param {object} data.color The color of the new calendar\n\t\t * @param {object} data.order The order of the new calendar\n\t\t * @param {string[]} data.components The supported components of the calendar\n\t\t * @param {string=} data.timezone The timezoneId\n\t\t * @return {Promise}\n\t\t */\n\t\tasync appendCalendar({ displayName, color, order, components = ['VEVENT'], timezone = null }) {\n\t\t\tconst principalsStore = usePrincipalsStore()\n\t\t\tconst settingsStore = useSettingsStore()\n\n\t\t\tif (timezone === null) {\n\t\t\t\ttimezone = settingsStore.getResolvedTimezone\n\t\t\t}\n\n\t\t\tlet timezoneIcs = null\n\t\t\tconst timezoneObject = getTimezoneManager().getTimezoneForId(timezone)\n\t\t\tif (timezoneObject !== Timezone.utc && timezoneObject !== Timezone.floating) {\n\t\t\t\tconst calendar = CalendarComponent.fromEmpty()\n\t\t\t\tcalendar.addComponent(TimezoneComponent.fromICALJs(timezoneObject.toICALJs()))\n\t\t\t\ttimezoneIcs = calendar.toICS(false)\n\t\t\t}\n\n\t\t\tconst response = await createCalendar(displayName, color, components, order, timezoneIcs)\n\t\t\tconst calendar = mapDavCollectionToCalendar(response, principalsStore.getCurrentUserPrincipal)\n\t\t\tthis.addCalendarMutation({ calendar })\n\t\t},\n\n\t\t/**\n\t\t * Append a new subscription to array of existing calendars\n\t\t *\n\t\t * @param {object} data destructuring object\n\t\t * @param {string} data.displayName Name of new subscription\n\t\t * @param {string} data.color Color of new subscription\n\t\t * @param {string} data.order Order of new subscription\n\t\t * @param {string} data.source Source of new subscription\n\t\t * @return {Promise}\n\t\t */\n\t\tasync appendSubscription({ displayName, color, order, source }) {\n\t\t\tconst principalsStore = usePrincipalsStore()\n\n\t\t\tconst response = await createSubscription(displayName, color, source, order)\n\t\t\tconst calendar = mapDavCollectionToCalendar(response, principalsStore.getCurrentUserPrincipal)\n\t\t\tthis.addCalendarMutation({ calendar })\n\t\t},\n\n\t\t/**\n\t\t * Delete a calendar\n\t\t *\n\t\t * @param {object} data destructuring object\n\t\t * @param {object} data.calendar the calendar to delete\n\t\t * @return {Promise}\n\t\t */\n\t\tasync deleteCalendar({ calendar }) {\n\t\t\tawait calendar.dav.delete()\n\n\t\t\tthis.calendars.splice(this.calendars.indexOf(calendar), 1)\n\t\t\t/// TODO this.calendarsById.delete(calendar.id)\n\t\t\tVue.delete(this.calendarsById, calendar.id)\n\t\t\tthis.syncTokens.delete(calendar.id)\n\t\t},\n\n\t\t/**\n\t\t * Delete a calendar in the trash bin\n\t\t *\n\t\t * @param {object} data destructuring object\n\t\t * @param {object} data.calendar the calendar to delete\n\t\t * @return {Promise}\n\t\t */\n\t\tasync deleteCalendarPermanently({ calendar }) {\n\t\t\tawait calendar.delete({\n\t\t\t\t'X-NC-CalDAV-No-Trashbin': 1,\n\t\t\t})\n\n\t\t\tthis.deletedCalendars = this.deletedCalendars.filter(c => c !== calendar)\n\t\t},\n\n\t\tdeleteCalendarAfterTimeout({ calendar, countdown = 7 }) {\n\t\t\t/// TODO this.calendarsById[calendar.id].countdown = countdown\n\t\t\tVue.set(this.calendarsById[calendar.id], 'countdown', countdown)\n\n\t\t\tconst deleteInterval = setInterval(() => {\n\t\t\t\tcountdown--\n\n\t\t\t\tif (countdown < 0) {\n\t\t\t\t\tcountdown = 0\n\t\t\t\t}\n\n\t\t\t\t/// TODO this.calendarsById[calendar.id].countdown = countdown\n\t\t\t\tVue.set(this.calendarsById[calendar.id], 'countdown', countdown)\n\t\t\t}, 1000)\n\t\t\tconst deleteTimeout = setTimeout(async () => {\n\t\t\t\ttry {\n\t\t\t\t\tawait this.deleteCalendar({ calendar })\n\t\t\t\t} catch (error) {\n\t\t\t\t\tshowError(t('calendar', 'An error occurred, unable to delete the calendar.'))\n\t\t\t\t\tconsole.error(error)\n\t\t\t\t} finally {\n\t\t\t\t\tclearInterval(deleteInterval)\n\t\t\t\t}\n\t\t\t}, 7000)\n\t\t\t/// TODO this.calendarsById[calendar.id].deleteInterval = deleteInterval\n\t\t\t/// TODO this.calendarsById[calendar.id].deleteTimeout = deleteTimeout\n\t\t\tVue.set(this.calendarsById[calendar.id], 'deleteInterval', deleteInterval)\n\t\t\tVue.set(this.calendarsById[calendar.id], 'deleteTimeout', deleteTimeout)\n\t\t},\n\n\t\tcancelCalendarDeletion({ calendar }) {\n\t\t\tif (calendar.deleteInterval) clearInterval(calendar.deleteInterval)\n\t\t\tif (calendar.deleteTimeout) clearTimeout(calendar.deleteTimeout)\n\n\t\t\tthis.calendarsById[calendar.id].deleteInterval = undefined\n\t\t\tthis.calendarsById[calendar.id].deleteTimeout = undefined\n\t\t},\n\n\t\tasync restoreCalendar({ calendar }) {\n\t\t\tawait this.trashBin.restore(calendar.url)\n\n\t\t\tthis.deletedCalendars = this.deletedCalendars.filter(c => c !== calendar)\n\t\t},\n\n\t\tasync restoreCalendarObject({ vobject }) {\n\t\t\tconst fetchedTimeRangesStore = useFetchedTimeRangesStore()\n\t\t\tconst calendarObjectsStore = useCalendarObjectsStore()\n\t\t\tawait this.trashBin.restore(vobject.uri)\n\n\t\t\t// Clean up the data locally\n\t\t\tthis.deletedCalendarObjects = this.deletedCalendarObjects.filter(vo => vo.id !== vobject.id)\n\n\t\t\t// Delete cached time range that includes the restored event\n\t\t\tconst calendarObject = mapCDavObjectToCalendarObject(vobject.dav, undefined)\n\t\t\tconst component = calendarObject.calendarComponent.getFirstComponent(vobject.objectType)\n\t\t\tconst timeRange = fetchedTimeRangesStore.getTimeRangeForCalendarCoveringRange(\n\t\t\t\tvobject.calendar.id,\n\t\t\t\tcomponent.startDate?.unixTime,\n\t\t\t\tcomponent.endDate?.unixTime,\n\t\t\t)\n\t\t\tif (timeRange) {\n\t\t\t\tthis.deleteFetchedTimeRangeFromCalendarMutation({\n\t\t\t\t\tcalendar: vobject.calendar,\n\t\t\t\t\tfetchedTimeRangeId: timeRange.id,\n\t\t\t\t},\n\t\t\t\t)\n\t\t\t\tfetchedTimeRangesStore.removeTimeRange({\n\t\t\t\t\ttimeRangeId: timeRange.id,\n\t\t\t\t})\n\t\t\t}\n\n\t\t\t// Trigger calendar refresh\n\t\t\tcalendarObjectsStore.modificationCount++\n\t\t},\n\n\t\t/**\n\t\t * Deletes a calendar-object permanently\n\t\t *\n\t\t * @param {object} data destructuring object\n\t\t * @param {vobject} data.vobject Calendar-object to delete\n\t\t * @return {Promise<void>}\n\t\t */\n\t\tasync deleteCalendarObjectPermanently({ vobject }) {\n\t\t\tawait vobject.dav.delete({\n\t\t\t\t'X-NC-CalDAV-No-Trashbin': 1,\n\t\t\t})\n\n\t\t\tthis.deletedCalendarObjects = this.deletedCalendarObjects.filter(vo => vo.id !== vobject.id)\n\t\t},\n\n\t\t/**\n\t\t * Toggle whether a calendar is enabled\n\t\t *\n\t\t * @param {object} data destructuring object\n\t\t * @param {object} data.calendar the calendar to modify\n\t\t * @param {boolean} data.updateDav whether to persist changes to the CalDAV backend (default: true)\n\t\t * @return {Promise}\n\t\t */\n\t\tasync toggleCalendarEnabled({ calendar, updateDav = true }) {\n\t\t\tthis.calendarsById[calendar.id].loading = true\n\t\t\tcalendar.dav.enabled = !calendar.dav.enabled\n\n\t\t\ttry {\n\t\t\t\tif (updateDav) {\n\t\t\t\t\tawait calendar.dav.update()\n\t\t\t\t}\n\t\t\t\tthis.calendarsById[calendar.id].loading = false\n\t\t\t\tthis.calendarsById[calendar.id].enabled = !this.calendarsById[calendar.id].enabled\n\t\t\t} catch (error) {\n\t\t\t\tthis.calendarsById[calendar.id].loading = false\n\t\t\t\tthrow error\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Rename a calendar\n\t\t *\n\t\t * @param {object} data destructuring object\n\t\t * @param {object} data.calendar the calendar to modify\n\t\t * @param {string} data.newName the new name of the calendar\n\t\t * @return {Promise}\n\t\t */\n\t\tasync renameCalendar({ calendar, newName }) {\n\t\t\tcalendar.dav.displayname = newName\n\n\t\t\tawait calendar.dav.update()\n\t\t\tthis.calendarsById[calendar.id].displayName = newName\n\t\t},\n\n\t\t/**\n\t\t * Change a calendar's color\n\t\t *\n\t\t * @param {object} data destructuring object\n\t\t * @param {object} data.calendar the calendar to modify\n\t\t * @param {string} data.newColor the new color of the calendar\n\t\t * @return {Promise}\n\t\t */\n\t\tasync changeCalendarColor({ calendar, newColor }) {\n\t\t\tcalendar.dav.color = newColor\n\n\t\t\tawait calendar.dav.update()\n\t\t\tthis.calendarsById[calendar.id].color = newColor\n\t\t},\n\n\t\t/**\n\t\t * Change a calendars transparency\n\t\t *\n\t\t * @param {object} data destructuring object\n\t\t * @param {object} data.calendar the calendar to modify\n\t\t * @param {string} data.transparency the new transparency\n\t\t * @return {Promise}\n\t\t */\n\t\tasync changeCalendarTransparency({ calendar, transparency }) {\n\t\t\tif (calendar.dav.transparency === transparency) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tcalendar.dav.transparency = transparency\n\n\t\t\tawait calendar.dav.update()\n\t\t\tthis.calendarsById[calendar.id].transparency = transparency\n\t\t},\n\n\t\t/**\n\t\t * Share calendar with User or Group\n\t\t *\n\t\t * @param {object} data destructuring object\n\t\t * @param {object} data.calendar the calendar to share\n\t\t * @param {string} data.user the userId\n\t\t * @param {string} data.displayName the displayName\n\t\t * @param {string} data.uri the sharing principalScheme uri\n\t\t * @param {boolean} data.isGroup is this a group?\n\t\t * @param {boolean} data.isCircle is this a circle?\n\t\t * @param {boolean} data.isRemoteUser is this a remote user (on a federated instance)?\n\t\t */\n\t\tasync shareCalendar({ calendar, user, displayName, uri, isGroup, isCircle, isRemoteUser }) {\n\t\t\t// Share calendar with entered group or user\n\t\t\tawait calendar.dav.share(uri)\n\t\t\tconst newSharee = {\n\t\t\t\tdisplayName,\n\t\t\t\tid: user,\n\t\t\t\twriteable: false,\n\t\t\t\tisGroup,\n\t\t\t\tisCircle,\n\t\t\t\tisRemoteUser,\n\t\t\t\turi,\n\t\t\t}\n\t\t\tthis.calendarsById[calendar.id].shares.push(newSharee)\n\t\t},\n\n\t\t/**\n\t\t * Toggle permissions of calendar Sharees writeable rights\n\t\t *\n\t\t * @param {object} data destructuring object\n\t\t * @param {object} data.calendar the calendar to change\n\t\t * @param {string} data.uri the sharing principalScheme uri\n\t\t */\n\t\tasync toggleCalendarShareWritable({ calendar, uri }) {\n\t\t\tconst sharee = calendar.shares.find(sharee => sharee.uri === uri)\n\t\t\tawait calendar.dav.share(uri, !sharee.writeable)\n\t\t\t/// TODO test this not sure what it does\n\t\t\tcalendar = this.calendars.find(search => search.id === calendar.id)\n\t\t\tsharee.writeable = !sharee.writeable\n\t\t},\n\n\t\t/**\n\t\t * Remove sharee from calendar\n\t\t *\n\t\t * @param {object} data destructuring object\n\t\t * @param {object} data.calendar the calendar to change\n\t\t * @param {string} data.uri the sharing principalScheme uri\n\t\t */\n\t\tasync unshareCalendar({ calendar, uri }) {\n\t\t\tawait calendar.dav.unshare(uri)\n\n\t\t\tcalendar = this.calendars.find(search => search.id === calendar.id)\n\t\t\tconst shareIndex = calendar.shares.findIndex(sharee => sharee.uri === uri)\n\t\t\tcalendar.shares.splice(shareIndex, 1)\n\t\t},\n\n\t\t/**\n\t\t * Publish a calendar\n\t\t *\n\t\t * @param {object} data destructuring object\n\t\t * @param {object} data.calendar the calendar to change\n\t\t * @return {Promise<void>}\n\t\t */\n\t\tasync publishCalendar({ calendar }) {\n\t\t\tawait calendar.dav.publish()\n\t\t\tconst publishURL = calendar.dav.publishURL\n\n\t\t\tcalendar = this.calendars.find(search => search.id === calendar.id)\n\t\t\tcalendar.publishURL = publishURL\n\t\t},\n\n\t\t/**\n\t\t * Unpublish a calendar\n\t\t *\n\t\t * @param {object} data destructuring object\n\t\t * @param {object} data.calendar the calendar to change\n\t\t * @return {Promise<void>}\n\t\t */\n\t\tasync unpublishCalendar({ calendar }) {\n\t\t\tawait calendar.dav.unpublish()\n\n\t\t\tcalendar = this.calendars.find(search => search.id === calendar.id)\n\t\t\tcalendar.publishURL = null\n\t\t},\n\n\t\t/**\n\t\t * Retrieve the events of the specified calendar\n\t\t * and commit the results\n\t\t *\n\t\t * @param {object} data destructuring object\n\t\t * @param {object} data.calendar the calendar to get events from\n\t\t * @param {Date} data.from the date to start querying events from\n\t\t * @param {Date} data.to the last date to query events from\n\t\t * @return {Promise<void>}\n\t\t */\n\t\tasync getEventsFromCalendarInTimeRange({ calendar, from, to }) {\n\t\t\tconst fetchedTimeRangesStore = useFetchedTimeRangesStore()\n\t\t\tconst settingsStore = useSettingsStore()\n\t\t\tconst calendarObjectsStore = useCalendarObjectsStore()\n\n\t\t\tthis.calendarsById[calendar.id].loading = true\n\t\t\tconst response = await calendar.dav.findByTypeInTimeRange('VEVENT', from, to)\n\t\t\tlet responseTodo = []\n\t\t\tif (settingsStore.showTasks) {\n\t\t\t\tresponseTodo = await calendar.dav.findByType('VTODO') // This is maybe too inefficient?\n\t\t\t}\n\t\t\tfetchedTimeRangesStore.addTimeRange({\n\t\t\t\tcalendarId: calendar.id,\n\t\t\t\tfrom: getUnixTimestampFromDate(from),\n\t\t\t\tto: getUnixTimestampFromDate(to),\n\t\t\t\tlastFetched: getUnixTimestampFromDate(dateFactory()),\n\t\t\t\tcalendarObjectIds: [],\n\t\t\t})\n\t\t\tconst insertId = fetchedTimeRangesStore.lastTimeRangeInsertId\n\n\t\t\tthis.calendarsById[calendar.id].fetchedTimeRanges.push(insertId)\n\n\t\t\tconst calendarObjects = []\n\t\t\tconst calendarObjectIds = []\n\t\t\tfor (const r of response.concat(responseTodo)) {\n\t\t\t\ttry {\n\t\t\t\t\tconst calendarObject = mapCDavObjectToCalendarObject(r, calendar.id)\n\t\t\t\t\tcalendarObjects.push(calendarObject)\n\t\t\t\t\tcalendarObjectIds.push(calendarObject.id)\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(`could not convert calendar object of calendar ${calendar.id}`, e, {\n\t\t\t\t\t\tresponse: r,\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcalendarObjectsStore.appendOrUpdateCalendarObjectsMutation({ calendarObjects })\n\t\t\tfor (const calendarObjectId of calendarObjectIds) {\n\t\t\t\tif (this.calendarsById[calendar.id].calendarObjects.indexOf(calendarObjectId) === -1) {\n\t\t\t\t\tthis.calendarsById[calendar.id].calendarObjects.push(calendarObjectId)\n\t\t\t\t}\n\t\t\t}\n\t\t\tfetchedTimeRangesStore.appendCalendarObjectIdsToTimeFrame({\n\t\t\t\ttimeRangeId: insertId,\n\t\t\t\tcalendarObjectIds,\n\t\t\t})\n\n\t\t\tthis.calendarsById[calendar.id].loading = false\n\t\t\treturn fetchedTimeRangesStore.lastTimeRangeInsertId\n\t\t},\n\n\t\t/**\n\t\t * Retrieve one object\n\t\t *\n\t\t * @param {object} data destructuring object\n\t\t * @param {string} data.objectId Id of the object to fetch\n\t\t * @return {Promise<CalendarObject>}\n\t\t */\n\t\tasync getEventByObjectId({ objectId }) {\n\t\t\tconst calendarObjectsStore = useCalendarObjectsStore()\n\t\t\t// TODO - we should still check if the calendar-object is up to date\n\t\t\t//  - Just send head and compare etags\n\t\t\tif (calendarObjectsStore.getCalendarObjectById(objectId)) {\n\t\t\t\treturn Promise.resolve(calendarObjectsStore.getCalendarObjectById(objectId))\n\t\t\t}\n\n\t\t\t// This might throw an exception, but we will leave it up to the methods\n\t\t\t// calling this action to properly handle it\n\t\t\tconst objectPath = atob(objectId)\n\t\t\tconst lastSlashIndex = objectPath.lastIndexOf('/')\n\t\t\tconst calendarPath = objectPath.slice(0, lastSlashIndex + 1)\n\t\t\tconst objectFileName = objectPath.slice(lastSlashIndex + 1)\n\n\t\t\tconst calendarId = btoa(calendarPath)\n\t\t\tif (!this.calendarsById[calendarId]) {\n\t\t\t\treturn Promise.reject(new Error(''))\n\t\t\t}\n\n\t\t\tconst calendar = this.calendarsById[calendarId]\n\t\t\tconst vObject = await calendar.dav.find(objectFileName)\n\t\t\tconst calendarObject = mapCDavObjectToCalendarObject(vObject, calendar.id)\n\t\t\tcalendarObjectsStore.appendCalendarObjectMutation({ calendarObject })\n\t\t\tthis.addCalendarObjectToCalendarMutation({\n\t\t\t\tcalendar: {\n\t\t\t\t\tid: calendarId,\n\t\t\t\t},\n\t\t\t\tcalendarObjectId: calendarObject.id,\n\t\t\t})\n\n\t\t\treturn calendarObject\n\t\t},\n\n\t\t/**\n\t\t * Import events into calendar\n\t\t *\n\t\t */\n\t\tasync importEventsIntoCalendar() {\n\t\t\tconst importStateStore = useImportStateStore()\n\t\t\tconst importFilesStore = useImportFilesStore()\n\t\t\tconst principalsStore = usePrincipalsStore()\n\t\t\tconst fetchedTimeRangesStore = useFetchedTimeRangesStore()\n\t\t\tconst calendarObjectsStore = useCalendarObjectsStore()\n\n\t\t\timportStateStore.stage = IMPORT_STAGE_IMPORTING\n\n\t\t\t// Create a copy\n\t\t\tconst files = importFilesStore.importFiles.slice()\n\n\t\t\tlet totalCount = 0\n\t\t\tfor (const file of files) {\n\t\t\t\ttotalCount += file.parser.getItemCount()\n\n\t\t\t\tconst calendarId = importFilesStore.importCalendarRelation[file.id]\n\t\t\t\tif (calendarId === 'new') {\n\t\t\t\t\tconst displayName = file.parser.getName() || t('calendar', 'Imported {filename}', {\n\t\t\t\t\t\tfilename: file.name,\n\t\t\t\t\t})\n\t\t\t\t\tconst color = file.parser.getColor() || uidToHexColor(displayName)\n\t\t\t\t\tconst components = []\n\t\t\t\t\tif (file.parser.containsVEvents()) {\n\t\t\t\t\t\tcomponents.push('VEVENT')\n\t\t\t\t\t}\n\t\t\t\t\tif (file.parser.containsVJournals()) {\n\t\t\t\t\t\tcomponents.push('VJOURNAL')\n\t\t\t\t\t}\n\t\t\t\t\tif (file.parser.containsVTodos()) {\n\t\t\t\t\t\tcomponents.push('VTODO')\n\t\t\t\t\t}\n\n\t\t\t\t\tconst response = await createCalendar(displayName, color, components, 0)\n\t\t\t\t\tconst calendar = mapDavCollectionToCalendar(response, principalsStore.getCurrentUserPrincipal)\n\t\t\t\t\tthis.addCalendarMutation({ calendar })\n\t\t\t\t\timportFilesStore.setCalendarForFileId({\n\t\t\t\t\t\tfileId: file.id,\n\t\t\t\t\t\tcalendarId: calendar.id,\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\n\t\t\timportStateStore.total = totalCount\n\n\t\t\tconst limit = pLimit(3)\n\t\t\tconst requests = []\n\n\t\t\tfor (const file of files) {\n\t\t\t\tconst calendarId = importFilesStore.importCalendarRelation[file.id]\n\t\t\t\tconst calendar = this.getCalendarById(calendarId)\n\n\t\t\t\tfor (const item of file.parser.getItemIterator()) {\n\t\t\t\t\trequests.push(limit(async () => {\n\t\t\t\t\t\tconst ics = item.toICS()\n\n\t\t\t\t\t\tlet davObject\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tdavObject = await calendar.dav.createVObject(ics)\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\timportStateStore.denied++\n\t\t\t\t\t\t\tconsole.error(error)\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst calendarObject = mapCDavObjectToCalendarObject(davObject, calendarId)\n\t\t\t\t\t\tcalendarObjectsStore.appendCalendarObjectMutation({ calendarObject })\n\t\t\t\t\t\tthis.addCalendarObjectToCalendarMutation({\n\t\t\t\t\t\t\tcalendar,\n\t\t\t\t\t\t\tcalendarObjectId: calendarObject.id,\n\t\t\t\t\t\t})\n\t\t\t\t\t\tfetchedTimeRangesStore.addCalendarObjectIdToAllTimeRangesOfCalendar({\n\t\t\t\t\t\t\tcalendarId: calendar.id,\n\t\t\t\t\t\t\tcalendarObjectId: calendarObject.id,\n\t\t\t\t\t\t})\n\t\t\t\t\t\timportStateStore.accepted++\n\t\t\t\t\t}))\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tawait Promise.all(requests)\n\t\t\timportStateStore.stage = IMPORT_STAGE_PROCESSING\n\t\t},\n\t\t/**\n\t\t *\n\t\t * @param {object} data The data destructuring object\n\t\t * @param {object} data.newOrder The object containing String => Number with the new order\n\t\t * @return {Promise<void>}\n\t\t */\n\t\tasync updateCalendarListOrder({ newOrder }) {\n\t\t\t// keep a record of the original order in case we need to do a rollback\n\n\t\t\tconst limit = pLimit(3)\n\t\t\tconst requests = []\n\t\t\tconst calendarsToUpdate = []\n\n\t\t\tfor (const key in newOrder) {\n\t\t\t\trequests.push(limit(async () => {\n\t\t\t\t\tconst calendar = this.calendarsById[key]\n\n\t\t\t\t\t// Do not update unless necessary\n\t\t\t\t\tif (calendar.dav.order === newOrder[key]) {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tcalendar.dav.order = newOrder[key]\n\n\t\t\t\t\tawait calendar.dav.update()\n\n\t\t\t\t\tcalendarsToUpdate.push({ calendar, newOrder: newOrder[key] })\n\t\t\t\t}))\n\t\t\t}\n\n\t\t\tawait Promise.all(requests)\n\n\t\t\tfor (const { calendar, newOrder } of calendarsToUpdate) {\n\t\t\t\tconsole.debug(calendar, newOrder)\n\t\t\t\tthis.calendarsById[calendar.id].order = newOrder\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Adds calendar into state\n\t\t *\n\t\t * @param {object} data destructuring object\n\t\t * @param {object} data.calendar the calendar to add\n\t\t */\n\t\taddCalendarMutation({ calendar }) {\n\t\t\tconst object = getDefaultCalendarObject(calendar)\n\t\t\tif (!this.calendars.some(existing => existing.id === object.id)) {\n\t\t\t\tthis.calendars.push(object)\n\t\t\t\tVue.set(this.calendars, 0, this.calendars[0]) /// TODO remove with vue 3\n\t\t\t}\n\t\t\t/// TODO this.calendarsById[object.id] = object\n\t\t\tVue.set(this.calendarsById, object.id, object)\n\t\t},\n\n\t\t/**\n\t\t * Removes fetched time-range from calendar\n\t\t *\n\t\t * @param {object} data destructuring object\n\t\t * @param {object} data.calendar The calendar to remove a time-range from\n\t\t * @param {number} data.fetchedTimeRangeId The time-range-id to remove\n\t\t */\n\t\tdeleteFetchedTimeRangeFromCalendarMutation({ calendar, fetchedTimeRangeId }) {\n\t\t\tconst index = this.calendarsById[calendar.id]?.fetchedTimeRanges.indexOf(fetchedTimeRangeId)\n\n\t\t\tif (index !== -1) {\n\t\t\t\tthis.calendarsById[calendar.id].fetchedTimeRanges.splice(index, 1)\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Adds calendar-object to calendar\n\t\t *\n\t\t * @param {object} data destructuring object\n\t\t * @param {object} data.calendar The calendar to append objects to\n\t\t * @param {string} data.calendarObjectId The calendar object id to append\n\t\t */\n\t\taddCalendarObjectToCalendarMutation({ calendar, calendarObjectId }) {\n\t\t\tif (this.calendarsById[calendar.id].calendarObjects.indexOf(calendarObjectId) === -1) {\n\t\t\t\tthis.calendarsById[calendar.id].calendarObjects.push(calendarObjectId)\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Removes calendar-object from calendar\n\t\t *\n\t\t * @param {object} data destructuring object\n\t\t * @param {object} data.calendar The calendar to delete objects from\n\t\t * @param {string} data.calendarObjectId The calendar object ids to delete\n\t\t */\n\t\tdeleteCalendarObjectFromCalendarMutation({ calendar, calendarObjectId }) {\n\t\t\tconst index = this.calendarsById[calendar.id].calendarObjects.indexOf(calendarObjectId)\n\n\t\t\tif (index !== -1) {\n\t\t\t\tthis.calendarsById[calendar.id].calendarObjects.slice(index, 1)\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Update the sync token of a given calendar locally\n\t\t *\n\t\t * @param {object} data destructuring object\n\t\t * @param {{id: string}} data.calendar Calendar from the store\n\t\t * @param {string} data.syncToken New sync token value\n\t\t */\n\t\tupdateCalendarSyncToken({ calendar, syncToken }) {\n\t\t\tif (!this.getCalendarById(calendar.id)) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.syncTokens.set(calendar.id, syncToken)\n\t\t},\n\t},\n})\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport { defineStore } from 'pinia'\nimport useCalendarObjectsStore from './calendarObjects.js'\nimport Vue from 'vue'\n\nexport default defineStore('fetchedTimeRanges', {\n\tstate: () => {\n\t\treturn {\n\t\t\tlastTimeRangeInsertId: -1,\n\t\t\tfetchedTimeRanges: [],\n\t\t\tfetchedTimeRangesById: {},\n\t\t}\n\t},\n\tgetters: {\n\t\t/**\n\t\t * Get all time-ranges for a calendar\n\t\t *\n\t\t * @param {object} state The Pinia state\n\t\t * @return {function({String}): {Object}[]}\n\t\t */\n\t\tgetAllTimeRangesForCalendar: (state) => (calendarId) =>\n\t\t\tstate.fetchedTimeRanges.filter(f => (f.calendarId === calendarId)),\n\n\t\t/**\n\t\t * Get time-range covering\n\t\t *\n\t\t * @param {object} state The Pinia state\n\t\t * @return {function({Number}, {Number}, {Number}): {Object}|false}\n\t\t */\n\t\tgetTimeRangeForCalendarCoveringRange: (state) => (calendarId, requestedFrom, requestedTo) => {\n\t\t\treturn state.fetchedTimeRanges.find(f => {\n\t\t\t\treturn f.calendarId === calendarId && f.from <= requestedFrom && f.to >= requestedTo\n\t\t\t})\n\t\t},\n\n\t\t/**\n\t\t * Get all time-ranges that have been last fetched before a given time\n\t\t *\n\t\t * @param {object} state The Pinia state\n\t\t * @return {function({Number}): {Object}[]}\n\t\t */\n\t\tgetAllTimeRangesOlderThan: (state) => (olderThan) =>\n\t\t\tstate.fetchedTimeRanges.filter(f => (f.lastFetched <= olderThan)),\n\n\t\t/**\n\t\t *\n\t\t * @param {object} state The Pinia state\n\t\t * @return {function({Number}): {CalendarObject}[]}\n\t\t */\n\t\tgetCalendarObjectsByTimeRangeId: (state) => (timeRangeId) => {\n\t\t\tconst calendarObjecstsStore = useCalendarObjectsStore()\n\t\t\tif (!state.fetchedTimeRangesById[timeRangeId]) {\n\t\t\t\treturn []\n\t\t\t}\n\n\t\t\treturn state.fetchedTimeRangesById[timeRangeId].calendarObjectIds.map((calendarObjectId) => {\n\t\t\t\treturn calendarObjecstsStore.getCalendarObjectById(calendarObjectId)\n\t\t\t})\n\t\t},\n\t},\n\tactions: {\n\t\t/**\n\t\t * Adds a fetched time-range to the state\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {string} data.calendarId Calendar-id which objects have been fetched\n\t\t * @param {number} data.from timestamp of start\n\t\t * @param {number} data.to timestamp of end\n\t\t * @param {number} data.lastFetched timestamp of last-fetched\n\t\t * @param {string[]} data.calendarObjectIds array of calendarObjectIds\n\t\t */\n\t\taddTimeRange({ calendarId, from, to, lastFetched, calendarObjectIds }) {\n\t\t\tconst fetchedTimeRange = {\n\t\t\t\tid: ++this.lastTimeRangeInsertId,\n\t\t\t\tcalendarId,\n\t\t\t\tfrom,\n\t\t\t\tto,\n\t\t\t\tlastFetched,\n\t\t\t\tcalendarObjectIds,\n\t\t\t}\n\n\t\t\tthis.fetchedTimeRanges.push(fetchedTimeRange)\n\t\t\t/// TODO this.fetchedTimeRangesById[fetchedTimeRange.id] = fetchedTimeRange\n\t\t\tVue.set(this.fetchedTimeRangesById, fetchedTimeRange.id, fetchedTimeRange)\n\t\t},\n\n\t\t/**\n\t\t * Removes a fetched time-range from the state\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {number} data.timeRangeId Id of time-range to remove\n\t\t */\n\t\tremoveTimeRange({ timeRangeId }) {\n\t\t\tVue.delete(this.fetchedTimeRangesById, timeRangeId)\n\t\t\tthis.fetchedTimeRanges = this.fetchedTimeRanges\n\t\t\t\t.filter((timeRange) => timeRange.id !== timeRangeId)\n\t\t},\n\n\t\t/**\n\t\t * Adds a calendar-object-id to an already fetched time-range\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {number} data.timeRangeId The id of the time-range\n\t\t * @param {string[]} data.calendarObjectIds The array of ids of the calendar-object to add\n\t\t */\n\t\tappendCalendarObjectIdsToTimeFrame({ timeRangeId, calendarObjectIds }) {\n\t\t\tfor (const calendarObjectId of calendarObjectIds) {\n\t\t\t\tif (this.fetchedTimeRangesById[timeRangeId].calendarObjectIds.indexOf(calendarObjectId) === -1) {\n\t\t\t\t\tthis.fetchedTimeRangesById[timeRangeId].calendarObjectIds.push(calendarObjectId)\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Adds a calendar-object-id to an already fetched time-range\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {number} data.timeRangeId The id of the time-range\n\t\t * @param {string} data.calendarObjectId The id of the calendar-object to add\n\t\t */\n\t\tappendCalendarObjectIdToTimeRange({ timeRangeId, calendarObjectId }) {\n\t\t\tthis.fetchedTimeRangesById[timeRangeId].calendarObjectIds.push(calendarObjectId)\n\t\t},\n\n\t\t/**\n\t\t * Removes a calendar-object-id from an already fetched time-range\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {number} data.timeRangeId The id of the timerange\n\t\t * @param {string} data.calendarObjectId The id of the calendar-object to remove\n\t\t */\n\t\tremoveCalendarObjectIdFromTimeRange({ timeRangeId, calendarObjectId }) {\n\t\t\tconst index = this.fetchedTimeRangesById[timeRangeId]\n\t\t\t\t.calendarObjectIds\n\t\t\t\t.indexOf(calendarObjectId)\n\t\t\tif (index !== -1) {\n\t\t\t\tthis.fetchedTimeRangesById[timeRangeId]\n\t\t\t\t\t.calendarObjectIds\n\t\t\t\t\t.splice(index, 1)\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Removes a calendar-object-id from any time-range it may occur in\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {string} data.calendarObjectId The id of the calendar-object to remove\n\t\t */\n\t\tremoveCalendarObjectIdFromAnyTimeRange({ calendarObjectId }) {\n\t\t\tfor (const timeRange of this.fetchedTimeRanges) {\n\t\t\t\tconst index = timeRange\n\t\t\t\t\t.calendarObjectIds\n\t\t\t\t\t.indexOf(calendarObjectId)\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\ttimeRange\n\t\t\t\t\t\t.calendarObjectIds\n\t\t\t\t\t\t.splice(index, 1)\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Adds a calendar-object-id to all time-ranges of a given caloendar\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {string} data.calendarObjectId The id of the calendar-object\n\t\t * @param {string} data.calendarId The id of the calendar\n\t\t */\n\t\taddCalendarObjectIdToAllTimeRangesOfCalendar({ calendarObjectId, calendarId }) {\n\t\t\tfor (const timeRange of this.fetchedTimeRanges) {\n\t\t\t\tif (timeRange.calendarId !== calendarId) {\n\t\t\t\t\tcontinue\n\t\t\t\t}\n\n\t\t\t\tif (timeRange.calendarObjectIds.indexOf(calendarObjectId) === -1) {\n\t\t\t\t\ttimeRange.calendarObjectIds.push(calendarObjectId)\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Removes a calendar-object-id to all time-ranges of a given calendar\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {string} data.calendarObjectId The id of the calendar-object\n\t\t * @param {string} data.calendarId The id of the calendar\n\t\t */\n\t\tremoveCalendarObjectIdFromAllTimeRangesOfCalendar({ calendarObjectId, calendarId }) {\n\t\t\tfor (const timeRange of this.fetchedTimeRanges) {\n\t\t\t\tif (timeRange.calendarId !== calendarId) {\n\t\t\t\t\tcontinue\n\t\t\t\t}\n\n\t\t\t\tconst index = timeRange.calendarObjectIds.indexOf(calendarObjectId)\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\ttimeRange.calendarObjectIds.splice(index, 1)\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * clear FetchedTimeRanges Store\n\t\t */\n\t\tclearFetchedTimeRanges() {\n\t\t\tthis.lastTimeRangeInsertId = -1\n\t\t\tthis.fetchedTimeRanges = []\n\t\t\tthis.fetchedTimeRangesById = {}\n\t\t},\n\t},\n})\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport { defineStore } from 'pinia'\nimport Vue from 'vue'\n\nexport default defineStore('importFiles', {\n\tstate: () => {\n\t\treturn {\n\t\t\tlastFileInsertId: -1,\n\t\t\timportFiles: [],\n\t\t\timportFilesById: {},\n\t\t\timportCalendarRelation: {},\n\t\t}\n\t},\n\tactions: {\n\t\t/**\n\t\t * Adds a file to the state\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {string} data.contents Contents of file\n\t\t * @param {number} data.lastModified Timestamp of last modification\n\t\t * @param {string} data.name Name of file\n\t\t * @param {AbstractParser} data.parser The parser\n\t\t * @param {number} data.size Size of file\n\t\t * @param {string} data.type mime-type of file\n\t\t */\n\t\taddFile({ contents, lastModified, name, parser, size, type }) {\n\t\t\tconst file = {\n\t\t\t\tid: ++this.lastFileInsertId,\n\t\t\t\tcontents,\n\t\t\t\tlastModified,\n\t\t\t\tname,\n\t\t\t\tparser,\n\t\t\t\tsize,\n\t\t\t\ttype,\n\t\t\t}\n\n\t\t\t// TODO: use this.importFiles.push(file) directly in Vue 3 (reactive by default)\n\t\t\tthis.importFiles = [...this.importFiles, file]\n\t\t\t/// TODO this.importFilesById[file.id] = file\n\t\t\tVue.set(this.importFilesById, file.id, file)\n\t\t},\n\n\t\t/**\n\t\t * Sets a calendar for the file\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {number} data.fileId Id of file to select calendar for\n\t\t * @param {string} data.calendarId Id of calendar to import file into\n\t\t */\n\t\tsetCalendarForFileId({ fileId, calendarId }) {\n\t\t\t// TODO: remove Vue.set when migrating to Vue 3 (reactive by default)\n\t\t\tVue.set(this.importCalendarRelation, fileId, calendarId)\n\t\t},\n\n\t\t/**\n\t\t * Removes all files from state\n\t\t */\n\t\tremoveAllFiles() {\n\t\t\t/// TODO this.importFiles = []\n\t\t\t/// TODO this.importFilesById = {}\n\t\t\t/// TODO this.importCalendarRelation = {}\n\n\t\t\tVue.set(this, 'importFiles', [])\n\t\t\tVue.set(this, 'importFilesById', {})\n\t\t\tVue.set(this, 'importCalendarRelation', {})\n\t\t},\n\t},\n})\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport { IMPORT_STAGE_DEFAULT } from '../models/consts.js'\nimport { defineStore } from 'pinia'\n\nexport default defineStore('importState', {\n\tstate: () => {\n\t\treturn {\n\t\t\ttotal: 0,\n\t\t\taccepted: 0,\n\t\t\tdenied: 0,\n\t\t\tstage: IMPORT_STAGE_DEFAULT,\n\t\t}\n\t},\n\tactions: {\n\t\t/**\n\t\t * Reset to the default state\n\t\t */\n\t\tresetState() {\n\t\t\tthis.total = 0\n\t\t\tthis.accepted = 0\n\t\t\tthis.denied = 0\n\t\t\tthis.stage = IMPORT_STAGE_DEFAULT\n\t\t},\n\t},\n})\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport {\n\tfindPrincipalByUrl,\n\tgetCurrentUserPrincipal,\n\tfindPrincipalsInCollection,\n} from '../services/caldavService.js'\nimport logger from '../utils/logger.js'\nimport {\n\tgetDefaultPrincipalObject,\n\tmapDavToPrincipal,\n} from '../models/principal.js'\nimport { defineStore } from 'pinia'\nimport Vue from 'vue'\nimport { generateRemoteUrl } from '@nextcloud/router'\n\nexport default defineStore('principals', {\n\tstate: () => {\n\t\treturn {\n\t\t\tprincipals: [],\n\t\t\tprincipalsById: {},\n\t\t\tcurrentUserPrincipal: null,\n\t\t}\n\t},\n\tgetters: {\n\t\t/**\n\t\t * Gets a principal object by its url\n\t\t *\n\t\t * @param {object} state the store data\n\t\t * @return {function({String}): {Object}}\n\t\t */\n\t\tgetPrincipalByUrl: (state) => (url) => state.principals.find((principal) => principal.url === url),\n\n\t\t/**\n\t\t * Gets a principal object by its id\n\t\t *\n\t\t * @param {object} state the store data\n\t\t * @return {function({String}): {Object}}\n\t\t */\n\t\tgetPrincipalById: (state) => (id) => state.principalsById[id],\n\n\t\t/**\n\t\t * Gets the principal object of the current-user-principal\n\t\t *\n\t\t * @param {object} state the store data\n\t\t * @return {{Object}}\n\t\t */\n\t\tgetCurrentUserPrincipal: (state) => state.principalsById[state.currentUserPrincipal],\n\n\t\t/**\n\t\t * Gets the email-address of the current-user-principal\n\t\t *\n\t\t * @param {object} state the store data\n\t\t * @return {string|undefined}\n\t\t */\n\t\tgetCurrentUserPrincipalEmail: (state) => state.principalsById[state.currentUserPrincipal]?.emailAddress,\n\n\t\t/**\n\t\t * Gets all room principals\n\t\t *\n\t\t * @param {object} state the store data\n\t\t * @return {object[]}\n\t\t */\n\t\tgetRoomPrincipals: (state) => state.principals.filter((principal) => principal.isCalendarRoom),\n\n\t\t/**\n\t\t * Gets all resource principals\n\t\t *\n\t\t * @param {object} state the store data\n\t\t * @return {object[]}\n\t\t */\n\t\tgetResourcePrincipals: (state) => state.principals.filter((principal) => principal.isCalendarResource),\n\t},\n\tactions: {\n\t\t/**\n\t\t * Fetches a principal from the DAV server and commits it to the state\n\t\t *\n\t\t * @param {string} url The URL of the principal\n\t\t * @return {Promise<void>}\n\t\t */\n\t\tasync fetchPrincipalByUrl({ url }) {\n\t\t\t// Don't refetch principals we already have\n\t\t\tif (this.getPrincipalByUrl(url)) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst principal = await findPrincipalByUrl(url)\n\t\t\tif (!principal) {\n\t\t\t\t// TODO - handle error\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.addPrincipalMutation({ principal: mapDavToPrincipal(principal) })\n\n\t\t},\n\n\t\t/**\n\t\t * Fetches all principals of all rooms and resources from the DAV server and commits it to the state\n\t\t *\n\t\t * @return {Promise<void>}\n\t\t */\n\t\tasync fetchRoomAndResourcePrincipals() {\n\t\t\tconst options = {\n\t\t\t\tenableCalDAVResourceBooking: true,\n\t\t\t}\n\t\t\tconst principalCollections = await Promise.all([\n\t\t\t\tfindPrincipalsInCollection(generateRemoteUrl('dav/principals/calendar-rooms/'), options),\n\t\t\t\tfindPrincipalsInCollection(generateRemoteUrl('dav/principals/calendar-resources/'), options),\n\t\t\t])\n\t\t\tfor (const principals of principalCollections) {\n\t\t\t\tif (!principals) {\n\t\t\t\t// TODO - handle error\n\t\t\t\t\tcontinue\n\t\t\t\t}\n\n\t\t\t\tlogger.debug('Fetched principals', { principals })\n\t\t\t\tfor (const principal of principals) {\n\t\t\t\t\tthis.addPrincipalMutation({\n\t\t\t\t\t\tprincipal: mapDavToPrincipal(principal),\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Fetches the current-user-principal\n\t\t *\n\t\t * @return {Promise<void>}\n\t\t */\n\t\tasync fetchCurrentUserPrincipal() {\n\t\t\tconst currentUserPrincipal = getCurrentUserPrincipal()\n\t\t\tif (!currentUserPrincipal) {\n\t\t\t\t// TODO - handle error\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst principal = mapDavToPrincipal(currentUserPrincipal)\n\t\t\tthis.addPrincipalMutation({ principal })\n\t\t\tthis.currentUserPrincipal = principal.id\n\t\t\tlogger.debug(`Current user principal is ${principal.url}`)\n\t\t},\n\n\t\t/**\n\t\t * Adds a principal to the state\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.principal The principal to add\n\t\t */\n\t\taddPrincipalMutation({ principal }) {\n\t\t\tconst object = getDefaultPrincipalObject(principal)\n\n\t\t\tif (this.principalsById[object.id]) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.principals.push(object)\n\t\t\t/// TODO this.principalsById[object.id] = object\n\t\t\tVue.set(this.principalsById, object.id, object)\n\t\t},\n\n\t\t/**\n\t\t * Changes the schedule-default-calendar-URL of a principal\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {object} data.principal The principal to modify\n\t\t * @param {string} data.scheduleDefaultCalendarUrl The new schedule-default-calendar-URL\n\t\t * @return {Promise<void>}\n\t\t */\n\t\tasync changePrincipalScheduleDefaultCalendarUrl({ principal, scheduleDefaultCalendarUrl }) {\n\t\t\tprincipal.dav.scheduleDefaultCalendarUrl = scheduleDefaultCalendarUrl\n\n\t\t\tawait principal.dav.update()\n\t\t\tVue.set(\n\t\t\t\tthis.principalsById[principal.id],\n\t\t\t\t'scheduleDefaultCalendarUrl',\n\t\t\t\tscheduleDefaultCalendarUrl,\n\t\t\t)\n\t\t},\n\t},\n})\n","/**\n * SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport { enableBirthdayCalendar } from '../services/caldavService.js'\nimport { mapDavCollectionToCalendar } from '../models/calendar.js'\nimport { detectTimezone } from '../services/timezoneDetectionService.js'\nimport { setConfig as setCalendarJsConfig } from '@nextcloud/calendar-js'\nimport { setConfig } from '../services/settings.js'\nimport { logInfo } from '../utils/logger.js'\nimport { defineStore } from 'pinia'\nimport getTimezoneManager from '../services/timezoneDataProviderService.js'\nimport * as AttachmentService from '../services/attachmentService.js'\nimport usePrincipalsStore from './principals.js'\nimport useFetchedTimeRangesStore from './fetchedTimeRanges.js'\nimport useCalendarsStore from './calendars.js'\nimport useTasksStore from './unscheduledTasks.js'\nimport useCalendarObjectsStore from './calendarObjects.js'\n\nexport default defineStore('settings', {\n\tstate: () => {\n\t\treturn {\n\t\t\t// env\n\t\t\tappVersion: null,\n\t\t\tfirstRun: null,\n\t\t\ttalkEnabled: false,\n\t\t\tdisableAppointments: false,\n\t\t\ttasksSidebar: true,\n\t\t\tpublicCalendars: null,\n\t\t\t// user-defined calendar settings\n\t\t\teventLimit: null,\n\t\t\tshowTasks: null,\n\t\t\tshowWeekends: null,\n\t\t\tshowWeekNumbers: null,\n\t\t\tskipPopover: null,\n\t\t\tslotDuration: null,\n\t\t\tdefaultReminder: null,\n\t\t\ttasksEnabled: false,\n\t\t\ttimezone: 'automatic',\n\t\t\thideEventExport: false,\n\t\t\tforceEventAlarmType: false,\n\t\t\tcanSubscribeLink: true,\n\t\t\tshowResources: true,\n\t\t\t// user-defined Nextcloud settings\n\t\t\tmomentLocale: 'en',\n\t\t\tattachmentsFolder: '/Calendar',\n\t\t\tattachmentsFolderCreated: false,\n\t\t}\n\t},\n\tgetters: {\n\t\t/**\n\t\t * Gets the resolved timezone.\n\t\t * If the timezone is set to automatic, it returns the user's current timezone\n\t\t * Otherwise, it returns the Olsen timezone stored\n\t\t *\n\t\t * @param {object} state The pinia state\n\t\t * @return {string}\n\t\t */\n\t\tgetResolvedTimezone: (state) => state.timezone === 'automatic'\n\t\t\t? detectTimezone()\n\t\t\t: state.timezone,\n\n\t\t/**\n\t\t * Gets the resolved timezone object.\n\t\t * Falls back to UTC if timezone is invalid.\n\t\t *\n\t\t * @return {object} The calendar-js timezone object\n\t\t */\n\t\tgetResolvedTimezoneObject() {\n\t\t\tconst timezone = this.getResolvedTimezone\n\t\t\tlet timezoneObject = getTimezoneManager().getTimezoneForId(timezone)\n\t\t\tif (!timezoneObject) {\n\t\t\t\ttimezoneObject = getTimezoneManager().getTimezoneForId('UTC')\n\t\t\t}\n\t\t\treturn timezoneObject\n\t\t},\n\t},\n\tactions: {\n\t\t/**\n\t\t * Updates the user's setting for visibility of birthday calendar\n\t\t *\n\t\t * @return {Promise<void>}\n\t\t */\n\t\tasync toggleBirthdayCalendarEnabled() {\n\t\t\tconst calendarsStore = useCalendarsStore()\n\t\t\tconst hasBirthdayCalendar = !!calendarsStore.getBirthdayCalendar\n\n\t\t\tif (hasBirthdayCalendar) {\n\t\t\t\tconst calendar = calendarsStore.getBirthdayCalendar\n\t\t\t\tawait calendarsStore.deleteCalendar({ calendar })\n\t\t\t} else {\n\t\t\t\tconst davCalendar = await enableBirthdayCalendar()\n\t\t\t\tconst calendar = mapDavCollectionToCalendar(davCalendar)\n\t\t\t\tcalendarsStore.addCalendarMutation({ calendar })\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Updates the user's setting for event limit\n\t\t *\n\t\t * @return {Promise<void>}\n\t\t */\n\t\tasync toggleEventLimitEnabled() {\n\t\t\tconst newState = !this.eventLimit\n\t\t\tconst value = newState ? 'yes' : 'no'\n\n\t\t\tawait setConfig('eventLimit', value)\n\t\t\tthis.eventLimit = !this.eventLimit\n\t\t},\n\n\t\t/**\n\t\t * Updates the user's setting for visibility of event popover\n\t\t *\n\t\t * @return {Promise<void>}\n\t\t */\n\t\tasync togglePopoverEnabled() {\n\t\t\tconst newState = !this.skipPopover\n\t\t\tconst value = newState ? 'yes' : 'no'\n\n\t\t\tawait setConfig('skipPopover', value)\n\t\t\tthis.skipPopover = !this.skipPopover\n\t\t},\n\n\t\t/**\n\t\t * Updates the user's setting for visibility of weekends\n\t\t *\n\t\t * @return {Promise<void>}\n\t\t */\n\t\tasync toggleWeekendsEnabled() {\n\t\t\tconst newState = !this.showWeekends\n\t\t\tconst value = newState ? 'yes' : 'no'\n\n\t\t\tawait setConfig('showWeekends', value)\n\t\t\tthis.showWeekends = !this.showWeekends\n\t\t},\n\n\t\t/**\n\t\t * Updates the user's setting for visibility of tasks\n\t\t *\n\t\t * @return {Promise<void>}\n\t\t */\n\t\tasync toggleTasksEnabled() {\n\t\t\tconst fetchedTimeRangesStore = useFetchedTimeRangesStore()\n\t\t\tconst calendarObjectsStore = useCalendarObjectsStore()\n\t\t\tconst tasksStore = useTasksStore()\n\t\t\tconst newState = !this.showTasks\n\t\t\tconst value = newState ? 'yes' : 'no'\n\n\t\t\tawait setConfig('showTasks', value)\n\t\t\tthis.showTasks = !this.showTasks\n\t\t\tfetchedTimeRangesStore.clearFetchedTimeRanges()\n\t\t\tcalendarObjectsStore.modificationCount++\n\t\t\ttasksStore.empty()\n\t\t},\n\n\t\t/**\n\t\t * Updates the user's setting for visibility of the tasks sidebar for unscheduled tasks\n\t\t *\n\t\t * @return {Promise<void>}\n\t\t */\n\t\tasync toggleTasksSidebar() {\n\t\t\tthis.tasksSidebar = !this.tasksSidebar\n\t\t\tconst value = this.tasksSidebar ? 'yes' : 'no'\n\t\t\tawait setConfig('tasksSidebar', value)\n\t\t},\n\n\t\t/**\n\t\t * Updates the user's setting for visibility of week numbers\n\t\t *\n\t\t * @return {Promise<void>}\n\t\t */\n\t\tasync toggleWeekNumberEnabled() {\n\t\t\tconst newState = !this.showWeekNumbers\n\t\t\tconst value = newState ? 'yes' : 'no'\n\n\t\t\tawait setConfig('showWeekNr', value)\n\t\t\tthis.showWeekNumbers = !this.showWeekNumbers\n\t\t},\n\n\t\t/**\n\t\t * Updates the view to be used as initial view when opening\n\t\t * the calendar app again\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {string} data.initialView New view to be used as initial view\n\t\t * @return {Promise<void>}\n\t\t */\n\t\tasync setInitialView({ initialView }) {\n\t\t\tawait setConfig('view', initialView)\n\t\t},\n\n\t\t/**\n\t\t * Updates the user's preferred slotDuration\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {string} data.slotDuration The new slot duration\n\t\t */\n\t\tasync setSlotDuration({ slotDuration }) {\n\t\t\tif (this.slotDuration === slotDuration) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tawait setConfig('slotDuration', slotDuration)\n\t\t\tthis.slotDuration = slotDuration\n\t\t},\n\n\t\t/**\n\t\t * Updates the user's preferred defaultReminder\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {string} data.defaultReminder The new default reminder\n\t\t */\n\t\tasync setDefaultReminder({ defaultReminder }) {\n\t\t\tif (this.defaultReminder === defaultReminder) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tawait setConfig('defaultReminder', defaultReminder)\n\t\t\tthis.defaultReminder = defaultReminder\n\t\t},\n\n\t\t/**\n\t\t * Updates the user's timezone\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {string} data.timezoneId The new timezone\n\t\t * @return {Promise<void>}\n\t\t */\n\t\tasync setTimezone({ timezoneId }) {\n\t\t\tif (this.timezone === timezoneId) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tawait setConfig('timezone', timezoneId)\n\t\t\tthis.timezone = timezoneId\n\t\t},\n\n\t\t/**\n\t\t * Updates the user's attachments folder\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {string} data.attachmentsFolder The new attachments folder\n\t\t * @return {Promise<void>}\n\t\t */\n\t\tasync setAttachmentsFolder({ attachmentsFolder }) {\n\t\t\tif (this.attachmentsFolder === attachmentsFolder) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tawait setConfig('attachmentsFolder', attachmentsFolder)\n\t\t\tthis.attachmentsFolder = attachmentsFolder\n\t\t\tthis.attachmentsFolderCreated = false\n\t\t},\n\n\t\t/**\n\t\t * Create the user's attachment folder if it doesn't exist and return its path\n\t\t *\n\t\t * @return {Promise<string>} The path of the user's attachments folder\n\t\t */\n\t\tasync createAttachmentsFolder() {\n\t\t\tconst principalsStore = usePrincipalsStore()\n\n\t\t\tif (this.attachmentsFolderCreated) {\n\t\t\t\treturn this.attachmentsFolder\n\t\t\t}\n\n\t\t\tconst userId = principalsStore.getCurrentUserPrincipal.dav.userId /// TODO make work with new eventual principals.js\n\t\t\tconst path = await AttachmentService.createFolder(this.attachmentsFolder, userId)\n\t\t\tif (path !== this.attachmentsFolder) {\n\t\t\t\tawait this.setAttachmentsFolder({ attachmentsFolder: path })\n\t\t\t}\n\t\t\tthis.attachmentsFolderCreated = true\n\t\t\treturn path\n\t\t},\n\n\t\t/**\n\t\t * Initializes the calendar-js configuration\n\t\t */\n\t\tinitializeCalendarJsConfig() {\n\t\t\tsetCalendarJsConfig('PRODID', `-//IDN nextcloud.com//Calendar app ${this.appVersion}//EN`)\n\t\t\tsetCalendarJsConfig('property-list-significant-change', [\n\t\t\t\t'SUMMARY',\n\t\t\t\t'LOCATION',\n\t\t\t\t'DESCRIPTION',\n\t\t\t])\n\t\t},\n\n\t\t/**\n\t\t * Initialize settings\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {string} data.appVersion The version of the Nextcloud app\n\t\t * @param {boolean} data.eventLimit Whether or not to limit number of visible events in grid view\n\t\t * @param {boolean} data.firstRun Whether or not this is the first run\n\t\t * @param {boolean} data.showWeekNumbers Whether or not to show week numbers\n\t\t * @param {boolean} data.showTasks Whether or not to display tasks with a due-date\n\t\t * @param {boolean} data.showWeekends Whether or not to display weekends\n\t\t * @param {boolean} data.skipPopover Whether or not to skip the simple event popover\n\t\t * @param {string} data.slotDuration The duration of one slot in the agendaView\n\t\t * @param {string} data.defaultReminder The default reminder to set on newly created events\n\t\t * @param {boolean} data.talkEnabled Whether or not the talk app is enabled\n\t\t * @param {boolean} data.tasksEnabled Whether ot not the tasks app is enabled\n\t\t * @param {string} data.timezone The timezone to view the calendar in. Either an Olsen timezone or \"automatic\"\n\t\t * @param {boolean} data.hideEventExport\n\t\t * @param {string} data.forceEventAlarmType\n\t\t * @param {boolean} data.disableAppointments Allow to disable the appointments feature\n\t\t * @param {boolean} data.tasksSidebar Enable the tasks sidebar for unscheduled tasks\n\t\t * @param {boolean} data.canSubscribeLink\n\t\t * @param {string} data.attachmentsFolder Default user's attachments folder\n\t\t * @param {boolean} data.showResources Show or hide the resources tab\n\t\t * @param {string} data.publicCalendars\n\t\t */\n\t\tloadSettingsFromServer({ appVersion, eventLimit, firstRun, showWeekNumbers, showTasks, showWeekends, skipPopover, slotDuration, defaultReminder, talkEnabled, tasksEnabled, timezone, hideEventExport, forceEventAlarmType, disableAppointments, tasksSidebar, canSubscribeLink, attachmentsFolder, showResources, publicCalendars }) {\n\t\t\tlogInfo(`\nInitial settings:\n\t- AppVersion: ${appVersion}\n\t- EventLimit: ${eventLimit}\n\t- FirstRun: ${firstRun}\n\t- ShowWeekNumbers: ${showWeekNumbers}\n\t- ShowTasks: ${showTasks}\n\t- ShowWeekends: ${showWeekends}\n\t- SkipPopover: ${skipPopover}\n\t- SlotDuration: ${slotDuration}\n\t- DefaultReminder: ${defaultReminder}\n\t- TalkEnabled: ${talkEnabled}\n\t- TasksEnabled: ${tasksEnabled}\n\t- TasksSidebar: ${tasksSidebar}\n\t- Timezone: ${timezone}\n\t- HideEventExport: ${hideEventExport}\n\t- ForceEventAlarmType: ${forceEventAlarmType}\n\t- disableAppointments: ${disableAppointments}\n\t- CanSubscribeLink: ${canSubscribeLink}\n\t- attachmentsFolder: ${attachmentsFolder}\n\t- ShowResources: ${showResources}\n\t- PublicCalendars: ${publicCalendars}\n`)\n\n\t\t\tthis.appVersion = appVersion\n\t\t\tthis.eventLimit = eventLimit\n\t\t\tthis.firstRun = firstRun\n\t\t\tthis.showWeekNumbers = showWeekNumbers\n\t\t\tthis.showTasks = showTasks\n\t\t\tthis.showWeekends = showWeekends\n\t\t\tthis.skipPopover = skipPopover\n\t\t\tthis.slotDuration = slotDuration\n\t\t\tthis.defaultReminder = defaultReminder\n\t\t\tthis.talkEnabled = talkEnabled\n\t\t\tthis.tasksEnabled = tasksEnabled\n\t\t\tthis.timezone = timezone\n\t\t\tthis.hideEventExport = hideEventExport\n\t\t\tthis.forceEventAlarmType = forceEventAlarmType\n\t\t\tthis.disableAppointments = disableAppointments\n\t\t\tthis.tasksSidebar = tasksSidebar\n\t\t\tthis.canSubscribeLink = canSubscribeLink\n\t\t\tthis.attachmentsFolder = attachmentsFolder\n\t\t\tthis.showResources = showResources\n\t\t\tthis.publicCalendars = publicCalendars\n\t\t},\n\n\t\t/**\n\t\t * Sets the name of the moment.js locale to be used\n\t\t *\n\t\t * @param {object} data The destructuring object\n\t\t * @param {string} data.locale The moment.js locale to be used\n\t\t */\n\t\tsetMomentLocale({ locale }) {\n\t\t\tlogInfo(`Updated moment locale: ${locale}`)\n\n\t\t\tthis.momentLocale = locale\n\t\t},\n\t},\n\n})\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport useCalendarsStore from './calendars.js'\nimport { defineStore } from 'pinia'\nimport Vue from 'vue'\n\nexport default defineStore('tasks', {\n\tstate: () => {\n\t\treturn {\n\t\t\tmap: {},\n\t\t}\n\t},\n\tgetters: {\n\t\tgetTasks() {\n\t\t\tconst calendarsStore = useCalendarsStore()\n\t\t\tconst tasks = []\n\t\t\tconst ordered = Object.keys(this.map).sort().reduce(\n\t\t\t\t(obj, key) => {\n\t\t\t\t  obj[key] = this.map[key]\n\t\t\t\t  return obj\n\t\t\t\t},\n\t\t\t\t{},\n\t\t\t  )\n\t\t\tfor (const calendarId in ordered) {\n\t\t\t\tconst calendar = calendarsStore.getCalendarById(calendarId)\n\t\t\t\tif (calendar.enabled) {\n\t\t\t\t\ttasks.push(...ordered[calendarId])\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn tasks\n\t\t},\n\t},\n\n\tactions: {\n\n\t\tfinishCalendar(calendarid) {\n\t\t\tif (!this.map[calendarid]) {\n\t\t\t\tVue.set(this.map, calendarid, [])\n\t\t\t} else {\n\t\t\t\tthis.map[calendarid].sort(function(a, b) { return a.title.localeCompare(b.title) })\n\t\t\t}\n\n\t\t},\n\n\t\t/**\n\t\t * Append a single task to the store\n\t\t *\n\t\t * @param calendarid calendar id of the task\n\t\t * @param task The task to append to the store\n\t\t */\n\t\tappendTask(calendarid, task) {\n\t\t\tif (!this.map[calendarid]) {\n\t\t\t\tVue.set(this.map, calendarid, [])\n\t\t\t}\n\t\t\tconst tasks = this.map[calendarid]\n\t\t\tconst index = tasks.findIndex(el => el.id === task.id)\n\t\t\tif (index === -1) {\n\t\t\t\ttasks.push(task)\n\t\t\t} else {\n\t\t\t\ttasks[index] = task\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Removes a single task from the store\n\t\t *\n\t\t * @param calendarid calendar id of the task\n\t\t * @param task The task to remove from the store\n\t\t */\n\t\tremoveTask(calendarid, task) {\n\t\t\tif (!this.map[calendarid]) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tconst tasks = this.map[calendarid]\n\t\t\tconst index = tasks.findIndex(el => el.id === task.id)\n\t\t\tif (index !== -1) {\n\t\t\t\ttasks.splice(index, 1)\n\t\t\t}\n\t\t},\n\n\t\temptyCalendar(calendarid) {\n\t\t\tdelete this.map[calendarid]\n\t\t},\n\n\t\tempty() {\n\t\t\tthis.map = {}\n\t\t},\n\t},\n})\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { AttendeeProperty, Property } from '@nextcloud/calendar-js'\nimport { translate as t } from '@nextcloud/l10n'\n\n/**\n * Get the factor for a given unit\n *\n * @param {string} unit The name of the unit to get the factor of\n * @return {number}\n */\nexport function getFactorForAlarmUnit(unit) {\n\tswitch (unit) {\n\tcase 'seconds':\n\t\treturn 1\n\n\tcase 'minutes':\n\t\treturn 60\n\n\tcase 'hours':\n\t\treturn 60 * 60\n\n\tcase 'days':\n\t\treturn 24 * 60 * 60\n\n\tcase 'weeks':\n\t\treturn 7 * 24 * 60 * 60\n\n\tdefault:\n\t\treturn 1\n\t}\n}\n\n/**\n * Gets the amount of days / weeks, unit from total seconds\n *\n * @param {number} totalSeconds Total amount of seconds\n * @return {{amount: number, unit: string}}\n */\nexport function getAmountAndUnitForTimedEvents(totalSeconds) {\n\t// Before or after the event is handled somewhere else,\n\t// so make sure totalSeconds is positive\n\ttotalSeconds = Math.abs(totalSeconds)\n\n\t// Handle the special case of 0, so we don't show 0 weeks\n\tif (totalSeconds === 0) {\n\t\treturn {\n\t\t\tamount: 0,\n\t\t\tunit: 'minutes',\n\t\t}\n\t}\n\n\tif (totalSeconds % (7 * 24 * 60 * 60) === 0) {\n\t\treturn {\n\t\t\tamount: totalSeconds / (7 * 24 * 60 * 60),\n\t\t\tunit: 'weeks',\n\t\t}\n\t}\n\tif (totalSeconds % (24 * 60 * 60) === 0) {\n\t\treturn {\n\t\t\tamount: totalSeconds / (24 * 60 * 60),\n\t\t\tunit: 'days',\n\t\t}\n\t}\n\tif (totalSeconds % (60 * 60) === 0) {\n\t\treturn {\n\t\t\tamount: totalSeconds / (60 * 60),\n\t\t\tunit: 'hours',\n\t\t}\n\t}\n\tif (totalSeconds % (60) === 0) {\n\t\treturn {\n\t\t\tamount: totalSeconds / (60),\n\t\t\tunit: 'minutes',\n\t\t}\n\t}\n\n\treturn {\n\t\tamount: totalSeconds,\n\t\tunit: 'seconds',\n\t}\n}\n\n/**\n * Get the total amount of seconds based on amount and unit for timed events\n *\n * @param {number} amount Amount of unit\n * @param {string} unit Minutes/Hours/Days/Weeks\n * @param {boolean=} isBefore Whether the reminder is before or after the event\n * @return {number}\n */\nexport function getTotalSecondsFromAmountAndUnitForTimedEvents(amount, unit, isBefore = true) {\n\treturn amount * getFactorForAlarmUnit(unit) * (isBefore ? -1 : 1)\n}\n\n/**\n * Gets the amount of days / weeks, unit, hours and minutes from total seconds\n *\n * @param {number} totalSeconds Total amount of seconds\n * @return {{amount: *, unit: *, hours: *, minutes: *}}\n */\nexport function getAmountHoursMinutesAndUnitForAllDayEvents(totalSeconds) {\n\tconst dayFactor = getFactorForAlarmUnit('days')\n\tconst hourFactor = getFactorForAlarmUnit('hours')\n\tconst minuteFactor = getFactorForAlarmUnit('minutes')\n\tconst isNegative = totalSeconds < 0\n\ttotalSeconds = Math.abs(totalSeconds)\n\n\tlet dayPart = Math.floor(totalSeconds / dayFactor)\n\tconst hourPart = totalSeconds % dayFactor\n\n\tif (hourPart !== 0) {\n\t\tif (isNegative) {\n\t\t\tdayPart++\n\t\t}\n\t}\n\n\tlet amount = 0\n\tlet unit = null\n\tif (dayPart === 0) {\n\t\tunit = 'days'\n\t} else if (dayPart % 7 === 0) {\n\t\tamount = dayPart / 7\n\t\tunit = 'weeks'\n\t} else {\n\t\tamount = dayPart\n\t\tunit = 'days'\n\t}\n\n\tlet hours = Math.floor(hourPart / hourFactor)\n\tconst minutePart = hourPart % hourFactor\n\tlet minutes = Math.floor(minutePart / minuteFactor)\n\n\tif (isNegative) {\n\t\thours = 24 - hours\n\n\t\tif (minutes !== 0) {\n\t\t\thours--\n\t\t\tminutes = 60 - minutes\n\t\t}\n\t}\n\n\treturn {\n\t\tamount,\n\t\tunit,\n\t\thours,\n\t\tminutes,\n\t}\n}\n\n/**\n * Get the total amount of seconds for all-day events\n *\n * @param {number} amount amount of unit\n * @param {number} hours Time of reminder\n * @param {number} minutes Time of reminder\n * @param {string} unit days/weeks\n * @return {number}\n */\nexport function getTotalSecondsFromAmountHourMinutesAndUnitForAllDayEvents(amount, hours, minutes, unit) {\n\tif (unit === 'weeks') {\n\t\tamount *= 7\n\t\tunit = 'days'\n\t}\n\n\t// 0 is on the same day of the all-day event => positive\n\t// 1 ... n before the event is negative\n\tconst isNegative = amount > 0\n\n\tif (isNegative) {\n\t\t// If it's negative, we need to subtract one day\n\t\tamount--\n\t\t// Convert days to seconds\n\t\tamount *= getFactorForAlarmUnit(unit)\n\n\t\tlet invertedHours = 24 - hours\n\t\tlet invertedMinutes = 0\n\n\t\tif (minutes !== 0) {\n\t\t\tinvertedHours--\n\t\t\tinvertedMinutes = 60 - minutes\n\t\t}\n\n\t\tamount += (invertedHours * getFactorForAlarmUnit('hours'))\n\t\tamount += (invertedMinutes * getFactorForAlarmUnit('minutes'))\n\n\t\tamount *= -1\n\t} else {\n\t\t// Convert days to seconds\n\t\tamount *= getFactorForAlarmUnit('days')\n\n\t\tamount += (hours * getFactorForAlarmUnit('hours'))\n\t\tamount += (minutes * getFactorForAlarmUnit('minutes'))\n\t}\n\n\treturn amount\n}\n\n/**\n * Propagate data from an event component to all EMAIL alarm components.\n * An alarm component must contain a description, summary and all attendees to be notified.\n * We don't have a separate UI for maintaining attendees of an alarm, so we just copy them from the event.\n *\n * https://www.rfc-editor.org/rfc/rfc5545#section-3.6.6\n *\n * @param {AbstractRecurringComponent} eventComponent\n */\nexport function updateAlarms(eventComponent) {\n\tfor (const alarmComponent of eventComponent.getAlarmIterator()) {\n\t\tif (alarmComponent.action !== 'EMAIL' && alarmComponent.action !== 'DISPLAY') {\n\t\t\tcontinue\n\t\t}\n\n\t\talarmComponent.deleteAllProperties('SUMMARY')\n\t\tconst summaryProperty = eventComponent.getFirstProperty('SUMMARY')\n\t\tif (summaryProperty) {\n\t\t\talarmComponent.addProperty(summaryProperty.clone())\n\t\t} else {\n\t\t\tconst defaultSummary = t('calendar', 'Untitled event')\n\t\t\talarmComponent.addProperty(new Property('SUMMARY', defaultSummary))\n\t\t}\n\n\t\tif (!alarmComponent.hasProperty('DESCRIPTION')) {\n\t\t\tconst defaultDescription = t('calendar', 'This is an event reminder.')\n\t\t\talarmComponent.addProperty(new Property('DESCRIPTION', defaultDescription))\n\t\t}\n\n\t\talarmComponent.deleteAllProperties('ATTENDEE')\n\t\tfor (const attendee of eventComponent.getAttendeeIterator()) {\n\t\t\tif (['RESOURCE', 'ROOM'].includes(attendee.userType)) {\n\t\t\t\tcontinue\n\t\t\t}\n\n\t\t\t// Only copy the email address (value) of the attendee\n\t\t\talarmComponent.addProperty(new AttendeeProperty('ATTENDEE', attendee.value))\n\t\t}\n\t}\n}\n","/**\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\n// Code was taken from:\n//   - https://github.com/juliuste/closest-css-color\n//   - https://github.com/gausie/colour-proximity\n//   - https://github.com/gausie/colour-proximity/pull/3\n\nimport cssColors from 'css-color-names'\nimport sortBy from 'lodash/sortBy.js'\nimport pick from 'lodash/pick.js'\nimport uniqBy from 'lodash/uniqBy.js'\nimport colorString from 'color-string'\n\nconst uniqColorKeys = uniqBy(Object.keys(cssColors), c => cssColors[c])\nconst filteredColors = pick(cssColors, uniqColorKeys)\n\nconst colors = sortBy(\n\tObject.keys(filteredColors).map(name => ({\n\t\tname,\n\t\thex: filteredColors[name],\n\t})),\n\tc => c.hex,\n)\n\nconst defaults = {\n\tdetailed: false,\n}\n\n/**\n * Find the closest CSS color to a given hex color.\n *\n * Adapted from https://github.com/juliuste/closest-css-color\n *\n * Copyright (c) 2021, Julius Tens\n *\n * Permission to use, copy, modify, and/or distribute this software for any purpose with or without\n * fee is hereby granted, provided that the above copyright notice and this permission notice\n * appear in all copies.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS\n * SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE\n * AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\n * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT,\n * NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE\n * OF THIS SOFTWARE.\n *\n * @param {string} hex Hex color string\n * @param {object} opt Options\n * @param {boolean=} opt.detailed Return color object instead of just the name\n * @return {string|{name: string, hex: string}} Closest color name or object\n */\nexport default function closestColor(hex, opt = {}) {\n\tconst options = { ...defaults, ...opt }\n\tconst sortedColors = sortBy(colors, c => proximity(hex, c.hex))\n\tif (options.detailed) {\n\t\treturn sortedColors[0]\n\t}\n\treturn sortedColors[0].name\n}\n\n/**\n * Calculate the proximity between two colors.\n *\n * Adapted from https://github.com/gausie/colour-proximity\n *\n * Copyright (c) 2013, Samuel Gaus\n *\n * @param {string} s1 Hex color string 1\n * @param {string} s2 Hex color string 2\n * @return {number}\n */\nfunction proximity(s1, s2) {\n\tconst c1 = rgb2lab(colorString.get.rgb(s1))\n\tconst c2 = rgb2lab(colorString.get.rgb(s2))\n\treturn Math.sqrt(\n\t\tMath.pow(c1[0] - c2[0], 2)\n\t\t+ Math.pow(c1[1] - c2[1], 2)\n\t\t+ Math.pow(c1[2] - c2[2], 2),\n\t)\n}\n\n/**\n * Adapted from https://github.com/gausie/colour-proximity\n *\n * Copyright (c) 2013, Samuel Gaus\n *\n * @param {number[]} input RGB array\n */\nfunction rgb2lab(input) {\n\t// This code is adapted from various functions at http://www.easyrgb.com/index.php?X=MATH\n\n\tconst rgb = [0, 0, 0]\n\tconst xyz = [0, 0, 0]\n\tconst Lab = [0, 0, 0]\n\n\tfor (let i = 0; i < input.length; i++) {\n\t\tlet value = input[i] / 255\n\n\t\tif (value > 0.04045) {\n\t\t\tvalue = Math.pow(((value + 0.055) / 1.055), 2.4)\n\t\t} else {\n\t\t\tvalue = value / 12.92\n\t\t}\n\n\t\trgb[i] = value * 100\n\t}\n\n\txyz[0] = (rgb[0] * 0.4124 + rgb[1] * 0.3576 + rgb[2] * 0.1805) / 95.047 // ref_X =  95.047   Observer= 2, Illuminant= D65\n\txyz[1] = (rgb[0] * 0.2126 + rgb[1] * 0.7152 + rgb[2] * 0.0722) / 100.0 // ref_Y = 100.000\n\txyz[2] = (rgb[0] * 0.0193 + rgb[1] * 0.1192 + rgb[2] * 0.9505) / 108.883 // ref_Z = 108.883\n\n\tfor (let i = 0; i < 3; i++) {\n\t\tlet value = xyz[i]\n\t\tif (value > 0.008856) {\n\t\t\tvalue = Math.pow(value, 1 / 3)\n\t\t} else {\n\t\t\tvalue = (7.787 * value) + (16 / 116)\n\t\t}\n\t\txyz[i] = value\n\t}\n\n\tLab[0] = parseFloat(((116 * xyz[1]) - 16).toFixed(3))\n\tLab[1] = parseFloat((500 * (xyz[0] - xyz[1])).toFixed(3))\n\tLab[2] = parseFloat((200 * (xyz[1] - xyz[2])).toFixed(3))\n\n\treturn Lab\n}\n","/**\n * SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport { getFirstDay, getLanguage, getLocale } from '@nextcloud/l10n'\nimport moment from '@nextcloud/moment'\n\n/**\n *\n * @return {Promise<string>}\n */\nexport default async function loadMomentLocalization() {\n\tconst locale = getLocale().replace('_', '-').toLowerCase()\n\tconst language = getLanguage().replace('_', '-').toLowerCase()\n\n\tif (locale === language) {\n\t\treturn getLocaleFor(locale)\n\t}\n\n\tconst [realLocale, realLanguage] = await Promise.all([getLocaleFor(locale), getLocaleFor(language)])\n\tif (realLocale === realLanguage) {\n\t\treturn realLocale\n\t}\n\n\tconst name = `nextcloud-calendar-fake-locale-${realLocale}-${realLanguage}`\n\tmoment.defineLocale(name, {\n\t\tparentLocale: realLanguage,\n\t\tlongDateFormat: {\n\t\t\tLT: moment.localeData(realLocale).longDateFormat('LT'),\n\t\t\tLTS: moment.localeData(realLocale).longDateFormat('LTS'),\n\t\t\tL: moment.localeData(realLocale).longDateFormat('L'),\n\t\t\tLL: moment.localeData(realLocale).longDateFormat('LL'),\n\t\t\tLLL: moment.localeData(realLocale).longDateFormat('LLL'),\n\t\t\tLLLL: moment.localeData(realLocale).longDateFormat('LLLL'),\n\t\t\tl: moment.localeData(realLocale).longDateFormat('l'),\n\t\t\tll: moment.localeData(realLocale).longDateFormat('ll'),\n\t\t\tlll: moment.localeData(realLocale).longDateFormat('lll'),\n\t\t\tllll: moment.localeData(realLocale).longDateFormat('llll'),\n\t\t},\n\t\tweek: {\n\t\t\tdow: getFirstDay(),\n\t\t\tdoy: moment.localeData(realLocale).firstDayOfYear(),\n\t\t},\n\t})\n\n\treturn name\n}\n\n/**\n * Dynamically loads the requested locale and returns the actually loaded locale\n *\n * @param {string} locale Name of locale to load\n * @return {Promise<string>}\n */\nasync function getLocaleFor(locale) {\n\t// IMPORTANT: Keep each '/moment/local/...' string as is. Otherwise, webpack might not bundle\n\t//            locale data because the contentRegExp fails to detect any files.\n\ttry {\n\t\t// default load e.g. en-de\n\t\tawait import(`moment/locale/${locale}.js`)\n\t\treturn locale\n\t} catch (error) {\n\t\tconst splitLocale = locale.split('-')\n\t\ttry {\n\t\t\t// failure: fallback to first part of locale, which\n\t\t\t// should be language\n\t\t\tlocale = splitLocale[0]\n\t\t\tawait import(`moment/locale/${locale}.js`)\n\t\t\treturn locale\n\t\t} catch (e) {\n\t\t\t// failure, fallback to english\n\t\t\tconsole.debug('Fallback to locale', 'en')\n\t\t\t// English is the default locale and doesn't need to imported.\n\t\t\t// It is already included in moment.js.\n\t\t}\n\t}\n\n\treturn 'en'\n}\n","/**\n * SPDX-FileCopyrightText: 2021 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\n/**\n * Generate a random hex id to use with vue components.\n *\n * WARNING: This method does not use a secure random generator and isn't suited for\n * cryptographic purposes.\n *\n * @return {string} A random hex id\n */\nexport function randomId() {\n\treturn Math.random().toString(16).slice(2)\n}\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\n/**\n * Gets the ByDay and BySetPosition\n *\n * @param {Date} jsDate The date to get the weekday of\n * @return {object}\n */\nexport function getBySetPositionAndBySetFromDate(jsDate) {\n\tconst byDay = getWeekDayFromDate(jsDate)\n\tlet bySetPosition = 1\n\tlet dayOfMonth = jsDate.getDate()\n\tfor (; dayOfMonth > 7; dayOfMonth -= 7) {\n\t\tbySetPosition++\n\t}\n\n\treturn {\n\t\tbyDay,\n\t\tbySetPosition,\n\t}\n}\n\n/**\n * Gets the string-representation of the weekday of a given date\n *\n * @param {Date} jsDate The date to get the weekday of\n * @return {string}\n */\nexport function getWeekDayFromDate(jsDate) {\n\tswitch (jsDate.getDay()) {\n\tcase 0:\n\t\treturn 'SU'\n\tcase 1:\n\t\treturn 'MO'\n\tcase 2:\n\t\treturn 'TU'\n\tcase 3:\n\t\treturn 'WE'\n\tcase 4:\n\t\treturn 'TH'\n\tcase 5:\n\t\treturn 'FR'\n\tcase 6:\n\t\treturn 'SA'\n\tdefault:\n\t\tthrow TypeError('Invalid date-object given')\n\t}\n}\n","/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport { linkTo } from '@nextcloud/router'\n\n/**\n * Get URL to modify config-key\n *\n * @param {string} key URL of config-key to modify\n * @return {string}\n */\nexport function getLinkToConfig(key) {\n\treturn [\n\t\tlinkTo('calendar', 'index.php'),\n\t\t'v1/config',\n\t\tkey,\n\t].join('/')\n}\n","/**\n * SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport md5 from 'md5'\n\n/**\n * This is copied from nextcloud-vue for now, until it is exposed upstream.\n */\n\nexport const uidToColor = (uid) => {\n\t// Normalize hash\n\tlet hash = uid.toLowerCase()\n\n\t// Already a md5 hash?\n\tif (hash.match(/^([0-9a-f]{4}-?){8}$/) === null) {\n\t\thash = md5(hash)\n\t}\n\n\thash = hash.replace(/[^0-9a-f]/g, '')\n\n\tconst steps = 6\n\tconst finalPalette = GenColors(steps)\n\n\t/**\n\t * Convert a string to an integer evenly\n\t *\n\t * @param {string} hash The string to convert\n\t * @param {number} maximum The maximum value\n\t * @return {number} The integer calculated\n\t */\n\tfunction hashToInt(hash, maximum) {\n\t\tlet finalInt = 0\n\t\tconst result = []\n\n\t\t// Splitting evenly the string\n\t\tfor (let i = 0; i < hash.length; i++) {\n\t\t\t// chars in md5 goes up to f, hex:16\n\t\t\tresult.push(parseInt(hash.charAt(i), 16) % 16)\n\t\t}\n\n\t\t// Adds up all results\n\t\tfor (const j in result) {\n\t\t\tfinalInt += result[j]\n\t\t}\n\n\t\t// chars in md5 goes up to f, hex:16\n\t\t// make sure we're always using int in our operation\n\t\treturn parseInt(parseInt(finalInt, 10) % maximum, 10)\n\t}\n\treturn finalPalette[hashToInt(hash, steps * 3)]\n}\n\n/**\n * Color object\n *\n * @param {number} r The red value\n * @param {number} g The green value\n * @param {number} b The blue value\n */\nfunction Color(r, g, b) {\n\tthis.r = r\n\tthis.g = g\n\tthis.b = b\n}\n\n/**\n * Calculate the number of steps\n *\n * @param {number} steps The number of steps\n * @param {Array} ends The ends\n * @return {Array} Array containing the number of steps per color\n */\nfunction stepCalc(steps, ends) {\n\tconst step = new Array(3)\n\tstep[0] = (ends[1].r - ends[0].r) / steps\n\tstep[1] = (ends[1].g - ends[0].g) / steps\n\tstep[2] = (ends[1].b - ends[0].b) / steps\n\treturn step\n}\n\n/**\n * Create a color palette from two colors\n *\n * @param {number} steps The number of steps the palette has\n * @param {string} color1 The first color\n * @param {string} color2 The second color\n * @return {Array} The created palette array\n */\nfunction mixPalette(steps, color1, color2) {\n\tconst palette = []\n\tpalette.push(color1)\n\tconst step = stepCalc(steps, [color1, color2])\n\tfor (let i = 1; i < steps; i++) {\n\t\tconst r = parseInt(color1.r + step[0] * i, 10)\n\t\tconst g = parseInt(color1.g + step[1] * i, 10)\n\t\tconst b = parseInt(color1.b + step[2] * i, 10)\n\t\tpalette.push(new Color(r, g, b))\n\t}\n\treturn palette\n}\n\n/**\n * Generate colors from the official nextcloud color\n * You can provide how many colors you want (multiplied by 3)\n * if step = 6\n * 3 colors * 6 will result in 18 generated colors\n *\n * @param {number} [steps] Number of steps to go from a color to another\n * @return {object[]}\n */\nfunction GenColors(steps) {\n\tif (!steps) {\n\t\tsteps = 6\n\t}\n\n\tconst red = new Color(182, 70, 157)\n\tconst yellow = new Color(221, 203, 85)\n\tconst blue = new Color(0, 130, 201) // Nextcloud blue\n\n\tconst palette1 = mixPalette(steps, red, yellow)\n\tconst palette2 = mixPalette(steps, yellow, blue)\n\tconst palette3 = mixPalette(steps, blue, red)\n\n\treturn palette1.concat(palette2).concat(palette3)\n}\n\nexport default uidToColor\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.icon-close[data-v-2913064d]{display:block;height:100%}.freebusy-caption-item__color[data-v-2913064d]{background:repeating-linear-gradient(45deg, #dbdbdb, #dbdbdb 1px, transparent 1px, transparent 3.5px) !important}.modal[data-v-2913064d]{display:flex !important;justify-content:center;align-items:stretch;width:100%;height:100%;overflow:hidden}.modal[data-v-2913064d] .free-busy-busy-unavailable--organizer{background:repeating-linear-gradient(45deg, #dbdbdb, #dbdbdb 1px, transparent 1px, transparent 3.5px) !important}.modal .date-navigation[data-v-2913064d]{display:flex;justify-content:space-between;align-items:center}.modal .date-navigation>*[data-v-2913064d]{margin-inline-start:var(--default-grid-baseline)}.modal__content[data-v-2913064d]{max-width:1200px;width:100%;height:100%;padding:0 calc(var(--default-grid-baseline)*4);display:flex;flex-direction:column}.modal__content__actions[data-v-2913064d]{display:flex;flex-direction:column;justify-content:space-between;align-items:center;margin-bottom:calc(var(--default-grid-baseline)*4)}.modal__content__actions--mobile[data-v-2913064d]{align-items:flex-start}.modal__content__actions__select[data-v-2913064d]{width:260px}.modal__content__title[data-v-2913064d]{display:flex;justify-content:space-between;align-items:center;margin-bottom:calc(var(--default-grid-baseline)*4);width:calc(100% - 260px);margin-inline-start:260px}.modal__content__title--mobile[data-v-2913064d]{width:100%;margin:0}.modal__content__title h2[data-v-2913064d]{font-weight:500;margin:0}.modal__content__title__buttons[data-v-2913064d]{display:flex;justify-content:flex-end;align-items:center}.modal__content__header[data-v-2913064d]{margin:calc(var(--default-grid-baseline)*4) 0}.modal__content__header h3[data-v-2913064d]{font-weight:500}.modal__content__header__available-slots[data-v-2913064d]{margin:var(--default-grid-baseline) 0;width:100%;margin-top:calc(4*var(--default-grid-baseline)) !important;margin-bottom:calc(2*var(--default-grid-baseline)) !important}.modal__content__header__attendees__search[data-v-2913064d]{width:100%;margin-bottom:calc(2*var(--default-grid-baseline)) !important}.modal__content__header__attendees__user-bubble[data-v-2913064d]{margin-inline-end:var(--default-grid-baseline)}.modal__content__body[data-v-2913064d]{display:flex;width:100%;flex:1 1 auto;overflow:hidden;position:relative;padding-bottom:80px}.modal__content__body__sidebar[data-v-2913064d]{margin-top:var(--default-grid-baseline);width:260px;flex-shrink:0;margin-inline-end:calc(2*var(--default-grid-baseline))}.modal__content__body__sidebar__attendees[data-v-2913064d]{display:flex;flex-direction:column}.modal__content__body__calendar[data-v-2913064d]{flex:1 1 0%}.modal__content__footer[data-v-2913064d]{background-color:var(--color-main-background);padding:10px 12px;height:60px;z-index:9998;width:calc(100% - 24px);inset-inline-end:0;display:flex;justify-content:center;position:absolute;bottom:0;box-shadow:0 -4px 8px rgba(0,0,0,.05)}.modal__content__footer__content[data-v-2913064d]{display:flex;justify-content:space-between;align-items:flex-end;width:1200px}.modal__content__footer__content__date[data-v-2913064d]{margin-top:calc(var(--default-grid-baseline)*4);font-weight:600}.modal__content__footer__content__timezone[data-v-2913064d]{color:var(--color-text-lighter)}[data-v-2913064d] .vs__search{text-overflow:ellipsis}[data-v-2913064d] .mx-input{height:38px !important}[data-v-2913064d] .fc-event{pointer-events:none;margin-inline-end:0 !important;border-radius:6px !important;border:2px solid rgba(0,0,0,0) !important}[data-v-2913064d] .fc-event-time{display:none !important}[data-v-2913064d] .fc{height:100% !important;width:100%}[data-v-2913064d] .fc-scroller{overflow-y:auto !important}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Editor/FreeBusy/FreeBusy.vue\"],\"names\":[],\"mappings\":\"AACA,6BACC,aAAA,CACA,WAAA,CAIA,+CACC,gHAAA,CAIF,wBACC,uBAAA,CACA,sBAAA,CACA,mBAAA,CACA,UAAA,CACA,WAAA,CACA,eAAA,CAEA,+DACC,gHAAA,CAGD,yCACC,YAAA,CACA,6BAAA,CACA,kBAAA,CACA,2CACC,gDAAA,CAIF,iCACC,gBAAA,CACA,UAAA,CACA,WAAA,CACA,8CAAA,CACA,YAAA,CACA,qBAAA,CACA,0CACC,YAAA,CACA,qBAAA,CACA,6BAAA,CACA,kBAAA,CACA,kDAAA,CACA,kDACC,sBAAA,CAGD,kDACC,WAAA,CAGF,wCACC,YAAA,CACA,6BAAA,CACA,kBAAA,CACA,kDAAA,CACA,wBAAA,CACA,yBAAA,CACA,gDACC,UAAA,CACA,QAAA,CAED,2CACC,eAAA,CACA,QAAA,CAED,iDACC,YAAA,CACA,wBAAA,CACA,kBAAA,CAGF,yCACC,6CAAA,CACA,4CACC,eAAA,CAED,0DACC,qCAAA,CACA,UAAA,CACA,0DAAA,CACA,6DAAA,CAGA,4DACC,UAAA,CACA,6DAAA,CAED,iEACC,8CAAA,CAIH,uCACC,YAAA,CACA,UAAA,CACA,aAAA,CACA,eAAA,CACA,iBAAA,CACA,mBAAA,CACA,gDACC,uCAAA,CACA,WAAA,CACA,aAAA,CACA,sDAAA,CACA,2DACC,YAAA,CACA,qBAAA,CAGF,iDACC,WAAA,CAGF,yCACC,6CAAA,CACA,iBAAA,CACA,WAAA,CACA,YAAA,CACA,uBAAA,CACA,kBAAA,CACA,YAAA,CACA,sBAAA,CACA,iBAAA,CACA,QAAA,CACA,qCAAA,CACA,kDACC,YAAA,CACA,6BAAA,CACA,oBAAA,CACA,YAAA,CACA,wDACC,+CAAA,CACA,eAAA,CAED,4DACE,+BAAA,CAON,8BACC,sBAAA,CAGD,4BACC,sBAAA,CAGD,4BACC,mBAAA,CACA,8BAAA,CACA,4BAAA,CACA,yCAAA,CAGD,iCACC,uBAAA,CAGD,sBACC,sBAAA,CACA,UAAA,CAGD,+BACC,0BAAA\",\"sourcesContent\":[\".icon-close{display:block;height:100%}.freebusy-caption-item__color{background:repeating-linear-gradient(45deg, #dbdbdb, #dbdbdb 1px, transparent 1px, transparent 3.5px) !important}.modal{display:flex !important;justify-content:center;align-items:stretch;width:100%;height:100%;overflow:hidden}.modal :deep(.free-busy-busy-unavailable--organizer){background:repeating-linear-gradient(45deg, #dbdbdb, #dbdbdb 1px, transparent 1px, transparent 3.5px) !important}.modal .date-navigation{display:flex;justify-content:space-between;align-items:center}.modal .date-navigation>*{margin-inline-start:var(--default-grid-baseline)}.modal__content{max-width:1200px;width:100%;height:100%;padding:0 calc(var(--default-grid-baseline)*4);display:flex;flex-direction:column}.modal__content__actions{display:flex;flex-direction:column;justify-content:space-between;align-items:center;margin-bottom:calc(var(--default-grid-baseline)*4)}.modal__content__actions--mobile{align-items:flex-start}.modal__content__actions__select{width:260px}.modal__content__title{display:flex;justify-content:space-between;align-items:center;margin-bottom:calc(var(--default-grid-baseline)*4);width:calc(100% - 260px);margin-inline-start:260px}.modal__content__title--mobile{width:100%;margin:0}.modal__content__title h2{font-weight:500;margin:0}.modal__content__title__buttons{display:flex;justify-content:flex-end;align-items:center}.modal__content__header{margin:calc(var(--default-grid-baseline)*4) 0}.modal__content__header h3{font-weight:500}.modal__content__header__available-slots{margin:var(--default-grid-baseline) 0;width:100%;margin-top:calc(4*var(--default-grid-baseline)) !important;margin-bottom:calc(2*var(--default-grid-baseline)) !important}.modal__content__header__attendees__search{width:100%;margin-bottom:calc(2*var(--default-grid-baseline)) !important}.modal__content__header__attendees__user-bubble{margin-inline-end:var(--default-grid-baseline)}.modal__content__body{display:flex;width:100%;flex:1 1 auto;overflow:hidden;position:relative;padding-bottom:80px}.modal__content__body__sidebar{margin-top:var(--default-grid-baseline);width:260px;flex-shrink:0;margin-inline-end:calc(2*var(--default-grid-baseline))}.modal__content__body__sidebar__attendees{display:flex;flex-direction:column}.modal__content__body__calendar{flex:1 1 0%}.modal__content__footer{background-color:var(--color-main-background);padding:10px 12px;height:60px;z-index:9998;width:calc(100% - 24px);inset-inline-end:0;display:flex;justify-content:center;position:absolute;bottom:0;box-shadow:0 -4px 8px rgba(0,0,0,.05)}.modal__content__footer__content{display:flex;justify-content:space-between;align-items:flex-end;width:1200px}.modal__content__footer__content__date{margin-top:calc(var(--default-grid-baseline)*4);font-weight:600}.modal__content__footer__content__timezone{color:var(--color-text-lighter)}:deep(.vs__search){text-overflow:ellipsis}:deep(.mx-input){height:38px !important}:deep(.fc-event){pointer-events:none;margin-inline-end:0 !important;border-radius:6px !important;border:2px solid rgba(0,0,0,0) !important}:deep(.fc-event-time){display:none !important}:deep(.fc){height:100% !important;width:100%}:deep(.fc-scroller){overflow-y:auto !important}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.blocking-event-free-busy{z-index:3 !important}.free-busy-block{opacity:.7 !important}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Editor/FreeBusy/FreeBusy.vue\"],\"names\":[],\"mappings\":\"AACA,0BAEC,oBAAA,CAGD,iBACC,qBAAA\",\"sourcesContent\":[\".blocking-event-free-busy{z-index:3 !important}.free-busy-block{opacity:.7 !important}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `\n[data-v-1780911c] .avatardiv {\n\toverflow: visible !important;\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Editor/Invitees/InviteesListSearch.vue\"],\"names\":[],\"mappings\":\";AAuVA;CACA,4BAAA;AACA\",\"sourcesContent\":[\"<!--\\n  - SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\\n  - SPDX-License-Identifier: AGPL-3.0-or-later\\n-->\\n\\n<template>\\n\\t<NcSelect class=\\\"invitees-search__vselect\\\"\\n\\t\\t:options=\\\"matches\\\"\\n\\t\\t:searchable=\\\"true\\\"\\n\\t\\t:max-height=\\\"600\\\"\\n\\t\\t:placeholder=\\\"placeholder\\\"\\n\\t\\t:class=\\\"{ 'showContent': inputGiven, 'icon-loading': isLoading }\\\"\\n\\t\\t:clearable=\\\"false\\\"\\n\\t\\t:label-outside=\\\"true\\\"\\n\\t\\tinput-id=\\\"uid\\\"\\n\\t\\tlabel=\\\"dropdownName\\\"\\n\\t\\t@search=\\\"findAttendees\\\"\\n\\t\\t@option:selected=\\\"addAttendee\\\">\\n\\t\\t<template #option=\\\"option\\\">\\n\\t\\t\\t<div class=\\\"invitees-search-list-item\\\">\\n\\t\\t\\t\\t<!-- We need to specify a unique key here for the avatar to be reactive. -->\\n\\t\\t\\t\\t<Avatar v-if=\\\"option.isUser\\\"\\n\\t\\t\\t\\t\\t:key=\\\"option.uid\\\"\\n\\t\\t\\t\\t\\t:user=\\\"option.avatar\\\"\\n\\t\\t\\t\\t\\t:display-name=\\\"option.dropdownName\\\" />\\n\\t\\t\\t\\t<Avatar v-else-if=\\\"option.type === 'circle'\\\">\\n\\t\\t\\t\\t\\t<template #icon>\\n\\t\\t\\t\\t\\t\\t<GoogleCirclesCommunitiesIcon :size=\\\"20\\\" />\\n\\t\\t\\t\\t\\t</template>\\n\\t\\t\\t\\t</Avatar>\\n\\t\\t\\t\\t<Avatar v-if=\\\"!option.isUser && option.type !== 'circle'\\\"\\n\\t\\t\\t\\t\\t:key=\\\"option.uid\\\"\\n\\t\\t\\t\\t\\t:url=\\\"option.avatar\\\"\\n\\t\\t\\t\\t\\t:display-name=\\\"option.commonName\\\" />\\n\\n\\t\\t\\t\\t<div class=\\\"invitees-search-list-item__label\\\">\\n\\t\\t\\t\\t\\t<div>\\n\\t\\t\\t\\t\\t\\t{{ option.commonName }}\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t<div v-if=\\\"option.email !== option.commonName && option.type !== 'circle' && option.type !== 'contactsgroup'\\\">\\n\\t\\t\\t\\t\\t\\t{{ option.email }}\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t<div v-if=\\\"option.type === 'circle' || option.type === 'contactsgroup'\\\">\\n\\t\\t\\t\\t\\t\\t{{ option.subtitle }}\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t</template>\\n\\t</NcSelect>\\n</template>\\n\\n<script>\\nimport {\\n\\tNcAvatar as Avatar,\\n\\tNcSelect,\\n} from '@nextcloud/vue'\\nimport { principalPropertySearchByDisplaynameOrEmail } from '../../../services/caldavService.js'\\nimport isCirclesEnabled from '../../../services/isCirclesEnabled.js'\\nimport {\\n\\tcircleSearchByName,\\n\\tcircleGetMembers,\\n} from '../../../services/circleService.js'\\nimport HttpClient from '@nextcloud/axios'\\nimport debounce from 'debounce'\\nimport { linkTo } from '@nextcloud/router'\\nimport { randomId } from '../../../utils/randomId.js'\\nimport GoogleCirclesCommunitiesIcon from 'vue-material-design-icons/GoogleCirclesCommunities.vue'\\nimport { showInfo } from '@nextcloud/dialogs'\\nimport { removeMailtoPrefix } from '../../../utils/attendee.js'\\n\\nexport default {\\n\\tname: 'InviteesListSearch',\\n\\tcomponents: {\\n\\t\\tAvatar,\\n\\t\\tNcSelect,\\n\\t\\tGoogleCirclesCommunitiesIcon,\\n\\t},\\n\\tprops: {\\n\\t\\talreadyInvitedEmails: {\\n\\t\\t\\ttype: Array,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\torganizer: {\\n\\t\\t\\ttype: Object,\\n\\t\\t\\trequired: false,\\n\\t\\t},\\n\\t},\\n\\tdata() {\\n\\t\\treturn {\\n\\t\\t\\tisLoading: false,\\n\\t\\t\\tinputGiven: false,\\n\\t\\t\\tmatches: [],\\n\\t\\t\\tisCirclesEnabled,\\n\\t\\t}\\n\\t},\\n\\tcomputed: {\\n\\t\\tplaceholder() {\\n\\t\\t\\treturn this.$t('calendar', 'Search for emails, users, contacts, contact groups or teams')\\n\\t\\t},\\n\\t\\tnoResult() {\\n\\t\\t\\treturn this.$t('calendar', 'No match found')\\n\\t\\t},\\n\\t},\\n\\tmethods: {\\n\\t\\tfindAttendees: debounce(async function(query) {\\n\\t\\t\\tthis.isLoading = true\\n\\t\\t\\tconst matches = []\\n\\n\\t\\t\\tif (query.length > 0) {\\n\\t\\t\\t\\tconst promises = [\\n\\t\\t\\t\\t\\tthis.findAttendeesFromContactsAPI(query),\\n\\t\\t\\t\\t\\tthis.findAttendeesFromDAV(query),\\n\\t\\t\\t\\t]\\n\\t\\t\\t\\tif (isCirclesEnabled) {\\n\\t\\t\\t\\t\\tpromises.push(this.findAttendeesFromCircles(query))\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tconst [contactsResults, davResults, circleResults] = await Promise.all(promises)\\n\\t\\t\\t\\tmatches.push(...contactsResults)\\n\\t\\t\\t\\tmatches.push(...davResults)\\n\\t\\t\\t\\tif (isCirclesEnabled) {\\n\\t\\t\\t\\t\\tmatches.push(...circleResults)\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t// Source of the Regex: https://stackoverflow.com/a/46181\\n\\t\\t\\t\\t// eslint-disable-next-line\\n\\t\\t\\t\\tconst emailRegex = /^(([^<>()\\\\[\\\\]\\\\\\\\.,;:\\\\s@\\\"]+(\\\\.[^<>()\\\\[\\\\]\\\\\\\\.,;:\\\\s@\\\"]+)*)|(\\\".+\\\"))@((\\\\[[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.[0-9]{1,3}\\\\])|(([a-zA-Z\\\\-0-9]+\\\\.)+[a-zA-Z]{2,}))$/\\n\\t\\t\\t\\tif (emailRegex.test(query)) {\\n\\t\\t\\t\\t\\tconst alreadyInList = matches.find((attendee) => attendee.email.toLowerCase() === query.toLowerCase())\\n\\t\\t\\t\\t\\tif (!alreadyInList) {\\n\\t\\t\\t\\t\\t\\tmatches.unshift({\\n\\t\\t\\t\\t\\t\\t\\tcalendarUserType: 'INDIVIDUAL',\\n\\t\\t\\t\\t\\t\\t\\tcommonName: query,\\n\\t\\t\\t\\t\\t\\t\\temail: query,\\n\\t\\t\\t\\t\\t\\t\\tisUser: false,\\n\\t\\t\\t\\t\\t\\t\\tavatar: null,\\n\\t\\t\\t\\t\\t\\t\\tlanguage: null,\\n\\t\\t\\t\\t\\t\\t\\ttimezoneId: null,\\n\\t\\t\\t\\t\\t\\t\\thasMultipleEMails: false,\\n\\t\\t\\t\\t\\t\\t\\tdropdownName: query,\\n\\t\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t// Generate a unique id for every result to make the avatar components reactive\\n\\t\\t\\t\\tfor (const match of matches) {\\n\\t\\t\\t\\t\\tmatch.uid = randomId()\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tthis.isLoading = false\\n\\t\\t\\t\\tthis.inputGiven = true\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tthis.inputGiven = false\\n\\t\\t\\t\\tthis.isLoading = false\\n\\t\\t\\t}\\n\\n\\t\\t\\tthis.matches = matches\\n\\t\\t}, 500),\\n\\t\\taddAttendee(selectedValue) {\\n\\n\\t\\t\\tif (selectedValue.type === 'circle') {\\n\\t\\t\\t\\tshowInfo(this.$t('calendar', 'Note that members of circles get invited but are not synced yet.'))\\n\\t\\t\\t\\tthis.resolveCircleMembers(selectedValue.id)\\n\\t\\t\\t}\\n\\t\\t\\tif (selectedValue.type === 'contactsgroup') {\\n\\t\\t\\t\\tshowInfo(this.$t('calendar', 'Note that members of contact groups get invited but are not synced yet.'))\\n\\t\\t\\t\\tthis.getContactGroupMembers(selectedValue.commonName)\\n\\t\\t\\t\\tconst group = {\\n\\t\\t\\t\\t\\tcalendarUserType: 'GROUP',\\n\\t\\t\\t\\t\\tcommonName: selectedValue.commonName,\\n\\t\\t\\t\\t\\tdropdownName: selectedValue.dropdownName,\\n\\t\\t\\t\\t\\temail: selectedValue.email,\\n\\t\\t\\t\\t\\tisUser: false,\\n\\t\\t\\t\\t\\tsubtitle: selectedValue.subtitle,\\n\\t\\t\\t\\t\\ttype: 'contactsgroup',\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tthis.$emit('add-attendee', group)\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\tthis.$emit('add-attendee', selectedValue)\\n\\t\\t},\\n\\t\\tasync resolveCircleMembers(circleId) {\\n\\t\\t\\tlet results\\n\\t\\t\\ttry {\\n\\t\\t\\t\\t// Going to query custom backend to fetch Circle members since we're going to use\\n\\t\\t\\t\\t// mail addresses of local circle members. The Circles API doesn't expose member\\n\\t\\t\\t\\t// emails yet. Change approved by @miaulalala and @ChristophWurst.\\n\\t\\t\\t\\tresults = await circleGetMembers(circleId)\\n\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\tconsole.debug(error)\\n\\t\\t\\t\\treturn []\\n\\t\\t\\t}\\n\\t\\t\\tresults.data.forEach((member) => {\\n\\t\\t\\t\\tif (!this.organizer || member.email !== this.organizer.uri) {\\n\\t\\t\\t\\t\\tthis.$emit('add-attendee', member)\\n\\t\\t\\t\\t}\\n\\t\\t\\t})\\n\\t\\t},\\n\\t\\tasync getContactGroupMembers(groupName) {\\n\\t\\t\\tlet results\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tresults = await HttpClient.post(linkTo('calendar', 'index.php') + '/v1/autocompletion/groupmembers', {\\n\\t\\t\\t\\t\\tgroupName,\\n\\t\\t\\t\\t})\\n\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\tconsole.error('Failed to fetch contact group members', error)\\n\\t\\t\\t\\treturn []\\n\\t\\t\\t}\\n\\n\\t\\t\\tresults.data.forEach((member) => {\\n\\t\\t\\t\\tif (!this.organizer || member.email !== this.organizer.uri) {\\n\\t\\t\\t\\t\\tthis.$emit('add-attendee', member)\\n\\t\\t\\t\\t}\\n\\t\\t\\t})\\n\\t\\t},\\n\\t\\tasync findAttendeesFromContactsAPI(query) {\\n\\t\\t\\tlet response\\n\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tresponse = await HttpClient.post(linkTo('calendar', 'index.php') + '/v1/autocompletion/attendee', {\\n\\t\\t\\t\\t\\tsearch: query,\\n\\t\\t\\t\\t})\\n\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\tconsole.debug(error)\\n\\t\\t\\t\\treturn []\\n\\t\\t\\t}\\n\\n\\t\\t\\tconst data = response.data\\n\\t\\t\\treturn data.reduce((arr, result) => {\\n\\t\\t\\t\\tconst hasMultipleEMails = result.emails.length > 1\\n\\n\\t\\t\\t\\tresult.emails.forEach((email) => {\\n\\t\\t\\t\\t\\tlet name\\n\\t\\t\\t\\t\\tif (result.name && !hasMultipleEMails) {\\n\\t\\t\\t\\t\\t\\tname = result.name\\n\\t\\t\\t\\t\\t} else if (result.name && hasMultipleEMails) {\\n\\t\\t\\t\\t\\t\\tname = `${result.name} (${email})`\\n\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\tname = email\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\tif (email && this.alreadyInvitedEmails.includes(removeMailtoPrefix(email))) {\\n\\t\\t\\t\\t\\t\\treturn\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\tif (result.type === 'contactsgroup') {\\n\\t\\t\\t\\t\\t\\tarr.push({\\n\\t\\t\\t\\t\\t\\t\\tcalendarUserType: 'GROUP',\\n\\t\\t\\t\\t\\t\\t\\tcommonName: result.name,\\n\\t\\t\\t\\t\\t\\t\\tsubtitle: this.$n('calendar', '%n member', '%n members', result.members),\\n\\t\\t\\t\\t\\t\\t\\tmembers: { length: result.members },\\n\\t\\t\\t\\t\\t\\t\\temail,\\n\\t\\t\\t\\t\\t\\t\\tisUser: false,\\n\\t\\t\\t\\t\\t\\t\\tavatar: result.photo,\\n\\t\\t\\t\\t\\t\\t\\tlanguage: result.lang,\\n\\t\\t\\t\\t\\t\\t\\ttimezoneId: result.tzid,\\n\\t\\t\\t\\t\\t\\t\\thasMultipleEMails: false,\\n\\t\\t\\t\\t\\t\\t\\tdropdownName: name,\\n\\t\\t\\t\\t\\t\\t\\ttype: 'contactsgroup',\\n\\t\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t\\t\\treturn\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\tarr.push({\\n\\t\\t\\t\\t\\t\\tcalendarUserType: 'INDIVIDUAL',\\n\\t\\t\\t\\t\\t\\tcommonName: result.name,\\n\\t\\t\\t\\t\\t\\temail,\\n\\t\\t\\t\\t\\t\\tisUser: false,\\n\\t\\t\\t\\t\\t\\tavatar: result.photo,\\n\\t\\t\\t\\t\\t\\tlanguage: result.lang,\\n\\t\\t\\t\\t\\t\\ttimezoneId: result.tzid,\\n\\t\\t\\t\\t\\t\\thasMultipleEMails,\\n\\t\\t\\t\\t\\t\\tdropdownName: name,\\n\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t})\\n\\n\\t\\t\\t\\treturn arr\\n\\t\\t\\t}, [])\\n\\t\\t},\\n\\t\\tasync findAttendeesFromDAV(query) {\\n\\t\\t\\tlet results\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tresults = await principalPropertySearchByDisplaynameOrEmail(query)\\n\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\tconsole.debug(error)\\n\\t\\t\\t\\treturn []\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn results.filter((principal) => {\\n\\t\\t\\t\\tif (!principal.email) {\\n\\t\\t\\t\\t\\treturn false\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tif (this.alreadyInvitedEmails.includes(principal.email)) {\\n\\t\\t\\t\\t\\treturn false\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t// Do not include resources and rooms\\n\\t\\t\\t\\tif (['ROOM', 'RESOURCE'].includes(principal.calendarUserType)) {\\n\\t\\t\\t\\t\\treturn false\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\treturn true\\n\\t\\t\\t}).map((principal) => {\\n\\t\\t\\t\\treturn {\\n\\t\\t\\t\\t\\tcommonName: principal.displayname,\\n\\t\\t\\t\\t\\tcalendarUserType: principal.calendarUserType,\\n\\t\\t\\t\\t\\temail: principal.email,\\n\\t\\t\\t\\t\\tlanguage: principal.language,\\n\\t\\t\\t\\t\\tisUser: principal.calendarUserType === 'INDIVIDUAL',\\n\\t\\t\\t\\t\\tavatar: decodeURIComponent(principal.userId),\\n\\t\\t\\t\\t\\thasMultipleEMails: false,\\n\\t\\t\\t\\t\\tdropdownName: principal.displayname ? [principal.displayname, principal.email].join(' ') : principal.email,\\n\\t\\t\\t\\t}\\n\\t\\t\\t})\\n\\t\\t},\\n\\t\\tasync findAttendeesFromCircles(query) {\\n\\t\\t\\tlet results\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tresults = await circleSearchByName(query)\\n\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\tconsole.debug(error)\\n\\t\\t\\t\\treturn []\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn results.map((circle) => {\\n\\t\\t\\t\\treturn {\\n\\t\\t\\t\\t\\tcommonName: circle.displayname,\\n\\t\\t\\t\\t\\tcalendarUserType: 'GROUP',\\n\\t\\t\\t\\t\\temail: 'circle+' + circle.id + '@' + circle.instance,\\n\\t\\t\\t\\t\\tisUser: false,\\n\\t\\t\\t\\t\\tdropdownName: circle.displayname,\\n\\t\\t\\t\\t\\ttype: 'circle',\\n\\t\\t\\t\\t\\tid: circle.id,\\n\\t\\t\\t\\t\\tsubtitle: this.$n('calendar', '%n member', '%n members', circle.population),\\n\\t\\t\\t\\t}\\n\\t\\t\\t})\\n\\t\\t},\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n:deep(.avatardiv) {\\n\\toverflow: visible !important;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","var map = {\n\t\"./af.js\": [\n\t\t25177,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./ar-dz.js\": [\n\t\t41488,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./ar-kw.js\": [\n\t\t58676,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./ar-ly.js\": [\n\t\t42353,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./ar-ma.js\": [\n\t\t24496,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./ar-ps.js\": [\n\t\t6947,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./ar-sa.js\": [\n\t\t82682,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./ar-tn.js\": [\n\t\t67375,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./ar.js\": [\n\t\t61509,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./az.js\": [\n\t\t95533,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./be.js\": [\n\t\t28959,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./bg.js\": [\n\t\t47777,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./bm.js\": [\n\t\t54903,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./bn-bd.js\": [\n\t\t17357,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./bn.js\": [\n\t\t61290,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./bo.js\": [\n\t\t31545,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./br.js\": [\n\t\t11470,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./bs.js\": [\n\t\t44429,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./ca.js\": [\n\t\t7306,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./cs.js\": [\n\t\t56464,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./cv.js\": [\n\t\t73635,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./cy.js\": [\n\t\t64226,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./da.js\": [\n\t\t93601,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./de-at.js\": [\n\t\t26111,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./de-ch.js\": [\n\t\t54697,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./de.js\": [\n\t\t77853,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./dv.js\": [\n\t\t60708,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./el.js\": [\n\t\t54691,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./en-au.js\": [\n\t\t53872,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./en-ca.js\": [\n\t\t28298,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./en-gb.js\": [\n\t\t56195,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./en-ie.js\": [\n\t\t66584,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./en-il.js\": [\n\t\t65543,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./en-in.js\": [\n\t\t9033,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./en-nz.js\": [\n\t\t79402,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./en-sg.js\": [\n\t\t43004,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./eo.js\": [\n\t\t10553,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./es-do.js\": [\n\t\t20838,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./es-mx.js\": [\n\t\t17730,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./es-us.js\": [\n\t\t56575,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./es.js\": [\n\t\t97650,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./et.js\": [\n\t\t3035,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./eu.js\": [\n\t\t3508,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./fa.js\": [\n\t\t119,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./fi.js\": [\n\t\t90527,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./fil.js\": [\n\t\t95995,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./fo.js\": [\n\t\t52477,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./fr-ca.js\": [\n\t\t26435,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./fr-ch.js\": [\n\t\t37892,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./fr.js\": [\n\t\t85498,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./fy.js\": [\n\t\t37071,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./ga.js\": [\n\t\t41734,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./gd.js\": [\n\t\t70217,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./gl.js\": [\n\t\t77329,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./gom-deva.js\": [\n\t\t32124,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./gom-latn.js\": [\n\t\t93383,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./gu.js\": [\n\t\t95050,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./he.js\": [\n\t\t11713,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./hi.js\": [\n\t\t43861,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./hr.js\": [\n\t\t26308,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./hu.js\": [\n\t\t90609,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./hy-am.js\": [\n\t\t17160,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./id.js\": [\n\t\t74063,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./is.js\": [\n\t\t89374,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./it-ch.js\": [\n\t\t21827,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./it.js\": [\n\t\t88383,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./ja.js\": [\n\t\t23827,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./jv.js\": [\n\t\t89722,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./ka.js\": [\n\t\t41794,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./kk.js\": [\n\t\t27088,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./km.js\": [\n\t\t96870,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./kn.js\": [\n\t\t84451,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./ko.js\": [\n\t\t63164,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./ku-kmr.js\": [\n\t\t6181,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./ku.js\": [\n\t\t98174,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./ky.js\": [\n\t\t78474,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./lb.js\": [\n\t\t79680,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./lo.js\": [\n\t\t15867,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./lt.js\": [\n\t\t45766,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./lv.js\": [\n\t\t69532,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./me.js\": [\n\t\t58076,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./mi.js\": [\n\t\t41848,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./mk.js\": [\n\t\t30306,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./ml.js\": [\n\t\t73739,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./mn.js\": [\n\t\t99053,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./mr.js\": [\n\t\t86169,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./ms-my.js\": [\n\t\t92297,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./ms.js\": [\n\t\t73386,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./mt.js\": [\n\t\t77075,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./my.js\": [\n\t\t72264,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./nb.js\": [\n\t\t22274,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./ne.js\": [\n\t\t8235,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./nl-be.js\": [\n\t\t43784,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./nl.js\": [\n\t\t92572,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./nn.js\": [\n\t\t54566,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./oc-lnc.js\": [\n\t\t69330,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./pa-in.js\": [\n\t\t29849,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./pl.js\": [\n\t\t94418,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./pt-br.js\": [\n\t\t48303,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./pt.js\": [\n\t\t79834,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./ro.js\": [\n\t\t24457,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./ru.js\": [\n\t\t82271,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./sd.js\": [\n\t\t1221,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./se.js\": [\n\t\t33478,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./si.js\": [\n\t\t17538,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./sk.js\": [\n\t\t5784,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./sl.js\": [\n\t\t46637,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./sq.js\": [\n\t\t86794,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./sr-cyrl.js\": [\n\t\t3322,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./sr.js\": [\n\t\t45719,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./ss.js\": [\n\t\t56000,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./sv.js\": [\n\t\t41011,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./sw.js\": [\n\t\t40748,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./ta.js\": [\n\t\t11025,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./te.js\": [\n\t\t11885,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./tet.js\": [\n\t\t28861,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./tg.js\": [\n\t\t86571,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./th.js\": [\n\t\t55802,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./tk.js\": [\n\t\t59527,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./tl-ph.js\": [\n\t\t29231,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./tlh.js\": [\n\t\t31052,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./tr.js\": [\n\t\t85096,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./tzl.js\": [\n\t\t79846,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./tzm-latn.js\": [\n\t\t97711,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./tzm.js\": [\n\t\t81765,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./ug-cn.js\": [\n\t\t48414,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./uk.js\": [\n\t\t16618,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./ur.js\": [\n\t\t57777,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./uz-latn.js\": [\n\t\t72475,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./uz.js\": [\n\t\t57609,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./vi.js\": [\n\t\t21135,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./x-pseudo.js\": [\n\t\t64051,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./yo.js\": [\n\t\t82218,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./zh-cn.js\": [\n\t\t52648,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./zh-hk.js\": [\n\t\t1632,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./zh-mo.js\": [\n\t\t31541,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t],\n\t\"./zh-tw.js\": [\n\t\t50304,\n\t\t\"vendors-node_modules_moment_locale_af_js-node_modules_moment_locale_ar-dz_js-node_modules_mom-582c96\",\n\t\t\"node_modules_moment_locale_sync_recursive_\"\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(() => {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(() => {\n\t\treturn __webpack_require__.t(id, 7 | 16);\n\t});\n}\nwebpackAsyncContext.keys = () => (Object.keys(map));\nwebpackAsyncContext.id = 89595;\nmodule.exports = webpackAsyncContext;","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InviteesListSearch.vue?vue&type=style&index=0&id=1780911c&prod&scoped=true&lang=css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InviteesListSearch.vue?vue&type=style&index=0&id=1780911c&prod&scoped=true&lang=css\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./FreeBusy.vue?vue&type=template&id=2913064d&scoped=true\"\nimport script from \"./FreeBusy.vue?vue&type=script&lang=js\"\nexport * from \"./FreeBusy.vue?vue&type=script&lang=js\"\nimport style0 from \"./FreeBusy.vue?vue&type=style&index=0&id=2913064d&prod&lang=scss&scoped=true\"\nimport style1 from \"./FreeBusy.vue?vue&type=style&index=1&id=2913064d&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2913064d\",\n  null\n  \n)\n\nexport default component.exports","import { render, staticRenderFns } from \"./InviteesListSearch.vue?vue&type=template&id=1780911c&scoped=true\"\nimport script from \"./InviteesListSearch.vue?vue&type=script&lang=js\"\nexport * from \"./InviteesListSearch.vue?vue&type=script&lang=js\"\nimport style0 from \"./InviteesListSearch.vue?vue&type=style&index=0&id=1780911c&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1780911c\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FreeBusy.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FreeBusy.vue?vue&type=script&lang=js\"","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InviteesListSearch.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InviteesListSearch.vue?vue&type=script&lang=js\"","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/resolve-url-loader/index.js!../../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-2.use[3]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FreeBusy.vue?vue&type=style&index=0&id=2913064d&prod&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"afbae6f0\", content, true, {});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/resolve-url-loader/index.js!../../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-2.use[3]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FreeBusy.vue?vue&type=style&index=1&id=2913064d&prod&lang=scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"5e3090dc\", content, true, {});"],"names":["name","components","NcSelect","FullCalendar","InviteesListSearch","NcActions","NcActionButton","NcDateTimePickerNative","NcModal","NcButton","NcPopover","NcUserBubble","NcListItemIcon","ChevronRightIcon","ChevronLeftIcon","CheckIcon","HelpCircleIcon","Close","mixins","isMobile","props","organizer","type","Object","required","attendees","Array","startDate","Date","endDate","allDay","Boolean","default","eventTitle","String","alreadyInvitedEmails","dialogName","disableFindTime","data","loadingIndicator","currentIsAllDay","currentStart","currentEnd","lang","getFullCalendarLocale","locale","formattingOptions","weekday","year","month","day","freeSlots","selectedSlot","view","navigatingWithButtons","computed","mapState","useSettingsStore","timezoneId","useCalendarsStore","personalCalendarColor","isRTL","weekNumber","formatDateRange","placeholder","$t","plugins","timeGridPlugin","momentPlugin","VTimezoneNamedTimezone","interactionPlugin","formattedCurrentStart","getDate","toLocaleDateString","formattedCurrentTime","options","hour","minute","hour12","startTime","toLocaleTimeString","endTime","formattedTimeZone","replace","eventSources","map","a","attendeeProperty","AttendeeProperty","email","commonName","freeBusyEventSource","_uid","resources","roles","CHAIR","attendee","title","uri","slice","role","push","id","sort","b","initialView","initialDate","schedulerLicenseKey","editable","selectable","select","handleSelect","eventDidMount","eventChange","handleChange","getDateFormattingConfig","height","loading","headerToolbar","timeZone","titleFormat","dateClick","findFreeSlots","watch","newView","$refs","freeBusyFullCalendar","getApi","changeView","newVal","length","$emit","mounted","calendar","setDate","addEvent","t","start","end","textColor","backgroundColor","overlap","$nextTick","updateSize","methods","updateView","arg","getEventById","setDates","e","event","eventElement","el","classList","contains","style","background","uidToHexColor","setProperty","save","addAttendee","removeAttendee","isLoading","handleActions","action","date","arguments","undefined","today","prev","next","gotoDate","newStart","oldStart","oldEnd","setMonth","getMonth","setFullYear","getFullYear","setStart","setEnd","startSearch","endSearch","endSearchDate","eventResults","getBusySlots","getFirstFreeSlot","events","forEach","slot","displayStart","dateFormat","error","console","setSlotSuggestion","checkCondition","setTimeout","Avatar","GoogleCirclesCommunitiesIcon","inputGiven","matches","isCirclesEnabled","noResult","findAttendees","debounce","query","promises","findAttendeesFromContactsAPI","findAttendeesFromDAV","findAttendeesFromCircles","contactsResults","davResults","circleResults","Promise","all","test","find","toLowerCase","unshift","calendarUserType","isUser","avatar","language","hasMultipleEMails","dropdownName","match","uid","randomId","selectedValue","showInfo","resolveCircleMembers","getContactGroupMembers","group","subtitle","circleId","results","circleGetMembers","debug","member","groupName","HttpClient","post","linkTo","response","search","reduce","arr","result","emails","includes","removeMailtoPrefix","photo","tzid","$n","members","principalPropertySearchByDisplaynameOrEmail","filter","principal","displayname","decodeURIComponent","userId","join","circleSearchByName","circle","instance","population","render","_vm","this","_c","_self","attrs","on","$event","staticClass","_e","_v","scopedSlots","_u","key","fn","_ref","_s","_l","proxy","class","_ref2","ref","staticRenderFns","option","getDefaultCategories","value","label","isAllDay","moment","format","number","week","weekYear","startEditable","durationEditable","resourceEditable","async","successCallback","failureCallback","calendarData","success","timezone","attendeeName","isOrganizer","Math","random","toString","substring","getInTimezone","jsDate","toISOString","resourceId","display","parser","getParserManager","getParserForFileType","parse","freeBusyComponent","_calendarComponent","getFirstComponent","freeBusyProperty","getPropertyIterator","getFirstValue","unixTime","classNames","defaultConfig","dayHeaderFormat","slotLabelFormat","eventTimeFormat","views","dayGridMonth","multiMonthYear","multiMonthMaxColumns","timeGridDay","timeGridWeek","listMonth","listDayFormat","listDaySideFormat","resourceTimelineDay","firstDay","getFirstDay","getLanguage","direction","weekText","allDayText","moreLinkText","n","noEventsText","momentFactory","array","settingsStore","momentLocale","createPlugin","cmdFormatter","cmdStr","defaultSeparator","NamedTimeZoneImpl","offsetForArray","second","getTimezoneManager","getTimezoneForId","timeZoneName","logger","timestampToArray","ms","timestampArray","namedTimeZonedImpl","getDefaultAlarmObject","assign","alarmComponent","isRelative","absoluteDate","absoluteTimezoneId","relativeIsBefore","relativeIsRelatedToStart","relativeUnitTimed","relativeAmountTimed","relativeUnitAllDay","relativeAmountAllDay","relativeHoursAllDay","relativeMinutesAllDay","relativeTrigger","mapAlarmComponentToAlarmObject","trigger","isNegative","related","amount","unit","getAmountAndUnitForTimedEvents","totalSeconds","hours","minutes","getAmountHoursMinutesAndUnitForAllDayEvents","getDateFromDateTimeValue","mapAttachmentPropertyToAttchmentObject","attachmentProperty","fileName","formatType","xNcHasPreview","xNcFileId","getDefaultAttachmentObject","getParameterFirstValue","getDefaultCalendarObject","displayName","color","enabled","supportsEvents","supportsJournals","supportsTasks","owner","shares","publishURL","url","readOnly","order","isSharedWithMe","canBeShared","canBePublished","dav","calendarObjects","fetchedTimeRanges","transparency","mapDavCollectionToCalendar","currentUserPrincipal","btoa","endsWith","lastIndexOf","getCalendarUriFromUrl","detectColor","isWriteable","isShareable","isPublishable","isArray","share","href","principalScheme","mapDavShareeToCalendarShareObject","getDefaultCalendarObjectObject","calendarId","calendarComponent","objectType","isEvent","isJournal","isTodo","existsOnServer","mapCDavObjectToCalendarObject","trim","Error","getItemIterator","firstVObject","getVObjectIterator","COMPONENT_NAME_EVENT","COMPONENT_NAME_JOURNAL","COMPONENT_NAME_VTODO","mapCalendarJsToCalendarObject","sharee","encodeURI","startsWith","PRINCIPAL_PREFIX_GROUP","PRINCIPAL_PREFIX_USER","PRINCIPAL_PREFIX_REMOTE_USER","atob","writeable","isGroup","isCircle","isRemoteUser","getDefaultCalendarShareObject","access","PRINCIPAL_PREFIX_CIRCLE","getDefaultEventObject","eventComponent","startTimezoneId","endTimezoneId","canModifyAllDay","location","description","accessClass","status","timeTransparency","recurrenceRule","getDefaultRecurrenceRuleObject","hasMultipleRRules","isMasterItem","isRecurrenceException","forceThisAndAllFuture","canCreateRecurrenceException","alarms","customColor","categories","attachments","mapEventComponentToEventObject","eventObject","from","getCategoryIterator","canCreateRecurrenceExceptions","clone","addDuration","DurationValue","fromSeconds","organizerProperty","getFirstProperty","alarm","getAlarmIterator","getAttendeeIterator","mapAttendeePropertyToAttendeeObject","attachment","recurrenceRuleIterator","firstRecurrenceRule","mapRecurrenceRuleValueToRecurrenceRuleObject","done","hasProperty","hexColor","getHexForColorName","getFirstPropertyFirstValue","copyCalendarObjectInstanceIntoEventComponent","resetAttendeeStatus","category","addCategory","setOrganizerFromNameAndEMail","duration","addRelativeAlarm","DateTimeValue","fromJSDate","addAbsoluteAlarm","participationStatus","rsvp","addProperty","rule","getClosestCSS3ColorNameForHex","getDefaultPrincipalObject","emailAddress","isCalendarResource","isCalendarRoom","principalId","scheduleDefaultCalendarUrl","mapDavToPrincipal","PRINCIPAL_PREFIX_CALENDAR_RESOURCE","PRINCIPAL_PREFIX_CALENDAR_ROOM","principalUrl","recurrenceRuleValue","frequency","interval","count","until","byDay","byMonth","byMonthDay","bySetPosition","isUnsupported","baseDate","mapDailyRuleValueToRecurrenceRuleObject","mapWeeklyRuleValueToRecurrenceRuleObject","mapMonthlyRuleValueToRecurrenceRuleObject","mapYearlyRuleValueToRecurrenceRuleObject","getDefaultRecurrenceRuleObjectForRecurrenceValue","FORBIDDEN_BY_PARTS_DAILY","FORBIDDEN_BY_PARTS_WEEKLY","FORBIDDEN_BY_PARTS_MONTHLY","FORBIDDEN_BY_PARTS_YEARLY","SUPPORTED_BY_DAY_WEEKLY","SUPPORTED_BY_MONTHDAY_MONTHLY","keys","i","SUPPORTED_BY_MONTH_YEARLY","containsRecurrenceComponent","containsUnsupportedByParts","containsInvalidByDayPart","getComponent","some","getWeekDayFromDate","containsInvalidByMonthDay","monthDay","isAllowedByDay","setPositionArray","isAllowedBySetPos","byDayArray","firstElement","exec","matchedBySetPosition","matchedByDay","parseInt","containsInvalidByMonth","bySetPos","component","isUnsupportedProps","getRFCProperties","readableName","icon","multiple","info","defaultValue","defaultNumberOfRows","tagPlaceholder","createFolder","folderName","generateRemoteUrl","axios","method","showError","folder","findFirstOwnedFolder","path","infoXml","getFileInfo","parseXML","mountType","multistatus","propstat","prop","hierarchy","split","pop","catch","get","generateOcsUrl","params","perPage","itemType","ocs","meta","circles","concat","exact","daysToSearch","timeZoneId","bulk","clonedStart","getTime","timezoneObject","startDateTime","endDateTime","organizerAsAttendee","createFreeBusyRequest","freeBusyICS","toICS","outbox","freeBusyData","findSchedulingOutbox","freeBusyRequest","entries","freeBusyResourceEventSourceFunction","retrievedEvents","startUTC","toUTCString","endUTC","durationMs","floor","getDurationInSeconds","mappedEvents","Map","obj","has","set","values","sortEvents","totalSlots","foundSlots","checkTime","currentCheckedTime","timeValid","getMinutes","setMinutes","roundedMinutes","ceil","setSeconds","setMilliseconds","roundToNearestQuarter","currentCheckedTimeEnd","getSeconds","every","eventStart","eventEnd","loadState","setConfig","getLinkToConfig","timezoneManager","initialized","registerDefaultTimezones","detectTimezone","determinedTimezone","jstz","timezoneName","defineStore","state","isNew","calendarObject","calendarObjectInstance","existingEvent","objectId","recurrenceId","actions","setCalendarObjectInstanceForExistingEvent","setCalendarObjectInstanceForNewEvent","resetCalendarObjectInstanceObjectIdAndRecurrenceId","changeTitle","_ref3","changeStartDateMutation","_ref4","getHours","endDateObj","startDateObj","compare","changeStartTimezoneMutation","_ref5","startTimezone","replaceTimezone","changeEndDateMutation","_ref6","endDateObject","changeEndTimezoneMutation","_ref7","endTimezone","toggleAllDayMutation","_ref8","isDate","changeTimeToDefaultForTimedEvents","_ref9","changeLocation","_ref0","deleteAllProperties","changeDescription","_ref1","descriptionProperty","parameter","getParametersIterator","deleteParameter","changeAccessClass","_ref10","changeStatus","_ref11","changeTimeTransparency","_ref12","changeCustomColor","_ref13","Vue","cssColorName","hexColorOfCssName","_ref14","fromNameAndEMail","userType","updateParameterIfExist","setOrganizer","_ref15","removeIndex","findIndex","groupname","splice","index","indexOf","changeAttendeesParticipationStatus","_ref16","changeAttendeesRole","_ref17","toggleAttendeeRSVP","_ref18","oldRSVP","_ref19","_ref20","removeCategory","_ref21","changeRecurrenceInterval","_ref22","_innerValue","changeRecurrenceFrequencyMutation","_ref23","changeRecurrenceCount","_ref24","changeRecurrenceUntil","_ref25","zone","changeRecurrenceToInfinite","_ref26","setToInfinite","resetRecurrenceByParts","_ref27","parts","part","setComponent","setDefaultRecurrenceByPartsForMonthlyBySetPosition","_ref28","getBySetPositionAndBySetFromDate","setDefaultRecurrenceByPartsForYearlyBySetPosition","_ref29","addByDayToRecurrenceRule","_ref30","byDayList","removeByDayFromRecurrenceRule","_ref31","index2","addByMonthDayToRecurrenceRule","_ref32","byMonthDayList","removeByMonthDayFromRecurrenceRule","_ref33","addByMonthToRecurrenceRule","_ref34","byMonthList","removeByMonthFromRecurrenceRule","_ref35","changeRecurrenceByDay","_ref36","changeRecurrenceBySetPosition","_ref37","markRecurrenceRuleAsSupported","_ref38","changeAlarmType","_ref39","toICALJs","changeAlarmAbsoluteDate","_ref40","changeAlarmAbsoluteTimezoneId","_ref41","updateAlarmAllDayParts","_ref42","allDayParts","updateAlarmTimedParts","_ref43","timedParts","addAlarmToCalendarObjectInstance","_ref44","alarmObject","removeAlarmFromCalendarObjectInstance","_ref45","removeAlarm","addAttachmentBySharedData","_ref46","sharedData","AttachmentProperty","fromLink","parameterFileName","Parameter","fileid","xNcSharedTypes","setParameter","shareTypes","getcontenttype","generateUrl","addAttachmentWithProperty","_ref47","deleteAttachment","_ref48","removeAttachment","resolveClosestRecurrenceIdForCalendarObject","_ref49","closeToDate","calendarsStore","getEventByObjectId","d","recurrenceManager","getClosestOccurrence","getReferenceRecurrenceId","getCalendarObjectInstanceByObjectIdAndRecurrenceId","_ref50","resolve","recurrenceIdDate","getObjectAtRecurrenceId","getCalendarObjectInstanceForNewEvent","_ref51","calendarObjectsStore","useCalendarObjectsStore","createNewEvent","defaultReminder","isNaN","updateCalendarObjectInstanceForNewEvent","_ref52","updateTimeOfNewEvent","saveCalendarObjectInstance","_ref53","thisAndAllFuture","updateAlarms","updateTalkParticipants","isDirty","original","fork","primaryItem","createRecurrenceException","updateCalendarObject","root","createCalendarObjectFromFork","moveCalendarObject","newCalendarId","duplicateCalendarObjectInstance","oldCalendarObjectInstance","oldEventComponent","getInUTC","deleteCalendarObjectInstance","_ref54","isRecurrenceSetEmpty","removeThisOccurrence","deleteCalendarObject","changeStartDate","_ref55","onlyTime","changeEndDate","oldDuration","newEndDate","changeStartTimezone","_ref56","_ref57","changeEndTimezone","_ref58","changeRecurrenceFrequency","_ref59","recurrenceValue","RecurValue","fromData","recurrenceProperty","Property","setDefaultRecurrenceByParts","_ref60","changeMonthlyRecurrenceFromByDayToBySetPosition","_ref61","changeMonthlyRecurrenceFromBySetPositionToByDay","_ref62","changeYearlyRecurrenceFromByDayToBySetPosition","_ref63","changeYearlyRecurrenceFromBySetPositionToByDay","_ref64","enableRecurrenceLimitByUntil","_ref65","enableRecurrenceLimitByCount","_ref66","changeAlarmAmountTimed","_ref67","getTotalSecondsFromAmountAndUnitForTimedEvents","changeAlarmUnitTimed","_ref68","changeAlarmAmountAllDay","_ref69","getTotalSecondsFromAmountHourMinutesAndUnitForAllDayEvents","changeAlarmUnitAllDay","_ref70","changeAlarmHoursMinutesAllDay","_ref71","changeAlarmFromRelativeToAbsolute","_ref72","triggerDateTime","setTriggerFromAbsolute","changeAlarmFromAbsoluteToRelative","_ref73","subtractDateWithTimezone","setTriggerFromRelative","toggleAllDay","_ref74","getResolvedTimezone","modificationCount","getters","getCalendarObjectById","fetchedTimeRangesStore","useFetchedTimeRangesStore","oldCalendarObjectId","oldCalendarId","newCalendar","getCalendarById","move","addCalendarObjectToCalendarMutation","calendarObjectId","addCalendarObjectIdToAllTimeRangesOfCalendar","deleteCalendarObjectFromCalendarMutation","removeCalendarObjectIdFromAllTimeRangesOfCalendar","update","createVObject","updateCalendarObjectIdMutation","appendCalendarObjectMutation","resetCalendarObjectToDavMutation","delete","removeCalendarObjectIdFromAnyTimeRange","createEvent","vObject","undirtify","firstCalendar","sortedCalendars","calendarObjectInstanceStore","useCalendarObjectInstanceStore","appendOrUpdateCalendarObjectsMutation","firstVCalendar","calendars","trashBin","scheduleInbox","deletedCalendars","deletedCalendarObjects","calendarsById","initialCalendarsLoaded","editCalendarModal","syncTokens","sortedCalendarsSubscriptions","showTasks","sortedCalendarsAll","ownSortedCalendars","hasTrashBin","retentionDuration","sortedDeletedCalendars","deletedAt","allDeletedCalendarObjects","calendarUriMap","withoutTrail","_props","sortedSubscriptions","enabledCalendars","getCalendarByUrl","getBirthdayCalendar","lastSlash","CALDAV_BIRTHDAY_CALENDAR","getPersonalCalendarColor","CALDAV_PERSONAL_CALENDAR","sortedCalendarFilteredByComponents","vevent","vjournal","vtodo","getCalendarSyncToken","existingCalendar","syncToken","loadCollections","principalsStore","usePrincipalsStore","trashBins","scheduleInboxes","subscriptions","findAll","getCurrentUserPrincipal","addCalendarMutation","loadDeletedCalendars","findAllDeletedCalendars","c","loadDeletedCalendarObjects","vobjects","findDeletedObjects","vobject","getPublicCalendars","tokens","findPublicCalendarsByTokens","davCalendar","appendCalendar","timezoneIcs","Timezone","utc","floating","CalendarComponent","fromEmpty","addComponent","TimezoneComponent","fromICALJs","createCalendar","appendSubscription","source","createSubscription","deleteCalendar","deleteCalendarPermanently","deleteCalendarAfterTimeout","countdown","deleteInterval","setInterval","deleteTimeout","clearInterval","cancelCalendarDeletion","clearTimeout","restoreCalendar","restore","restoreCalendarObject","vo","timeRange","getTimeRangeForCalendarCoveringRange","deleteFetchedTimeRangeFromCalendarMutation","fetchedTimeRangeId","removeTimeRange","timeRangeId","deleteCalendarObjectPermanently","toggleCalendarEnabled","updateDav","renameCalendar","newName","changeCalendarColor","newColor","changeCalendarTransparency","shareCalendar","user","newSharee","toggleCalendarShareWritable","unshareCalendar","unshare","shareIndex","publishCalendar","publish","unpublishCalendar","unpublish","getEventsFromCalendarInTimeRange","to","findByTypeInTimeRange","responseTodo","findByType","addTimeRange","getUnixTimestampFromDate","lastFetched","dateFactory","calendarObjectIds","insertId","lastTimeRangeInsertId","r","appendCalendarObjectIdsToTimeFrame","objectPath","lastSlashIndex","calendarPath","objectFileName","reject","importEventsIntoCalendar","importStateStore","useImportStateStore","importFilesStore","useImportFilesStore","stage","IMPORT_STAGE_IMPORTING","files","importFiles","totalCount","file","getItemCount","importCalendarRelation","getName","filename","getColor","containsVEvents","containsVJournals","containsVTodos","setCalendarForFileId","fileId","total","limit","pLimit","requests","item","ics","davObject","denied","accepted","IMPORT_STAGE_PROCESSING","updateCalendarListOrder","newOrder","calendarsToUpdate","object","existing","updateCalendarSyncToken","fetchedTimeRangesById","getAllTimeRangesForCalendar","f","requestedFrom","requestedTo","getAllTimeRangesOlderThan","olderThan","getCalendarObjectsByTimeRangeId","calendarObjecstsStore","fetchedTimeRange","appendCalendarObjectIdToTimeRange","removeCalendarObjectIdFromTimeRange","clearFetchedTimeRanges","lastFileInsertId","importFilesById","addFile","contents","lastModified","size","removeAllFiles","IMPORT_STAGE_DEFAULT","resetState","principals","principalsById","getPrincipalByUrl","getPrincipalById","getCurrentUserPrincipalEmail","getRoomPrincipals","getResourcePrincipals","fetchPrincipalByUrl","findPrincipalByUrl","addPrincipalMutation","fetchRoomAndResourcePrincipals","enableCalDAVResourceBooking","principalCollections","findPrincipalsInCollection","fetchCurrentUserPrincipal","changePrincipalScheduleDefaultCalendarUrl","appVersion","firstRun","talkEnabled","disableAppointments","tasksSidebar","publicCalendars","eventLimit","showWeekends","showWeekNumbers","skipPopover","slotDuration","tasksEnabled","hideEventExport","forceEventAlarmType","canSubscribeLink","showResources","attachmentsFolder","attachmentsFolderCreated","getResolvedTimezoneObject","toggleBirthdayCalendarEnabled","enableBirthdayCalendar","toggleEventLimitEnabled","togglePopoverEnabled","toggleWeekendsEnabled","toggleTasksEnabled","tasksStore","useTasksStore","empty","toggleTasksSidebar","toggleWeekNumberEnabled","setInitialView","setSlotDuration","setDefaultReminder","setTimezone","setAttachmentsFolder","createAttachmentsFolder","AttachmentService","initializeCalendarJsConfig","setCalendarJsConfig","loadSettingsFromServer","logInfo","setMomentLocale","getTasks","tasks","ordered","finishCalendar","calendarid","localeCompare","appendTask","task","removeTask","emptyCalendar","getFactorForAlarmUnit","abs","isBefore","dayFactor","hourFactor","minuteFactor","dayPart","hourPart","minutePart","invertedHours","invertedMinutes","summaryProperty","defaultSummary","defaultDescription","uniqColorKeys","uniqBy","cssColors","filteredColors","pick","colors","sortBy","hex","defaults","detailed","closestColor","sortedColors","s1","s2","c1","rgb2lab","colorString","rgb","c2","sqrt","pow","proximity","input","xyz","Lab","parseFloat","toFixed","loadMomentLocalization","getLocale","getLocaleFor","realLocale","realLanguage","defineLocale","parentLocale","longDateFormat","LT","localeData","LTS","L","LL","LLL","LLLL","l","ll","lll","llll","dow","doy","firstDayOfYear","splitLocale","dayOfMonth","getDay","TypeError","uidToColor","hash","md5","finalPalette","steps","red","Color","yellow","blue","palette1","mixPalette","palette2","palette3","GenColors","maximum","finalInt","charAt","j","hashToInt","g","color1","color2","palette","step","ends","stepCalc","___CSS_LOADER_EXPORT___","module","webpackAsyncContext","req","__webpack_require__","o","then","code","ids","exports","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","locals","content","__esModule","add"],"sourceRoot":""}