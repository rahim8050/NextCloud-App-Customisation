"use strict";(()=>{(self.webpackChunktalk=self.webpackChunktalk||[]).push([["node_modules_nextcloud_dialogs_dist_chunks_PublicAuthPrompt-CWSlYwmr_mjs"],{17145:(E,_,e)=>{e.r(_),e.d(_,{default:()=>C});var a=e(20641),c=e(50953),h=e(90033),f=e(21777),P=e(53053),b=e(94434),y=e(11008),D=e(79455),t=e(80837),m=e(35810),M=e(50240);/*!
 * SPDX-FileCopyrightText: 2024 Nextcloud GmbH and Nextcloud contributors
 * SPDX-License-Identifier: AGPL-3.0-or-later
 */function v(u){if(u.trim()==="")return(0,t.t)("Names must not be empty.");if(u.startsWith("."))return(0,t.t)("Names must not start with a dot.");if(u.length>64)return(0,t.t)("Names may be at most 64 characters long.");try{return(0,m.KT)(u),""}catch(o){if(!(o instanceof m.di))throw o;switch(o.reason){case m.nF.Character:return(0,t.t)('"{char}" is not allowed inside a name.',{char:o.segment});case m.nF.ReservedName:return(0,t.t)('"{segment}" is a reserved name and not allowed.',{segment:o.segment});case m.nF.Extension:return o.segment.match(/\.[a-z]/i)?(0,t.t)('"{extension}" is not an allowed name.',{extension:o.segment}):(0,t.t)('Names must not end with "{extension}".',{extension:o.segment});default:return(0,t.t)("Invalid name.")}}}const O={key:0,class:"public-auth-prompt__text"},x=(0,a.pM)({__name:"PublicAuthPrompt",props:{nickname:{default:""},title:{default:(0,t.t)("Guest identification")},text:{default:""},notice:{default:""},submitLabel:{default:(0,t.t)("Submit name")},cancellable:{type:Boolean}},emits:["close"],setup(u,{emit:o}){const r=u,p=o,n=(0,a.rk)("input"),g=(0,P.c0)("public").build(),i=(0,c.KR)(r.nickname);(0,a.wB)(()=>r.nickname,()=>{i.value=r.nickname}),(0,a.wB)(i,s=>{const l=v(s);if(!l){n.value.setCustomValidity(l),n.value.reportValidity(),n.value.focus();return}});const A=(0,a.EW)(()=>{const s={label:(0,t.t)("Cancel"),variant:"tertiary",callback:()=>p("close")},l={label:r.submitLabel,type:"submit",variant:"primary"};return r.cancellable?[s,l]:[l]}),R=(0,a.EW)(()=>r.notice?r.notice:i.value?(0,t.t)("You are currently identified as {nickname}.",{nickname:i.value}):(0,t.t)("You are currently not identified."));function B(){const s=i.value.trim(),l=v(s);if(l){n.value.setCustomValidity(l),n.value.reportValidity(),n.value.focus();return}if(s===""){n.value.setCustomValidity((0,t.t)("You cannot leave the name empty.")),n.value.reportValidity(),n.value.focus();return}if(s.length<2){n.value.setCustomValidity((0,t.t)("Please enter a name with at least 2 characters.")),n.value.reportValidity(),n.value.focus();return}try{(0,f.L$)(s)}catch(d){t.l.error("Failed to set nickname",{error:d}),(0,t.s)((0,t.t)("Failed to set nickname.")),n.value.focus();return}g.setItem("public-auth-prompt-shown","true"),p("close",i.value)}return(s,l)=>((0,a.uX)(),(0,a.Wv)((0,c.R1)(b.A),{buttons:A.value,class:"public-auth-prompt","data-cy-public-auth-prompt-dialog":"","is-form":"","no-close":"",name:u.title,onSubmit:B},{default:(0,a.k6)(()=>[u.text?((0,a.uX)(),(0,a.CE)("p",O,(0,h.v_)(u.text),1)):(0,a.Q3)("",!0),(0,a.bF)((0,c.R1)(y.A),{class:"public-auth-prompt__header",text:R.value,type:"info"},null,8,["text"]),(0,a.bF)((0,c.R1)(D.A),{ref:"input",modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=d=>i.value=d),class:"public-auth-prompt__input","data-cy-public-auth-prompt-dialog-name":"",label:(0,c.R1)(t.t)("Name"),placeholder:(0,c.R1)(t.t)("Enter your name"),required:!u.cancellable,minlength:"2",maxlength:"64",name:"name"},null,8,["modelValue","label","placeholder","required"])]),_:1},8,["buttons","name"]))}}),C=(0,M._)(x,[["__scopeId","data-v-b33d88e5"]])},79455:(E,_,e)=>{e.d(_,{A:()=>a._});var a=e(51868)}}]);})();

//# sourceMappingURL=talk-node_modules_nextcloud_dialogs_dist_chunks_PublicAuthPrompt-CWSlYwmr_mjs.js.map?v=028db0976802ea4af043