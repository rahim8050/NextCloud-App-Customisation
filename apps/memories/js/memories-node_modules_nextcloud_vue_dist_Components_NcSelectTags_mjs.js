"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["node_modules_nextcloud_vue_dist_Components_NcSelectTags_mjs"],{6231:(t,e,s)=>{s.r(e),s.d(e,{default:()=>g});var a=s(2367),l=s(8988),n=s(4226),o=s(7629),i=s(4779),r=s(8244),u=s(2600),p=s(9649);function d(t){let e={};if(1===t.nodeType){if(t.attributes.length>0){e["@attributes"]={};for(let s=0;s<t.attributes.length;s++){const a=t.attributes.item(s);e["@attributes"][a.nodeName]=a.nodeValue}}}else 3===t.nodeType&&(e=t.nodeValue);if(t.hasChildNodes())for(let s=0;s<t.childNodes.length;s++){const a=t.childNodes.item(s),l=a.nodeName;if(void 0===e[l])e[l]=d(a);else{if(void 0===e[l].push){const t=e[l];e[l]=[],e[l].push(t)}e[l].push(d(a))}}return e}function c(t){const e=d(function(t){let e=null;try{e=(new DOMParser).parseFromString(t,"text/xml")}catch(t){n.l.error("Failed to parse xml document",t)}return e}(t)),s=e["d:multistatus"]["d:response"],a=[];for(const t in s){const e=s[t]["d:propstat"];"HTTP/1.1 200 OK"===e["d:status"]["#text"]&&a.push({id:parseInt(e["d:prop"]["oc:id"]["#text"]),displayName:e["d:prop"]["oc:display-name"]["#text"],canAssign:"true"===e["d:prop"]["oc:can-assign"]["#text"],userAssignable:"true"===e["d:prop"]["oc:user-assignable"]["#text"],userVisible:"true"===e["d:prop"]["oc:user-visible"]["#text"]})}return a}(0,l.r)(l.k);const h={name:"NcSelectTags",components:{NcEllipsisedOption:o.A,NcSelect:i.N},model:{prop:"modelValue",event:"update:modelValue"},props:{...i.N.props,fetchTags:{type:Boolean,default:!0},getOptionLabel:{type:Function,default:t=>{const{displayName:e,userVisible:s,userAssignable:a}=t;return!1===s?(0,l.a)("{tag} (invisible)",{tag:e}):!1===a?(0,l.a)("{tag} (restricted)",{tag:e}):e}},limit:{type:Number,default:5},multiple:{type:Boolean,default:!0},optionsFilter:{type:Function,default:null},passthru:{type:Boolean,default:!1},placeholder:{type:String,default:(0,l.a)("Select a tag")},value:{type:[Number,Array,Object],default:void 0},modelValue:{type:[Number,Array,Object],default:null}," ":{}},emits:["input","update:modelValue","update:model-value"," "],setup:()=>({model:(0,a.u)("value","input"),noop:()=>{}}),data:()=>({search:"",availableTags:[]}),computed:{availableOptions(){return this.optionsFilter?this.tags.filter(this.optionsFilter):this.tags},localValue(){return 0===this.tags.length?[]:this.multiple?this.model.filter((t=>""!==t)).map((t=>this.tags.find((e=>e.id===t)))):this.tags.find((t=>t.id===this.model))},propsToForward(){const{fetchTags:t,optionsFilter:e,passthru:s,...a}=this.$props;return a},tags(){return this.fetchTags?this.availableTags:this.options}},async created(){if(this.fetchTags)try{const t=await async function(){return window.NextcloudVueDocs?Promise.resolve(c(window.NextcloudVueDocs.tags)):c((await(0,r.Ay)({method:"PROPFIND",url:(0,u.dC)("dav")+"/systemtags/",data:'<?xml version="1.0"?>\n\t\t\t\t\t<d:propfind  xmlns:d="DAV:" xmlns:oc="http://owncloud.org/ns">\n\t\t\t\t\t  <d:prop>\n\t\t\t\t\t\t<oc:id />\n\t\t\t\t\t\t<oc:display-name />\n\t\t\t\t\t\t<oc:user-visible />\n\t\t\t\t\t\t<oc:user-assignable />\n\t\t\t\t\t\t<oc:can-assign />\n\t\t\t\t\t  </d:prop>\n\t\t\t\t\t</d:propfind>'})).data)}();this.availableTags=t}catch(t){n.l.error("Loading systemtags failed",t)}},methods:{handleInput(t){this.multiple?this.model=t.map((t=>t.id)):this.model=null===t?null:t.id}}};var m=function(){var t=this,e=t._self._c;return e("NcSelect",t._g(t._b({attrs:{options:t.availableOptions,"close-on-select":!t.multiple,value:t.passthru?t.model:t.localValue},on:{search:e=>t.search=e},scopedSlots:t._u([{key:"option",fn:function(s){return[e("NcEllipsisedOption",{attrs:{name:t.getOptionLabel(s),search:t.search}})]}},{key:"selected-option",fn:function(s){return[e("NcEllipsisedOption",{attrs:{name:t.getOptionLabel(s),search:t.search}})]}},t._l(t.$scopedSlots,(function(e,s){return{key:s,fn:function(e){return[t._t(s,null,null,e)]}}}))],null,!0)},"NcSelect",t.propsToForward,!1),{...t.$listeners,input:t.passthru?t.$listeners.input:t.noop,"update:modelValue":t.passthru?t.$listeners["update:modelValue"]:t.handleInput,"update:model-value":t.passthru?t.$listeners["update:model-value"]:t.noop}))},f=[];const g=(0,p.n)(h,m,f,!1,null,null).exports}}]);
//# sourceMappingURL=memories-node_modules_nextcloud_vue_dist_Components_NcSelectTags_mjs.js.map?v=183cd374e053146bbbe0